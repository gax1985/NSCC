---
title: "M2Team/Privexec: Run the program with the specified permission level (C++20 required)"
source: "https://github.com/M2Team/Privexec"
author:
  - "[[fcharlie]]"
published:
created: 2025-11-10
description: "Run the program with the specified permission level (C++20 required) - M2Team/Privexec"
tags:
  - "clippings"
---
**[Privexec](https://github.com/M2Team/Privexec)** Public

Run the program with the specified permission level (C++20 required)

[MIT license](https://github.com/M2Team/Privexec/blob/master/LICENSE)

[Open in github.dev](https://github.dev/) [Open in a new github.dev tab](https://github.dev/) [Open in codespace](https://github.com/codespaces/new/M2Team/Privexec?resume=1)

<table><thead><tr><th colspan="2"><span>Name</span></th><th colspan="1"><span>Name</span></th><th><p><span>Last commit message</span></p></th><th colspan="1"><p><span>Last commit date</span></p></th></tr></thead><tbody><tr><td colspan="3"><p><span><a href="https://github.com/M2Team/Privexec/commit/1091b9ff708725bb430baedfa99133a3b4fb0257">Sync bela and update build script</a></span></p><p><span><a href="https://github.com/M2Team/Privexec/commit/1091b9ff708725bb430baedfa99133a3b4fb0257">1091b9f</a> Â·</span></p><p><a href="https://github.com/M2Team/Privexec/commits/master/"><span><span><span>556 Commits</span></span></span></a></p></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/.github/workflows"><span>.github/</span> <span>workflows</span></a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/.github/workflows"><span>.github/</span> <span>workflows</span></a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/1091b9ff708725bb430baedfa99133a3b4fb0257">Sync bela and update build script</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/.vscode">.vscode</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/.vscode">.vscode</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/6b992e496f4c054909c6eb6708e5188a8ff0bc1b">Sync bela and wsudo add --retain</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/AppExec">AppExec</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/AppExec">AppExec</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/8e9da8e1e11f3153e231970f1f3c8981e415bbd7">Fixed the portable version loading configuration file.</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/Privexec">Privexec</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/Privexec">Privexec</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/8e9da8e1e11f3153e231970f1f3c8981e415bbd7">Fixed the portable version loading configuration file.</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/cmake/modules"><span>cmake/</span> <span>modules</span></a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/cmake/modules"><span>cmake/</span> <span>modules</span></a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/8f07ec83de95241d554ec80224651aab295e6e53">cleanup version and update AppExec/Privexec AppContainer Capabilities</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/config">config</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/config">config</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/88f24c6fa4655ee1f60c2b9d3b3d70e98c02178d">Privexec 3.0 release</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/docs">docs</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/docs">docs</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/8de6f60d871a17fb3374c4c70275c67d3bf5fa99">wsudo: 5.0.1 some behavioral corrections</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/include">include</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/include">include</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/fe275ff149e5edbd53b548f59bcd7d7304c022de">depends: json.hpp update to 3.12.0</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/lib">lib</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/lib">lib</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/8586d22f3c188eacd85be049fc2b8f37c720930b">bela/pugixml: update</a></p></td><td></td></tr><tr><td colspan="2"><p><a href="https://github.com/M2Team/Privexec/tree/master/resources">resources</a></p></td><td colspan="1"><p><a href="https://github.com/M2Team/Privexec/tree/master/resources">resources</a></p></td><td><p><a href="https://github.com/M2Team/Privexec/commit/121d7b93ec0296649890e57e924b5aa75cc7047a">wsudo icon</a></p></td><td></td></tr><tr><td colspan="3"></td></tr></tbody></table>

## Privexec

[ç®€ä½“ä¸­æ–‡](https://github.com/M2Team/Privexec/blob/master/README.zh-CN.md)

Run the program with the specified permission level

## Install

Install Privexec by [baulk](https://github.com/baulk/baulk)

```
baulk install wsudo
wsudo --version
```

Or you can download it directly, use Exeplorer or 7z and other tools to extract and then use Privexec, download link: [https://github.com/M2Team/Privexec/releases/latest](https://github.com/M2Team/Privexec/releases/latest)

## Alias

Privexec and wsudo can resolve aliases. In addition, wsudo adds or deletes aliases. It is also a good choice to use vscode to edit `Privexec.json` to modify aliases. When Privexec is installed via baulk, the storage directory of `Privexec.json` is `$BAULK_ROOT/bin/etc`. If Privexec Download and unzip directly, then `Privexec.json` will be in the same directory as `Privexec.exe`.

```
{
    "alias": [
        {
            "description": "Edit Hosts",
            "name": "edit-hosts",
            "target": "Notepad %windir%\\System32\\Drivers\\etc\\hosts"
        },
        {
            "description": "Windows Debugger",
            "name": "windbg",
            "target": "\"%ProgramFiles(x86)%\\Windows Kits\\10\\Debuggers\\x64\\windbg.exe\""
        }
    ]
}
```

## Screenshot

[![ui](https://github.com/M2Team/Privexec/raw/master/docs/images/admin.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/admin.png)

Alias:

[![alias](https://github.com/M2Team/Privexec/raw/master/docs/images/alias.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/alias.png)

AppContainer:

[![appcoantiner](https://github.com/M2Team/Privexec/raw/master/docs/images/appcontainer.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/appcontainer.png)

wsudo usage:

[![wsudo](https://github.com/M2Team/Privexec/raw/master/docs/images/wsudo.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/wsudo.png)

wsudo Verbose Mode:

[![wsudo](https://github.com/M2Team/Privexec/raw/master/docs/images/wsudo3.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/wsudo3.png)

AppContainer Exec

[![appexec](https://github.com/M2Team/Privexec/raw/master/docs/images/appexec.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/appexec.png)

## Usage

Privexec is a GUI client. When running as a standard user, you can start the administrator process; when running as an administrator, you can elevate the privileges to `System` or `TrustedInstaller`. It should be noted that `System` or `TrustedInstaller` has too many privileges, which can easily damage the system operation. Be careful when using it.

AppExec is a program that starts the AppContainer process. Some developers use this program to study the running details of Windows AppContainer and the vulnerabilities of AppContaner. UWP applications run in the AppContainer container.

wsudo is the console version of Privexec/AppExec. The detailed help is as follows:

**wsudo usage:**

```
wsudo ðŸ’– 5.0 run the program with the specified permissions
usage: wsudo command args...
   -v|--version        print version and exit
   -h|--help           print help information and exit
   -V|--verbose        Make the operation more talkative
   -c|--cwd            Use a working directory to launch the process.
   -e|--env            Use specific environment variables to start child processes.
   -n|--nui            Starts a separate window to run a specified program or command.
   -H|--hide           Hide child process window. not wait. (CREATE_NO_WINDOW)
   -w|--wait           Start application and wait for it to terminate.
   -u|--user           run as user (optional), support '-uX', '-u X', '--user=X', '--user X'
                       Supported user categories (Ignore case):
                       AppContainer  MIC            Basic
                       Standard      Administrator  System
                       TrustedInstaller

   -x|--appx           AppContainer AppManifest file path
   -L|--lpac           Less Privileged AppContainer mode.
   --disable-alias     Disable Privexec alias, By default, if Privexec exists alias, use it.
   --appid             Set AppContainer ID name (compatible --appname)
   --retain            Retain AppContainer Profile (experimental)

Select user can use the following flags:
   -a|--appcontainer   AppContainer
   -M|--mic            Mandatory Integrity Control
   -B|--basic          Basic execution, permission inheritance mode (default)
   -U|--standard       Standard user no elevated (UAC)
   -A|--administrator  Administrator
   -S|--system         System
   -T|--ti             TrustedInstaller

Example:
   wsudo -A pwsh -NoProfile
   wsudo -T cmd
   wsudo -U -V -eCURL_SSL_BACKEND=schannel curl --verbose  -I https://nghttp2.org
   wsudo -U -V CURL_SSL_BACKEND=schannel curl --verbose  -I https://nghttp2.org

Builtin 'alias' command:
   wsudo alias add ehs "notepad %SYSTEMROOT%/System32/drivers/etc/hosts" "Edit Hosts"
   wsudo alias delete ehs
```

When Privexec, AppExec, wsudo launch commands, the command line and launch directory support deduction via `ExpandEnvironmentString`.

## WSUDO Details

The wsudo visible and wait related parameters are `--hide` `--wait` `--new-console`. The corresponding situation is as follows:

| PE Subsystem | `No relevant parameters` | `--new-console` | `--hide` |
| --- | --- | --- | --- |
| Windows CUI | wait/Inheritance console | no wait/New console | no wait/No console |
| Windows GUI | no wait/New UI | no wait/New UI | no wait/No window |
| Windows CUI `-wait` | wait/Inheritance console | wait/New console | wait/No console |
| Windows GUI `-wait` | wait/New UI | wait/New UI | wait/No window |

When wsudo starts the administrator process as a standard user, if it is currently running in the console, it supports inheriting the console window. If it is not running in the console, it can do nothing. The newer Cygwin currently supports the newer Windows 10 `ConPty` starts the console, so it can inherit the console window, which is the terminal. The picture below is the proof.

wsudo exec administrator process under mintty (Turn on ConPty):

[![wsudo](https://github.com/M2Team/Privexec/raw/master/docs/images/wsudo-bridge-new-mintty.png)](https://github.com/M2Team/Privexec/blob/master/docs/images/wsudo-bridge-new-mintty.png)

### WSUDO Environment

wsudo support `-e/--env` to set environment. such as:

```
::curl must enabled multiple SSL backends.
wsudo  -U -V --env CURL_SSL_BACKEND=schannel curl --verbose  -I https://nghttp2.org
```

The environment variables will be deduced according to the Batch mechanism, that is, the environment variables are marked with matching `%`.

```
# powershell
.\bin\wsudo.exe -n -e 'PATH=%PATH%;%TEMP%' -U cmd
```
```
::cmd
wsudo -e "PATH=%PATH%;%TEMP%" -n -U cmd
```

## Changelog

see: [changelog.md](https://github.com/M2Team/Privexec/blob/master/docs/changelog.md)

## LICENSE

This project use MIT License, and JSON use [https://github.com/nlohmann/json](https://github.com/nlohmann/json), some API use NSudo, but rewrite it.

## Releases 25

[\+ 24 releases](https://github.com/M2Team/Privexec/releases)

## Packages

No packages published  

## Languages

- [C++ 98.0%](https://github.com/M2Team/Privexec/search?l=c%2B%2B)
- Other 2.0%