/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],r):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=r():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=r()}(globalThis,(()=>(()=>{var __webpack_modules__=[,(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.UNSUPPORTED_FEATURES=r.TextRenderingMode=r.StreamType=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FontType=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0;r.arrayByteLength=arrayByteLength;r.arraysToBytes=function arraysToBytes(t){var r=t.length;if(1===r&&t[0]instanceof Uint8Array)return t[0];for(var i=0,a=0;a<r;a++)i+=arrayByteLength(t[a]);for(var o=0,u=new Uint8Array(i),l=0;l<r;l++){var c=t[l];c instanceof Uint8Array||(c="string"==typeof c?stringToBytes(c):new Uint8Array(c));var d=c.byteLength;u.set(c,o);o+=d}return u};r.assert=function assert(t,r){t||unreachable(r)};r.bytesToString=function bytesToString(t){"object"===_typeof(t)&&null!==t&&void 0!==t.length||unreachable("Invalid argument for bytesToString");var r=t.length,i=8192;if(r<i)return String.fromCharCode.apply(null,t);for(var a=[],o=0;o<r;o+=i){var u=Math.min(o+i,r),l=t.subarray(o,u);a.push(String.fromCharCode.apply(null,l))}return a.join("")};r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;Object.defineProperty(t,"settled",{get:function get(){return r}});t.promise=new Promise((function(i,a){t.resolve=function(t){r=!0;i(t)};t.reject=function(t){r=!0;a(t)}}));return t};r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){var a=t.match(/\./g);a&&a.length>=2&&(t="http://".concat(t))}if(i.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}var o=r?new URL(t,r):new URL(t);if(_isValidProtocol(o))return o}catch(t){}return null};r.escapeString=function escapeString(t){return t.replace(/([()\\\n\r])/g,(function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\".concat(t)}))};r.getModificationDate=function getModificationDate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")];return r.join("")};r.getVerbosityLevel=function getVerbosityLevel(){return o};r.info=function info(t){o>=a.INFOS&&console.log("Info: ".concat(t))};r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength};r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;for(var i=0,a=t.length;i<a;i++)if(t[i]!==r[i])return!1;return!0};r.isAscii=function isAscii(t){return/^[\x00-\x7F]*$/.test(t)};r.objectFromMap=function objectFromMap(t){var r,i=Object.create(null),a=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}(t);try{for(a.s();!(r=a.n()).done;){var o=(c=r.value,d=2,function _arrayWithHoles(t){if(Array.isArray(t))return t}(c)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(c,d)||_unsupportedIterableToArray(c,d)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=o[0],l=o[1];i[u]=l}}catch(t){a.e(t)}finally{a.f()}var c,d;return i};r.objectSize=function objectSize(t){return Object.keys(t).length};r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(o=t)};r.shadow=shadow;r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};r.stringToBytes=stringToBytes;r.stringToPDFString=function stringToPDFString(t){if(t[0]>="ï"){var r;"þ"===t[0]&&"ÿ"===t[1]?r="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?r="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(r="utf-8");if(r)try{var i=new TextDecoder(r,{fatal:!0}),a=stringToBytes(t);return i.decode(a)}catch(t){warn('stringToPDFString: "'.concat(t,'".'))}}for(var o=[],u=0,l=t.length;u<l;u++){var c=w[t.charCodeAt(u)];o.push(c?String.fromCharCode(c):t.charAt(u))}return o.join("")};r.stringToUTF16BEString=function stringToUTF16BEString(t){for(var r=["þÿ"],i=0,a=t.length;i<a;i++){var o=t.charCodeAt(i);r.push(String.fromCharCode(o>>8&255),String.fromCharCode(255&o))}return r.join("")};r.stringToUTF8String=stringToUTF8String;r.unreachable=unreachable;r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))};r.warn=warn;i(2);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.LINE_FACTOR=1.35;r.LINE_DESCENT_FACTOR=.35;r.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationEditorPrefix="pdfjs_internal_editor_";r.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.PageActionEventType={O:"PageOpen",C:"PageClose"};r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var a={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=a;r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var o=a.WARNINGS;function warn(t){o>=a.WARNINGS&&console.log("Warning: ".concat(t))}function unreachable(t){throw new Error(t)}function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function shadow(t,r,i){Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!1});return i}var u=function BaseExceptionClosure(){function BaseException(t,r){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=t;this.name=r}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();r.BaseException=u;var l=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,i){var a;_classCallCheck(this,PasswordException);(a=r.call(this,t,"PasswordException")).code=i;return a}return _createClass(PasswordException)}(u);r.PasswordException=l;var c=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,i){var a;_classCallCheck(this,UnknownErrorException);(a=r.call(this,t,"UnknownErrorException")).details=i;return a}return _createClass(UnknownErrorException)}(u);r.UnknownErrorException=c;var d=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(t){_classCallCheck(this,InvalidPDFException);return r.call(this,t,"InvalidPDFException")}return _createClass(InvalidPDFException)}(u);r.InvalidPDFException=d;var h=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(t){_classCallCheck(this,MissingPDFException);return r.call(this,t,"MissingPDFException")}return _createClass(MissingPDFException)}(u);r.MissingPDFException=h;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,i){var a;_classCallCheck(this,UnexpectedResponseException);(a=r.call(this,t,"UnexpectedResponseException")).status=i;return a}return _createClass(UnexpectedResponseException)}(u);r.UnexpectedResponseException=p;var v=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(t){_classCallCheck(this,FormatError);return r.call(this,t,"FormatError")}return _createClass(FormatError)}(u);r.FormatError=v;var y=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(t){_classCallCheck(this,AbortException);return r.call(this,t,"AbortException")}return _createClass(AbortException)}(u);r.AbortException=y;function stringToBytes(t){"string"!=typeof t&&unreachable("Invalid argument for stringToBytes");for(var r=t.length,i=new Uint8Array(r),a=0;a<r;++a)i[a]=255&t.charCodeAt(a);return i}function arrayByteLength(t){if(void 0!==t.length)return t.length;if(void 0!==t.byteLength)return t.byteLength;unreachable("Invalid argument for arrayByteLength")}var g=function(){function FeatureTest(){_classCallCheck(this,FeatureTest)}_createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",function isLittleEndian(){var t=new Uint8Array(4);t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}}]);return FeatureTest}();r.FeatureTest=g;var m=_toConsumableArray(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),b=function(){function Util(){_classCallCheck(this,Util)}_createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(t,r,i){return"#".concat(m[t]).concat(m[r]).concat(m[i])}},{key:"scaleMinMax",value:function scaleMinMax(t,r){var i;if(t[0]){if(t[0]<0){i=r[0];r[0]=r[1];r[1]=i}r[0]*=t[0];r[1]*=t[0];if(t[3]<0){i=r[2];r[2]=r[3];r[3]=i}r[2]*=t[3];r[3]*=t[3]}else{i=r[0];r[0]=r[2];r[2]=i;i=r[1];r[1]=r[3];r[3]=i;if(t[1]<0){i=r[2];r[2]=r[3];r[3]=i}r[2]*=t[1];r[3]*=t[1];if(t[2]<0){i=r[0];r[0]=r[1];r[1]=i}r[0]*=t[2];r[1]*=t[2]}r[0]+=t[4];r[1]+=t[4];r[2]+=t[5];r[3]+=t[5]}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var i=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/i,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/i]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var i=Util.applyTransform(t,r),a=Util.applyTransform(t.slice(2,4),r),o=Util.applyTransform([t[0],t[3]],r),u=Util.applyTransform([t[2],t[1]],r);return[Math.min(i[0],a[0],o[0],u[0]),Math.min(i[1],a[1],o[1],u[1]),Math.max(i[0],a[0],o[0],u[0]),Math.max(i[1],a[1],o[1],u[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"apply3dTransform",value:function apply3dTransform(t,r){return[t[0]*r[0]+t[1]*r[1]+t[2]*r[2],t[3]*r[0]+t[4]*r[1]+t[5]*r[2],t[6]*r[0]+t[7]*r[1]+t[8]*r[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],i=t[0]*r[0]+t[1]*r[2],a=t[0]*r[1]+t[1]*r[3],o=t[2]*r[0]+t[3]*r[2],u=t[2]*r[1]+t[3]*r[3],l=(i+u)/2,c=Math.sqrt(Math.pow(i+u,2)-4*(i*u-o*a))/2,d=l+c||1,h=l-c||1;return[Math.sqrt(d),Math.sqrt(h)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);if(t[0]>t[2]){r[0]=t[2];r[2]=t[0]}if(t[1]>t[3]){r[1]=t[3];r[3]=t[1]}return r}},{key:"intersect",value:function intersect(t,r){var i=Math.max(Math.min(t[0],t[2]),Math.min(r[0],r[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(r[0],r[2]));if(i>a)return null;var o=Math.max(Math.min(t[1],t[3]),Math.min(r[1],r[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(r[1],r[3]));return o>u?null:[i,o,a,u]}},{key:"bezierBoundingBox",value:function bezierBoundingBox(t,r,i,a,o,u,l,c){for(var d,h,p,v,y,g,m,b,w=[],A=[[],[]],P=0;P<2;++P){if(0===P){h=6*t-12*i+6*o;d=-3*t+9*i-9*o+3*l;p=3*i-3*t}else{h=6*r-12*a+6*u;d=-3*r+9*a-9*u+3*c;p=3*a-3*r}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;0<(v=-p/h)&&v<1&&w.push(v)}else{m=h*h-4*p*d;b=Math.sqrt(m);if(!(m<0)){0<(y=(-h+b)/(2*d))&&y<1&&w.push(y);0<(g=(-h-b)/(2*d))&&g<1&&w.push(g)}}}for(var D,E=w.length,S=E;E--;){D=1-(v=w[E]);A[0][E]=D*D*D*t+3*D*D*v*i+3*D*v*v*o+v*v*v*l;A[1][E]=D*D*D*r+3*D*D*v*a+3*D*v*v*u+v*v*v*c}A[0][S]=t;A[1][S]=r;A[0][S+1]=l;A[1][S+1]=c;A[0].length=A[1].length=S+2;return[Math.min.apply(Math,_toConsumableArray(A[0])),Math.min.apply(Math,_toConsumableArray(A[1])),Math.max.apply(Math,_toConsumableArray(A[0])),Math.max.apply(Math,_toConsumableArray(A[1]))]}}]);return Util}();r.Util=b;var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,r,i)=>{"use strict";var a=i(3);if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=!0;!function checkNodeBtoa(){!globalThis.btoa&&a.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")})}();!function checkNodeAtob(){!globalThis.atob&&a.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")})}();!function checkDOMMatrix(){!globalThis.DOMMatrix&&a.isNodeJS&&(globalThis.DOMMatrix=require("dommatrix/dist/dommatrix.js"))}();!function checkReadableStream(){!globalThis.ReadableStream&&a.isNodeJS&&(globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream)}();!function checkArrayAt(){Array.prototype.at||i(4)}();!function checkTypedArrayAt(){Uint8Array.prototype.at||i(76)}();!function checkStructuredClone(){globalThis.structuredClone||i(86)}()}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.isNodeJS=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var i=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=i},(t,r,i)=>{i(5);var a=i(75);t.exports=a("Array","at")},(t,r,i)=>{"use strict";var a=i(6),o=i(41),u=i(65),l=i(63),c=i(70);a({target:"Array",proto:!0},{at:function at(t){var r=o(this),i=u(r),a=l(t),c=a>=0?a:i+a;return c<0||c>=i?void 0:r[c]}});c("at")},(t,r,i)=>{var a=i(7),o=i(8).f,u=i(45),l=i(49),c=i(39),d=i(57),h=i(69);t.exports=function(t,r){var i,p,v,y,g,m=t.target,b=t.global,w=t.stat;if(i=b?a:w?a[m]||c(m,{}):(a[m]||{}).prototype)for(p in r){y=r[p];v=t.dontCallGetSet?(g=o(i,p))&&g.value:i[p];if(!h(b?p:m+(w?".":"#")+p,t.forced)&&void 0!==v){if(typeof y==typeof v)continue;d(y,v)}(t.sham||v&&v.sham)&&u(y,"sham",!0);l(i,p,y,t)}}},t=>{var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,r,i)=>{var a=i(9),o=i(11),u=i(13),l=i(14),c=i(15),d=i(20),h=i(40),p=i(43),v=Object.getOwnPropertyDescriptor;r.f=a?v:function getOwnPropertyDescriptor(t,r){t=c(t);r=d(r);if(p)try{return v(t,r)}catch(t){}if(h(t,r))return l(!o(u.f,t,r),t[r])}},(t,r,i)=>{var a=i(10);t.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,r,i)=>{var a=i(12),o=Function.prototype.call;t.exports=a?o.bind(o):function(){return o.apply(o,arguments)}},(t,r,i)=>{var a=i(10);t.exports=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},(t,r)=>{"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!i.call({1:2},1);r.f=o?function propertyIsEnumerable(t){var r=a(this,t);return!!r&&r.enumerable}:i},t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},(t,r,i)=>{var a=i(16),o=i(19);t.exports=function(t){return a(o(t))}},(t,r,i)=>{var a=i(17),o=i(10),u=i(18),l=Object,c=a("".split);t.exports=o((function(){return!l("z").propertyIsEnumerable(0)}))?function(t){return"String"==u(t)?c(t,""):l(t)}:l},(t,r,i)=>{var a=i(12),o=Function.prototype,u=o.bind,l=o.call,c=a&&u.bind(l,l);t.exports=a?function(t){return t&&c(t)}:function(t){return t&&function(){return l.apply(t,arguments)}}},(t,r,i)=>{var a=i(17),o=a({}.toString),u=a("".slice);t.exports=function(t){return u(o(t),8,-1)}},t=>{var r=TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},(t,r,i)=>{var a=i(21),o=i(24);t.exports=function(t){var r=a(t,"string");return o(r)?r:r+""}},(t,r,i)=>{var a=i(11),o=i(22),u=i(24),l=i(31),c=i(34),d=i(35),h=TypeError,p=d("toPrimitive");t.exports=function(t,r){if(!o(t)||u(t))return t;var i,d=l(t,p);if(d){void 0===r&&(r="default");i=a(d,t,r);if(!o(i)||u(i))return i;throw h("Can't convert object to primitive value")}void 0===r&&(r="number");return c(t,r)}},(t,r,i)=>{var a=i(23);t.exports=function(t){return"object"==typeof t?null!==t:a(t)}},t=>{t.exports=function(t){return"function"==typeof t}},(t,r,i)=>{var a=i(25),o=i(23),u=i(26),l=i(27),c=Object;t.exports=l?function(t){return"symbol"==typeof t}:function(t){var r=a("Symbol");return o(r)&&u(r.prototype,c(t))}},(t,r,i)=>{var a=i(7),o=i(23),aFunction=function(t){return o(t)?t:void 0};t.exports=function(t,r){return arguments.length<2?aFunction(a[t]):a[t]&&a[t][r]}},(t,r,i)=>{var a=i(17);t.exports=a({}.isPrototypeOf)},(t,r,i)=>{var a=i(28);t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,r,i)=>{var a=i(29),o=i(10);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&a&&a<41}))},(t,r,i)=>{var a,o,u=i(7),l=i(30),c=u.process,d=u.Deno,h=c&&c.versions||d&&d.version,p=h&&h.v8;p&&(o=(a=p.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1]));!o&&l&&(!(a=l.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=l.match(/Chrome\/(\d+)/))&&(o=+a[1]);t.exports=o},(t,r,i)=>{var a=i(25);t.exports=a("navigator","userAgent")||""},(t,r,i)=>{var a=i(32);t.exports=function(t,r){var i=t[r];return null==i?void 0:a(i)}},(t,r,i)=>{var a=i(23),o=i(33),u=TypeError;t.exports=function(t){if(a(t))return t;throw u(o(t)+" is not a function")}},t=>{var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},(t,r,i)=>{var a=i(11),o=i(23),u=i(22),l=TypeError;t.exports=function(t,r){var i,c;if("string"===r&&o(i=t.toString)&&!u(c=a(i,t)))return c;if(o(i=t.valueOf)&&!u(c=a(i,t)))return c;if("string"!==r&&o(i=t.toString)&&!u(c=a(i,t)))return c;throw l("Can't convert object to primitive value")}},(t,r,i)=>{var a=i(7),o=i(36),u=i(40),l=i(42),c=i(28),d=i(27),h=o("wks"),p=a.Symbol,v=p&&p.for,y=d?p:p&&p.withoutSetter||l;t.exports=function(t){if(!u(h,t)||!c&&"string"!=typeof h[t]){var r="Symbol."+t;c&&u(p,t)?h[t]=p[t]:h[t]=d&&v?v(r):y(r)}return h[t]}},(t,r,i)=>{var a=i(37),o=i(38);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.23.5",mode:a?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,r,i)=>{var a=i(7),o=i(39),u="__core-js_shared__",l=a[u]||o(u,{});t.exports=l},(t,r,i)=>{var a=i(7),o=Object.defineProperty;t.exports=function(t,r){try{o(a,t,{value:r,configurable:!0,writable:!0})}catch(i){a[t]=r}return r}},(t,r,i)=>{var a=i(17),o=i(41),u=a({}.hasOwnProperty);t.exports=Object.hasOwn||function hasOwn(t,r){return u(o(t),r)}},(t,r,i)=>{var a=i(19),o=Object;t.exports=function(t){return o(a(t))}},(t,r,i)=>{var a=i(17),o=0,u=Math.random(),l=a(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+l(++o+u,36)}},(t,r,i)=>{var a=i(9),o=i(10),u=i(44);t.exports=!a&&!o((function(){return 7!=Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a}))},(t,r,i)=>{var a=i(7),o=i(22),u=a.document,l=o(u)&&o(u.createElement);t.exports=function(t){return l?u.createElement(t):{}}},(t,r,i)=>{var a=i(9),o=i(46),u=i(14);t.exports=a?function(t,r,i){return o.f(t,r,u(1,i))}:function(t,r,i){t[r]=i;return t}},(t,r,i)=>{var a=i(9),o=i(43),u=i(47),l=i(48),c=i(20),d=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,v="enumerable",y="configurable",g="writable";r.f=a?u?function defineProperty(t,r,i){l(t);r=c(r);l(i);if("function"==typeof t&&"prototype"===r&&"value"in i&&g in i&&!i.writable){var a=p(t,r);if(a&&a.writable){t[r]=i.value;i={configurable:y in i?i.configurable:a.configurable,enumerable:v in i?i.enumerable:a.enumerable,writable:!1}}}return h(t,r,i)}:h:function defineProperty(t,r,i){l(t);r=c(r);l(i);if(o)try{return h(t,r,i)}catch(t){}if("get"in i||"set"in i)throw d("Accessors not supported");"value"in i&&(t[r]=i.value);return t}},(t,r,i)=>{var a=i(9),o=i(10);t.exports=a&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(t,r,i)=>{var a=i(22),o=String,u=TypeError;t.exports=function(t){if(a(t))return t;throw u(o(t)+" is not an object")}},(t,r,i)=>{var a=i(23),o=i(46),u=i(50),l=i(39);t.exports=function(t,r,i,c){c||(c={});var d=c.enumerable,h=void 0!==c.name?c.name:r;a(i)&&u(i,h,c);if(c.global)d?t[r]=i:l(r,i);else{try{c.unsafe?t[r]&&(d=!0):delete t[r]}catch(t){}d?t[r]=i:o.f(t,r,{value:i,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return t}},(t,r,i)=>{var a=i(10),o=i(23),u=i(40),l=i(9),c=i(51).CONFIGURABLE,d=i(52),h=i(53),p=h.enforce,v=h.get,y=Object.defineProperty,g=l&&!a((function(){return 8!==y((function(){}),"length",{value:8}).length})),m=String(String).split("String"),b=t.exports=function(t,r,i){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]");i&&i.getter&&(r="get "+r);i&&i.setter&&(r="set "+r);(!u(t,"name")||c&&t.name!==r)&&(l?y(t,"name",{value:r,configurable:!0}):t.name=r);g&&i&&u(i,"arity")&&t.length!==i.arity&&y(t,"length",{value:i.arity});try{i&&u(i,"constructor")&&i.constructor?l&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=p(t);u(a,"source")||(a.source=m.join("string"==typeof r?r:""));return t};Function.prototype.toString=b((function toString(){return o(this)&&v(this).source||d(this)}),"toString")},(t,r,i)=>{var a=i(9),o=i(40),u=Function.prototype,l=a&&Object.getOwnPropertyDescriptor,c=o(u,"name"),d=c&&"something"===function something(){}.name,h=c&&(!a||a&&l(u,"name").configurable);t.exports={EXISTS:c,PROPER:d,CONFIGURABLE:h}},(t,r,i)=>{var a=i(17),o=i(23),u=i(38),l=a(Function.toString);o(u.inspectSource)||(u.inspectSource=function(t){return l(t)});t.exports=u.inspectSource},(t,r,i)=>{var a,o,u,l=i(54),c=i(7),d=i(17),h=i(22),p=i(45),v=i(40),y=i(38),g=i(55),m=i(56),b="Object already initialized",w=c.TypeError,A=c.WeakMap;if(l||y.state){var P=y.state||(y.state=new A),D=d(P.get),E=d(P.has),S=d(P.set);a=function(t,r){if(E(P,t))throw new w(b);r.facade=t;S(P,t,r);return r};o=function(t){return D(P,t)||{}};u=function(t){return E(P,t)}}else{var C=g("state");m[C]=!0;a=function(t,r){if(v(t,C))throw new w(b);r.facade=t;p(t,C,r);return r};o=function(t){return v(t,C)?t[C]:{}};u=function(t){return v(t,C)}}t.exports={set:a,get:o,has:u,enforce:function(t){return u(t)?o(t):a(t,{})},getterFor:function(t){return function(r){var i;if(!h(r)||(i=o(r)).type!==t)throw w("Incompatible receiver, "+t+" required");return i}}}},(t,r,i)=>{var a=i(7),o=i(23),u=i(52),l=a.WeakMap;t.exports=o(l)&&/native code/.test(u(l))},(t,r,i)=>{var a=i(36),o=i(42),u=a("keys");t.exports=function(t){return u[t]||(u[t]=o(t))}},t=>{t.exports={}},(t,r,i)=>{var a=i(40),o=i(58),u=i(8),l=i(46);t.exports=function(t,r,i){for(var c=o(r),d=l.f,h=u.f,p=0;p<c.length;p++){var v=c[p];a(t,v)||i&&a(i,v)||d(t,v,h(r,v))}}},(t,r,i)=>{var a=i(25),o=i(17),u=i(59),l=i(68),c=i(48),d=o([].concat);t.exports=a("Reflect","ownKeys")||function ownKeys(t){var r=u.f(c(t)),i=l.f;return i?d(r,i(t)):r}},(t,r,i)=>{var a=i(60),o=i(67).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return a(t,o)}},(t,r,i)=>{var a=i(17),o=i(40),u=i(15),l=i(61).indexOf,c=i(56),d=a([].push);t.exports=function(t,r){var i,a=u(t),h=0,p=[];for(i in a)!o(c,i)&&o(a,i)&&d(p,i);for(;r.length>h;)o(a,i=r[h++])&&(~l(p,i)||d(p,i));return p}},(t,r,i)=>{var a=i(15),o=i(62),u=i(65),createMethod=function(t){return function(r,i,l){var c,d=a(r),h=u(d),p=o(l,h);if(t&&i!=i){for(;h>p;)if((c=d[p++])!=c)return!0}else for(;h>p;p++)if((t||p in d)&&d[p]===i)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(t,r,i)=>{var a=i(63),o=Math.max,u=Math.min;t.exports=function(t,r){var i=a(t);return i<0?o(i+r,0):u(i,r)}},(t,r,i)=>{var a=i(64);t.exports=function(t){var r=+t;return r!=r||0===r?0:a(r)}},t=>{var r=Math.ceil,i=Math.floor;t.exports=Math.trunc||function trunc(t){var a=+t;return(a>0?i:r)(a)}},(t,r,i)=>{var a=i(66);t.exports=function(t){return a(t.length)}},(t,r,i)=>{var a=i(63),o=Math.min;t.exports=function(t){return t>0?o(a(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,r)=>{r.f=Object.getOwnPropertySymbols},(t,r,i)=>{var a=i(10),o=i(23),u=/#|\.prototype\./,isForced=function(t,r){var i=c[l(t)];return i==h||i!=d&&(o(r)?a(r):!!r)},l=isForced.normalize=function(t){return String(t).replace(u,".").toLowerCase()},c=isForced.data={},d=isForced.NATIVE="N",h=isForced.POLYFILL="P";t.exports=isForced},(t,r,i)=>{var a=i(35),o=i(71),u=i(46).f,l=a("unscopables"),c=Array.prototype;null==c[l]&&u(c,l,{configurable:!0,value:o(null)});t.exports=function(t){c[l][t]=!0}},(t,r,i)=>{var a,o=i(48),u=i(72),l=i(67),c=i(56),d=i(74),h=i(44),p=i(55),v=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<script>"+t+"</"+"script>"},NullProtoObjectViaActiveX=function(t){t.write(scriptTag(""));t.close();var r=t.parentWindow.Object;t=null;return r},NullProtoObject=function(){try{a=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&a?NullProtoObjectViaActiveX(a):function(){var t,r=h("iframe");r.style.display="none";d.appendChild(r);r.src=String("javascript:");(t=r.contentWindow.document).open();t.write(scriptTag("document.F=Object"));t.close();return t.F}():NullProtoObjectViaActiveX(a);for(var t=l.length;t--;)delete NullProtoObject.prototype[l[t]];return NullProtoObject()};c[v]=!0;t.exports=Object.create||function create(t,r){var i;if(null!==t){EmptyConstructor.prototype=o(t);i=new EmptyConstructor;EmptyConstructor.prototype=null;i[v]=t}else i=NullProtoObject();return void 0===r?i:u.f(i,r)}},(t,r,i)=>{var a=i(9),o=i(47),u=i(46),l=i(48),c=i(15),d=i(73);r.f=a&&!o?Object.defineProperties:function defineProperties(t,r){l(t);for(var i,a=c(r),o=d(r),h=o.length,p=0;h>p;)u.f(t,i=o[p++],a[i]);return t}},(t,r,i)=>{var a=i(60),o=i(67);t.exports=Object.keys||function keys(t){return a(t,o)}},(t,r,i)=>{var a=i(25);t.exports=a("document","documentElement")},(t,r,i)=>{var a=i(7),o=i(17);t.exports=function(t,r){return o(a[t].prototype[r])}},(t,r,i)=>{i(77)},(t,r,i)=>{"use strict";var a=i(78),o=i(65),u=i(63),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("at",(function at(t){var r=l(this),i=o(r),a=u(t),c=a>=0?a:i+a;return c<0||c>=i?void 0:r[c]}))},(t,r,i)=>{"use strict";var a,o,u,l=i(79),c=i(9),d=i(7),h=i(23),p=i(22),v=i(40),y=i(80),g=i(33),m=i(45),b=i(49),w=i(46).f,A=i(26),P=i(82),D=i(84),E=i(35),S=i(42),C=i(53),k=C.enforce,x=C.get,T=d.Int8Array,I=T&&T.prototype,L=d.Uint8ClampedArray,O=L&&L.prototype,M=T&&P(T),R=I&&P(I),B=Object.prototype,G=d.TypeError,N=E("toStringTag"),j=S("TYPED_ARRAY_TAG"),V="TypedArrayConstructor",W=l&&!!D&&"Opera"!==y(d.opera),U=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},z={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(t){var r=P(t);if(p(r)){var i=x(r);return i&&v(i,V)?i.TypedArrayConstructor:getTypedArrayConstructor(r)}},isTypedArray=function(t){if(!p(t))return!1;var r=y(t);return v(H,r)||v(z,r)};for(a in H)(u=(o=d[a])&&o.prototype)?k(u).TypedArrayConstructor=o:W=!1;for(a in z)(u=(o=d[a])&&o.prototype)&&(k(u).TypedArrayConstructor=o);if(!W||!h(M)||M===Function.prototype){M=function TypedArray(){throw G("Incorrect invocation")};if(W)for(a in H)d[a]&&D(d[a],M)}if(!W||!R||R===B){R=M.prototype;if(W)for(a in H)d[a]&&D(d[a].prototype,R)}W&&P(O)!==R&&D(O,R);if(c&&!v(R,N)){U=!0;w(R,N,{get:function(){return p(this)?this[j]:void 0}});for(a in H)d[a]&&m(d[a],j,a)}t.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:U&&j,aTypedArray:function(t){if(isTypedArray(t))return t;throw G("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h(t)&&(!D||A(M,t)))return t;throw G(g(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,i,a){if(c){if(i)for(var o in H){var u=d[o];if(u&&v(u.prototype,t))try{delete u.prototype[t]}catch(i){try{u.prototype[t]=r}catch(t){}}}R[t]&&!i||b(R,t,i?r:W&&I[t]||r,a)}},exportTypedArrayStaticMethod:function(t,r,i){var a,o;if(c){if(D){if(i)for(a in H)if((o=d[a])&&v(o,t))try{delete o[t]}catch(t){}if(M[t]&&!i)return;try{return b(M,t,i?r:W&&M[t]||r)}catch(t){}}for(a in H)!(o=d[a])||o[t]&&!i||b(o,t,r)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(t){if(!p(t))return!1;var r=y(t);return"DataView"===r||v(H,r)||v(z,r)},isTypedArray:isTypedArray,TypedArray:M,TypedArrayPrototype:R}},t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(t,r,i)=>{var a=i(81),o=i(23),u=i(18),l=i(35)("toStringTag"),c=Object,d="Arguments"==u(function(){return arguments}());t.exports=a?u:function(t){var r,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,r){try{return t[r]}catch(t){}}(r=c(t),l))?i:d?u(r):"Object"==(a=u(r))&&o(r.callee)?"Arguments":a}},(t,r,i)=>{var a={};a[i(35)("toStringTag")]="z";t.exports="[object z]"===String(a)},(t,r,i)=>{var a=i(40),o=i(23),u=i(41),l=i(55),c=i(83),d=l("IE_PROTO"),h=Object,p=h.prototype;t.exports=c?h.getPrototypeOf:function(t){var r=u(t);if(a(r,d))return r[d];var i=r.constructor;return o(i)&&r instanceof i?i.prototype:r instanceof h?p:null}},(t,r,i)=>{var a=i(10);t.exports=!a((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(t,r,i)=>{var a=i(17),o=i(48),u=i(85);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,i={};try{(t=a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]);r=i instanceof Array}catch(t){}return function setPrototypeOf(i,a){o(i);u(a);r?t(i,a):i.__proto__=a;return i}}():void 0)},(t,r,i)=>{var a=i(23),o=String,u=TypeError;t.exports=function(t){if("object"==typeof t||a(t))return t;throw u("Can't set "+o(t)+" as a prototype")}},(t,r,i)=>{i(87);i(93);i(95);i(117);i(119);var a=i(128);t.exports=a.structuredClone},(t,r,i)=>{"use strict";var a=i(15),o=i(70),u=i(88),l=i(53),c=i(46).f,d=i(89),h=i(37),p=i(9),v="Array Iterator",y=l.set,g=l.getterFor(v);t.exports=d(Array,"Array",(function(t,r){y(this,{type:v,target:a(t),index:0,kind:r})}),(function(){var t=g(this),r=t.target,i=t.kind,a=t.index++;if(!r||a>=r.length){t.target=void 0;return{value:void 0,done:!0}}return"keys"==i?{value:a,done:!1}:"values"==i?{value:r[a],done:!1}:{value:[a,r[a]],done:!1}}),"values");var m=u.Arguments=u.Array;o("keys");o("values");o("entries");if(!h&&p&&"values"!==m.name)try{c(m,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,r,i)=>{"use strict";var a=i(6),o=i(11),u=i(37),l=i(51),c=i(23),d=i(90),h=i(82),p=i(84),v=i(92),y=i(45),g=i(49),m=i(35),b=i(88),w=i(91),A=l.PROPER,P=l.CONFIGURABLE,D=w.IteratorPrototype,E=w.BUGGY_SAFARI_ITERATORS,S=m("iterator"),C="keys",k="values",x="entries",returnThis=function(){return this};t.exports=function(t,r,i,l,m,w,T){d(i,r,l);var I,L,O,getIterationMethod=function(t){if(t===m&&N)return N;if(!E&&t in B)return B[t];switch(t){case C:return function keys(){return new i(this,t)};case k:return function values(){return new i(this,t)};case x:return function entries(){return new i(this,t)}}return function(){return new i(this)}},M=r+" Iterator",R=!1,B=t.prototype,G=B[S]||B["@@iterator"]||m&&B[m],N=!E&&G||getIterationMethod(m),j="Array"==r&&B.entries||G;if(j&&(I=h(j.call(new t)))!==Object.prototype&&I.next){u||h(I)===D||(p?p(I,D):c(I[S])||g(I,S,returnThis));v(I,M,!0,!0);u&&(b[M]=returnThis)}if(A&&m==k&&G&&G.name!==k)if(!u&&P)y(B,"name",k);else{R=!0;N=function values(){return o(G,this)}}if(m){L={values:getIterationMethod(k),keys:w?N:getIterationMethod(C),entries:getIterationMethod(x)};if(T)for(O in L)(E||R||!(O in B))&&g(B,O,L[O]);else a({target:r,proto:!0,forced:E||R},L)}u&&!T||B[S]===N||g(B,S,N,{name:m});b[r]=N;return L}},(t,r,i)=>{"use strict";var a=i(91).IteratorPrototype,o=i(71),u=i(14),l=i(92),c=i(88),returnThis=function(){return this};t.exports=function(t,r,i,d){var h=r+" Iterator";t.prototype=o(a,{next:u(+!d,i)});l(t,h,!1,!0);c[h]=returnThis;return t}},(t,r,i)=>{"use strict";var a,o,u,l=i(10),c=i(23),d=i(71),h=i(82),p=i(49),v=i(35),y=i(37),g=v("iterator"),m=!1;[].keys&&("next"in(u=[].keys())?(o=h(h(u)))!==Object.prototype&&(a=o):m=!0);null==a||l((function(){var t={};return a[g].call(t)!==t}))?a={}:y&&(a=d(a));c(a[g])||p(a,g,(function(){return this}));t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:m}},(t,r,i)=>{var a=i(46).f,o=i(40),u=i(35)("toStringTag");t.exports=function(t,r,i){t&&!i&&(t=t.prototype);t&&!o(t,u)&&a(t,u,{configurable:!0,value:r})}},(t,r,i)=>{var a=i(81),o=i(49),u=i(94);a||o(Object.prototype,"toString",u,{unsafe:!0})},(t,r,i)=>{"use strict";var a=i(81),o=i(80);t.exports=a?{}.toString:function toString(){return"[object "+o(this)+"]"}},(t,r,i)=>{i(96)},(t,r,i)=>{"use strict";i(97)("Map",(function(t){return function Map(){return t(this,arguments.length?arguments[0]:void 0)}}),i(114))},(t,r,i)=>{"use strict";var a=i(6),o=i(7),u=i(17),l=i(69),c=i(49),d=i(98),h=i(105),p=i(111),v=i(23),y=i(22),g=i(10),m=i(112),b=i(92),w=i(113);t.exports=function(t,r,i){var A=-1!==t.indexOf("Map"),P=-1!==t.indexOf("Weak"),D=A?"set":"add",E=o[t],S=E&&E.prototype,C=E,k={},fixMethod=function(t){var r=u(S[t]);c(S,t,"add"==t?function add(t){r(this,0===t?0:t);return this}:"delete"==t?function(t){return!(P&&!y(t))&&r(this,0===t?0:t)}:"get"==t?function get(t){return P&&!y(t)?void 0:r(this,0===t?0:t)}:"has"==t?function has(t){return!(P&&!y(t))&&r(this,0===t?0:t)}:function set(t,i){r(this,0===t?0:t,i);return this})};if(l(t,!v(E)||!(P||S.forEach&&!g((function(){(new E).entries().next()}))))){C=i.getConstructor(r,t,A,D);d.enable()}else if(l(t,!0)){var x=new C,T=x[D](P?{}:-0,1)!=x,I=g((function(){x.has(1)})),L=m((function(t){new E(t)})),O=!P&&g((function(){for(var t=new E,r=5;r--;)t[D](r,r);return!t.has(-0)}));if(!L){(C=r((function(t,r){p(t,S);var i=w(new E,t,C);null!=r&&h(r,i[D],{that:i,AS_ENTRIES:A});return i}))).prototype=S;S.constructor=C}if(I||O){fixMethod("delete");fixMethod("has");A&&fixMethod("get")}(O||T)&&fixMethod(D);P&&S.clear&&delete S.clear}k[t]=C;a({global:!0,constructor:!0,forced:C!=E},k);b(C,t);P||i.setStrong(C,t,A);return C}},(t,r,i)=>{var a=i(6),o=i(17),u=i(56),l=i(22),c=i(40),d=i(46).f,h=i(59),p=i(99),v=i(102),y=i(42),g=i(104),m=!1,b=y("meta"),w=0,setMetadata=function(t){d(t,b,{value:{objectID:"O"+w++,weakData:{}}})},A=t.exports={enable:function(){A.enable=function(){};m=!0;var t=h.f,r=o([].splice),i={};i[b]=1;if(t(i).length){h.f=function(i){for(var a=t(i),o=0,u=a.length;o<u;o++)if(a[o]===b){r(a,o,1);break}return a};a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f})}},fastKey:function(t,r){if(!l(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,b)){if(!v(t))return"F";if(!r)return"E";setMetadata(t)}return t[b].objectID},getWeakData:function(t,r){if(!c(t,b)){if(!v(t))return!0;if(!r)return!1;setMetadata(t)}return t[b].weakData},onFreeze:function(t){g&&m&&v(t)&&!c(t,b)&&setMetadata(t);return t}};u[b]=!0},(t,r,i)=>{var a=i(18),o=i(15),u=i(59).f,l=i(100),c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return c&&"Window"==a(t)?function(t){try{return u(t)}catch(t){return l(c)}}(t):u(o(t))}},(t,r,i)=>{var a=i(62),o=i(65),u=i(101),l=Array,c=Math.max;t.exports=function(t,r,i){for(var d=o(t),h=a(r,d),p=a(void 0===i?d:i,d),v=l(c(p-h,0)),y=0;h<p;h++,y++)u(v,y,t[h]);v.length=y;return v}},(t,r,i)=>{"use strict";var a=i(20),o=i(46),u=i(14);t.exports=function(t,r,i){var l=a(r);l in t?o.f(t,l,u(0,i)):t[l]=i}},(t,r,i)=>{var a=i(10),o=i(22),u=i(18),l=i(103),c=Object.isExtensible,d=a((function(){c(1)}));t.exports=d||l?function isExtensible(t){return!!o(t)&&((!l||"ArrayBuffer"!=u(t))&&(!c||c(t)))}:c},(t,r,i)=>{var a=i(10);t.exports=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},(t,r,i)=>{var a=i(10);t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(t,r,i)=>{var a=i(106),o=i(11),u=i(48),l=i(33),c=i(107),d=i(65),h=i(26),p=i(108),v=i(109),y=i(110),g=TypeError,Result=function(t,r){this.stopped=t;this.result=r},m=Result.prototype;t.exports=function(t,r,i){var b,w,A,P,D,E,S,C=i&&i.that,k=!(!i||!i.AS_ENTRIES),x=!(!i||!i.IS_RECORD),T=!(!i||!i.IS_ITERATOR),I=!(!i||!i.INTERRUPTED),L=a(r,C),stop=function(t){b&&y(b,"normal",t);return new Result(!0,t)},callFn=function(t){if(k){u(t);return I?L(t[0],t[1],stop):L(t[0],t[1])}return I?L(t,stop):L(t)};if(x)b=t.iterator;else if(T)b=t;else{if(!(w=v(t)))throw g(l(t)+" is not iterable");if(c(w)){for(A=0,P=d(t);P>A;A++)if((D=callFn(t[A]))&&h(m,D))return D;return new Result(!1)}b=p(t,w)}E=x?t.next:b.next;for(;!(S=o(E,b)).done;){try{D=callFn(S.value)}catch(t){y(b,"throw",t)}if("object"==typeof D&&D&&h(m,D))return D}return new Result(!1)}},(t,r,i)=>{var a=i(17),o=i(32),u=i(12),l=a(a.bind);t.exports=function(t,r){o(t);return void 0===r?t:u?l(t,r):function(){return t.apply(r,arguments)}}},(t,r,i)=>{var a=i(35),o=i(88),u=a("iterator"),l=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||l[u]===t)}},(t,r,i)=>{var a=i(11),o=i(32),u=i(48),l=i(33),c=i(109),d=TypeError;t.exports=function(t,r){var i=arguments.length<2?c(t):r;if(o(i))return u(a(i,t));throw d(l(t)+" is not iterable")}},(t,r,i)=>{var a=i(80),o=i(31),u=i(88),l=i(35)("iterator");t.exports=function(t){if(null!=t)return o(t,l)||o(t,"@@iterator")||u[a(t)]}},(t,r,i)=>{var a=i(11),o=i(48),u=i(31);t.exports=function(t,r,i){var l,c;o(t);try{if(!(l=u(t,"return"))){if("throw"===r)throw i;return i}l=a(l,t)}catch(t){c=!0;l=t}if("throw"===r)throw i;if(c)throw l;o(l);return i}},(t,r,i)=>{var a=i(26),o=TypeError;t.exports=function(t,r){if(a(r,t))return t;throw o("Incorrect invocation")}},(t,r,i)=>{var a=i(35)("iterator"),o=!1;try{var u=0,l={next:function(){return{done:!!u++}},return:function(){o=!0}};l[a]=function(){return this};Array.from(l,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var i=!1;try{var u={};u[a]=function(){return{next:function(){return{done:i=!0}}}};t(u)}catch(t){}return i}},(t,r,i)=>{var a=i(23),o=i(22),u=i(84);t.exports=function(t,r,i){var l,c;u&&a(l=r.constructor)&&l!==i&&o(c=l.prototype)&&c!==i.prototype&&u(t,c);return t}},(t,r,i)=>{"use strict";var a=i(46).f,o=i(71),u=i(115),l=i(106),c=i(111),d=i(105),h=i(89),p=i(116),v=i(9),y=i(98).fastKey,g=i(53),m=g.set,b=g.getterFor;t.exports={getConstructor:function(t,r,i,h){var p=t((function(t,a){c(t,g);m(t,{type:r,index:o(null),first:void 0,last:void 0,size:0});v||(t.size=0);null!=a&&d(a,t[h],{that:t,AS_ENTRIES:i})})),g=p.prototype,w=b(r),define=function(t,r,i){var a,o,u=w(t),l=getEntry(t,r);if(l)l.value=i;else{u.last=l={index:o=y(r,!0),key:r,value:i,previous:a=u.last,next:void 0,removed:!1};u.first||(u.first=l);a&&(a.next=l);v?u.size++:t.size++;"F"!==o&&(u.index[o]=l)}return t},getEntry=function(t,r){var i,a=w(t),o=y(r);if("F"!==o)return a.index[o];for(i=a.first;i;i=i.next)if(i.key==r)return i};u(g,{clear:function clear(){for(var t=w(this),r=t.index,i=t.first;i;){i.removed=!0;i.previous&&(i.previous=i.previous.next=void 0);delete r[i.index];i=i.next}t.first=t.last=void 0;v?t.size=0:this.size=0},delete:function(t){var r=this,i=w(r),a=getEntry(r,t);if(a){var o=a.next,u=a.previous;delete i.index[a.index];a.removed=!0;u&&(u.next=o);o&&(o.previous=u);i.first==a&&(i.first=o);i.last==a&&(i.last=u);v?i.size--:r.size--}return!!a},forEach:function forEach(t){for(var r,i=w(this),a=l(t,arguments.length>1?arguments[1]:void 0);r=r?r.next:i.first;){a(r.value,r.key,this);for(;r&&r.removed;)r=r.previous}},has:function has(t){return!!getEntry(this,t)}});u(g,i?{get:function get(t){var r=getEntry(this,t);return r&&r.value},set:function set(t,r){return define(this,0===t?0:t,r)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}});v&&a(g,"size",{get:function(){return w(this).size}});return p},setStrong:function(t,r,i){var a=r+" Iterator",o=b(r),u=b(a);h(t,r,(function(t,r){m(this,{type:a,target:t,state:o(t),kind:r,last:void 0})}),(function(){for(var t=u(this),r=t.kind,i=t.last;i&&i.removed;)i=i.previous;if(!t.target||!(t.last=i=i?i.next:t.state.first)){t.target=void 0;return{value:void 0,done:!0}}return"keys"==r?{value:i.key,done:!1}:"values"==r?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}}),i?"entries":"values",!i,!0);p(r)}}},(t,r,i)=>{var a=i(49);t.exports=function(t,r,i){for(var o in r)a(t,o,r[o],i);return t}},(t,r,i)=>{"use strict";var a=i(25),o=i(46),u=i(35),l=i(9),c=u("species");t.exports=function(t){var r=a(t),i=o.f;l&&r&&!r[c]&&i(r,c,{configurable:!0,get:function(){return this}})}},(t,r,i)=>{i(118)},(t,r,i)=>{"use strict";i(97)("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),i(114))},(t,r,i)=>{var a,o=i(37),u=i(6),l=i(7),c=i(25),d=i(17),h=i(10),p=i(42),v=i(23),y=i(120),g=i(22),m=i(24),b=i(105),w=i(48),A=i(80),P=i(40),D=i(101),E=i(45),S=i(65),C=i(121),k=i(122),x=i(124),T=i(29),I=i(125),L=i(126),O=i(127),M=l.Object,R=l.Date,B=l.Error,G=l.EvalError,N=l.RangeError,j=l.ReferenceError,V=l.SyntaxError,W=l.TypeError,U=l.URIError,H=l.PerformanceMark,z=l.WebAssembly,X=z&&z.CompileError||B,Y=z&&z.LinkError||B,K=z&&z.RuntimeError||B,$=c("DOMException"),Q=c("Set"),J=c("Map"),Z=J.prototype,ee=d(Z.has),te=d(Z.get),re=d(Z.set),ne=d(Q.prototype.add),ie=c("Object","keys"),ae=d([].push),oe=d((!0).valueOf),se=d(1..valueOf),ue=d("".valueOf),le=d(R.prototype.getTime),ce=p("structuredClone"),de="DataCloneError",he="Transferring",checkBasicSemantic=function(t){return!h((function(){var r=new l.Set([7]),i=t(r),a=t(M(7));return i==r||!i.has(7)||"object"!=typeof a||7!=a}))&&t},checkErrorsCloning=function(t,r){return!h((function(){var i=new r,a=t({a:i,b:i});return!(a&&a.a===a.b&&a.a instanceof r&&a.a.stack===i.stack)}))},fe=l.structuredClone,pe=o||!checkErrorsCloning(fe,B)||!checkErrorsCloning(fe,$)||!(a=fe,!h((function(){var t=a(new l.AggregateError([1],ce,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=ce||3!=t.cause}))),ve=!fe&&checkBasicSemantic((function(t){return new H(ce,{detail:t}).detail})),ye=checkBasicSemantic(fe)||ve,throwUncloneable=function(t){throw new $("Uncloneable type: "+t,de)},throwUnpolyfillable=function(t,r){throw new $((r||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",de)},structuredCloneInternal=function(t,r){m(t)&&throwUncloneable("Symbol");if(!g(t))return t;if(r){if(ee(r,t))return te(r,t)}else r=new J;var i,a,o,u,d,h,p,b,w,C,T=A(t),I=!1;switch(T){case"Array":o=[];I=!0;break;case"Object":o={};I=!0;break;case"Map":o=new J;I=!0;break;case"Set":o=new Q;I=!0;break;case"RegExp":o=new RegExp(t.source,k(t));break;case"Error":switch(a=t.name){case"AggregateError":o=c("AggregateError")([]);break;case"EvalError":o=G();break;case"RangeError":o=N();break;case"ReferenceError":o=j();break;case"SyntaxError":o=V();break;case"TypeError":o=W();break;case"URIError":o=U();break;case"CompileError":o=X();break;case"LinkError":o=Y();break;case"RuntimeError":o=K();break;default:o=B()}I=!0;break;case"DOMException":o=new $(t.message,t.name);I=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=l[T];g(i)||throwUnpolyfillable(T);o=new i(structuredCloneInternal(t.buffer,r),t.byteOffset,"DataView"===T?t.byteLength:t.length);break;case"DOMQuad":try{o=new DOMQuad(structuredCloneInternal(t.p1,r),structuredCloneInternal(t.p2,r),structuredCloneInternal(t.p3,r),structuredCloneInternal(t.p4,r))}catch(r){ye?o=ye(t):throwUnpolyfillable(T)}break;case"FileList":i=l.DataTransfer;if(y(i)){u=new i;for(d=0,h=S(t);d<h;d++)u.items.add(structuredCloneInternal(t[d],r));o=u.files}else ye?o=ye(t):throwUnpolyfillable(T);break;case"ImageData":try{o=new ImageData(structuredCloneInternal(t.data,r),t.width,t.height,{colorSpace:t.colorSpace})}catch(r){ye?o=ye(t):throwUnpolyfillable(T)}break;default:if(ye)o=ye(t);else switch(T){case"BigInt":o=M(t.valueOf());break;case"Boolean":o=M(oe(t));break;case"Number":o=M(se(t));break;case"String":o=M(ue(t));break;case"Date":o=new R(le(t));break;case"ArrayBuffer":(i=l.DataView)||"function"==typeof t.slice||throwUnpolyfillable(T);try{if("function"==typeof t.slice)o=t.slice(0);else{h=t.byteLength;o=new ArrayBuffer(h);w=new i(t);C=new i(o);for(d=0;d<h;d++)C.setUint8(d,w.getUint8(d))}}catch(t){throw new $("ArrayBuffer is detached",de)}break;case"SharedArrayBuffer":o=t;break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch(t){throwUnpolyfillable(T)}break;case"DOMPoint":case"DOMPointReadOnly":i=l[T];try{o=i.fromPoint?i.fromPoint(t):new i(t.x,t.y,t.z,t.w)}catch(t){throwUnpolyfillable(T)}break;case"DOMRect":case"DOMRectReadOnly":i=l[T];try{o=i.fromRect?i.fromRect(t):new i(t.x,t.y,t.width,t.height)}catch(t){throwUnpolyfillable(T)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=l[T];try{o=i.fromMatrix?i.fromMatrix(t):new i(t)}catch(t){throwUnpolyfillable(T)}break;case"AudioData":case"VideoFrame":v(t.clone)||throwUnpolyfillable(T);try{o=t.clone()}catch(t){throwUncloneable(T)}break;case"File":try{o=new File([t],t.name,t)}catch(t){throwUnpolyfillable(T)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(T);default:throwUncloneable(T)}}re(r,t,o);if(I)switch(T){case"Array":case"Object":p=ie(t);for(d=0,h=S(p);d<h;d++){b=p[d];D(o,b,structuredCloneInternal(t[b],r))}break;case"Map":t.forEach((function(t,i){re(o,structuredCloneInternal(i,r),structuredCloneInternal(t,r))}));break;case"Set":t.forEach((function(t){ne(o,structuredCloneInternal(t,r))}));break;case"Error":E(o,"message",structuredCloneInternal(t.message,r));P(t,"cause")&&E(o,"cause",structuredCloneInternal(t.cause,r));"AggregateError"==a&&(o.errors=structuredCloneInternal(t.errors,r));case"DOMException":x&&E(o,"stack",structuredCloneInternal(t.stack,r))}return o},ge=fe&&!h((function(){if(L&&T>92||O&&T>94||I&&T>97)return!1;var t=new ArrayBuffer(8),r=fe(t,{transfer:[t]});return 0!=t.byteLength||8!=r.byteLength})),tryToTransfer=function(t,r){if(!g(t))throw W("Transfer option cannot be converted to a sequence");var i=[];b(t,(function(t){ae(i,w(t))}));var a,o,u,c,d,h,p=0,m=S(i);if(ge){c=fe(i,{transfer:i});for(;p<m;)re(r,i[p],c[p++])}else for(;p<m;){a=i[p++];if(ee(r,a))throw new $("Duplicate transferable",de);switch(o=A(a)){case"ImageBitmap":u=l.OffscreenCanvas;y(u)||throwUnpolyfillable(o,he);try{(h=new u(a.width,a.height)).getContext("bitmaprenderer").transferFromImageBitmap(a);d=h.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":v(a.clone)&&v(a.close)||throwUnpolyfillable(o,he);try{d=a.clone();a.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(o,he)}if(void 0===d)throw new $("This object cannot be transferred: "+o,de);re(r,a,d)}};u({global:!0,enumerable:!0,sham:!ge,forced:pe},{structuredClone:function structuredClone(t){var r,i=C(arguments.length,1)>1&&null!=arguments[1]?w(arguments[1]):void 0,a=i?i.transfer:void 0;if(void 0!==a){r=new J;tryToTransfer(a,r)}return structuredCloneInternal(t,r)}})},(t,r,i)=>{var a=i(17),o=i(10),u=i(23),l=i(80),c=i(25),d=i(52),noop=function(){},h=[],p=c("Reflect","construct"),v=/^\s*(?:class|function)\b/,y=a(v.exec),g=!v.exec(noop),m=function isConstructor(t){if(!u(t))return!1;try{p(noop,h,t);return!0}catch(t){return!1}},b=function isConstructor(t){if(!u(t))return!1;switch(l(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!y(v,d(t))}catch(t){return!0}};b.sham=!0;t.exports=!p||o((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?b:m},t=>{var r=TypeError;t.exports=function(t,i){if(t<i)throw r("Not enough arguments");return t}},(t,r,i)=>{var a=i(11),o=i(40),u=i(26),l=i(123),c=RegExp.prototype;t.exports=function(t){var r=t.flags;return void 0!==r||"flags"in c||o(t,"flags")||!u(c,t)?r:a(l,t)}},(t,r,i)=>{"use strict";var a=i(48);t.exports=function(){var t=a(this),r="";t.hasIndices&&(r+="d");t.global&&(r+="g");t.ignoreCase&&(r+="i");t.multiline&&(r+="m");t.dotAll&&(r+="s");t.unicode&&(r+="u");t.unicodeSets&&(r+="v");t.sticky&&(r+="y");return r}},(t,r,i)=>{var a=i(10),o=i(14);t.exports=!a((function(){var t=Error("a");if(!("stack"in t))return!0;Object.defineProperty(t,"stack",o(1,7));return 7!==t.stack}))},t=>{t.exports="object"==typeof window&&"object"!=typeof Deno},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,r,i)=>{var a=i(18),o=i(7);t.exports="process"==a(o.process)},(t,r,i)=>{var a=i(7);t.exports=a},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=void 0;r.binarySearchFirstItem=function binarySearchFirstItem(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=i,o=t.length-1;if(o<0||!r(t[o]))return t.length;if(r(t[a]))return a;for(;a<o;){var u=a+o>>1,l=t[u];r(l)?o=u:a=u+1}return a};r.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)};r.getColorValues=function getColorValues(t){var r=document.createElement("span");r.style.visibility="hidden";document.body.append(r);var i,a=_createForOfIteratorHelper(t.keys());try{for(a.s();!(i=a.n()).done;){var o=i.value;r.style.color=o;var u=window.getComputedStyle(r).color;t.set(o,getRGB(u))}}catch(t){a.e(t)}finally{a.f()}r.remove()};r.getFilenameFromUrl=function getFilenameFromUrl(t){var r=t.indexOf("#"),i=t.indexOf("?"),a=Math.min(r>0?r:t.length,i>0?i:t.length);return t.substring(t.lastIndexOf("/",a)+1,a)};r.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return r;if(isDataScheme(t)){(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');return r}var i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,a=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,u=i.exec(t),l=a.exec(u[1])||a.exec(u[2])||a.exec(u[3]);if(l&&(l=l[0]).includes("%"))try{l=a.exec(decodeURIComponent(l))[0]}catch(t){}return l||r};r.getRGB=getRGB;r.getXfaPageViewport=function getXfaPageViewport(t,r){var i=r.scale,a=void 0===i?1:i,o=r.rotation,u=void 0===o?0:o,l=t.attributes.style,c=l.width,d=l.height,h=[0,0,parseInt(c),parseInt(d)];return new p({viewBox:h,scale:a,rotation:u})};r.isDataScheme=isDataScheme;r.isPdfFile=function isPdfFile(t){return"string"==typeof t&&/\.pdf$/i.test(t)};r.isValidFetchUrl=isValidFetchUrl;r.loadScript=function loadScript(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i,a){var o=document.createElement("script");o.src=t;o.onload=function(t){r&&o.remove();i(t)};o.onerror=function(){a(new Error("Cannot load script at: ".concat(o.src)))};(document.head||document.documentElement).append(o)}))};var a=i(130),o=i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}var u=_createClass((function PixelsPerInch(){_classCallCheck(this,PixelsPerInch)}));r.PixelsPerInch=u;_defineProperty(u,"CSS",96);_defineProperty(u,"PDF",72);_defineProperty(u,"PDF_TO_CSS_UNITS",u.CSS/u.PDF);var l=function(t){_inherits(DOMCanvasFactory,t);var r=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.ownerDocument,o=void 0===a?globalThis.document:a;_classCallCheck(this,DOMCanvasFactory);(t=r.call(this))._document=o;return t}_createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,r){var i=this._document.createElement("canvas");i.width=t;i.height=r;return i}}]);return DOMCanvasFactory}(a.BaseCanvasFactory);r.DOMCanvasFactory=l;function fetchData(t){return _fetchData.apply(this,arguments)}function _fetchData(){_fetchData=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i,a=arguments;return _regeneratorRuntime().wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:r=a.length>1&&void 0!==a[1]&&a[1];if(!isValidFetchUrl(t,document.baseURI)){u.next=21;break}u.next=4;return fetch(t);case 4:if((i=u.sent).ok){u.next=7;break}throw new Error(i.statusText);case 7:if(!r){u.next=15;break}u.t1=Uint8Array;u.next=11;return i.arrayBuffer();case 11:u.t2=u.sent;u.t0=new u.t1(u.t2);u.next=20;break;case 15:u.t3=o.stringToBytes;u.next=18;return i.text();case 18:u.t4=u.sent;u.t0=(0,u.t3)(u.t4);case 20:return u.abrupt("return",u.t0);case 21:return u.abrupt("return",new Promise((function(i,a){var u=new XMLHttpRequest;u.open("GET",t,!0);r&&(u.responseType="arraybuffer");u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE){if(200===u.status||0===u.status){var t;r&&u.response?t=new Uint8Array(u.response):!r&&u.responseText&&(t=(0,o.stringToBytes)(u.responseText));if(t){i(t);return}}a(new Error(u.statusText))}};u.send(null)})));case 22:case"end":return u.stop()}}),_callee)})));return _fetchData.apply(this,arguments)}var c=function(t){_inherits(DOMCMapReaderFactory,t);var r=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){_classCallCheck(this,DOMCMapReaderFactory);return r.apply(this,arguments)}_createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return fetchData(t,this.isCompressed).then((function(t){return{cMapData:t,compressionType:r}}))}}]);return DOMCMapReaderFactory}(a.BaseCMapReaderFactory);r.DOMCMapReaderFactory=c;var d=function(t){_inherits(DOMStandardFontDataFactory,t);var r=_createSuper(DOMStandardFontDataFactory);function DOMStandardFontDataFactory(){_classCallCheck(this,DOMStandardFontDataFactory);return r.apply(this,arguments)}_createClass(DOMStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return fetchData(t,!0)}}]);return DOMStandardFontDataFactory}(a.BaseStandardFontDataFactory);r.DOMStandardFontDataFactory=d;var h=function(t){_inherits(DOMSVGFactory,t);var r=_createSuper(DOMSVGFactory);function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory);return r.apply(this,arguments)}_createClass(DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}]);return DOMSVGFactory}(a.BaseSVGFactory);r.DOMSVGFactory=h;var p=function(){function PageViewport(t){var r=t.viewBox,i=t.scale,a=t.rotation,o=t.offsetX,u=void 0===o?0:o,l=t.offsetY,c=void 0===l?0:l,d=t.dontFlip,h=void 0!==d&&d;_classCallCheck(this,PageViewport);this.viewBox=r;this.scale=i;this.rotation=a;this.offsetX=u;this.offsetY=c;var p,v,y,g,m,b,w,A,P=(r[2]+r[0])/2,D=(r[3]+r[1])/2;(a%=360)<0&&(a+=360);switch(a){case 180:p=-1;v=0;y=0;g=1;break;case 90:p=0;v=1;y=1;g=0;break;case 270:p=0;v=-1;y=-1;g=0;break;case 0:p=1;v=0;y=0;g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(h){y=-y;g=-g}if(0===p){m=Math.abs(D-r[1])*i+u;b=Math.abs(P-r[0])*i+c;w=Math.abs(r[3]-r[1])*i;A=Math.abs(r[2]-r[0])*i}else{m=Math.abs(P-r[0])*i+u;b=Math.abs(D-r[1])*i+c;w=Math.abs(r[2]-r[0])*i;A=Math.abs(r[3]-r[1])*i}this.transform=[p*i,v*i,y*i,g*i,m-p*i*P-y*i*D,b-v*i*P-g*i*D];this.width=w;this.height=A}_createClass(PageViewport,[{key:"clone",value:function clone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,i=void 0===r?this.scale:r,a=t.rotation,o=void 0===a?this.rotation:a,u=t.offsetX,l=void 0===u?this.offsetX:u,c=t.offsetY,d=void 0===c?this.offsetY:c,h=t.dontFlip,p=void 0!==h&&h;return new PageViewport({viewBox:this.viewBox.slice(),scale:i,rotation:o,offsetX:l,offsetY:d,dontFlip:p})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(t,r){return o.Util.applyTransform([t,r],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(t){var r=o.Util.applyTransform([t[0],t[1]],this.transform),i=o.Util.applyTransform([t[2],t[3]],this.transform);return[r[0],r[1],i[0],i[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(t,r){return o.Util.applyInverseTransform([t,r],this.transform)}}]);return PageViewport}();r.PageViewport=p;var v=function(t){_inherits(RenderingCancelledException,t);var r=_createSuper(RenderingCancelledException);function RenderingCancelledException(t,i){var a;_classCallCheck(this,RenderingCancelledException);(a=r.call(this,t,"RenderingCancelledException")).type=i;return a}return _createClass(RenderingCancelledException)}(o.BaseException);r.RenderingCancelledException=v;function isDataScheme(t){for(var r=t.length,i=0;i<r&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}var y,g=function(){function StatTimer(){_classCallCheck(this,StatTimer);this.started=Object.create(null);this.times=[]}_createClass(StatTimer,[{key:"time",value:function time(t){t in this.started&&(0,o.warn)("Timer is already running for ".concat(t));this.started[t]=Date.now()}},{key:"timeEnd",value:function timeEnd(t){t in this.started||(0,o.warn)("Timer has not been started for ".concat(t));this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t]}},{key:"toString",value:function toString(){var t,r=[],i=0,a=_createForOfIteratorHelper(this.times);try{for(a.s();!(t=a.n()).done;){var o=t.value.name;o.length>i&&(i=o.length)}}catch(t){a.e(t)}finally{a.f()}var u,l=_createForOfIteratorHelper(this.times);try{for(l.s();!(u=l.n()).done;){var c=u.value,d=c.end-c.start;r.push("".concat(c.name.padEnd(i)," ").concat(d,"ms\n"))}}catch(t){l.e(t)}finally{l.f()}return r.join("")}}]);return StatTimer}();r.StatTimer=g;function isValidFetchUrl(t,r){try{var i=(r?new URL(t,r):new URL(t)).protocol;return"http:"===i||"https:"===i}catch(t){return!1}}var m=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}_createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(t){if(!t||"string"!=typeof t)return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var r=y.exec(t);if(!r)return null;var i=parseInt(r[1],10),a=parseInt(r[2],10);a=a>=1&&a<=12?a-1:0;var o=parseInt(r[3],10);o=o>=1&&o<=31?o:1;var u=parseInt(r[4],10);u=u>=0&&u<=23?u:0;var l=parseInt(r[5],10);l=l>=0&&l<=59?l:0;var c=parseInt(r[6],10);c=c>=0&&c<=59?c:0;var d=r[7]||"Z",h=parseInt(r[8],10);h=h>=0&&h<=23?h:0;var p=parseInt(r[9],10)||0;p=p>=0&&p<=59?p:0;if("-"===d){u+=h;l+=p}else if("+"===d){u-=h;l-=p}return new Date(Date.UTC(i,a,o,u,l,c))}}]);return PDFDateString}();r.PDFDateString=m;function getRGB(t){if(t.startsWith("#")){var r=parseInt(t.slice(1),16);return[(16711680&r)>>16,(65280&r)>>8,255&r]}if(t.startsWith("rgb("))return t.slice(4,-1).split(",").map((function(t){return parseInt(t)}));if(t.startsWith("rgba("))return t.slice(5,-1).split(",").map((function(t){return parseInt(t)})).slice(0,3);(0,o.warn)('Not a valid color format: "'.concat(t,'"'));return[0,0,0]}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var a=i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var o=function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory);this.constructor===BaseCanvasFactory&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}_createClass(BaseCanvasFactory,[{key:"create",value:function create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");var i=this._createCanvas(t,r);return{canvas:i,context:i.getContext("2d")}}},{key:"reset",value:function reset(t,r,i){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=r;t.canvas.height=i}},{key:"destroy",value:function destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}},{key:"_createCanvas",value:function _createCanvas(t,r){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}]);return BaseCanvasFactory}();r.BaseCanvasFactory=o;var u=function(){function BaseCMapReaderFactory(t){var r=t.baseUrl,i=void 0===r?null:r,o=t.isCompressed,u=void 0!==o&&o;_classCallCheck(this,BaseCMapReaderFactory);this.constructor===BaseCMapReaderFactory&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory.");this.baseUrl=i;this.isCompressed=u}_createClass(BaseCMapReaderFactory,[{key:"fetch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i,o,u=this;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=t.name;if(this.baseUrl){l.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){l.next=5;break}throw new Error("CMap name must be specified.");case 5:i=this.baseUrl+r+(this.isCompressed?".bcmap":"");o=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return l.abrupt("return",this._fetchData(i,o).catch((function(t){throw new Error("Unable to load ".concat(u.isCompressed?"binary ":"","CMap at: ").concat(i))})));case 8:case"end":return l.stop()}}),_callee,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t,r){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseCMapReaderFactory}();r.BaseCMapReaderFactory=u;var l=function(){function BaseStandardFontDataFactory(t){var r=t.baseUrl,i=void 0===r?null:r;_classCallCheck(this,BaseStandardFontDataFactory);this.constructor===BaseStandardFontDataFactory&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory.");this.baseUrl=i}_createClass(BaseStandardFontDataFactory,[{key:"fetch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i;return _regeneratorRuntime().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:r=t.filename;if(this.baseUrl){a.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(r){a.next=5;break}throw new Error("Font filename must be specified.");case 5:i="".concat(this.baseUrl).concat(r);return a.abrupt("return",this._fetchData(i).catch((function(t){throw new Error("Unable to load font data at: ".concat(i))})));case 7:case"end":return a.stop()}}),_callee2,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseStandardFontDataFactory}();r.BaseStandardFontDataFactory=l;var c=function(){function BaseSVGFactory(){_classCallCheck(this,BaseSVGFactory);this.constructor===BaseSVGFactory&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}_createClass(BaseSVGFactory,[{key:"create",value:function create(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||r<=0)throw new Error("Invalid SVG dimensions");var a=this._createSVG("svg:svg");a.setAttribute("version","1.1");if(!i){a.setAttribute("width","".concat(t,"px"));a.setAttribute("height","".concat(r,"px"))}a.setAttribute("preserveAspectRatio","none");a.setAttribute("viewBox","0 0 ".concat(t," ").concat(r));return a}},{key:"createElement",value:function createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function _createSVG(t){(0,a.unreachable)("Abstract method `_createSVG` called.")}}]);return BaseSVGFactory}();r.BaseSVGFactory=c},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(132),_display_utils=__w_pdfjs_require__(129),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){_classApplyDescriptorSet(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return _classApplyDescriptorGet(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classStaticPrivateFieldSpecSet(t,r,i,a){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"set");_classApplyDescriptorSet(t,i,a);return a}function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}function _classStaticPrivateFieldSpecGet(t,r,i){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"get");return _classApplyDescriptorGet(t,i)}function _classCheckPrivateStaticFieldDescriptor(t,r){if(void 0===t)throw new TypeError("attempted to "+r+" private static field before its declaration")}function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){var _require=__w_pdfjs_require__(146),NodeCanvasFactory=_require.NodeCanvasFactory,NodeCMapReaderFactory=_require.NodeCMapReaderFactory,NodeStandardFontDataFactory=_require.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){var r,i=new PDFDocumentLoadingTask;if("string"==typeof t||t instanceof URL)r={url:t};else if((0,_util.isArrayBuffer)(t))r={data:t};else if(t instanceof PDFDataRangeTransport)r={range:t};else{if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=t}var a=Object.create(null),o=null,u=null;for(var l in r){var c=r[l];switch(l){case"url":if("undefined"!=typeof window)try{a[l]=new URL(c,window.location).href;continue}catch(t){(0,_util.warn)('Cannot create valid URL: "'.concat(t,'".'))}else if("string"==typeof c||c instanceof URL){a[l]=c.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=c;continue;case"worker":u=c;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&c instanceof Buffer)a[l]=new Uint8Array(c);else{if(c instanceof Uint8Array)break;if("string"==typeof c)a[l]=(0,_util.stringToBytes)(c);else if("object"!==_typeof(c)||null===c||isNaN(c.length)){if(!(0,_util.isArrayBuffer)(c))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");a[l]=new Uint8Array(c)}else a[l]=new Uint8Array(c)}continue}a[l]=c}a.CMapReaderFactory=a.CMapReaderFactory||DefaultCMapReaderFactory;a.StandardFontDataFactory=a.StandardFontDataFactory||DefaultStandardFontDataFactory;a.ignoreErrors=!0!==a.stopAtErrors;a.fontExtraProperties=!0===a.fontExtraProperties;a.pdfBug=!0===a.pdfBug;a.enableXfa=!0===a.enableXfa;(!Number.isInteger(a.rangeChunkSize)||a.rangeChunkSize<1)&&(a.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE);("string"!=typeof a.docBaseUrl||(0,_display_utils.isDataScheme)(a.docBaseUrl))&&(a.docBaseUrl=null);(!Number.isInteger(a.maxImageSize)||a.maxImageSize<-1)&&(a.maxImageSize=-1);"string"!=typeof a.cMapUrl&&(a.cMapUrl=null);"string"!=typeof a.standardFontDataUrl&&(a.standardFontDataUrl=null);"boolean"!=typeof a.useWorkerFetch&&(a.useWorkerFetch=a.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&a.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory);"boolean"!=typeof a.isEvalSupported&&(a.isEvalSupported=!0);"boolean"!=typeof a.disableFontFace&&(a.disableFontFace=_is_node.isNodeJS);"boolean"!=typeof a.useSystemFonts&&(a.useSystemFonts=!_is_node.isNodeJS&&!a.disableFontFace);"object"===_typeof(a.ownerDocument)&&null!==a.ownerDocument||(a.ownerDocument=globalThis.document);"boolean"!=typeof a.disableRange&&(a.disableRange=!1);"boolean"!=typeof a.disableStream&&(a.disableStream=!1);"boolean"!=typeof a.disableAutoFetch&&(a.disableAutoFetch=!1);(0,_util.setVerbosityLevel)(a.verbosity);if(!u){var d={verbosity:a.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};u=d.port?PDFWorker.fromPort(d):new PDFWorker(d);i._worker=u}var h=i.docId;u.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(u,a,o,h),r=new Promise((function(t){var r;o?r=new _transport_stream.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,contentDispositionFilename:a.contentDispositionFilename,disableRange:a.disableRange,disableStream:a.disableStream},o):a.data||(r=createPDFNetworkStream({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream}));t(r)}));return Promise.all([t,r]).then((function(t){var r=_slicedToArray(t,2),o=r[0],l=r[1];if(i.destroyed)throw new Error("Loading aborted");var c=new _message_handler.MessageHandler(h,o,u.port),d=new WorkerTransport(c,i,l,a);i._transport=d;c.send("Ready",null)}))})).catch(i._capability.reject);return i}function _fetchDocument(t,r,i,a){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(t,r,i,a){var o;return _regeneratorRuntime().wrap((function _callee7$(u){for(;;)switch(u.prev=u.next){case 0:if(!t.destroyed){u.next=2;break}throw new Error("Worker was destroyed");case 2:if(i){r.length=i.length;r.initialData=i.initialData;r.progressiveDone=i.progressiveDone;r.contentDispositionFilename=i.contentDispositionFilename}u.next=5;return t.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.15.0",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});case 5:o=u.sent;r.data&&(r.data=null);if(!t.destroyed){u.next=9;break}throw new Error("Worker was destroyed");case 9:return u.abrupt("return",o);case 10:case"end":return u.stop()}}),_callee7)})))).apply(this,arguments)}var PDFDocumentLoadingTask=function(){function PDFDocumentLoadingTask(){var t,r;_classCallCheck(this,PDFDocumentLoadingTask);this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d".concat((_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(t=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),r=t++,t)),r));this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}_createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"destroy",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:this.destroyed=!0;r.next=3;return null===(t=this._transport)||void 0===t?void 0:t.destroy();case 3:this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}case 5:case"end":return r.stop()}}),_callee,this)}))),function destroy(){return t.apply(this,arguments)})}]);var t;return PDFDocumentLoadingTask}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0},PDFDataRangeTransport=function(){function PDFDataRangeTransport(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataRangeTransport);this.length=t;this.initialData=r;this.progressiveDone=i;this.contentDispositionFilename=a;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}_createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function addProgressListener(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function onDataRange(t,r){var i,a=_createForOfIteratorHelper(this._rangeListeners);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t,r)}}catch(t){a.e(t)}finally{a.f()}}},{key:"onDataProgress",value:function onDataProgress(t,r){var i=this;this._readyCapability.promise.then((function(){var a,o=_createForOfIteratorHelper(i._progressListeners);try{for(o.s();!(a=o.n()).done;){(0,a.value)(t,r)}}catch(t){o.e(t)}finally{o.f()}}))}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(t){var r=this;this._readyCapability.promise.then((function(){var i,a=_createForOfIteratorHelper(r._progressiveReadListeners);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t)}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var t=this;this._readyCapability.promise.then((function(){var r,i=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(i.s();!(r=i.n()).done;){(0,r.value)()}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]);return PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(t,r){var i,a=this;_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=t;this._transport=r;Object.defineProperty(this,"fingerprint",{get:function get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead.");return this.fingerprints[0]}});Object.defineProperty(this,"getStats",{value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead.");return t.abrupt("return",a.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return t.stop()}}),_callee2)}))),function value(){return i.apply(this,arguments)})})}_createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints}},{key:"stats",get:function get(){return this._transport.stats}},{key:"isPureXfa",get:function get(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa}},{key:"getPage",value:function getPage(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function getPageIndex(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}},{key:"saveDocument",value:function saveDocument(){this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");return this._transport.saveDocument()}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}]);return PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function PDFPageProxy(t,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,PDFPageProxy);this._pageIndex=t;this._pageInfo=r;this._ownerDocument=a;this._transport=i;this._stats=o?new _display_utils.StatTimer:null;this._pdfBug=o;this.commonObjs=i.commonObjs;this.objs=new PDFObjects;this._bitmaps=new Set;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this._annotationPromises=new Map;this.destroyed=!1}_createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"getViewport",value:function getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,i=t.rotation,a=void 0===i?this.rotate:i,o=t.offsetX,u=void 0===o?0:o,l=t.offsetY,c=void 0===l?0:l,d=t.dontFlip,h=void 0!==d&&d;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:a,offsetX:u,offsetY:c,dontFlip:h})}},{key:"getAnnotations",value:function getAnnotations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,i=void 0===r?"display":r,a=this._transport.getRenderingIntent(i),o=this._annotationPromises.get(a.cacheKey);if(!o){o=this._transport.getAnnotations(this._pageIndex,a.renderingIntent);this._annotationPromises.set(a.cacheKey,o);o=o.then((function(t){var r,i=_createForOfIteratorHelper(t);try{var a=function _loop(){var t=r.value;void 0!==t.titleObj&&Object.defineProperty(t,"title",{get:function get(){(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead.");return t.titleObj.str}});void 0!==t.contentsObj&&Object.defineProperty(t,"contents",{get:function get(){(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead.");return t.contentsObj.str}})};for(i.s();!(r=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}return t}))}return o}},{key:"getJSActions",value:function getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t;return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null);case 1:case"end":return r.stop()}}),_callee3,this)}))),function getXfa(){return t.apply(this,arguments)})},{key:"render",value:function render(t){var r,i,a,o=this,u=t.canvasContext,l=t.viewport,c=t.intent,d=void 0===c?"display":c,h=t.annotationMode,p=void 0===h?_util.AnnotationMode.ENABLE:h,v=t.transform,y=void 0===v?null:v,g=t.imageLayer,m=void 0===g?null:g,b=t.canvasFactory,w=void 0===b?null:b,A=t.background,P=void 0===A?null:A,D=t.optionalContentConfigPromise,E=void 0===D?null:D,S=t.annotationCanvasMap,C=void 0===S?null:S,k=t.pageColors,x=void 0===k?null:k,T=t.printAnnotationStorage,I=void 0===T?null:T;if(void 0!==(null===(r=arguments[0])||void 0===r?void 0:r.renderInteractiveForms)){(0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead.");!0===arguments[0].renderInteractiveForms&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_FORMS)}if(void 0!==(null===(i=arguments[0])||void 0===i?void 0:i.includeAnnotationStorage)){(0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead.");!0===arguments[0].includeAnnotationStorage&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_STORAGE)}this._stats&&this._stats.time("Overall");var L=this._transport.getRenderingIntent(d,p,I);this.pendingCleanup=!1;E||(E=this._transport.getOptionalContentConfig());var O=this._intentStates.get(L.cacheKey);if(!O){O=Object.create(null);this._intentStates.set(L.cacheKey,O)}if(O.streamReaderCancelTimeout){clearTimeout(O.streamReaderCancelTimeout);O.streamReaderCancelTimeout=null}var M=w||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),R=!!(L.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!O.displayReadyCapability){O.displayReadyCapability=(0,_util.createPromiseCapability)();O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(L)}var B=function complete(t){O.renderTasks.delete(G);(o.cleanupAfterRender||R)&&(o.pendingCleanup=!0);o._tryCleanup();if(t){G.capability.reject(t);o._abortOperatorList({intentState:O,reason:t instanceof Error?t:new Error(t)})}else G.capability.resolve();if(o._stats){o._stats.timeEnd("Rendering");o._stats.timeEnd("Overall")}},G=new InternalRenderTask({callback:B,params:{canvasContext:u,viewport:l,transform:y,imageLayer:m,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:C,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:M,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:x});((a=O).renderTasks||(a.renderTasks=new Set)).add(G);var N=G.task;Promise.all([O.displayReadyCapability.promise,E]).then((function(t){var r=_slicedToArray(t,2),i=r[0],a=r[1];if(o.pendingCleanup)B();else{o._stats&&o._stats.time("Rendering");G.initializeGraphics({transparency:i,optionalContentConfig:a});G.operatorListChanged()}})).catch(B);return N}},{key:"getOperatorList",value:function getOperatorList(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,i=void 0===r?"display":r,a=t.annotationMode,o=void 0===a?_util.AnnotationMode.ENABLE:a,u=t.printAnnotationStorage,l=void 0===u?null:u;function operatorListChanged(){if(h.operatorList.lastChunk){h.opListReadCapability.resolve(h.operatorList);h.renderTasks.delete(c)}}var c,d=this._transport.getRenderingIntent(i,o,l,!0),h=this._intentStates.get(d.cacheKey);if(!h){h=Object.create(null);this._intentStates.set(d.cacheKey,h)}if(!h.opListReadCapability){var p;(c=Object.create(null)).operatorListChanged=operatorListChanged;h.opListReadCapability=(0,_util.createPromiseCapability)();((p=h).renderTasks||(p.renderTasks=new Set)).add(c);h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(d)}return h.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.disableCombineTextItems,i=void 0!==r&&r,a=t.includeMarkedContent,o=void 0!==a&&a,u=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==i,includeMarkedContent:!0===o},{highWaterMark:u,size:function size(t){return t.items.length}})}},{key:"getTextContent",value:function getTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return _xfa_text.XfaText.textContent(t)}));var r=this.streamTextContent(t);return new Promise((function(t,i){var a=r.getReader(),o={items:[],styles:Object.create(null)};!function pump(){a.read().then((function(r){var i,a=r.value;if(r.done)t(o);else{Object.assign(o.styles,a.styles);(i=o.items).push.apply(i,_toConsumableArray(a.items));pump()}}),i)}()}))}},{key:"getStructTree",value:function getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function _destroy(){this.destroyed=!0;var t,r=[],i=_createForOfIteratorHelper(this._intentStates.values());try{for(i.s();!(t=i.n()).done;){var a=t.value;this._abortOperatorList({intentState:a,reason:new Error("Page was destroyed."),force:!0});if(!a.opListReadCapability){var o,u=_createForOfIteratorHelper(a.renderTasks);try{for(u.s();!(o=u.n()).done;){var l=o.value;r.push(l.completed);l.cancel()}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){i.e(t)}finally{i.f()}this.objs.clear();var c,d=_createForOfIteratorHelper(this._bitmaps);try{for(d.s();!(c=d.n()).done;){c.value.close()}}catch(t){d.e(t)}finally{d.f()}this._bitmaps.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=!1;return Promise.all(r)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0;return this._tryCleanup(t)}},{key:"_tryCleanup",value:function _tryCleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var r,i=_createForOfIteratorHelper(this._intentStates.values());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.renderTasks,u=a.operatorList;if(o.size>0||!u.lastChunk)return!1}}catch(t){i.e(t)}finally{i.f()}this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;t&&this._stats&&(this._stats=new _display_utils.StatTimer);var l,c=_createForOfIteratorHelper(this._bitmaps);try{for(c.s();!(l=c.n()).done;){var d=l.value;d.close()}}catch(t){c.e(t)}finally{c.f()}this._bitmaps.clear();this.pendingCleanup=!1;return!0}},{key:"_startRenderPage",value:function _startRenderPage(t,r){var i=this._intentStates.get(r);if(i){this._stats&&this._stats.timeEnd("Page Request");i.displayReadyCapability&&i.displayReadyCapability.resolve(t)}}},{key:"_renderPageChunk",value:function _renderPageChunk(t,r){for(var i=0,a=t.length;i<a;i++){r.operatorList.fnArray.push(t.fnArray[i]);r.operatorList.argsArray.push(t.argsArray[i])}r.operatorList.lastChunk=t.lastChunk;r.operatorList.separateAnnots=t.separateAnnots;var o,u=_createForOfIteratorHelper(r.renderTasks);try{for(u.s();!(o=u.n()).done;){o.value.operatorListChanged()}}catch(t){u.e(t)}finally{u.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function _pumpOperatorList(t){var r=this,i=t.renderingIntent,a=t.cacheKey,o=t.annotationStorageMap,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:i,cacheKey:a,annotationStorage:o}).getReader(),l=this._intentStates.get(a);l.streamReader=u;!function pump(){u.read().then((function(t){var i=t.value;if(t.done)l.streamReader=null;else if(!r._transport.destroyed){r._renderPageChunk(i,l);pump()}}),(function(t){l.streamReader=null;if(!r._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;var i,a=_createForOfIteratorHelper(l.renderTasks);try{for(a.s();!(i=a.n()).done;){i.value.operatorListChanged()}}catch(t){a.e(t)}finally{a.f()}r._tryCleanup()}if(l.displayReadyCapability)l.displayReadyCapability.reject(t);else{if(!l.opListReadCapability)throw t;l.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function _abortOperatorList(t){var r=this,i=t.intentState,a=t.reason,o=t.force,u=void 0!==o&&o;if(i.streamReader){if(!u){if(i.renderTasks.size>0)return;if(a instanceof _display_utils.RenderingCancelledException){i.streamReaderCancelTimeout=setTimeout((function(){r._abortOperatorList({intentState:i,reason:a,force:!0});i.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}i.streamReader.cancel(new _util.AbortException(a.message)).catch((function(){}));i.streamReader=null;if(!this._transport.destroyed){var l,c=_createForOfIteratorHelper(this._intentStates);try{for(c.s();!(l=c.n()).done;){var d=_slicedToArray(l.value,2),h=d[0];if(d[1]===i){this._intentStates.delete(h);break}}}catch(t){c.e(t)}finally{c.f()}this.cleanup()}}}},{key:"stats",get:function get(){return this._stats}}]);var t;return PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort);this._listeners=[];this._deferred=Promise.resolve()}_createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(t,r){var i=this,a={data:structuredClone(t,r)};this._deferred.then((function(){var t,r=_createForOfIteratorHelper(i._listeners);try{for(r.s();!(t=r.n()).done;){t.value.call(i,a)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"addEventListener",value:function addEventListener(t,r){this._listeners.push(r)}},{key:"removeEventListener",value:function removeEventListener(t,r){var i=this._listeners.indexOf(r);this._listeners.splice(i,1)}},{key:"terminate",value:function terminate(){this._listeners.length=0}}]);return LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"function"==typeof require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if("object"===("undefined"==typeof document?"undefined":_typeof(document))){var _document,_document$currentScri,pdfjsFilePath=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,r){var i;try{if(!(i=new URL(t)).origin||"null"===i.origin)return!1}catch(t){return!1}var a=new URL(r,i);return i.origin===a.origin};PDFWorkerUtil.createCDNWrapper=function(t){var r='importScripts("'.concat(t,'");');return URL.createObjectURL(new Blob([r]))};var PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,i=void 0===r?null:r,a=t.port,o=void 0===a?null:a,u=t.verbosity,l=void 0===u?(0,_util.getVerbosityLevel)():u;_classCallCheck(this,PDFWorker);if(o&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(o))throw new Error("Cannot use more than one PDFWorker per port.");this.name=i;this.destroyed=!1;this.verbosity=l;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(o){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(o,this);this._initializeFromPort(o)}else this._initialize()}_createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}},{key:"_initializeFromPort",value:function _initializeFromPort(t){this._port=t;this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve()}},{key:"_initialize",value:function _initialize(){var t=this;if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var r=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));var i=new Worker(r),a=new _message_handler.MessageHandler("main","worker",i),o=function terminateEarly(){i.removeEventListener("error",u);a.destroy();i.terminate();t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},u=function onWorkerError(){t._webWorker||o()};i.addEventListener("error",u);a.on("test",(function(r){i.removeEventListener("error",u);if(t.destroyed)o();else if(r){t._messageHandler=a;t._port=i;t._webWorker=i;t._readyCapability.resolve();a.send("configure",{verbosity:t.verbosity})}else{t._setupFakeWorker();a.destroy();i.terminate()}}));a.on("ready",(function(r){i.removeEventListener("error",u);if(t.destroyed)o();else try{l()}catch(r){t._setupFakeWorker()}}));var l=function sendTest(){var t=new Uint8Array;a.send("test",t,[t.buffer])};l();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var t=this;if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((function(r){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var i=new LoopbackPort;t._port=i;var a="fake".concat(PDFWorkerUtil.fakeWorkerId++),o=new _message_handler.MessageHandler(a+"_worker",a,i);r.setup(o,i);var u=new _message_handler.MessageHandler(a,a+"_worker",i);t._messageHandler=u;t._readyCapability.resolve();u.send("configure",{verbosity:t.verbosity})}})).catch((function(r){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(r.message,'".')))}))}},{key:"destroy",value:function destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}}],[{key:"fromPort",value:function fromPort(t){if(null==t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(t.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(t.port):new PDFWorker(t)}},{key:"workerSrc",get:function get(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.');return PDFWorkerUtil.fallbackWorkerSrc}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function get(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler;if(!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context4.next=6;break}worker=eval("require")(_this11.workerSrc);return _context4.abrupt("return",worker.WorkerMessageHandler);case 6:_context4.next=8;return(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}}),_callee4)})));return function loader(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]);return PDFWorker}();exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.");return this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function WorkerTransport(t,r,i,a){_classCallCheck(this,WorkerTransport);_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null});_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null});this.messageHandler=t;this.loadingTask=r;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement});this._params=a;if(!a.useWorkerFetch){this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked});this.StandardFontDataFactory=new a.StandardFontDataFactory({baseUrl:a.standardFontDataUrl})}this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=i;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}_createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function get(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function getRenderingIntent(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=_util.RenderingIntentFlag.DISPLAY,u=null;switch(t){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(r){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:var l=(o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage;u=l.serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}a&&(o+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:o,cacheKey:"".concat(o,"_").concat(_annotation_storage.AnnotationStorage.getHash(u)),annotationStorageMap:u}}},{key:"destroy",value:function destroy(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r,i=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(o._destroy())}}catch(t){a.e(t)}finally{a.f()}_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var u=this.messageHandler.sendWithPromise("Terminate",null);i.push(u);Promise.all(i).then((function(){t.commonObjs.clear();t.fontLoader.clear();_classPrivateFieldSet(t,_metadataPromise,null);t._getFieldObjectsPromise=null;t._hasJSActionsPromise=null;t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));if(t.messageHandler){t.messageHandler.destroy();t.messageHandler=null}t.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var t=this,r=this.messageHandler,i=this.loadingTask;r.on("GetReader",(function(r,i){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available.");t._fullReader=t._networkStream.getFullReader();t._fullReader.onProgress=function(r){t._lastProgress={loaded:r.loaded,total:r.total}};i.onPull=function(){t._fullReader.read().then((function(t){var r=t.value;if(t.done)i.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(r),"GetReader - expected an ArrayBuffer.");i.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){i.error(t)}))};i.onCancel=function(r){t._fullReader.cancel(r);i.ready.catch((function(r){if(!t.destroyed)throw r}))}}));r.on("ReaderHeadersReady",(function(r){var a=(0,_util.createPromiseCapability)(),o=t._fullReader;o.headersReady.then((function(){if(!o.isStreamingSupported||!o.isRangeSupported){if(t._lastProgress){var r;null===(r=i.onProgress)||void 0===r||r.call(i,t._lastProgress)}o.onProgress=function(t){var r;null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:t.loaded,total:t.total})}}a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})}),a.reject);return a.promise}));r.on("GetRangeReader",(function(r,i){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var a=t._networkStream.getRangeReader(r.begin,r.end);if(a){i.onPull=function(){a.read().then((function(t){var r=t.value;if(t.done)i.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(r),"GetRangeReader - expected an ArrayBuffer.");i.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){i.error(t)}))};i.onCancel=function(r){a.cancel(r);i.ready.catch((function(r){if(!t.destroyed)throw r}))}}else i.close()}));r.on("GetDoc",(function(r){var a=r.pdfInfo;t._numPages=a.numPages;t._htmlForXfa=a.htmlForXfa;delete a.htmlForXfa;i._capability.resolve(new PDFDocumentProxy(a,t))}));r.on("DocException",(function(t){var r;switch(t.name){case"PasswordException":r=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":r=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}i._capability.reject(r)}));r.on("PasswordRequest",(function(r){t._passwordCapability=(0,_util.createPromiseCapability)();if(i.onPassword){try{i.onPassword((function updatePassword(r){r instanceof Error?t._passwordCapability.reject(r):t._passwordCapability.resolve({password:r})}),r.code)}catch(r){t._passwordCapability.reject(r)}}else t._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return t._passwordCapability.promise}));r.on("DataLoaded",(function(r){var a;null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:r.length,total:r.length});t.downloadInfoCapability.resolve(r)}));r.on("StartRenderPage",(function(r){if(!t.destroyed){_classPrivateFieldGet(t,_pageCache).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}}));r.on("commonobj",(function(i){var a,o=_slicedToArray(i,3),u=o[0],l=o[1],c=o[2];if(!t.destroyed&&!t.commonObjs.has(u))switch(l){case"Font":var d=t._params;if("error"in c){var h=c.error;(0,_util.warn)("Error during font loading: ".concat(h));t.commonObjs.resolve(u,h);break}var p=null;d.pdfBug&&null!==(a=globalThis.FontInspector)&&void 0!==a&&a.enabled&&(p={registerFont:function registerFont(t,r){globalThis.FontInspector.fontAdded(t,r)}});var v=new _font_loader.FontFaceObject(c,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:p});t.fontLoader.bind(v).catch((function(t){return r.sendWithPromise("FontFallback",{id:u})})).finally((function(){!d.fontExtraProperties&&v.data&&(v.data=null);t.commonObjs.resolve(u,v)}));break;case"FontPath":case"Image":t.commonObjs.resolve(u,c);break;default:throw new Error("Got unknown common object type ".concat(l))}}));r.on("obj",(function(r){var i=_slicedToArray(r,4),a=i[0],o=i[1],u=i[2],l=i[3];if(!t.destroyed){var c=_classPrivateFieldGet(t,_pageCache).get(o);if(!c.objs.has(a))switch(u){case"Image":c.objs.resolve(a,l);if(l){var d;if(l.bitmap){var h=l.bitmap;d=l.width*l.height*4;c._bitmaps.add(h)}else{var p;d=(null===(p=l.data)||void 0===p?void 0:p.length)||0}d>8e6&&(c.cleanupAfterRender=!0)}break;case"Pattern":c.objs.resolve(a,l);break;default:throw new Error("Got unknown object type ".concat(u))}}}));r.on("DocProgress",(function(r){var a;t.destroyed||null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:r.loaded,total:r.total})}));r.on("DocStats",(function(r){t.destroyed||_classPrivateFieldSet(t,_docStats,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}));r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));r.on("FetchBuiltInCMap",(function(r){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}));r.on("FetchStandardFontData",(function(r){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"_onUnsupportedFeature",value:function _onUnsupportedFeature(t){var r,i,a=t.featureId;this.destroyed||null===(r=(i=this.loadingTask).onUnsupportedFeature)||void 0===r||r.call(i,a)}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function getPage(t){var r=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var i=t-1,a=_classPrivateFieldGet(this,_pagePromises).get(i);if(a)return a;var o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then((function(t){if(r.destroyed)throw new Error("Transport destroyed");var a=new PDFPageProxy(i,t,r,r._params.ownerDocument,r._params.pdfBug);_classPrivateFieldGet(r,_pageCache).set(i,a);return a}));_classPrivateFieldGet(this,_pagePromises).set(i,o);return o}},{key:"getPageIndex",value:function getPageIndex(t){return"object"!==_typeof(t)||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}},{key:"saveDocument",value:function saveDocument(){var t,r,i=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(t=null===(r=this._fullReader)||void 0===r?void 0:r.filename)&&void 0!==t?t:null}).finally((function(){i.annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(t){return new _optional_content_config.OptionalContentConfig(t)}))}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var t=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then((function(r){var i,a,o,u;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:null!==(i=null===(a=t._fullReader)||void 0===a?void 0:a.filename)&&void 0!==i?i:null,contentLength:null!==(o=null===(u=t._fullReader)||void 0===u?void 0:u.contentLength)&&void 0!==o?o:null}})))}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var t,r,i,a,o=arguments;return _regeneratorRuntime().wrap((function _callee5$(u){for(;;)switch(u.prev=u.next){case 0:t=o.length>0&&void 0!==o[0]&&o[0];u.next=3;return this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){u.next=5;break}return u.abrupt("return");case 5:r=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());u.prev=6;r.s();case 8:if((i=r.n()).done){u.next=15;break}if((a=i.value).cleanup()){u.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:u.next=8;break;case 15:u.next=20;break;case 17:u.prev=17;u.t0=u.catch(6);r.e(u.t0);case 20:u.prev=20;r.f();return u.finish(20);case 23:this.commonObjs.clear();t||this.fontLoader.clear();_classPrivateFieldSet(this,_metadataPromise,null);this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null;case 28:case"end":return u.stop()}}),_callee5,this,[[6,17,20,23]])}))),function startCleanup(){return t.apply(this,arguments)})},{key:"loadingParams",get:function get(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]);var t;return WorkerTransport}(),_objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects);_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}_createClass(PDFObjects,[{key:"get",value:function get(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){var i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);i.capability.promise.then((function(){return r(i.data)}));return null}var a=_classPrivateFieldGet(this,_objs)[t];if(null==a||!a.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return a.data}},{key:"has",value:function has(t){var r=_classPrivateFieldGet(this,_objs)[t];return(null==r?void 0:r.capability.settled)||!1}},{key:"resolve",value:function resolve(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);i.data=r;i.capability.resolve()}},{key:"clear",value:function clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}]);return PDFObjects}();function _ensureObj2(t){var r=_classPrivateFieldGet(this,_objs)[t];return r||(_classPrivateFieldGet(this,_objs)[t]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){function RenderTask(t){_classCallCheck(this,RenderTask);_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null});_classPrivateFieldSet(this,_internalRenderTask,t);this.onContinue=null}_createClass(RenderTask,[{key:"promise",get:function get(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}},{key:"cancel",value:function cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}},{key:"separateAnnots",get:function get(){var t=_classPrivateFieldGet(this,_internalRenderTask).operatorList.separateAnnots;if(!t)return!1;var r=_classPrivateFieldGet(this,_internalRenderTask).annotationCanvasMap;return t.form||t.canvas&&(null==r?void 0:r.size)>0}}]);return RenderTask}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function InternalRenderTask(t){var r=t.callback,i=t.params,a=t.objs,o=t.commonObjs,u=t.annotationCanvasMap,l=t.operatorList,c=t.pageIndex,d=t.canvasFactory,h=t.useRequestAnimationFrame,p=void 0!==h&&h,v=t.pdfBug,y=void 0!==v&&v,g=t.pageColors,m=void 0===g?null:g;_classCallCheck(this,InternalRenderTask);this.callback=r;this.params=i;this.objs=a;this.commonObjs=o;this.annotationCanvasMap=u;this.operatorListIdx=null;this.operatorList=l;this._pageIndex=c;this.canvasFactory=d;this._pdfBug=y;this.pageColors=m;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===p&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=i.canvasContext.canvas}_createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function initializeGraphics(t){var r,i=t.transparency,a=void 0!==i&&i,o=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}if(this._pdfBug&&null!==(r=globalThis.StepperManager)&&void 0!==r&&r.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var u=this.params,l=u.canvasContext,c=u.viewport,d=u.transform,h=u.imageLayer,p=u.background;this.gfx=new _canvas.CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,h,o,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:d,viewport:c,transparency:a,background:p});this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function cancel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function operatorListChanged(){if(this.graphicsReady){this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function _continue(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function _scheduleNext(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){return _regeneratorRuntime().wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback()}}case 4:case"end":return t.stop()}}),_callee6,this)}))),function _next(){return t.apply(this,arguments)})}]);var t;return InternalRenderTask}(),_canvasInUse={writable:!0,value:new WeakSet},version="2.15.0";exports.version=version;var build="b8aa9c6";exports.build=build},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var a=i(1),o=i(133),u=i(135);function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}var l=new WeakSet,c=function(){function AnnotationStorage(){_classCallCheck(this,AnnotationStorage);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,l);this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null}_createClass(AnnotationStorage,[{key:"getValue",value:function getValue(t,r){var i=this._storage.get(t);return void 0===i?r:Object.assign(r,i)}},{key:"getRawValue",value:function getRawValue(t){return this._storage.get(t)}},{key:"removeKey",value:function removeKey(t){this._storage.delete(t);0===this._storage.size&&this.resetModified()}},{key:"setValue",value:function setValue(t,r){var i=this._storage.get(t),a=!1;if(void 0!==i)for(var o=0,u=Object.entries(r);o<u.length;o++){var c=_slicedToArray(u[o],2),d=c[0],h=c[1];if(i[d]!==h){a=!0;i[d]=h}}else{a=!0;this._storage.set(t,r)}a&&function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(this,l,_setModified2).call(this)}},{key:"has",value:function has(t){return this._storage.has(t)}},{key:"getAll",value:function getAll(){return this._storage.size>0?(0,a.objectFromMap)(this._storage):null}},{key:"size",get:function get(){return this._storage.size}},{key:"resetModified",value:function resetModified(){if(this._modified){this._modified=!1;"function"==typeof this.onResetModified&&this.onResetModified()}}},{key:"print",get:function get(){return new h(this)}},{key:"serializable",get:function get(){if(0===this._storage.size)return null;var t,r=new Map,i=_createForOfIteratorHelper(this._storage);try{for(i.s();!(t=i.n()).done;){var a=_slicedToArray(t.value,2),u=a[0],l=a[1],c=l instanceof o.AnnotationEditor?l.serialize():l;c&&r.set(u,c)}}catch(t){i.e(t)}finally{i.f()}return r}}],[{key:"getHash",value:function getHash(t){if(!t)return"";var r,i=new u.MurmurHash3_64,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o=_slicedToArray(r.value,2),l=o[0],c=o[1];i.update("".concat(l,":").concat(JSON.stringify(c)))}}catch(t){a.e(t)}finally{a.f()}return i.hexdigest()}}]);return AnnotationStorage}();r.AnnotationStorage=c;function _setModified2(){if(!this._modified){this._modified=!0;"function"==typeof this.onSetModified&&this.onSetModified()}}var d=new WeakMap,h=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PrintAnnotationStorage,t);var r=_createSuper(PrintAnnotationStorage);function PrintAnnotationStorage(t){var i;_classCallCheck(this,PrintAnnotationStorage);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(_assertThisInitialized(i=r.call(this)),d,{writable:!0,value:null});_classPrivateFieldSet(_assertThisInitialized(i),d,structuredClone(t.serializable));return i}_createClass(PrintAnnotationStorage,[{key:"print",get:function get(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function get(){return function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}(this,d)}}]);return PrintAnnotationStorage}(c);r.PrintAnnotationStorage=h},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditor=void 0;var a=i(134),o=i(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var u=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=function(){function AnnotationEditor(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditor);_classPrivateFieldInitSpec(this,u,{writable:!0,value:this.focusin.bind(this)});_classPrivateFieldInitSpec(this,l,{writable:!0,value:this.focusout.bind(this)});_classPrivateFieldInitSpec(this,c,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,p,{writable:!0,value:AnnotationEditor._zIndex++});this.constructor===AnnotationEditor&&(0,o.unreachable)("Cannot initialize AnnotationEditor.");this.parent=t.parent;this.id=t.id;this.width=this.height=null;this.pageIndex=t.parent.pageIndex;this.name=t.name;this.div=null;var r=_slicedToArray(this.parent.viewportBaseDimensions,2),i=r[0],a=r[1];this.x=t.x/i;this.y=t.y/a;this.rotation=this.parent.viewport.rotation;this.isAttachedToDOM=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditor,[{key:"setInBackground",value:function setInBackground(){this.div.style.zIndex=0}},{key:"setInForeground",value:function setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,p)}},{key:"focusin",value:function focusin(t){_classPrivateFieldGet(this,c)?_classPrivateFieldSet(this,c,!1):this.parent.setSelected(this)}},{key:"focusout",value:function focusout(t){if(this.isAttachedToDOM){var r=t.relatedTarget;if(null==r||!r.closest("#".concat(this.id))){t.preventDefault();this.parent.isMultipleSelection||this.commitOrRemove()}}}},{key:"commitOrRemove",value:function commitOrRemove(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function commit(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function dragstart(t){var r=this.parent.div.getBoundingClientRect();this.startX=t.clientX-r.x;this.startY=t.clientY-r.y;t.dataTransfer.setData("text/plain",this.id);t.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function setAt(t,r,i,a){var o=_slicedToArray(this.parent.viewportBaseDimensions,2),u=o[0],l=o[1],c=_slicedToArray(this.screenToPageTranslation(i,a),2);i=c[0];a=c[1];this.x=(t+i)/u;this.y=(r+a)/l;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function translate(t,r){var i=_slicedToArray(this.parent.viewportBaseDimensions,2),a=i[0],o=i[1],u=_slicedToArray(this.screenToPageTranslation(t,r),2);t=u[0];r=u[1];this.x+=t/a;this.y+=r/o;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function screenToPageTranslation(t,r){switch(this.parent.viewport.rotation){case 90:return[r,-t];case 180:return[-t,-r];case 270:return[-r,t];default:return[t,r]}}},{key:"setDims",value:function setDims(t,r){var i=_slicedToArray(this.parent.viewportBaseDimensions,2),a=i[0],o=i[1];this.div.style.width="".concat(100*t/a,"%");this.div.style.height="".concat(100*r/o,"%")}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[0,0]}},{key:"render",value:function render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",_classPrivateFieldGet(this,u));this.div.addEventListener("focusout",_classPrivateFieldGet(this,l));var t=_slicedToArray(this.getInitialTranslation(),2),r=t[0],i=t[1];this.translate(r,i);(0,a.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div}},{key:"pointerdown",value:function pointerdown(t){var r=a.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&r)t.preventDefault();else{t.ctrlKey&&!r||t.shiftKey||t.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this);_classPrivateFieldSet(this,c,!0)}}},{key:"getRect",value:function getRect(t,r){var i=_slicedToArray(this.parent.viewportBaseDimensions,2),a=i[0],o=i[1],u=_slicedToArray(this.parent.pageDimensions,2),l=u[0],c=u[1],d=l*t/a,h=c*r/o,p=this.x*l,v=this.y*c,y=this.width*l,g=this.height*c;switch(this.rotation){case 0:return[p+d,c-v-h-g,p+d+y,c-v-h];case 90:return[p+h,c-v+d,p+h+g,c-v+d+y];case 180:return[p-d-y,c-v+h,p-d,c-v+h+g];case 270:return[p-h-g,c-v-d-y,p-h,c-v-d];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function getRectInCurrentCoords(t,r){var i=_slicedToArray(t,4),a=i[0],o=i[1],u=i[2],l=i[3],c=u-a,d=l-o;switch(this.rotation){case 0:return[a,r-l,c,d];case 90:return[a,r-o,d,c];case 180:return[u,r-o,c,d];case 270:return[u,r-l,d,c];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function onceAdded(){}},{key:"isEmpty",value:function isEmpty(){return!1}},{key:"enableEditMode",value:function enableEditMode(){_classPrivateFieldSet(this,h,!0)}},{key:"disableEditMode",value:function disableEditMode(){_classPrivateFieldSet(this,h,!1)}},{key:"isInEditMode",value:function isInEditMode(){return _classPrivateFieldGet(this,h)}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return!1}},{key:"needsToBeRebuilt",value:function needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function rebuild(){var t;null===(t=this.div)||void 0===t||t.addEventListener("focusin",_classPrivateFieldGet(this,u))}},{key:"serialize",value:function serialize(){(0,o.unreachable)("An editor must be serializable")}},{key:"remove",value:function remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,u));this.div.removeEventListener("focusout",_classPrivateFieldGet(this,l));this.isEmpty()||this.commit();this.parent.remove(this)}},{key:"select",value:function select(){var t;null===(t=this.div)||void 0===t||t.classList.add("selectedEditor")}},{key:"unselect",value:function unselect(){var t;null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor")}},{key:"updateParams",value:function updateParams(t,r){}},{key:"disableEditing",value:function disableEditing(){}},{key:"enableEditing",value:function enableEditing(){}},{key:"getIdForTextLayer",value:function getIdForTextLayer(){return this.id}},{key:"propertiesToUpdate",get:function get(){return{}}},{key:"contentDiv",get:function get(){return this.div}},{key:"isEditing",get:function get(){return _classPrivateFieldGet(this,d)},set:function set(t){_classPrivateFieldSet(this,d,t);if(t){this.parent.setSelected(this);this.parent.setActiveEditor(this)}else this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function get(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function deserialize(t,r){var i=new this.prototype.constructor({parent:r,id:r.getNextId()});i.rotation=t.rotation;var a=_slicedToArray(r.pageDimensions,2),o=a[0],u=a[1],l=_slicedToArray(i.getRectInCurrentCoords(t.rect,u),4),c=l[0],d=l[1],h=l[2],p=l[3];i.x=c/o;i.y=d/u;i.width=h/o;i.height=p/u;return i}}]);return AnnotationEditor}();r.AnnotationEditor=v;_defineProperty(v,"_colorManager",new a.ColorManager);_defineProperty(v,"_zIndex",1)},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0;r.bindEvents=function bindEvents(t,r,i){var a,o=_createForOfIteratorHelper(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;r.addEventListener(u,t[u].bind(t))}}catch(t){o.e(t)}finally{o.f()}};r.opacityToHex=function opacityToHex(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var a=i(1),o=i(129);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var u=new WeakMap,l=function(){function IdManager(){_classCallCheck(this,IdManager);_classPrivateFieldInitSpec(this,u,{writable:!0,value:0})}_createClass(IdManager,[{key:"getId",value:function getId(){var t,r;return"".concat(a.AnnotationEditorPrefix).concat((_classPrivateFieldSet(this,u,(t=_classPrivateFieldGet(this,u),r=t++,t)),r))}}]);return IdManager}(),c=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=function(){function CommandManager(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_classCallCheck(this,CommandManager);_classPrivateFieldInitSpec(this,c,{writable:!0,value:[]});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,p,{writable:!0,value:-1});_classPrivateFieldSet(this,h,t)}_createClass(CommandManager,[{key:"add",value:function add(t){var r=t.cmd,i=t.undo,a=t.mustExec,o=t.type,u=void 0===o?NaN:o,l=t.overwriteIfSameType,v=void 0!==l&&l,y=t.keepUndo,g=void 0!==y&&y;a&&r();if(!_classPrivateFieldGet(this,d)){var m={cmd:r,undo:i,type:u};if(-1!==_classPrivateFieldGet(this,p))if(v&&_classPrivateFieldGet(this,c)[_classPrivateFieldGet(this,p)].type===u){g&&(m.undo=_classPrivateFieldGet(this,c)[_classPrivateFieldGet(this,p)].undo);_classPrivateFieldGet(this,c)[_classPrivateFieldGet(this,p)]=m}else{var b=_classPrivateFieldGet(this,p)+1;if(b===_classPrivateFieldGet(this,h))_classPrivateFieldGet(this,c).splice(0,1);else{_classPrivateFieldSet(this,p,b);b<_classPrivateFieldGet(this,c).length&&_classPrivateFieldGet(this,c).splice(b)}_classPrivateFieldGet(this,c).push(m)}else{_classPrivateFieldGet(this,c).length>0&&(_classPrivateFieldGet(this,c).length=0);_classPrivateFieldSet(this,p,0);_classPrivateFieldGet(this,c).push(m)}}}},{key:"undo",value:function undo(){if(-1!==_classPrivateFieldGet(this,p)){_classPrivateFieldSet(this,d,!0);_classPrivateFieldGet(this,c)[_classPrivateFieldGet(this,p)].undo();_classPrivateFieldSet(this,d,!1);_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p)-1)}}},{key:"redo",value:function redo(){if(_classPrivateFieldGet(this,p)<_classPrivateFieldGet(this,c).length-1){_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p)+1);_classPrivateFieldSet(this,d,!0);_classPrivateFieldGet(this,c)[_classPrivateFieldGet(this,p)].cmd();_classPrivateFieldSet(this,d,!1)}}},{key:"hasSomethingToUndo",value:function hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,p)}},{key:"hasSomethingToRedo",value:function hasSomethingToRedo(){return _classPrivateFieldGet(this,p)<_classPrivateFieldGet(this,c).length-1}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(this,c,null)}}]);return CommandManager}();r.CommandManager=v;var y=new WeakSet,g=function(){function KeyboardManager(t){_classCallCheck(this,KeyboardManager);_classPrivateMethodInitSpec(this,y);this.buffer=[];this.callbacks=new Map;this.allKeys=new Set;var r,i=KeyboardManager.platform.isMac,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o,u=_slicedToArray(r.value,2),l=u[0],c=u[1],d=_createForOfIteratorHelper(l);try{for(d.s();!(o=d.n()).done;){var h=o.value,p=h.startsWith("mac+");if(i&&p){this.callbacks.set(h.slice(4),c);this.allKeys.add(h.split("+").at(-1))}else if(!i&&!p){this.callbacks.set(h,c);this.allKeys.add(h.split("+").at(-1))}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){a.e(t)}finally{a.f()}}_createClass(KeyboardManager,[{key:"exec",value:function exec(t,r){if(this.allKeys.has(r.key)){var i=this.callbacks.get(_classPrivateMethodGet(this,y,_serialize2).call(this,r));if(i){i.bind(t)();r.stopPropagation();r.preventDefault()}}}}],[{key:"platform",get:function get(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]);return KeyboardManager}();r.KeyboardManager=g;function _serialize2(t){t.altKey&&this.buffer.push("alt");t.ctrlKey&&this.buffer.push("ctrl");t.metaKey&&this.buffer.push("meta");t.shiftKey&&this.buffer.push("shift");this.buffer.push(t.key);var r=this.buffer.join("+");this.buffer.length=0;return r}var m=new WeakMap,b=function(){function ClipboardManager(){_classCallCheck(this,ClipboardManager);_classPrivateFieldInitSpec(this,m,{writable:!0,value:null})}_createClass(ClipboardManager,[{key:"copy",value:function copy(t){if(t){Array.isArray(t)?_classPrivateFieldSet(this,m,t.map((function(t){return t.serialize()}))):_classPrivateFieldSet(this,m,[t.serialize()]);_classPrivateFieldSet(this,m,_classPrivateFieldGet(this,m).filter((function(t){return!!t})));0===_classPrivateFieldGet(this,m).length&&_classPrivateFieldSet(this,m,null)}}},{key:"paste",value:function paste(){return _classPrivateFieldGet(this,m)}},{key:"isEmpty",value:function isEmpty(){return null===_classPrivateFieldGet(this,m)}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(this,m,null)}}]);return ClipboardManager}(),w=function(){function ColorManager(){_classCallCheck(this,ColorManager)}_createClass(ColorManager,[{key:"_colors",get:function get(){var t=new Map([["CanvasText",null],["Canvas",null]]);(0,o.getColorValues)(t);return(0,a.shadow)(this,"_colors",t)}},{key:"convert",value:function convert(t){var r=(0,o.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return r;var i,a=_createForOfIteratorHelper(this._colors);try{for(a.s();!(i=a.n()).done;){var u=_slicedToArray(i.value,2),l=u[0];if(u[1].every((function(t,i){return t===r[i]})))return ColorManager._colorsMapping.get(l)}}catch(t){a.e(t)}finally{a.f()}return r}},{key:"getHexCode",value:function getHexCode(t){var r=this._colors.get(t);return r?a.Util.makeHexColor.apply(a.Util,_toConsumableArray(r)):t}}]);return ColorManager}();r.ColorManager=w;_defineProperty(w,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var A=new WeakMap,P=new WeakMap,D=new WeakMap,E=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,x=new WeakMap,T=new WeakMap,I=new WeakMap,L=new WeakMap,O=new WeakMap,M=new WeakMap,R=new WeakMap,B=new WeakMap,G=new WeakMap,N=new WeakMap,j=new WeakMap,V=new WeakSet,W=new WeakSet,U=new WeakSet,H=new WeakSet,z=new WeakSet,X=new WeakSet,Y=new WeakSet,K=new WeakSet,$=new WeakSet,Q=function(){function AnnotationEditorUIManager(t,r){_classCallCheck(this,AnnotationEditorUIManager);_classPrivateMethodInitSpec(this,$);_classPrivateMethodInitSpec(this,K);_classPrivateMethodInitSpec(this,Y);_classPrivateMethodInitSpec(this,X);_classPrivateMethodInitSpec(this,z);_classPrivateMethodInitSpec(this,H);_classPrivateMethodInitSpec(this,U);_classPrivateMethodInitSpec(this,W);_classPrivateMethodInitSpec(this,V);_classPrivateFieldInitSpec(this,A,{writable:!0,value:null});_classPrivateFieldInitSpec(this,P,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,D,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,E,{writable:!0,value:new b});_classPrivateFieldInitSpec(this,S,{writable:!0,value:new v});_classPrivateFieldInitSpec(this,C,{writable:!0,value:0});_classPrivateFieldInitSpec(this,k,{writable:!0,value:null});_classPrivateFieldInitSpec(this,x,{writable:!0,value:null});_classPrivateFieldInitSpec(this,T,{writable:!0,value:new l});_classPrivateFieldInitSpec(this,I,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,L,{writable:!0,value:a.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,O,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,M,{writable:!0,value:this.keydown.bind(this)});_classPrivateFieldInitSpec(this,R,{writable:!0,value:this.onEditingAction.bind(this)});_classPrivateFieldInitSpec(this,B,{writable:!0,value:this.onPageChanging.bind(this)});_classPrivateFieldInitSpec(this,G,{writable:!0,value:this.onTextLayerRendered.bind(this)});_classPrivateFieldInitSpec(this,N,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}});_classPrivateFieldInitSpec(this,j,{writable:!0,value:null});_classPrivateFieldSet(this,j,t);_classPrivateFieldSet(this,x,r);_classPrivateFieldGet(this,x)._on("editingaction",_classPrivateFieldGet(this,R));_classPrivateFieldGet(this,x)._on("pagechanging",_classPrivateFieldGet(this,B));_classPrivateFieldGet(this,x)._on("textlayerrendered",_classPrivateFieldGet(this,G))}_createClass(AnnotationEditorUIManager,[{key:"destroy",value:function destroy(){_classPrivateMethodGet(this,W,_removeKeyboardManager2).call(this);_classPrivateFieldGet(this,x)._off("editingaction",_classPrivateFieldGet(this,R));_classPrivateFieldGet(this,x)._off("pagechanging",_classPrivateFieldGet(this,B));_classPrivateFieldGet(this,x)._off("textlayerrendered",_classPrivateFieldGet(this,G));var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,D).values());try{for(r.s();!(t=r.n()).done;){t.value.destroy()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,D).clear();_classPrivateFieldGet(this,P).clear();_classPrivateFieldSet(this,A,null);_classPrivateFieldGet(this,O).clear();_classPrivateFieldGet(this,E).destroy();_classPrivateFieldGet(this,S).destroy()}},{key:"onPageChanging",value:function onPageChanging(t){var r=t.pageNumber;_classPrivateFieldSet(this,C,r-1)}},{key:"onTextLayerRendered",value:function onTextLayerRendered(t){var r=t.pageNumber-1,i=_classPrivateFieldGet(this,D).get(r);null==i||i.onTextLayerRendered()}},{key:"focusMainContainer",value:function focusMainContainer(){_classPrivateFieldGet(this,j).focus()}},{key:"keydown",value:function keydown(t){var r;null!==(r=this.getActive())&&void 0!==r&&r.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,t)}},{key:"onEditingAction",value:function onEditingAction(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}},{key:"setEditingState",value:function setEditingState(t){if(t){_classPrivateMethodGet(this,V,_addKeyboardManager2).call(this);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,L)!==a.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,K,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,S).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,S).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,E).isEmpty()})}else{_classPrivateMethodGet(this,W,_removeKeyboardManager2).call(this);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{isEditing:!1})}}},{key:"registerEditorTypes",value:function registerEditorTypes(t){_classPrivateFieldSet(this,k,t);var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,k));try{for(i.s();!(r=i.n()).done;){var a=r.value;_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,a.defaultPropertiesToUpdate)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getId",value:function getId(){return _classPrivateFieldGet(this,T).getId()}},{key:"addLayer",value:function addLayer(t){_classPrivateFieldGet(this,D).set(t.pageIndex,t);_classPrivateFieldGet(this,I)?t.enable():t.disable()}},{key:"removeLayer",value:function removeLayer(t){_classPrivateFieldGet(this,D).delete(t.pageIndex)}},{key:"updateMode",value:function updateMode(t){_classPrivateFieldSet(this,L,t);if(t===a.AnnotationEditorType.NONE){this.setEditingState(!1);_classPrivateMethodGet(this,X,_disableAll2).call(this)}else{this.setEditingState(!0);_classPrivateMethodGet(this,z,_enableAll2).call(this);var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,D).values());try{for(i.s();!(r=i.n()).done;){r.value.updateMode(t)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"updateToolbar",value:function updateToolbar(t){t!==_classPrivateFieldGet(this,L)&&_classPrivateFieldGet(this,x).dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function updateParams(t,r){var i,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,O));try{for(a.s();!(i=a.n()).done;){i.value.updateParams(t,r)}}catch(t){a.e(t)}finally{a.f()}var o,u=_createForOfIteratorHelper(_classPrivateFieldGet(this,k));try{for(u.s();!(o=u.n()).done;){o.value.updateDefaultParams(t,r)}}catch(t){u.e(t)}finally{u.f()}}},{key:"getEditors",value:function getEditors(t){var r,i=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(a.s();!(r=a.n()).done;){var o=r.value;o.pageIndex===t&&i.push(o)}}catch(t){a.e(t)}finally{a.f()}return i}},{key:"getEditor",value:function getEditor(t){return _classPrivateFieldGet(this,P).get(t)}},{key:"addEditor",value:function addEditor(t){_classPrivateFieldGet(this,P).set(t.id,t)}},{key:"removeEditor",value:function removeEditor(t){_classPrivateFieldGet(this,P).delete(t.id);this.unselect(t)}},{key:"setActiveEditor",value:function setActiveEditor(t){if(_classPrivateFieldGet(this,A)!==t){_classPrivateFieldSet(this,A,t);t&&_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,t.propertiesToUpdate)}}},{key:"toggleSelected",value:function toggleSelected(t){if(_classPrivateFieldGet(this,O).has(t)){_classPrivateFieldGet(this,O).delete(t);t.unselect();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}else{_classPrivateFieldGet(this,O).add(t);t.select();_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,t.propertiesToUpdate);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}}},{key:"setSelected",value:function setSelected(t){var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,O));try{for(i.s();!(r=i.n()).done;){var a=r.value;a!==t&&a.unselect()}}catch(t){i.e(t)}finally{i.f()}_classPrivateFieldGet(this,O).clear();_classPrivateFieldGet(this,O).add(t);t.select();_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,t.propertiesToUpdate);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function isSelected(t){return _classPrivateFieldGet(this,O).has(t)}},{key:"unselect",value:function unselect(t){t.unselect();_classPrivateFieldGet(this,O).delete(t);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function get(){return 0!==_classPrivateFieldGet(this,O).size}},{key:"undo",value:function undo(){_classPrivateFieldGet(this,S).undo();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,S).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,K,_isEmpty2).call(this)})}},{key:"redo",value:function redo(){_classPrivateFieldGet(this,S).redo();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,S).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,K,_isEmpty2).call(this)})}},{key:"addCommands",value:function addCommands(t){_classPrivateFieldGet(this,S).add(t);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,K,_isEmpty2).call(this)})}},{key:"delete",value:function _delete(){var t=this;_classPrivateFieldGet(this,A)&&_classPrivateFieldGet(this,A).commitOrRemove();if(this.hasSelection){var r=_toConsumableArray(_classPrivateFieldGet(this,O));this.addCommands({cmd:function cmd(){var t,i=_createForOfIteratorHelper(r);try{for(i.s();!(t=i.n()).done;){t.value.remove()}}catch(t){i.e(t)}finally{i.f()}},undo:function undo(){var i,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;_classPrivateMethodGet(t,Y,_addEditorToLayer2).call(t,o)}}catch(t){a.e(t)}finally{a.f()}},mustExec:!0})}}},{key:"copy",value:function copy(){_classPrivateFieldGet(this,A)&&_classPrivateFieldGet(this,A).commitOrRemove();if(this.hasSelection){var t,r=[],i=_createForOfIteratorHelper(_classPrivateFieldGet(this,O));try{for(i.s();!(t=i.n()).done;){var a=t.value;a.isEmpty()||r.push(a)}}catch(t){i.e(t)}finally{i.f()}if(0===r.length)return;_classPrivateFieldGet(this,E).copy(r);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasEmptyClipboard:!1})}}},{key:"cut",value:function cut(){this.copy();this.delete()}},{key:"paste",value:function paste(){var t=this;if(!_classPrivateFieldGet(this,E).isEmpty()){this.unselectAll();var r=_classPrivateFieldGet(this,D).get(_classPrivateFieldGet(this,C)),i=_classPrivateFieldGet(this,E).paste().map((function(t){return r.deserialize(t)}));this.addCommands({cmd:function cmd(){var r,a=_createForOfIteratorHelper(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;_classPrivateMethodGet(t,Y,_addEditorToLayer2).call(t,o)}}catch(t){a.e(t)}finally{a.f()}_classPrivateMethodGet(t,$,_selectEditors2).call(t,i)},undo:function undo(){var t,r=_createForOfIteratorHelper(i);try{for(r.s();!(t=r.n()).done;){t.value.remove()}}catch(t){r.e(t)}finally{r.f()}},mustExec:!0})}}},{key:"selectAll",value:function selectAll(){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,O));try{for(r.s();!(t=r.n()).done;){t.value.commit()}}catch(t){r.e(t)}finally{r.f()}_classPrivateMethodGet(this,$,_selectEditors2).call(this,_classPrivateFieldGet(this,P).values())}},{key:"unselectAll",value:function unselectAll(){if(_classPrivateFieldGet(this,A))_classPrivateFieldGet(this,A).commitOrRemove();else if(0!==_classPrivateMethodGet(this,$,_selectEditors2).size){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,O));try{for(r.s();!(t=r.n()).done;){t.value.unselect()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,O).clear();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function isActive(t){return _classPrivateFieldGet(this,A)===t}},{key:"getActive",value:function getActive(){return _classPrivateFieldGet(this,A)}},{key:"getMode",value:function getMode(){return _classPrivateFieldGet(this,L)}}]);return AnnotationEditorUIManager}();r.AnnotationEditorUIManager=Q;function _addKeyboardManager2(){_classPrivateFieldGet(this,j).addEventListener("keydown",_classPrivateFieldGet(this,M))}function _removeKeyboardManager2(){_classPrivateFieldGet(this,j).removeEventListener("keydown",_classPrivateFieldGet(this,M))}function _dispatchUpdateStates2(t){var r=this;Object.entries(t).some((function(t){var i=_slicedToArray(t,2),a=i[0],o=i[1];return _classPrivateFieldGet(r,N)[a]!==o}))&&_classPrivateFieldGet(this,x).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,N),t)})}function _dispatchUpdateUI2(t){_classPrivateFieldGet(this,x).dispatch("annotationeditorparamschanged",{source:this,details:t})}function _enableAll2(){if(!_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!0);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,D).values());try{for(r.s();!(t=r.n()).done;){t.value.enable()}}catch(t){r.e(t)}finally{r.f()}}}function _disableAll2(){this.unselectAll();if(_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!1);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,D).values());try{for(r.s();!(t=r.n()).done;){t.value.disable()}}catch(t){r.e(t)}finally{r.f()}}}function _addEditorToLayer2(t){var r=_classPrivateFieldGet(this,D).get(t.pageIndex);r?r.addOrRebuild(t):this.addEditor(t)}function _isEmpty2(){if(0===_classPrivateFieldGet(this,P).size)return!0;if(1===_classPrivateFieldGet(this,P).size){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){return t.value.isEmpty()}}catch(t){r.e(t)}finally{r.f()}}return!1}function _selectEditors2(t){_classPrivateFieldGet(this,O).clear();var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!a.isEmpty()){_classPrivateFieldGet(this,O).add(a);a.select()}}}catch(t){i.e(t)}finally{i.f()}_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}_defineProperty(Q,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],Q.prototype.selectAll],[["ctrl+c","mac+meta+c"],Q.prototype.copy],[["ctrl+v","mac+meta+v"],Q.prototype.paste],[["ctrl+x","mac+meta+x"],Q.prototype.cut],[["ctrl+z","mac+meta+z"],Q.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Q.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Q.prototype.delete],[["Escape","mac+Escape"],Q.prototype.unselectAll]]))},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MurmurHash3_64=void 0;var a=i(1);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o=3285377520,u=4294901760,l=65535,c=function(){function MurmurHash3_64(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MurmurHash3_64);this.h1=t?4294967295&t:o;this.h2=t?4294967295&t:o}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(MurmurHash3_64,[{key:"update",value:function update(t){var r,i;if("string"==typeof t){r=new Uint8Array(2*t.length);i=0;for(var o=0,c=t.length;o<c;o++){var d=t.charCodeAt(o);if(d<=255)r[i++]=d;else{r[i++]=d>>>8;r[i++]=255&d}}}else{if(!(0,a.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");i=(r=t.slice()).byteLength}for(var h=i>>2,p=i-4*h,v=new Uint32Array(r.buffer,0,h),y=0,g=0,m=this.h1,b=this.h2,w=3432918353,A=461845907,P=11601,D=13715,E=0;E<h;E++)1&E?m=5*(m=(m^=y=(y=(y=(y=v[E])*w&u|y*P&l)<<15|y>>>17)*A&u|y*D&l)<<13|m>>>19)+3864292196:b=5*(b=(b^=g=(g=(g=(g=v[E])*w&u|g*P&l)<<15|g>>>17)*A&u|g*D&l)<<13|b>>>19)+3864292196;y=0;switch(p){case 3:y^=r[4*h+2]<<16;case 2:y^=r[4*h+1]<<8;case 1:y=(y=(y=(y^=r[4*h])*w&u|y*P&l)<<15|y>>>17)*A&u|y*D&l;1&h?m^=y:b^=y}this.h1=m;this.h2=b}},{key:"hexdigest",value:function hexdigest(){var t=this.h1,r=this.h2;t=3981806797*(t^=r>>>1)&u|36045*t&l;t=444984403*(t^=(r=4283543511*r&u|(2950163797*(r<<16|t>>>16)&u)>>>16)>>>1)&u|60499*t&l;var i=((t^=(r=3301882366*r&u|(3120437893*(r<<16|t>>>16)&u)>>>16)>>>1)>>>0).toString(16),a=(r>>>0).toString(16);return i.padStart(8,"0")+a.padStart(8,"0")}}]);return MurmurHash3_64}();r.MurmurHash3_64=c},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.FontLoader=r.FontFaceObject=void 0;var a=i(1);function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var o,u=function(){function BaseFontLoader(t){var r=t.docId,i=t.onUnsupportedFeature,o=t.ownerDocument,u=void 0===o?globalThis.document:o;t.styleElement;_classCallCheck(this,BaseFontLoader);this.constructor===BaseFontLoader&&(0,a.unreachable)("Cannot initialize BaseFontLoader.");this.docId=r;this._onUnsupportedFeature=i;this._document=u;this.nativeFontFaces=[];this.styleElement=null}_createClass(BaseFontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}},{key:"insertRule",value:function insertRule(t){var r=this.styleElement;if(!r){(r=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId);this._document.documentElement.getElementsByTagName("head")[0].append(r)}var i=r.sheet;i.insertRule(t,i.cssRules.length)}},{key:"clear",value:function clear(){var t,r=_createForOfIteratorHelper(this.nativeFontFaces);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._document.fonts.delete(i)}}catch(t){r.e(t)}finally{r.f()}this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}},{key:"bind",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o=this;return _regeneratorRuntime().wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:if(!t.attached&&!t.missingFile){u.next=2;break}return u.abrupt("return");case 2:t.attached=!0;if(!this.isFontLoadingAPISupported){u.next=19;break}if(!(r=t.createNativeFontFace())){u.next=18;break}this.addNativeFontFace(r);u.prev=7;u.next=10;return r.loaded;case 10:u.next=18;break;case 12:u.prev=12;u.t0=u.catch(7);this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,a.warn)("Failed to load font '".concat(r.family,"': '").concat(u.t0,"'."));t.disableFontFace=!0;throw u.t0;case 18:return u.abrupt("return");case 19:if(!(i=t.createFontFaceRule())){u.next=26;break}this.insertRule(i);if(!this.isSyncFontLoadingSupported){u.next=24;break}return u.abrupt("return");case 24:u.next=26;return new Promise((function(r){var a=o._queueLoadingCallback(r);o._prepareFontLoadEvent([i],[t],a)}));case 26:case"end":return u.stop()}}),_callee,this,[[7,12]])}))),function bind(r){return t.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function get(){var t,r=!(null===(t=this._document)||void 0===t||!t.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",r)}},{key:"isSyncFontLoadingSupported",get:function get(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function get(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,i){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]);var t;return BaseFontLoader}();r.FontLoader=o;r.FontLoader=o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(GenericFontLoader,t);var r=_createSuper(GenericFontLoader);function GenericFontLoader(t){var i;_classCallCheck(this,GenericFontLoader);(i=r.call(this,t)).loadingContext={requests:[],nextRequestId:0};i.loadTestFontId=0;return i}_createClass(GenericFontLoader,[{key:"isSyncFontLoadingSupported",get:function get(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var r=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==r?void 0:r[1])>=14&&(t=!0)}return(0,a.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){var r=this.loadingContext,i={id:"pdfjs-font-loading-".concat(r.nextRequestId++),done:!1,complete:function completeRequest(){(0,a.assert)(!i.done,"completeRequest() cannot be called twice.");i.done=!0;for(;r.requests.length>0&&r.requests[0].done;){var t=r.requests.shift();setTimeout(t.callback,0)}},callback:t};r.requests.push(i);return i}},{key:"_loadTestFont",get:function get(){return(0,a.shadow)(this,"_loadTestFont",function getLoadTestFont(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")}())}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,i){function int32(t,r){return t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|255&t.charCodeAt(r+3)}function spliceString(t,r,i,a){return t.substring(0,r)+a+t.substring(r+i)}var o,u,l=this._document.createElement("canvas");l.width=1;l.height=1;var c=l.getContext("2d"),d=0;var h="lt".concat(Date.now()).concat(this.loadTestFontId++),p=this._loadTestFont,v=1482184792,y=int32(p=spliceString(p,976,h.length,h),16);for(o=0,u=h.length-3;o<u;o+=4)y=y-v+int32(h,o)|0;o<h.length&&(y=y-v+int32(h+"XXX",o)|0);p=spliceString(p,16,4,(0,a.string32)(y));var g="url(data:font/opentype;base64,".concat(btoa(p),");"),m='@font-face {font-family:"'.concat(h,'";src:').concat(g,"}");this.insertRule(m);var b,w=[],A=_createForOfIteratorHelper(r);try{for(A.s();!(b=A.n()).done;){var P=b.value;w.push(P.loadedName)}}catch(t){A.e(t)}finally{A.f()}w.push(h);var D=this._document.createElement("div");D.style.visibility="hidden";D.style.width=D.style.height="10px";D.style.position="absolute";D.style.top=D.style.left="0px";for(var E=0,S=w;E<S.length;E++){var C=S[E],k=this._document.createElement("span");k.textContent="Hi";k.style.fontFamily=C;D.append(k)}this._document.body.append(D);!function isFontReady(t,r){if(++d>30){(0,a.warn)("Load test font never loaded.");r()}else{c.font="30px "+t;c.fillText(".",0,20);c.getImageData(0,0,1,1).data[3]>0?r():setTimeout(isFontReady.bind(null,t,r))}}(h,(function(){D.remove();i.complete()}))}}]);return GenericFontLoader}(u);var l=function(){function FontFaceObject(t,r){var i=r.isEvalSupported,a=void 0===i||i,o=r.disableFontFace,u=void 0!==o&&o,l=r.ignoreErrors,c=void 0!==l&&l,d=r.onUnsupportedFeature,h=r.fontRegistry,p=void 0===h?null:h;_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var v in t)this[v]=t[v];this.isEvalSupported=!1!==a;this.disableFontFace=!0===u;this.ignoreErrors=!0===c;this._onUnsupportedFeature=d;this.fontRegistry=p}_createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){if(!this.data||this.disableFontFace)return null;var t;if(this.cssFontInfo){var r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg"));t=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}else t=new FontFace(this.loadedName,this.data,{});this.fontRegistry&&this.fontRegistry.registerFont(this);return t}},{key:"createFontFaceRule",value:function createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t,r=(0,a.bytesToString)(this.data),i="url(data:".concat(this.mimetype,";base64,").concat(btoa(r),");");if(this.cssFontInfo){var o="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(o+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;"));t='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(o,"src:").concat(i,"}")}else t='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(i,"}");this.fontRegistry&&this.fontRegistry.registerFont(this,i);return t}},{key:"getPathGenerator",value:function getPathGenerator(t,r){if(void 0!==this.compiledGlyphs[r])return this.compiledGlyphs[r];var i;try{i=t.get(this.loadedName+"_path_"+r)}catch(t){if(!this.ignoreErrors)throw t;this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontGetPath});(0,a.warn)('getPathGenerator - ignoring character: "'.concat(t,'".'));return this.compiledGlyphs[r]=function(t,r){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){var o,u=[],l=_createForOfIteratorHelper(i);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=void 0!==c.args?c.args.join(","):"";u.push("c.",c.cmd,"(",d,");\n")}}catch(t){l.e(t)}finally{l.f()}return this.compiledGlyphs[r]=new Function("c","size",u.join(""))}return this.compiledGlyphs[r]=function(t,r){var a,o=_createForOfIteratorHelper(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;"scale"===u.cmd&&(u.args=[r,-r]);t[u.cmd].apply(t,u.args)}}catch(t){o.e(t)}finally{o.f()}}}}]);return FontFaceObject}();r.FontFaceObject=l},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.CanvasGraphics=void 0;var a=i(1),o=i(129),u=i(138),l=i(139),c=i(3);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var d=4096,h=16;function addContextCurrentTransform(t){t._transformStack&&(t._transformStack=[]);if(!t.mozCurrentTransform){t._originalSave=t.save;t._originalRestore=t.restore;t._originalRotate=t.rotate;t._originalScale=t.scale;t._originalTranslate=t.translate;t._originalTransform=t.transform;t._originalSetTransform=t.setTransform;t._originalResetTransform=t.resetTransform;t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0];t._transformStack=[];try{var r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=r.set;t._getLineWidth=r.get;Object.defineProperty(t,"lineWidth",{set:function setLineWidth(t){this._setLineWidth(1.000001*t)},get:function getLineWidth(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}});Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var t=_slicedToArray(this._transformMatrix,6),r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],l=t[5],c=r*o-i*a,d=i*a-r*o;return[o/c,i/d,a/d,r/c,(o*u-a*l)/d,(i*u-r*l)/c]}});t.save=function ctxSave(){var t=this._transformMatrix;this._transformStack.push(t);this._transformMatrix=t.slice(0,6);this._originalSave()};t.restore=function ctxRestore(){0===this._transformStack.length&&(0,a.warn)("Tried to restore a ctx when the stack was already empty.");var t=this._transformStack.pop();if(t){this._transformMatrix=t;this._originalRestore()}};t.translate=function ctxTranslate(t,r){var i=this._transformMatrix;i[4]=i[0]*t+i[2]*r+i[4];i[5]=i[1]*t+i[3]*r+i[5];this._originalTranslate(t,r)};t.scale=function ctxScale(t,r){var i=this._transformMatrix;i[0]*=t;i[1]*=t;i[2]*=r;i[3]*=r;this._originalScale(t,r)};t.transform=function ctxTransform(r,i,a,o,u,l){var c=this._transformMatrix;this._transformMatrix=[c[0]*r+c[2]*i,c[1]*r+c[3]*i,c[0]*a+c[2]*o,c[1]*a+c[3]*o,c[0]*u+c[2]*l+c[4],c[1]*u+c[3]*l+c[5]];t._originalTransform(r,i,a,o,u,l)};t.setTransform=function ctxSetTransform(r,i,a,o,u,l){this._transformMatrix=[r,i,a,o,u,l];t._originalSetTransform(r,i,a,o,u,l)};t.resetTransform=function ctxResetTransform(){this._transformMatrix=[1,0,0,1,0,0];t._originalResetTransform()};t.rotate=function ctxRotate(t){var r=Math.cos(t),i=Math.sin(t),a=this._transformMatrix;this._transformMatrix=[a[0]*r+a[2]*i,a[1]*r+a[3]*i,a[0]*-i+a[2]*r,a[1]*-i+a[3]*r,a[4],a[5]];this._originalRotate(t)}}}var p=function(){function CachedCanvases(t){_classCallCheck(this,CachedCanvases);this.canvasFactory=t;this.cache=Object.create(null)}_createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(t,r,i,a){var o;if(void 0!==this.cache[t]){o=this.cache[t];this.canvasFactory.reset(o,r,i);o.context.setTransform(1,0,0,1,0,0)}else{o=this.canvasFactory.create(r,i);this.cache[t]=o}a&&addContextCurrentTransform(o.context);return o}},{key:"delete",value:function _delete(t){delete this.cache[t]}},{key:"clear",value:function clear(){for(var t in this.cache){var r=this.cache[t];this.canvasFactory.destroy(r);delete this.cache[t]}}}]);return CachedCanvases}();function drawImageAtIntegerCoords(t,r,i,a,o,u,l,c,d,h){var p=_slicedToArray(t.mozCurrentTransform,6),v=p[0],y=p[1],g=p[2],m=p[3],b=p[4],w=p[5];if(0===y&&0===g){var A=l*v+b,P=Math.round(A),D=c*m+w,E=Math.round(D),S=(l+d)*v+b,C=Math.abs(Math.round(S)-P)||1,k=(c+h)*m+w,x=Math.abs(Math.round(k)-E)||1;t.setTransform(Math.sign(v),0,0,Math.sign(m),P,E);t.drawImage(r,i,a,o,u,0,0,C,x);t.setTransform(v,y,g,m,b,w);return[C,x]}if(0===v&&0===m){var T=c*g+b,I=Math.round(T),L=l*y+w,O=Math.round(L),M=(c+h)*g+b,R=Math.abs(Math.round(M)-I)||1,B=(l+d)*y+w,G=Math.abs(Math.round(B)-O)||1;t.setTransform(0,Math.sign(y),Math.sign(g),0,I,O);t.drawImage(r,i,a,o,u,0,0,G,R);t.setTransform(v,y,g,m,b,w);return[G,R]}t.drawImage(r,i,a,o,u,l,c,d,h);return[Math.hypot(v,y)*d,Math.hypot(g,m)*h]}var v=function(){function CanvasExtraState(t,r){_classCallCheck(this,CanvasExtraState);this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=a.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=a.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=a.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=null;this.startNewPathAndClipBox([0,0,t,r])}_createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}},{key:"updatePathMinMax",value:function updatePathMinMax(t,r,i){var o=_slicedToArray(a.Util.applyTransform([r,i],t),2);r=o[0];i=o[1];this.minX=Math.min(this.minX,r);this.minY=Math.min(this.minY,i);this.maxX=Math.max(this.maxX,r);this.maxY=Math.max(this.maxY,i)}},{key:"updateRectMinMax",value:function updateRectMinMax(t,r){var i=a.Util.applyTransform(r,t),o=a.Util.applyTransform(r.slice(2),t);this.minX=Math.min(this.minX,i[0],o[0]);this.minY=Math.min(this.minY,i[1],o[1]);this.maxX=Math.max(this.maxX,i[0],o[0]);this.maxY=Math.max(this.maxY,i[1],o[1])}},{key:"updateScalingPathMinMax",value:function updateScalingPathMinMax(t,r){a.Util.scaleMinMax(t,r);this.minX=Math.min(this.minX,r[0]);this.maxX=Math.max(this.maxX,r[1]);this.minY=Math.min(this.minY,r[2]);this.maxY=Math.max(this.maxY,r[3])}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(t,r,i,o,u,l,c,d,h,p){var v=a.Util.bezierBoundingBox(r,i,o,u,l,c,d,h);if(p){p[0]=Math.min(p[0],v[0],v[2]);p[1]=Math.max(p[1],v[0],v[2]);p[2]=Math.min(p[2],v[1],v[3]);p[3]=Math.max(p[3],v[1],v[3])}else this.updateRectMinMax(t,v)}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.PathType.FILL,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.minX,this.minY,this.maxX,this.maxY];if(t===u.PathType.STROKE){r||(0,a.unreachable)("Stroke bounding box must include transform.");var o=a.Util.singularValueDecompose2dScale(r),l=o[0]*this.lineWidth/2,c=o[1]*this.lineWidth/2;i[0]-=l;i[1]-=c;i[2]+=l;i[3]+=c}return i}},{key:"updateClipFromPath",value:function updateClipFromPath(){var t=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function isEmptyClip(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(t){this.clipBox=t;this.minX=1/0;this.minY=1/0;this.maxX=0;this.maxY=0}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.PathType.FILL,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.Util.intersect(this.clipBox,this.getPathBoundingBox(t,r))}}]);return CanvasExtraState}();function putBinaryImageData(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&r instanceof ImageData)t.putImageData(r,0,0);else{var o,u,l,c,d,p,v,y,g,m=r.height,b=r.width,w=m%h,A=(m-w)/h,P=0===w?A:A+1,D=t.createImageData(b,h),E=0,S=r.data,C=D.data;if(i)switch(i.length){case 1:p=i[0];v=i[0];y=i[0];g=i[0];break;case 4:p=i[0];v=i[1];y=i[2];g=i[3]}if(r.kind===a.ImageKind.GRAYSCALE_1BPP){var k=S.byteLength,x=new Uint32Array(C.buffer,0,C.byteLength>>2),T=x.length,I=b+7>>3,L=4294967295,O=a.FeatureTest.isLittleEndian?4278190080:255;if(g&&255===g[0]&&0===g[255]){var M=[O,L];L=M[0];O=M[1]}for(u=0;u<P;u++){c=u<A?h:w;o=0;for(l=0;l<c;l++){for(var R=k-E,B=0,G=R>I?b:8*R-7,N=-8&G,j=0,V=0;B<N;B+=8){V=S[E++];x[o++]=128&V?L:O;x[o++]=64&V?L:O;x[o++]=32&V?L:O;x[o++]=16&V?L:O;x[o++]=8&V?L:O;x[o++]=4&V?L:O;x[o++]=2&V?L:O;x[o++]=1&V?L:O}for(;B<G;B++){if(0===j){V=S[E++];j=128}x[o++]=V&j?L:O;j>>=1}}for(;o<T;)x[o++]=0;t.putImageData(D,0,u*h)}}else if(r.kind===a.ImageKind.RGBA_32BPP){var W=!!(p||v||y);l=0;d=b*h*4;for(u=0;u<A;u++){C.set(S.subarray(E,E+d));E+=d;if(W)for(var U=0;U<d;U+=4){p&&(C[U+0]=p[C[U+0]]);v&&(C[U+1]=v[C[U+1]]);y&&(C[U+2]=y[C[U+2]])}t.putImageData(D,0,l);l+=h}if(u<P){d=b*w*4;C.set(S.subarray(E,E+d));if(W)for(var H=0;H<d;H+=4){p&&(C[H+0]=p[C[H+0]]);v&&(C[H+1]=v[C[H+1]]);y&&(C[H+2]=y[C[H+2]])}t.putImageData(D,0,l)}}else{if(r.kind!==a.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(r.kind));var z=!!(p||v||y);d=b*(c=h);for(u=0;u<P;u++){u>=A&&(d=b*(c=w));o=0;for(l=d;l--;){C[o++]=S[E++];C[o++]=S[E++];C[o++]=S[E++];C[o++]=255}if(z)for(var X=0;X<o;X+=4){p&&(C[X+0]=p[C[X+0]]);v&&(C[X+1]=v[C[X+1]]);y&&(C[X+2]=y[C[X+2]])}t.putImageData(D,0,u*h)}}}}function putBinaryImageMask(t,r){if(r.bitmap)t.drawImage(r.bitmap,0,0);else for(var i=r.height,a=r.width,o=i%h,u=(i-o)/h,c=0===o?u:u+1,d=t.createImageData(a,h),p=0,v=r.data,y=d.data,g=0;g<c;g++){var m=g<u?h:o;p=(0,l.applyMaskImageData)({src:v,srcPos:p,dest:y,width:a,height:m}).srcPos;t.putImageData(d,0,g*h)}}function copyCtxState(t,r){for(var i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],a=0,o=i.length;a<o;a++){var u=i[a];void 0!==t[u]&&(r[u]=t[u])}if(void 0!==t.setLineDash){r.setLineDash(t.getLineDash());r.lineDashOffset=t.lineDashOffset}}function resetCtxToDefault(t,r){t.strokeStyle=t.fillStyle=r||"#000000";t.fillRule="nonzero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="butt";t.lineJoin="miter";t.miterLimit=10;t.globalCompositeOperation="source-over";t.font="10px sans-serif";if(void 0!==t.setLineDash){t.setLineDash([]);t.lineDashOffset=0}}function composeSMaskBackdrop(t,r,i,a){for(var o=t.length,u=3;u<o;u+=4){var l=t[u];if(0===l){t[u-3]=r;t[u-2]=i;t[u-1]=a}else if(l<255){var c=255-l;t[u-3]=t[u-3]*l+r*c>>8;t[u-2]=t[u-2]*l+i*c>>8;t[u-1]=t[u-1]*l+a*c>>8}}}function composeSMaskAlpha(t,r,i){for(var a=t.length,o=3;o<a;o+=4){var u=i?i[t[o]]:t[o];r[o]=r[o]*u*.00392156862745098|0}}function composeSMaskLuminosity(t,r,i){for(var a=t.length,o=3;o<a;o+=4){var u=77*t[o-3]+152*t[o-2]+28*t[o-1];r[o]=i?r[o]*i[u>>8]>>8:r[o]*u>>16}}function composeSMask(t,r,i,a){var o=a[0],u=a[1],l=a[2]-o,c=a[3]-u;if(0!==l&&0!==c){!function genericComposeSMask(t,r,i,a,o,u,l,c,d,h,p){var v,y=!!u,g=y?u[0]:0,m=y?u[1]:0,b=y?u[2]:0;v="Luminosity"===o?composeSMaskLuminosity:composeSMaskAlpha;for(var w=Math.min(a,Math.ceil(1048576/i)),A=0;A<a;A+=w){var P=Math.min(w,a-A),D=t.getImageData(c-h,A+(d-p),i,P),E=r.getImageData(c,A+d,i,P);y&&composeSMaskBackdrop(D.data,g,m,b);v(D.data,E.data,l);r.putImageData(E,c,A+d)}}(r.context,i,l,c,r.subtype,r.backdrop,r.transferMap,o,u,r.offsetX,r.offsetY);t.save();t.globalAlpha=1;t.globalCompositeOperation="source-over";t.setTransform(1,0,0,1,0,0);t.drawImage(i.canvas,0,0);t.restore()}}function getImageSmoothingEnabled(t,r){var i=a.Util.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]);i[1]=Math.fround(i[1]);var u=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==r?r:i[0]<=u||i[1]<=u}var y=["butt","round","square"],g=["miter","round","bevel"],m={},b={},w=new WeakSet,A=function(){function CanvasGraphics(t,r,i,a,o,u,l,c){_classCallCheck(this,CanvasGraphics);_classPrivateMethodInitSpec(this,w);this.ctx=t;this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=r;this.objs=i;this.canvasFactory=a;this.imageLayer=o;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=!0;this.markedContentStack=[];this.optionalContentConfig=u;this.cachedCanvases=new p(this.canvasFactory);this.cachedPatterns=new Map;this.annotationCanvasMap=l;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.backgroundColor=(null==c?void 0:c.background)||null;this.foregroundColor=(null==c?void 0:c.foreground)||null;t&&addContextCurrentTransform(t);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map}_createClass(CanvasGraphics,[{key:"getObject",value:function getObject(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):r}},{key:"beginDrawing",value:function beginDrawing(t){var r=t.transform,i=t.viewport,a=t.transparency,u=void 0!==a&&a,l=t.background,c=void 0===l?null:l,d=this.ctx.canvas.width,h=this.ctx.canvas.height,p=c||"#ffffff";this.ctx.save();if(this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;var v=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;var y,g,m=this.backgroundColor=this.ctx.fillStyle;this.ctx.fillStyle=p;y="string"==typeof(g=this.ctx.fillStyle)&&/^#[0-9A-Fa-f]{6}$/.test(g);if("#000000"===v&&"#ffffff"===m||v===m||!y)this.foregroundColor=this.backgroundColor=null;else{var b=_slicedToArray((0,o.getRGB)(g),3),w=b[0],A=b[1],P=b[2],D=function newComp(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},E=Math.round(.2126*D(w)+.7152*D(A)+.0722*D(P));this.selectColor=function(t,r,i){var a=.2126*D(t)+.7152*D(r)+.0722*D(i);return Math.round(a)===E?m:v}}}this.ctx.fillStyle=this.backgroundColor||p;this.ctx.fillRect(0,0,d,h);this.ctx.restore();if(u){var S=this.cachedCanvases.getCanvas("transparent",d,h,!0);this.compositeCtx=this.ctx;this.transparentCanvas=S.canvas;this.ctx=S.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save();resetCtxToDefault(this.ctx,this.foregroundColor);if(r){this.ctx.transform.apply(this.ctx,r);this.outputScaleX=r[0];this.outputScaleY=r[0]}this.ctx.transform.apply(this.ctx,i.transform);this.viewportScale=i.scale;this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function executeOperatorList(t,r,i,o){var u=t.argsArray,l=t.fnArray,c=r||0,d=u.length;if(d===c)return c;for(var h,p=d-c>10&&"function"==typeof i,v=p?Date.now()+15:0,y=0,g=this.commonObjs,m=this.objs;;){if(void 0!==o&&c===o.nextBreakPoint){o.breakIt(c,i);return c}if((h=l[c])!==a.OPS.dependency)this[h].apply(this,u[c]);else{var b,w=_createForOfIteratorHelper(u[c]);try{for(w.s();!(b=w.n()).done;){var A=b.value,P=A.startsWith("g_")?g:m;if(!P.has(A)){P.get(A,i);return c}}}catch(t){w.e(t)}finally{w.f()}}if(++c===d)return c;if(p&&++y>10){if(Date.now()>v){i();return c}y=0}}}},{key:"endDrawing",value:function endDrawing(){_classPrivateMethodGet(this,w,_restoreInitialState2).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();var t,r=_createForOfIteratorHelper(this._cachedBitmapsMap.values());try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o=_createForOfIteratorHelper(a.values());try{for(o.s();!(i=o.n()).done;){var u=i.value;"undefined"!=typeof HTMLCanvasElement&&u instanceof HTMLCanvasElement&&(u.width=u.height=0)}}catch(t){o.e(t)}finally{o.f()}a.clear()}}catch(t){r.e(t)}finally{r.f()}this._cachedBitmapsMap.clear();this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function _scaleImage(t,r){for(var i,a,o=t.width,u=t.height,l=Math.max(Math.hypot(r[0],r[1]),1),c=Math.max(Math.hypot(r[2],r[3]),1),d=o,h=u,p="prescale1";l>2&&d>1||c>2&&h>1;){var v=d,y=h;l>2&&d>1&&(l/=d/(v=Math.ceil(d/2)));c>2&&h>1&&(c/=h/(y=Math.ceil(h/2)));(a=(i=this.cachedCanvases.getCanvas(p,v,y,!1)).context).clearRect(0,0,v,y);a.drawImage(t,0,0,d,h,0,0,v,y);t=i.canvas;d=v;h=y;p="prescale1"===p?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:h}}},{key:"_createMaskCanvas",value:function _createMaskCanvas(t){var r,i,o,l,c=this.ctx,d=t.width,h=t.height,p=this.current.fillColor,v=this.current.patternFill,y=c.mozCurrentTransform;if((t.bitmap||t.data)&&t.count>1){var g=t.bitmap||t.data.buffer,m=y.slice(0,4);i=JSON.stringify(v?m:[m,p]);if(!(r=this._cachedBitmapsMap.get(g))){r=new Map;this._cachedBitmapsMap.set(g,r)}var b=r.get(i);if(b&&!v){return{canvas:b,offsetX:Math.round(Math.min(y[0],y[2])+y[4]),offsetY:Math.round(Math.min(y[1],y[3])+y[5])}}o=b}o||putBinaryImageMask((l=this.cachedCanvases.getCanvas("maskCanvas",d,h,!1)).context,t);var w=a.Util.transform(y,[1/d,0,0,-1/h,0,0]);w=a.Util.transform(w,[1,0,0,1,0,-h]);var A=a.Util.applyTransform([0,0],w),P=a.Util.applyTransform([d,h],w),D=a.Util.normalizeRect([A[0],A[1],P[0],P[1]]),E=Math.round(D[2]-D[0])||1,S=Math.round(D[3]-D[1])||1,C=this.cachedCanvases.getCanvas("fillCanvas",E,S,!0),k=C.context,x=Math.min(A[0],P[0]),T=Math.min(A[1],P[1]);k.translate(-x,-T);k.transform.apply(k,w);if(!o){o=(o=this._scaleImage(l.canvas,k.mozCurrentTransformInverse)).img;r&&v&&r.set(i,o)}k.imageSmoothingEnabled=getImageSmoothingEnabled(k.mozCurrentTransform,t.interpolate);drawImageAtIntegerCoords(k,o,0,0,o.width,o.height,0,0,d,h);k.globalCompositeOperation="source-in";var I=a.Util.transform(k.mozCurrentTransformInverse,[1,0,0,1,-x,-T]);k.fillStyle=v?p.getPattern(c,this,I,u.PathType.FILL):p;k.fillRect(0,0,d,h);if(r&&!v){this.cachedCanvases.delete("fillCanvas");r.set(i,C.canvas)}return{canvas:C.canvas,offsetX:Math.round(x),offsetY:Math.round(T)}}},{key:"setLineWidth",value:function setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null);this.current.lineWidth=t;this.ctx.lineWidth=t}},{key:"setLineCap",value:function setLineCap(t){this.ctx.lineCap=y[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.ctx.lineJoin=g[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.ctx.miterLimit=t}},{key:"setDash",value:function setDash(t,r){var i=this.ctx;if(void 0!==i.setLineDash){i.setLineDash(t);i.lineDashOffset=r}}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){for(var r=0,i=t.length;r<i;r++){var a=t[r],o=a[0],u=a[1];switch(o){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=a[1];break;case"ca":this.current.fillAlpha=a[1];this.ctx.globalAlpha=a[1];break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.current.transferMaps=u}}}},{key:"inSMaskMode",get:function get(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function checkSMaskState(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,r,!0);this.suspendedCtx=this.ctx;this.ctx=a.context;var o=this.ctx;o.setTransform.apply(o,this.suspendedCtx.mozCurrentTransform);copyCtxState(this.suspendedCtx,o);!function mirrorContextOperations(t,r){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save;t.__originalRestore=t.restore;t.__originalRotate=t.rotate;t.__originalScale=t.scale;t.__originalTranslate=t.translate;t.__originalTransform=t.transform;t.__originalSetTransform=t.setTransform;t.__originalResetTransform=t.resetTransform;t.__originalClip=t.clip;t.__originalMoveTo=t.moveTo;t.__originalLineTo=t.lineTo;t.__originalBezierCurveTo=t.bezierCurveTo;t.__originalRect=t.rect;t.__originalClosePath=t.closePath;t.__originalBeginPath=t.beginPath;t._removeMirroring=function(){t.save=t.__originalSave;t.restore=t.__originalRestore;t.rotate=t.__originalRotate;t.scale=t.__originalScale;t.translate=t.__originalTranslate;t.transform=t.__originalTransform;t.setTransform=t.__originalSetTransform;t.resetTransform=t.__originalResetTransform;t.clip=t.__originalClip;t.moveTo=t.__originalMoveTo;t.lineTo=t.__originalLineTo;t.bezierCurveTo=t.__originalBezierCurveTo;t.rect=t.__originalRect;t.closePath=t.__originalClosePath;t.beginPath=t.__originalBeginPath;delete t._removeMirroring};t.save=function ctxSave(){r.save();this.__originalSave()};t.restore=function ctxRestore(){r.restore();this.__originalRestore()};t.translate=function ctxTranslate(t,i){r.translate(t,i);this.__originalTranslate(t,i)};t.scale=function ctxScale(t,i){r.scale(t,i);this.__originalScale(t,i)};t.transform=function ctxTransform(t,i,a,o,u,l){r.transform(t,i,a,o,u,l);this.__originalTransform(t,i,a,o,u,l)};t.setTransform=function ctxSetTransform(t,i,a,o,u,l){r.setTransform(t,i,a,o,u,l);this.__originalSetTransform(t,i,a,o,u,l)};t.resetTransform=function ctxResetTransform(){r.resetTransform();this.__originalResetTransform()};t.rotate=function ctxRotate(t){r.rotate(t);this.__originalRotate(t)};t.clip=function ctxRotate(t){r.clip(t);this.__originalClip(t)};t.moveTo=function(t,i){r.moveTo(t,i);this.__originalMoveTo(t,i)};t.lineTo=function(t,i){r.lineTo(t,i);this.__originalLineTo(t,i)};t.bezierCurveTo=function(t,i,a,o,u,l){r.bezierCurveTo(t,i,a,o,u,l);this.__originalBezierCurveTo(t,i,a,o,u,l)};t.rect=function(t,i,a,o){r.rect(t,i,a,o);this.__originalRect(t,i,a,o)};t.closePath=function(){r.closePath();this.__originalClosePath()};t.beginPath=function(){r.beginPath();this.__originalBeginPath()}}(o,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}},{key:"compose",value:function compose(t){if(this.current.activeSMask){if(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.ceil(t[2]);t[3]=Math.ceil(t[3])}else t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var r=this.current.activeSMask;composeSMask(this.suspendedCtx,r,this.ctx,t);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore()}}},{key:"save",value:function save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save()}else this.ctx.save();var t=this.current;this.stateStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode();if(0!==this.stateStack.length){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx)}else this.ctx.restore();this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}}},{key:"transform",value:function transform(t,r,i,a,o,u){this.ctx.transform(t,r,i,a,o,u);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function constructPath(t,r,i){for(var o,u,l=this.ctx,c=this.current,d=c.x,h=c.y,p=l.mozCurrentTransform,v=0===p[0]&&0===p[3]||0===p[1]&&0===p[2],y=v?i.slice(0):null,g=0,m=0,b=t.length;g<b;g++)switch(0|t[g]){case a.OPS.rectangle:d=r[m++];h=r[m++];var w=r[m++],A=r[m++],P=d+w,D=h+A;l.moveTo(d,h);if(0===w||0===A)l.lineTo(P,D);else{l.lineTo(P,h);l.lineTo(P,D);l.lineTo(d,D)}v||c.updateRectMinMax(p,[d,h,P,D]);l.closePath();break;case a.OPS.moveTo:d=r[m++];h=r[m++];l.moveTo(d,h);v||c.updatePathMinMax(p,d,h);break;case a.OPS.lineTo:d=r[m++];h=r[m++];l.lineTo(d,h);v||c.updatePathMinMax(p,d,h);break;case a.OPS.curveTo:o=d;u=h;d=r[m+4];h=r[m+5];l.bezierCurveTo(r[m],r[m+1],r[m+2],r[m+3],d,h);c.updateCurvePathMinMax(p,o,u,r[m],r[m+1],r[m+2],r[m+3],d,h,y);m+=6;break;case a.OPS.curveTo2:o=d;u=h;l.bezierCurveTo(d,h,r[m],r[m+1],r[m+2],r[m+3]);c.updateCurvePathMinMax(p,o,u,d,h,r[m],r[m+1],r[m+2],r[m+3],y);d=r[m+2];h=r[m+3];m+=4;break;case a.OPS.curveTo3:o=d;u=h;d=r[m+2];h=r[m+3];l.bezierCurveTo(r[m],r[m+1],d,h,d,h);c.updateCurvePathMinMax(p,o,u,r[m],r[m+1],d,h,d,h,y);m+=4;break;case a.OPS.closePath:l.closePath()}v&&c.updateScalingPathMinMax(p,y);c.setCurrentPoint(d,h)}},{key:"closePath",value:function closePath(){this.ctx.closePath()}},{key:"stroke",value:function stroke(t){t=void 0===t||t;var r=this.ctx,i=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"===_typeof(i)&&null!=i&&i.getPattern){r.save();r.strokeStyle=i.getPattern(r,this,r.mozCurrentTransformInverse,u.PathType.STROKE);this.rescaleAndStroke(!1);r.restore()}else this.rescaleAndStroke(!0);t&&this.consumePath(this.current.getClippedPathBoundingBox());r.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"fill",value:function fill(t){t=void 0===t||t;var r=this.ctx,i=this.current.fillColor,a=!1;if(this.current.patternFill){r.save();r.fillStyle=i.getPattern(r,this,r.mozCurrentTransformInverse,u.PathType.FILL);a=!0}var o=this.current.getClippedPathBoundingBox();if(this.contentVisible&&null!==o)if(this.pendingEOFill){r.fill("evenodd");this.pendingEOFill=!1}else r.fill();a&&r.restore();t&&this.consumePath(o)}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=!0;this.fill()}},{key:"fillStroke",value:function fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=!0;this.closePath();this.fillStroke()}},{key:"endPath",value:function endPath(){this.consumePath()}},{key:"clip",value:function clip(){this.pendingClip=m}},{key:"eoClip",value:function eoClip(){this.pendingClip=b}},{key:"beginText",value:function beginText(){this.current.textMatrix=a.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}},{key:"endText",value:function endText(){var t=this.pendingTextPaths,r=this.ctx;if(void 0!==t){r.save();r.beginPath();var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.setTransform.apply(r,o.transform);r.translate(o.x,o.y);o.addToPath(r,o.fontSize)}}catch(t){a.e(t)}finally{a.f()}r.restore();r.clip();r.beginPath();delete this.pendingTextPaths}else r.beginPath()}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setFont",value:function setFont(t,r){var i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error("Can't find font for ".concat(t));o.fontMatrix=i.fontMatrix||a.FONT_IDENTITY_MATRIX;0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||(0,a.warn)("Invalid font matrix for font "+t);if(r<0){r=-r;o.fontDirection=-1}else o.fontDirection=1;this.current.font=i;this.current.fontSize=r;if(!i.isType3Font){var u=i.loadedName||"sans-serif",l="normal";i.black?l="900":i.bold&&(l="bold");var c=i.italic?"italic":"normal",d='"'.concat(u,'", ').concat(i.fallbackName),h=r;r<16?h=16:r>100&&(h=100);this.current.fontSizeScale=r/h;this.ctx.font="".concat(c," ").concat(l," ").concat(h,"px ").concat(d)}}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"moveText",value:function moveText(t,r){this.current.x=this.current.lineX+=t;this.current.y=this.current.lineY+=r}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,i,a,o,u){this.current.textMatrix=[t,r,i,a,o,u];this.current.textMatrixScale=Math.hypot(t,r);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function paintChar(t,r,i,o){var u,l=this.ctx,c=this.current,d=c.font,h=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,v=h&a.TextRenderingMode.FILL_STROKE_MASK,y=!!(h&a.TextRenderingMode.ADD_TO_PATH_FLAG),g=c.patternFill&&!d.missingFile;(d.disableFontFace||y||g)&&(u=d.getPathGenerator(this.commonObjs,t));if(d.disableFontFace||g){l.save();l.translate(r,i);l.beginPath();u(l,p);o&&l.setTransform.apply(l,o);v!==a.TextRenderingMode.FILL&&v!==a.TextRenderingMode.FILL_STROKE||l.fill();v!==a.TextRenderingMode.STROKE&&v!==a.TextRenderingMode.FILL_STROKE||l.stroke();l.restore()}else{v!==a.TextRenderingMode.FILL&&v!==a.TextRenderingMode.FILL_STROKE||l.fillText(t,r,i);v!==a.TextRenderingMode.STROKE&&v!==a.TextRenderingMode.FILL_STROKE||l.strokeText(t,r,i)}if(y){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:l.mozCurrentTransform,x:r,y:i,fontSize:p,addToPath:u})}}},{key:"isFontSubpixelAAEnabled",get:function get(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1).context;t.scale(1.5,1);t.fillText("I",0,10);for(var r=t.getImageData(0,0,10,10).data,i=!1,o=3;o<r.length;o+=4)if(r[o]>0&&r[o]<255){i=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",i)}},{key:"showText",value:function showText(t){var r=this.current,i=r.font;if(i.isType3Font)return this.showType3Text(t);var o=r.fontSize;if(0!==o){var l,c=this.ctx,d=r.fontSizeScale,h=r.charSpacing,p=r.wordSpacing,v=r.fontDirection,y=r.textHScale*v,g=t.length,m=i.vertical,b=m?1:-1,w=i.defaultVMetrics,A=o*r.fontMatrix[0],P=r.textRenderingMode===a.TextRenderingMode.FILL&&!i.disableFontFace&&!r.patternFill;c.save();c.transform.apply(c,r.textMatrix);c.translate(r.x,r.y+r.textRise);v>0?c.scale(y,-1):c.scale(y,1);if(r.patternFill){c.save();var D=r.fillColor.getPattern(c,this,c.mozCurrentTransformInverse,u.PathType.FILL);l=c.mozCurrentTransform;c.restore();c.fillStyle=D}var E=r.lineWidth,S=r.textMatrixScale;if(0===S||0===E){var C=r.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;C!==a.TextRenderingMode.STROKE&&C!==a.TextRenderingMode.FILL_STROKE||(E=this.getSinglePixelWidth())}else E/=S;if(1!==d){c.scale(d,d);E/=d}c.lineWidth=E;var k,x=0;for(k=0;k<g;++k){var T=t[k];if("number"!=typeof T){var I=!1,L=(T.isSpace?p:0)+h,O=T.fontChar,M=T.accent,R=void 0,B=void 0,G=T.width;if(m){var N=T.vmetric||w,j=-(T.vmetric?N[1]:.5*G)*A,V=N[2]*A;G=N?-N[0]:G;R=j/d;B=(x+V)/d}else{R=x/d;B=0}if(i.remeasure&&G>0){var W=1e3*c.measureText(O).width/o*d;if(G<W&&this.isFontSubpixelAAEnabled){var U=G/W;I=!0;c.save();c.scale(U,1);R/=U}else G!==W&&(R+=(G-W)/2e3*o/d)}if(this.contentVisible&&(T.isInFont||i.missingFile))if(P&&!M)c.fillText(O,R,B);else{this.paintChar(O,R,B,l);if(M){var H=R+o*M.offset.x/d,z=B-o*M.offset.y/d;this.paintChar(M.fontChar,H,z,l)}}x+=m?G*A-L*v:G*A+L*v;I&&c.restore()}else x+=b*T*o/1e3}m?r.y-=x:r.x+=x*y;c.restore();this.compose()}}},{key:"showType3Text",value:function showType3Text(t){var r,i,o,u,l=this.ctx,c=this.current,d=c.font,h=c.fontSize,p=c.fontDirection,v=d.vertical?1:-1,y=c.charSpacing,g=c.wordSpacing,m=c.textHScale*p,b=c.fontMatrix||a.FONT_IDENTITY_MATRIX,w=t.length;if(!(c.textRenderingMode===a.TextRenderingMode.INVISIBLE)&&0!==h){this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;l.save();l.transform.apply(l,c.textMatrix);l.translate(c.x,c.y);l.scale(m,p);for(r=0;r<w;++r)if("number"!=typeof(i=t[r])){var A=(i.isSpace?g:0)+y,P=d.charProcOperatorList[i.operatorListId];if(P){if(this.contentVisible){this.processingType3=i;this.save();l.scale(h,h);l.transform.apply(l,b);this.executeOperatorList(P);this.restore()}o=a.Util.applyTransform([i.width,0],b)[0]*h+A;l.translate(o,0);c.x+=o*m}else(0,a.warn)('Type3 character "'.concat(i.operatorListId,'" is not available.'))}else{u=v*i*h/1e3;this.ctx.translate(u,0);c.x+=u*m}l.restore();this.processingType3=null}}},{key:"setCharWidth",value:function setCharWidth(t,r){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(t,r,i,a,o,u){this.ctx.rect(i,a,o-i,u-a);this.ctx.clip();this.endPath()}},{key:"getColorN_Pattern",value:function getColorN_Pattern(t){var r,i=this;if("TilingPattern"===t[0]){var a=t[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),l={createCanvasGraphics:function createCanvasGraphics(t){return new CanvasGraphics(t,i.commonObjs,i.objs,i.canvasFactory)}};r=new u.TilingPattern(t,a,this.ctx,l,o)}else r=this._getPattern(t[1],t[2]);return r}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,i){var o,u=(null===(o=this.selectColor)||void 0===o?void 0:o.call(this,t,r,i))||a.Util.makeHexColor(t,r,i);this.ctx.strokeStyle=u;this.current.strokeColor=u}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,i){var o,u=(null===(o=this.selectColor)||void 0===o?void 0:o.call(this,t,r,i))||a.Util.makeHexColor(t,r,i);this.ctx.fillStyle=u;this.current.fillColor=u;this.current.patternFill=!1}},{key:"_getPattern",value:function _getPattern(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.cachedPatterns.has(t))r=this.cachedPatterns.get(t);else{r=(0,u.getShadingPattern)(this.objs.get(t));this.cachedPatterns.set(t,r)}i&&(r.matrix=i);return r}},{key:"shadingFill",value:function shadingFill(t){if(this.contentVisible){var r=this.ctx;this.save();var i=this._getPattern(t);r.fillStyle=i.getPattern(r,this,r.mozCurrentTransformInverse,u.PathType.SHADING);var o=r.mozCurrentTransformInverse;if(o){var l=r.canvas,c=l.width,d=l.height,h=a.Util.applyTransform([0,0],o),p=a.Util.applyTransform([0,d],o),v=a.Util.applyTransform([c,0],o),y=a.Util.applyTransform([c,d],o),g=Math.min(h[0],p[0],v[0],y[0]),m=Math.min(h[1],p[1],v[1],y[1]),b=Math.max(h[0],p[0],v[0],y[0]),w=Math.max(h[1],p[1],v[1],y[1]);this.ctx.fillRect(g,m,b-g,w-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox());this.restore()}}},{key:"beginInlineImage",value:function beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function beginImageData(){(0,a.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(t)&&6===t.length&&this.transform.apply(this,t);this.baseTransform=this.ctx.mozCurrentTransform;if(r){var i=r[2]-r[0],a=r[3]-r[1];this.ctx.rect(r[0],r[1],i,a);this.current.updateRectMinMax(this.ctx.mozCurrentTransform,r);this.clip();this.endPath()}}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}}},{key:"beginGroup",value:function beginGroup(t){if(this.contentVisible){this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}var r=this.ctx;t.isolated||(0,a.info)("TODO: Support non-isolated groups.");t.knockout&&(0,a.warn)("Knockout groups not supported.");var i=r.mozCurrentTransform;t.matrix&&r.transform.apply(r,t.matrix);if(!t.bbox)throw new Error("Bounding box is required.");var o=a.Util.getAxialAlignedBoundingBox(t.bbox,r.mozCurrentTransform),u=[0,0,r.canvas.width,r.canvas.height];o=a.Util.intersect(o,u)||[0,0,0,0];var l=Math.floor(o[0]),c=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-l,1),p=Math.max(Math.ceil(o[3])-c,1),v=1,y=1;if(h>d){v=h/d;h=d}if(p>d){y=p/d;p=d}this.current.startNewPathAndClipBox([0,0,h,p]);var g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);var m=this.cachedCanvases.getCanvas(g,h,p,!0),b=m.context;b.scale(1/v,1/y);b.translate(-l,-c);b.transform.apply(b,i);if(t.smask)this.smaskStack.push({canvas:m.canvas,context:b,offsetX:l,offsetY:c,scaleX:v,scaleY:y,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null});else{r.setTransform(1,0,0,1,0,0);r.translate(l,c);r.scale(v,y);r.save()}copyCtxState(r,b);this.ctx=b;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(r);this.groupLevel++}}},{key:"endGroup",value:function endGroup(t){if(this.contentVisible){this.groupLevel--;var r=this.ctx,i=this.groupStack.pop();this.ctx=i;this.ctx.imageSmoothingEnabled=!1;if(t.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{this.ctx.restore();var o=this.ctx.mozCurrentTransform;this.restore();this.ctx.save();this.ctx.setTransform.apply(this.ctx,o);var u=a.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o);this.ctx.drawImage(r.canvas,0,0);this.ctx.restore();this.compose(u)}}}},{key:"beginAnnotation",value:function beginAnnotation(t,r,i,o,u){_classPrivateMethodGet(this,w,_restoreInitialState2).call(this);resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.save();this.save();this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform);if(Array.isArray(r)&&4===r.length){var l=r[2]-r[0],c=r[3]-r[1];if(u&&this.annotationCanvasMap){(i=i.slice())[4]-=r[0];i[5]-=r[1];(r=r.slice())[0]=r[1]=0;r[2]=l;r[3]=c;var d=_slicedToArray(a.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),2),h=d[0],p=d[1],y=this.viewportScale,g=Math.ceil(l*this.outputScaleX*y),m=Math.ceil(c*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(g,m);var b=this.annotationCanvas,A=b.canvas,P=b.context;this.annotationCanvasMap.set(t,A);this.annotationCanvas.savedCtx=this.ctx;this.ctx=P;addContextCurrentTransform(this.ctx);this.ctx.setTransform(h,0,0,-p,0,c*p);resetCtxToDefault(this.ctx,this.foregroundColor)}else{resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.rect(r[0],r[1],l,c);this.ctx.clip();this.endPath()}}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,i);this.transform.apply(this,o)}},{key:"endAnnotation",value:function endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){if(this.contentVisible){var r=t.count;(t=this.getObject(t.data,t)).count=r;var i=this.ctx,a=this.processingType3;if(a){void 0===a.compiled&&(a.compiled=function compileType3Glyph(t){var r=t.width,i=t.height;if(r>1e3||i>1e3)return null;var a,o,u,l,d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=r+1,p=new Uint8Array(h*(i+1)),v=r+7&-8,y=new Uint8Array(v*i),g=0,m=_createForOfIteratorHelper(t.data);try{for(m.s();!(l=m.n()).done;)for(var b=l.value,w=128;w>0;){y[g++]=b&w?0:255;w>>=1}}catch(t){m.e(t)}finally{m.f()}var A=0;if(0!==y[g=0]){p[0]=1;++A}for(o=1;o<r;o++){if(y[g]!==y[g+1]){p[o]=y[g]?2:1;++A}g++}if(0!==y[g]){p[o]=2;++A}for(a=1;a<i;a++){u=a*h;if(y[(g=a*v)-v]!==y[g]){p[u]=y[g]?1:8;++A}var P=(y[g]?4:0)+(y[g-v]?8:0);for(o=1;o<r;o++){if(d[P=(P>>2)+(y[g+1]?4:0)+(y[g-v+1]?8:0)]){p[u+o]=d[P];++A}g++}if(y[g-v]!==y[g]){p[u+o]=y[g]?2:4;++A}if(A>1e3)return null}u=a*h;if(0!==y[g=v*(i-1)]){p[u]=8;++A}for(o=1;o<r;o++){if(y[g]!==y[g+1]){p[u+o]=y[g]?4:8;++A}g++}if(0!==y[g]){p[u+o]=4;++A}if(A>1e3)return null;var D,E,S,C=new Int32Array([0,h,-1,0,-h,0,0,0,1]);c.isNodeJS?E=[]:D=new Path2D;for(a=0;A&&a<=i;a++){for(var k=a*h,x=k+r;k<x&&!p[k];)k++;if(k!==x){D?D.moveTo(k%h,a):S=[k%h,a];var T=k,I=p[k];do{var L=C[I];do{k+=L}while(!p[k]);var O=p[k];if(5!==O&&10!==O){I=O;p[k]=0}else{I=O&51*I>>4;p[k]&=I>>2|I<<2}D?D.lineTo(k%h,k/h|0):S.push(k%h,k/h|0);p[k]||--A}while(T!==k);D||E.push(S);--a}}y=null;p=null;return function drawOutline(t){t.save();t.scale(1/r,-1/i);t.translate(0,-i);if(D)t.fill(D);else{t.beginPath();var a,o=_createForOfIteratorHelper(E);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.moveTo(u[0],u[1]);for(var l=2,c=u.length;l<c;l+=2)t.lineTo(u[l],u[l+1])}}catch(t){o.e(t)}finally{o.f()}t.fill()}t.beginPath();t.restore()}}(t));if(a.compiled){a.compiled(i);return}}var o=this._createMaskCanvas(t),u=o.canvas;i.save();i.setTransform(1,0,0,1,0,0);i.drawImage(u,o.offsetX,o.offsetY);i.restore();this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var c=this.ctx;c.save();var d=c.mozCurrentTransform;c.transform(r,i,o,u,0,0);var h=this._createMaskCanvas(t);c.setTransform(1,0,0,1,0,0);for(var p=0,v=l.length;p<v;p+=2){var y=a.Util.transform(d,[r,i,o,u,l[p],l[p+1]]),g=a.Util.applyTransform([0,0],y),m=_slicedToArray(g,2),b=m[0],w=m[1];c.drawImage(h.canvas,b,w)}c.restore();this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(t){if(this.contentVisible){var r,i=this.ctx,a=this.current.fillColor,o=this.current.patternFill,l=_createForOfIteratorHelper(t);try{for(l.s();!(r=l.n()).done;){var c=r.value,d=c.data,h=c.width,p=c.height,v=c.transform,y=this.cachedCanvases.getCanvas("maskCanvas",h,p,!1),g=y.context;g.save();putBinaryImageMask(g,this.getObject(d,c));g.globalCompositeOperation="source-in";g.fillStyle=o?a.getPattern(g,this,i.mozCurrentTransformInverse,u.PathType.FILL):a;g.fillRect(0,0,h,p);g.restore();i.save();i.transform.apply(i,v);i.scale(1,-1);drawImageAtIntegerCoords(i,y.canvas,0,0,h,p,0,-1,1,1);i.restore()}}catch(t){l.e(t)}finally{l.f()}this.compose()}}},{key:"paintImageXObject",value:function paintImageXObject(t){if(this.contentVisible){var r=this.getObject(t);r?this.paintInlineImageXObject(r):(0,a.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(t,r,i,o){if(this.contentVisible){var u=this.getObject(t);if(u){for(var l=u.width,c=u.height,d=[],h=0,p=o.length;h<p;h+=2)d.push({transform:[r,0,0,i,o[h],o[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(u,d)}else(0,a.warn)("Dependent image isn't ready yet")}}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t){if(this.contentVisible){var r,i=t.width,a=t.height,o=this.ctx;this.save();o.scale(1/i,-1/a);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{var u=this.cachedCanvases.getCanvas("inlineImage",i,a,!1);putBinaryImageData(u.context,t,this.current.transferMaps);r=u.canvas}var l=this._scaleImage(r,o.mozCurrentTransformInverse);o.imageSmoothingEnabled=getImageSmoothingEnabled(o.mozCurrentTransform,t.interpolate);var c=_slicedToArray(drawImageAtIntegerCoords(o,l.img,0,0,l.paintWidth,l.paintHeight,0,-a,i,a),2),d=c[0],h=c[1];if(this.imageLayer){var p=this.getCanvasPosition(0,-a);this.imageLayer.appendImage({imgData:t,left:p[0],top:p[1],width:d,height:h})}this.compose();this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(t,r){if(this.contentVisible){var i=this.ctx,a=t.width,o=t.height,u=this.cachedCanvases.getCanvas("inlineImage",a,o,!1);putBinaryImageData(u.context,t,this.current.transferMaps);for(var l=0,c=r.length;l<c;l++){var d=r[l];i.save();i.transform.apply(i,d.transform);i.scale(1,-1);drawImageAtIntegerCoords(i,u.canvas,d.x,d.y,d.w,d.h,0,-1,1,1);if(this.imageLayer){var h=this.getCanvasPosition(d.x,d.y);this.imageLayer.appendImage({imgData:t,left:h[0],top:h[1],width:a,height:o})}i.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){if(this.contentVisible){this.ctx.fillRect(0,0,1,1);this.compose()}}},{key:"markPoint",value:function markPoint(t){}},{key:"markPointProps",value:function markPointProps(t,r){}},{key:"beginMarkedContent",value:function beginMarkedContent(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(t,r){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(t){var r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath();this.pendingClip||this.compose(t);var i=this.ctx;if(this.pendingClip){r||(this.pendingClip===b?i.clip("evenodd"):i.clip());this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);i.beginPath()}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransform;if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var r=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/r}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function getScaleForStroking(){if(!this._cachedScaleForStroking){var t,r,i=this.current.lineWidth,a=this.ctx.mozCurrentTransform;if(0===a[1]&&0===a[2]){var o=Math.abs(a[0]),u=Math.abs(a[3]);if(0===i){t=1/o;r=1/u}else{var l=o*i,c=u*i;t=l<1?1/l:1;r=c<1?1/c:1}}else{var d=Math.abs(a[0]*a[3]-a[2]*a[1]),h=Math.hypot(a[0],a[1]),p=Math.hypot(a[2],a[3]);if(0===i){t=p/d;r=h/d}else{var v=i*d;t=p>v?p/v:1;r=h>v?h/v:1}}this._cachedScaleForStroking=[t,r]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function rescaleAndStroke(t){var r=this.ctx,i=this.current.lineWidth,a=_slicedToArray(this.getScaleForStroking(),2),o=a[0],u=a[1];r.lineWidth=i||1;if(1!==o||1!==u){var l,c,d;if(t){l=r.mozCurrentTransform.slice();c=r.getLineDash().slice();d=r.lineDashOffset}r.scale(o,u);var h=Math.max(o,u);r.setLineDash(r.getLineDash().map((function(t){return t/h})));r.lineDashOffset/=h;r.stroke();if(t){r.setTransform.apply(r,_toConsumableArray(l));r.setLineDash(c);r.lineDashOffset=d}}else r.stroke()}},{key:"getCanvasPosition",value:function getCanvasPosition(t,r){var i=this.ctx.mozCurrentTransform;return[i[0]*t+i[2]*r+i[4],i[1]*t+i[3]*r+i[5]]}},{key:"isContentVisible",value:function isContentVisible(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]);return CanvasGraphics}();r.CanvasGraphics=A;function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}for(var P in a.OPS)void 0!==A.prototype[P]&&(A.prototype[a.OPS[P]]=A.prototype[P])},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TilingPattern=r.PathType=void 0;r.getShadingPattern=function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new c(t);case"Mesh":return new d(t);case"Dummy":return new h}throw new Error("Unknown IR type: ".concat(t[0]))};var a=i(1),o=i(3);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=u;function applyBoundingBox(t,r){if(r&&!o.isNodeJS){var i=r[2]-r[0],a=r[3]-r[1],u=new Path2D;u.rect(r[0],r[1],i,a);t.clip(u)}}var l=function(){function BaseShadingPattern(){_classCallCheck(this,BaseShadingPattern);this.constructor===BaseShadingPattern&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}_createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}]);return BaseShadingPattern}(),c=function(t){_inherits(RadialAxialShadingPattern,t);var r=_createSuper(RadialAxialShadingPattern);function RadialAxialShadingPattern(t){var i;_classCallCheck(this,RadialAxialShadingPattern);(i=r.call(this))._type=t[1];i._bbox=t[2];i._colorStops=t[3];i._p0=t[4];i._p1=t[5];i._r0=t[6];i._r1=t[7];i.matrix=null;return i}_createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(t){var r;"axial"===this._type?r=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(r=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var i,a=_createForOfIteratorHelper(this._colorStops);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.addColorStop(o[0],o[1])}}catch(t){a.e(t)}finally{a.f()}return r}},{key:"getPattern",value:function getPattern(t,r,i,o){var l;if(o===u.STROKE||o===u.FILL){var c=r.current.getClippedPathBoundingBox(o,t.mozCurrentTransform)||[0,0,0,0],d=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,p=r.cachedCanvases.getCanvas("pattern",d,h,!0),v=p.context;v.clearRect(0,0,v.canvas.width,v.canvas.height);v.beginPath();v.rect(0,0,v.canvas.width,v.canvas.height);v.translate(-c[0],-c[1]);i=a.Util.transform(i,[1,0,0,1,c[0],c[1]]);v.transform.apply(v,r.baseTransform);this.matrix&&v.transform.apply(v,this.matrix);applyBoundingBox(v,this._bbox);v.fillStyle=this._createGradient(v);v.fill();l=t.createPattern(p.canvas,"no-repeat");var y=new DOMMatrix(i);try{l.setTransform(y)}catch(t){(0,a.warn)('RadialAxialShadingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}}else{applyBoundingBox(t,this._bbox);l=this._createGradient(t)}return l}}]);return RadialAxialShadingPattern}(l);function drawTriangle(t,r,i,a,o,u,l,c){var d,h=r.coords,p=r.colors,v=t.data,y=4*t.width;if(h[i+1]>h[a+1]){d=i;i=a;a=d;d=u;u=l;l=d}if(h[a+1]>h[o+1]){d=a;a=o;o=d;d=l;l=c;c=d}if(h[i+1]>h[a+1]){d=i;i=a;a=d;d=u;u=l;l=d}var g=(h[i]+r.offsetX)*r.scaleX,m=(h[i+1]+r.offsetY)*r.scaleY,b=(h[a]+r.offsetX)*r.scaleX,w=(h[a+1]+r.offsetY)*r.scaleY,A=(h[o]+r.offsetX)*r.scaleX,P=(h[o+1]+r.offsetY)*r.scaleY;if(!(m>=P))for(var D,E,S,C,k,x,T,I,L=p[u],O=p[u+1],M=p[u+2],R=p[l],B=p[l+1],G=p[l+2],N=p[c],j=p[c+1],V=p[c+2],W=Math.round(m),U=Math.round(P),H=W;H<=U;H++){if(H<w){var z=void 0;D=g-(g-b)*(z=H<m?0:(m-H)/(m-w));E=L-(L-R)*z;S=O-(O-B)*z;C=M-(M-G)*z}else{var X=void 0;D=b-(b-A)*(X=H>P?1:w===P?0:(w-H)/(w-P));E=R-(R-N)*X;S=B-(B-j)*X;C=G-(G-V)*X}var Y=void 0;k=g-(g-A)*(Y=H<m?0:H>P?1:(m-H)/(m-P));x=L-(L-N)*Y;T=O-(O-j)*Y;I=M-(M-V)*Y;for(var K=Math.round(Math.min(D,k)),$=Math.round(Math.max(D,k)),Q=y*H+4*K,J=K;J<=$;J++){(Y=(D-J)/(D-k))<0?Y=0:Y>1&&(Y=1);v[Q++]=E-(E-x)*Y|0;v[Q++]=S-(S-T)*Y|0;v[Q++]=C-(C-I)*Y|0;v[Q++]=255}}}function drawFigure(t,r,i){var a,o,u=r.coords,l=r.colors;switch(r.type){case"lattice":var c=r.verticesPerRow,d=Math.floor(u.length/c)-1,h=c-1;for(a=0;a<d;a++)for(var p=a*c,v=0;v<h;v++,p++){drawTriangle(t,i,u[p],u[p+1],u[p+c],l[p],l[p+1],l[p+c]);drawTriangle(t,i,u[p+c+1],u[p+1],u[p+c],l[p+c+1],l[p+1],l[p+c])}break;case"triangles":for(a=0,o=u.length;a<o;a+=3)drawTriangle(t,i,u[a],u[a+1],u[a+2],l[a],l[a+1],l[a+2]);break;default:throw new Error("illegal figure")}}var d=function(t){_inherits(MeshShadingPattern,t);var r=_createSuper(MeshShadingPattern);function MeshShadingPattern(t){var i;_classCallCheck(this,MeshShadingPattern);(i=r.call(this))._coords=t[2];i._colors=t[3];i._figures=t[4];i._bounds=t[5];i._bbox=t[7];i._background=t[8];i.matrix=null;return i}_createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(t,r,i){var a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,l=Math.ceil(this._bounds[3])-o,c=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(l*t[1]*1.1)),3e3),h=u/c,p=l/d,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/h,scaleY:1/p},y=c+4,g=d+4,m=i.getCanvas("mesh",y,g,!1),b=m.context,w=b.createImageData(c,d);if(r)for(var A=w.data,P=0,D=A.length;P<D;P+=4){A[P]=r[0];A[P+1]=r[1];A[P+2]=r[2];A[P+3]=255}var E,S=_createForOfIteratorHelper(this._figures);try{for(S.s();!(E=S.n()).done;){drawFigure(w,E.value,v)}}catch(t){S.e(t)}finally{S.f()}b.putImageData(w,2,2);return{canvas:m.canvas,offsetX:a-2*h,offsetY:o-2*p,scaleX:h,scaleY:p}}},{key:"getPattern",value:function getPattern(t,r,i,o){applyBoundingBox(t,this._bbox);var l;if(o===u.SHADING)l=a.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else{l=a.Util.singularValueDecompose2dScale(r.baseTransform);if(this.matrix){var c=a.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*c[0],l[1]*c[1]]}}var d=this._createMeshCanvas(l,o===u.SHADING?null:this._background,r.cachedCanvases);if(o!==u.SHADING){t.setTransform.apply(t,r.baseTransform);this.matrix&&t.transform.apply(t,this.matrix)}t.translate(d.offsetX,d.offsetY);t.scale(d.scaleX,d.scaleY);return t.createPattern(d.canvas,"no-repeat")}}]);return MeshShadingPattern}(l),h=function(t){_inherits(DummyShadingPattern,t);var r=_createSuper(DummyShadingPattern);function DummyShadingPattern(){_classCallCheck(this,DummyShadingPattern);return r.apply(this,arguments)}_createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink"}}]);return DummyShadingPattern}(l);var p=1,v=2,y=function(){function TilingPattern(t,r,i,a,o){_classCallCheck(this,TilingPattern);this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=r;this.ctx=i;this.canvasGraphicsFactory=a;this.baseTransform=o}_createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(t){var r=this.operatorList,i=this.bbox,o=this.xstep,u=this.ystep,l=this.paintType,c=this.tilingType,d=this.color,h=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+c);var p=i[0],v=i[1],y=i[2],g=i[3],m=a.Util.singularValueDecompose2dScale(this.matrix),b=a.Util.singularValueDecompose2dScale(this.baseTransform),w=[m[0]*b[0],m[1]*b[1]],A=this.getSizeAndScale(o,this.ctx.canvas.width,w[0]),P=this.getSizeAndScale(u,this.ctx.canvas.height,w[1]),D=t.cachedCanvases.getCanvas("pattern",A.size,P.size,!0),E=D.context,S=h.createCanvasGraphics(E);S.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(S,l,d);var C=p,k=v,x=y,T=g;if(p<0){C=0;x+=Math.abs(p)}if(v<0){k=0;T+=Math.abs(v)}E.translate(-A.scale*C,-P.scale*k);S.transform(A.scale,0,0,P.scale,0,0);E.save();this.clipBbox(S,C,k,x,T);S.baseTransform=S.ctx.mozCurrentTransform.slice();S.executeOperatorList(r);S.endDrawing();return{canvas:D.canvas,scaleX:A.scale,scaleY:P.scale,offsetX:C,offsetY:k}}},{key:"getSizeAndScale",value:function getSizeAndScale(t,r,i){t=Math.abs(t);var a=Math.max(TilingPattern.MAX_PATTERN_SIZE,r),o=Math.ceil(t*i);o>=a?o=a:i=o/t;return{scale:i,size:o}}},{key:"clipBbox",value:function clipBbox(t,r,i,a,o){var u=a-r,l=o-i;t.ctx.rect(r,i,u,l);t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[r,i,a,o]);t.clip();t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(t,r,i){var o=t.ctx,u=t.current;switch(r){case p:var l=this.ctx;o.fillStyle=l.fillStyle;o.strokeStyle=l.strokeStyle;u.fillColor=l.fillStyle;u.strokeColor=l.strokeStyle;break;case v:var c=a.Util.makeHexColor(i[0],i[1],i[2]);o.fillStyle=c;o.strokeStyle=c;u.fillColor=c;u.strokeColor=c;break;default:throw new a.FormatError("Unsupported paint type: ".concat(r))}}},{key:"getPattern",value:function getPattern(t,r,i,o){var l=i;if(o!==u.SHADING){l=a.Util.transform(l,r.baseTransform);this.matrix&&(l=a.Util.transform(l,this.matrix))}var c=this.createPatternCanvas(r),d=new DOMMatrix(l);d=(d=d.translate(c.offsetX,c.offsetY)).scale(1/c.scaleX,1/c.scaleY);var h=t.createPattern(c.canvas,"repeat");try{h.setTransform(d)}catch(t){(0,a.warn)('TilingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}return h}}],[{key:"MAX_PATTERN_SIZE",get:function get(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]);return TilingPattern}();r.TilingPattern=y},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.applyMaskImageData=function applyMaskImageData(t){var r=t.src,i=t.srcPos,o=void 0===i?0:i,u=t.dest,l=t.destPos,c=void 0===l?0:l,d=t.width,h=t.height,p=t.inverseDecode,v=void 0!==p&&p,y=a.FeatureTest.isLittleEndian?4278190080:255,g=function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(v?[0,y]:[y,0],2),m=g[0],b=g[1],w=d>>3,A=7&d,P=r.length;u=new Uint32Array(u.buffer);for(var D=0;D<h;D++){for(var E=o+w;o<E;o++){var S=o<P?r[o]:255;u[c++]=128&S?b:m;u[c++]=64&S?b:m;u[c++]=32&S?b:m;u[c++]=16&S?b:m;u[c++]=8&S?b:m;u[c++]=4&S?b:m;u[c++]=2&S?b:m;u[c++]=1&S?b:m}if(0!==A)for(var C=o<P?r[o++]:255,k=0;k<A;k++)u[c++]=C&1<<7-k?b:m}return{srcPos:o,destPos:c}};var a=i(1);function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.GlobalWorkerOptions=void 0;var i=Object.create(null);r.GlobalWorkerOptions=i;i.workerPort=void 0===i.workerPort?null:i.workerPort;i.workerSrc=void 0===i.workerSrc?"":i.workerSrc},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MessageHandler=void 0;var a=i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var o=1,u=2,l=1,c=2,d=3,h=4,p=5,v=6,y=7,g=8;function wrapReason(t){t instanceof Error||"object"===_typeof(t)&&null!==t||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.');switch(t.name){case"AbortException":return new a.AbortException(t.message);case"MissingPDFException":return new a.MissingPDFException(t.message);case"PasswordException":return new a.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new a.UnknownErrorException(t.message,t.details);default:return new a.UnknownErrorException(t.message,t.toString())}}var m=function(){function MessageHandler(t,r,i){var a=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler);this.sourceName=t;this.targetName=r;this.comObj=i;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var r=t.data;if(r.targetName===a.sourceName)if(r.stream)a._processStreamMessage(r);else if(r.callback){var l=r.callbackId,c=a.callbackCapabilities[l];if(!c)throw new Error("Cannot resolve callback ".concat(l));delete a.callbackCapabilities[l];if(r.callback===o)c.resolve(r.data);else{if(r.callback!==u)throw new Error("Unexpected callback case");c.reject(wrapReason(r.reason))}}else{var d=a.actionHandler[r.action];if(!d)throw new Error("Unknown action from worker: ".concat(r.action));if(r.callbackId){var h=a.sourceName,p=r.sourceName;new Promise((function(t){t(d(r.data))})).then((function(t){i.postMessage({sourceName:h,targetName:p,callback:o,callbackId:r.callbackId,data:t})}),(function(t){i.postMessage({sourceName:h,targetName:p,callback:u,callbackId:r.callbackId,reason:wrapReason(t)})}))}else r.streamId?a._createStreamSink(r):d(r.data)}};i.addEventListener("message",this._onComObjOnMessage)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(MessageHandler,[{key:"on",value:function on(t,r){var i=this.actionHandler;if(i[t])throw new Error('There is already an actionName called "'.concat(t,'"'));i[t]=r}},{key:"send",value:function send(t,r,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},i)}},{key:"sendWithPromise",value:function sendWithPromise(t,r,i){var o=this.callbackId++,u=(0,a.createPromiseCapability)();this.callbackCapabilities[o]=u;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:o,data:r},i)}catch(t){u.reject(t)}return u.promise}},{key:"sendWithStream",value:function sendWithStream(t,r,i,o){var u=this,c=this.streamId++,d=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:function start(i){var l=(0,a.createPromiseCapability)();u.streamControllers[c]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1};p.postMessage({sourceName:d,targetName:h,action:t,streamId:c,data:r,desiredSize:i.desiredSize},o);return l.promise},pull:function pull(t){var r=(0,a.createPromiseCapability)();u.streamControllers[c].pullCall=r;p.postMessage({sourceName:d,targetName:h,stream:v,streamId:c,desiredSize:t.desiredSize});return r.promise},cancel:function cancel(t){(0,a.assert)(t instanceof Error,"cancel must have a valid reason");var r=(0,a.createPromiseCapability)();u.streamControllers[c].cancelCall=r;u.streamControllers[c].isClosed=!0;p.postMessage({sourceName:d,targetName:h,stream:l,streamId:c,reason:wrapReason(t)});return r.promise}},i)}},{key:"_createStreamSink",value:function _createStreamSink(t){var r=t.streamId,i=this.sourceName,o=t.sourceName,u=this.comObj,l=this,c=this.actionHandler[t.action],v={enqueue:function enqueue(t){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var d=this.desiredSize;this.desiredSize-=l;if(d>0&&this.desiredSize<=0){this.sinkCapability=(0,a.createPromiseCapability)();this.ready=this.sinkCapability.promise}u.postMessage({sourceName:i,targetName:o,stream:h,streamId:r,chunk:t},c)}},close:function close(){if(!this.isCancelled){this.isCancelled=!0;u.postMessage({sourceName:i,targetName:o,stream:d,streamId:r});delete l.streamSinks[r]}},error:function error(t){(0,a.assert)(t instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;u.postMessage({sourceName:i,targetName:o,stream:p,streamId:r,reason:wrapReason(t)})}},sinkCapability:(0,a.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};v.sinkCapability.resolve();v.ready=v.sinkCapability.promise;this.streamSinks[r]=v;new Promise((function(r){r(c(t.data,v))})).then((function(){u.postMessage({sourceName:i,targetName:o,stream:g,streamId:r,success:!0})}),(function(t){u.postMessage({sourceName:i,targetName:o,stream:g,streamId:r,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var r=t.streamId,i=this.sourceName,o=t.sourceName,u=this.comObj,m=this.streamControllers[r],b=this.streamSinks[r];switch(t.stream){case g:t.success?m.startCall.resolve():m.startCall.reject(wrapReason(t.reason));break;case y:t.success?m.pullCall.resolve():m.pullCall.reject(wrapReason(t.reason));break;case v:if(!b){u.postMessage({sourceName:i,targetName:o,stream:y,streamId:r,success:!0});break}b.desiredSize<=0&&t.desiredSize>0&&b.sinkCapability.resolve();b.desiredSize=t.desiredSize;new Promise((function(t){t(b.onPull&&b.onPull())})).then((function(){u.postMessage({sourceName:i,targetName:o,stream:y,streamId:r,success:!0})}),(function(t){u.postMessage({sourceName:i,targetName:o,stream:y,streamId:r,reason:wrapReason(t)})}));break;case h:(0,a.assert)(m,"enqueue should have stream controller");if(m.isClosed)break;m.controller.enqueue(t.chunk);break;case d:(0,a.assert)(m,"close should have stream controller");if(m.isClosed)break;m.isClosed=!0;m.controller.close();this._deleteStreamController(m,r);break;case p:(0,a.assert)(m,"error should have stream controller");m.controller.error(wrapReason(t.reason));this._deleteStreamController(m,r);break;case c:t.success?m.cancelCall.resolve():m.cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(m,r);break;case l:if(!b)break;new Promise((function(r){r(b.onCancel&&b.onCancel(wrapReason(t.reason)))})).then((function(){u.postMessage({sourceName:i,targetName:o,stream:c,streamId:r,success:!0})}),(function(t){u.postMessage({sourceName:i,targetName:o,stream:c,streamId:r,reason:wrapReason(t)})}));b.sinkCapability.reject(wrapReason(t.reason));b.isCancelled=!0;delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t,r){return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);case 2:delete this.streamControllers[r];case 3:case"end":return i.stop()}}),_callee,this)}))),function _deleteStreamController(r,i){return t.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);var t;return MessageHandler}();r.MessageHandler=m},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Metadata=void 0;var a=i(1);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var o=new WeakMap,u=new WeakMap,l=function(){function Metadata(t){var r=t.parsedData,i=t.rawData;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Metadata);_classPrivateFieldInitSpec(this,o,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,u,{writable:!0,value:void 0});_classPrivateFieldSet(this,o,r);_classPrivateFieldSet(this,u,i)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(Metadata,[{key:"getRaw",value:function getRaw(){return _classPrivateFieldGet(this,u)}},{key:"get",value:function get(t){var r;return null!==(r=_classPrivateFieldGet(this,o).get(t))&&void 0!==r?r:null}},{key:"getAll",value:function getAll(){return(0,a.objectFromMap)(_classPrivateFieldGet(this,o))}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,o).has(t)}}]);return Metadata}();r.Metadata=l},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.OptionalContentConfig=void 0;var a=i(1);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var o=Symbol("INTERNAL"),u=new WeakMap,l=function(){function OptionalContentGroup(t,r){_classCallCheck(this,OptionalContentGroup);_classPrivateFieldInitSpec(this,u,{writable:!0,value:!0});this.name=t;this.intent=r}_createClass(OptionalContentGroup,[{key:"visible",get:function get(){return _classPrivateFieldGet(this,u)}},{key:"_setVisible",value:function _setVisible(t,r){t!==o&&(0,a.unreachable)("Internal method `_setVisible` called.");_classPrivateFieldSet(this,u,r)}}]);return OptionalContentGroup}(),c=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakSet,y=function(){function OptionalContentConfig(t){_classCallCheck(this,OptionalContentConfig);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,v);_classPrivateFieldInitSpec(this,c,{writable:!0,value:!0});_classPrivateFieldInitSpec(this,d,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,h,{writable:!0,value:null});_classPrivateFieldInitSpec(this,p,{writable:!0,value:null});this.name=null;this.creator=null;if(null!==t){this.name=t.name;this.creator=t.creator;_classPrivateFieldSet(this,p,t.order);var r,i=_createForOfIteratorHelper(t.groups);try{for(i.s();!(r=i.n()).done;){var a=r.value;_classPrivateFieldGet(this,d).set(a.id,new l(a.name,a.intent))}}catch(t){i.e(t)}finally{i.f()}if("OFF"===t.baseState){var u,y=_createForOfIteratorHelper(_classPrivateFieldGet(this,d).values());try{for(y.s();!(u=y.n()).done;){u.value._setVisible(o,!1)}}catch(t){y.e(t)}finally{y.f()}}var g,m=_createForOfIteratorHelper(t.on);try{for(m.s();!(g=m.n()).done;){var b=g.value;_classPrivateFieldGet(this,d).get(b)._setVisible(o,!0)}}catch(t){m.e(t)}finally{m.f()}var w,A=_createForOfIteratorHelper(t.off);try{for(A.s();!(w=A.n()).done;){var P=w.value;_classPrivateFieldGet(this,d).get(P)._setVisible(o,!1)}}catch(t){A.e(t)}finally{A.f()}_classPrivateFieldSet(this,h,new Map);var D,E=_createForOfIteratorHelper(_classPrivateFieldGet(this,d));try{for(E.s();!(D=E.n()).done;){var S=_slicedToArray(D.value,2),C=S[0],k=S[1];_classPrivateFieldGet(this,h).set(C,k.visible)}}catch(t){E.e(t)}finally{E.f()}}}_createClass(OptionalContentConfig,[{key:"isVisible",value:function isVisible(t){if(0===_classPrivateFieldGet(this,d).size)return!0;if(!t){(0,a.warn)("Optional content group not defined.");return!0}if("OCG"===t.type){if(!_classPrivateFieldGet(this,d).has(t.id)){(0,a.warn)("Optional content group not found: ".concat(t.id));return!0}return _classPrivateFieldGet(this,d).get(t.id).visible}if("OCMD"===t.type){if(t.expression)return _classPrivateMethodGet(this,v,_evaluateVisibilityExpression2).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var r,i=_createForOfIteratorHelper(t.ids);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!_classPrivateFieldGet(this,d).has(o)){(0,a.warn)("Optional content group not found: ".concat(o));return!0}if(_classPrivateFieldGet(this,d).get(o).visible)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}if("AllOn"===t.policy){var u,l=_createForOfIteratorHelper(t.ids);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(!_classPrivateFieldGet(this,d).has(c)){(0,a.warn)("Optional content group not found: ".concat(c));return!0}if(!_classPrivateFieldGet(this,d).get(c).visible)return!1}}catch(t){l.e(t)}finally{l.f()}return!0}if("AnyOff"===t.policy){var h,p=_createForOfIteratorHelper(t.ids);try{for(p.s();!(h=p.n()).done;){var y=h.value;if(!_classPrivateFieldGet(this,d).has(y)){(0,a.warn)("Optional content group not found: ".concat(y));return!0}if(!_classPrivateFieldGet(this,d).get(y).visible)return!0}}catch(t){p.e(t)}finally{p.f()}return!1}if("AllOff"===t.policy){var g,m=_createForOfIteratorHelper(t.ids);try{for(m.s();!(g=m.n()).done;){var b=g.value;if(!_classPrivateFieldGet(this,d).has(b)){(0,a.warn)("Optional content group not found: ".concat(b));return!0}if(_classPrivateFieldGet(this,d).get(b).visible)return!1}}catch(t){m.e(t)}finally{m.f()}return!0}(0,a.warn)("Unknown optional content policy ".concat(t.policy,"."));return!0}(0,a.warn)("Unknown group type ".concat(t.type,"."));return!0}},{key:"setVisibility",value:function setVisibility(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_classPrivateFieldGet(this,d).has(t)){_classPrivateFieldGet(this,d).get(t)._setVisible(o,!!r);_classPrivateFieldSet(this,c,null)}else(0,a.warn)("Optional content group not found: ".concat(t))}},{key:"hasInitialVisibility",get:function get(){if(null!==_classPrivateFieldGet(this,c))return _classPrivateFieldGet(this,c);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,d));try{for(r.s();!(t=r.n()).done;){var i=_slicedToArray(t.value,2),a=i[0],o=i[1],u=_classPrivateFieldGet(this,h).get(a);if(o.visible!==u)return _classPrivateFieldSet(this,c,!1)}}catch(t){r.e(t)}finally{r.f()}return _classPrivateFieldSet(this,c,!0)}},{key:"getOrder",value:function getOrder(){return _classPrivateFieldGet(this,d).size?_classPrivateFieldGet(this,p)?_classPrivateFieldGet(this,p).slice():_toConsumableArray(_classPrivateFieldGet(this,d).keys()):null}},{key:"getGroups",value:function getGroups(){return _classPrivateFieldGet(this,d).size>0?(0,a.objectFromMap)(_classPrivateFieldGet(this,d)):null}},{key:"getGroup",value:function getGroup(t){return _classPrivateFieldGet(this,d).get(t)||null}}]);return OptionalContentConfig}();r.OptionalContentConfig=y;function _evaluateVisibilityExpression2(t){var r=t.length;if(r<2)return!0;for(var i=t[0],o=1;o<r;o++){var u=t[o],l=void 0;if(Array.isArray(u))l=_classPrivateMethodGet(this,v,_evaluateVisibilityExpression2).call(this,u);else{if(!_classPrivateFieldGet(this,d).has(u)){(0,a.warn)("Optional content group not found: ".concat(u));return!0}l=_classPrivateFieldGet(this,d).get(u).visible}switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return"And"===i}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFDataTransportStream=void 0;var a=i(1),o=i(129);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var u=function(){function PDFDataTransportStream(t,r){var i=this;_classCallCheck(this,PDFDataTransportStream);(0,a.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;this._contentDispositionFilename=t.contentDispositionFilename||null;var o=t.initialData;if((null==o?void 0:o.length)>0){var u=new Uint8Array(o).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=r;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener((function(t,r){i._onReceiveData({begin:t,chunk:r})}));this._pdfDataRangeTransport.addProgressListener((function(t,r){i._onProgress({loaded:t,total:r})}));this._pdfDataRangeTransport.addProgressiveReadListener((function(t){i._onReceiveData({chunk:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((function(){i._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(t){var r=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{var i=this._rangeReaders.some((function(i){if(i._begin!==t.begin)return!1;i._enqueue(r);return!0}));(0,a.assert)(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function _onProgress(t){if(void 0===t.total){var r=this._rangeReaders[0];null!=r&&r.onProgress&&r.onProgress({loaded:t.loaded})}else{var i=this._fullRequestReader;null!=i&&i.onProgress&&i.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(t){var r=this._rangeReaders.indexOf(t);r>=0&&this._rangeReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;this._queuedChunks=null;return new l(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var i=new c(this,t,r);this._pdfDataRangeTransport.requestDataRange(t,r);this._rangeReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var r,i=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(i.s();!(r=i.n()).done;){r.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}this._pdfDataRangeTransport.abort()}}]);return PDFDataTransportStream}();r.PDFDataTransportStream=u;var l=function(){function PDFDataTransportStreamReader(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader);this._stream=t;this._done=i||!1;this._filename=(0,o.isPdfFile)(a)?a:null;this._queuedChunks=r||[];this._loaded=0;var u,l=_createForOfIteratorHelper(this._queuedChunks);try{for(l.s();!(u=l.n()).done;){var c=u.value;this._loaded+=c.byteLength}}catch(t){l.e(t)}finally{l.f()}this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!(this._queuedChunks.length>0)){i.next=3;break}t=this._queuedChunks.shift();return i.abrupt("return",{value:t,done:!1});case 3:if(!this._done){i.next=5;break}return i.abrupt("return",{value:void 0,done:!0});case 5:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 8:case"end":return i.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0}},{key:"progressiveDone",value:function progressiveDone(){this._done||(this._done=!0)}}]);var t;return PDFDataTransportStreamReader}(),c=function(){function PDFDataTransportStreamRangeReader(t,r,i){_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=t;this._begin=r;this._end=i;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0}this._done=!0;this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._queuedChunk){i.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return i.abrupt("return",{value:t,done:!1});case 4:if(!this._done){i.next=6;break}return i.abrupt("return",{value:void 0,done:!0});case 6:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 9:case"end":return i.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._stream._removeRangeReader(this)}}]);var t;return PDFDataTransportStreamRangeReader}()},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaText=void 0;function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var i=function(){function XfaText(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaText)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaText,null,[{key:"textContent",value:function textContent(t){var r=[],i={items:r,styles:Object.create(null)};!function walk(t){var i;if(t){var a=null,o=t.name;if("#text"===o)a=t.value;else{if(!XfaText.shouldBuildText(o))return;null!=t&&null!==(i=t.attributes)&&void 0!==i&&i.textContent?a=t.attributes.textContent:t.value&&(a=t.value)}null!==a&&r.push({str:a});if(t.children){var u,l=_createForOfIteratorHelper(t.children);try{for(l.s();!(u=l.n()).done;){walk(u.value)}}catch(t){l.e(t)}finally{l.f()}}}}(t);return i}},{key:"shouldBuildText",value:function shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}]);return XfaText}();r.XfaText=i},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.NodeStandardFontDataFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var a=i(130);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var o=function fetchData(t){return new Promise((function(r,i){require("fs").readFile(t,(function(t,a){!t&&a?r(new Uint8Array(a)):i(new Error(t))}))}))},u=function(t){_inherits(NodeCanvasFactory,t);var r=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);return r.apply(this,arguments)}_createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,r){return require("canvas").createCanvas(t,r)}}]);return NodeCanvasFactory}(a.BaseCanvasFactory);r.NodeCanvasFactory=u;var l=function(t){_inherits(NodeCMapReaderFactory,t);var r=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);return r.apply(this,arguments)}_createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return o(t).then((function(t){return{cMapData:t,compressionType:r}}))}}]);return NodeCMapReaderFactory}(a.BaseCMapReaderFactory);r.NodeCMapReaderFactory=l;var c=function(t){_inherits(NodeStandardFontDataFactory,t);var r=_createSuper(NodeStandardFontDataFactory);function NodeStandardFontDataFactory(){_classCallCheck(this,NodeStandardFontDataFactory);return r.apply(this,arguments)}_createClass(NodeStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return o(t)}}]);return NodeStandardFontDataFactory}(a.BaseStandardFontDataFactory);r.NodeStandardFontDataFactory=c},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorLayer=void 0;var a=i(1),o=i(134),u=i(129),l=i(148),c=i(149);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,A=new WeakMap,P=new WeakSet,D=new WeakSet,E=new WeakSet,S=new WeakSet,C=function(){function AnnotationEditorLayer(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorLayer);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,E);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,P);_classPrivateFieldInitSpec(this,A,{get:_get_hasTextLayer,set:void 0});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:this.pointerup.bind(this)});_classPrivateFieldInitSpec(this,p,{writable:!0,value:this.pointerdown.bind(this)});_classPrivateFieldInitSpec(this,v,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,y,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,g,{writable:!0,value:new WeakMap});_classPrivateFieldInitSpec(this,m,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,b,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,w,{writable:!0,value:new Set});if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;l.FreeTextEditor.initialize(t.l10n);c.InkEditor.initialize(t.l10n);t.uiManager.registerEditorTypes([l.FreeTextEditor,c.InkEditor])}_classPrivateFieldSet(this,b,t.uiManager);this.annotationStorage=t.annotationStorage;this.pageIndex=t.pageIndex;this.div=t.div;_classPrivateFieldGet(this,b).addLayer(this)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditorLayer,[{key:"textLayerElements",get:function get(){var t=this.div.parentNode.getElementsByClassName("textLayer").item(0);if(!t)return(0,a.shadow)(this,"textLayerElements",null);var r=_classPrivateFieldGet(this,g).get(t);if(r)return r;if(0===(r=t.querySelectorAll('span[role="presentation"]')).length)return(0,a.shadow)(this,"textLayerElements",null);(r=Array.from(r)).sort(_classStaticPrivateMethodGet(AnnotationEditorLayer,AnnotationEditorLayer,_compareElementPositions));_classPrivateFieldGet(this,g).set(t,r);return r}},{key:"updateToolbar",value:function updateToolbar(t){_classPrivateFieldGet(this,b).updateToolbar(t)}},{key:"updateMode",value:function updateMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(this,b).getMode();_classPrivateMethodGet(this,S,_cleanup2).call(this);if(t===a.AnnotationEditorType.INK){this.addInkEditorIfNeeded(!1);this.disableClick()}else this.enableClick();_classPrivateFieldGet(this,b).unselectAll()}},{key:"addInkEditorIfNeeded",value:function addInkEditorIfNeeded(t){if(t||_classPrivateFieldGet(this,b).getMode()===a.AnnotationEditorType.INK){if(!t){var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.isEmpty()){o.setInBackground();return}}}catch(t){i.e(t)}finally{i.f()}}_classPrivateMethodGet(this,E,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function setEditingState(t){_classPrivateFieldGet(this,b).setEditingState(t)}},{key:"addCommands",value:function addCommands(t){_classPrivateFieldGet(this,b).addCommands(t)}},{key:"enable",value:function enable(){this.div.style.pointerEvents="auto";var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(r.s();!(t=r.n()).done;){t.value.enableEditing()}}catch(t){r.e(t)}finally{r.f()}}},{key:"disable",value:function disable(){this.div.style.pointerEvents="none";var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(r.s();!(t=r.n()).done;){t.value.disableEditing()}}catch(t){r.e(t)}finally{r.f()}}},{key:"setActiveEditor",value:function setActiveEditor(t){_classPrivateFieldGet(this,b).getActive()!==t&&_classPrivateFieldGet(this,b).setActiveEditor(t)}},{key:"enableClick",value:function enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,p));this.div.addEventListener("pointerup",_classPrivateFieldGet(this,h))}},{key:"disableClick",value:function disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,p));this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,h))}},{key:"attach",value:function attach(t){_classPrivateFieldGet(this,v).set(t.id,t)}},{key:"detach",value:function detach(t){_classPrivateFieldGet(this,v).delete(t.id);this.removePointerInTextLayer(t)}},{key:"remove",value:function remove(t){var r=this;_classPrivateFieldGet(this,b).removeEditor(t);this.detach(t);this.annotationStorage.removeKey(t.id);t.div.style.display="none";setTimeout((function(){t.div.style.display="";t.div.remove();t.isAttachedToDOM=!1;document.activeElement===document.body&&_classPrivateFieldGet(r,b).focusMainContainer()}),0);_classPrivateFieldGet(this,y)||this.addInkEditorIfNeeded(!1)}},{key:"onTextLayerRendered",value:function onTextLayerRendered(){_classPrivateFieldGet(this,m).clear();var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,w));try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isAttachedToDOM&&this.addPointerInTextLayer(i)}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,w).clear()}},{key:"removePointerInTextLayer",value:function removePointerInTextLayer(t){var r;if(_classPrivateFieldGet(this,A)){var i=t.id,a=_classPrivateFieldGet(this,m).get(i);if(a){_classPrivateFieldGet(this,m).delete(i);var o=a.getAttribute("aria-owns");if(null!==(r=o)&&void 0!==r&&r.includes(i))if(o=o.split(" ").filter((function(t){return t!==i})).join(" "))a.setAttribute("aria-owns",o);else{a.removeAttribute("aria-owns");a.setAttribute("role","presentation")}}}else _classPrivateFieldGet(this,w).delete(t)}},{key:"addPointerInTextLayer",value:function addPointerInTextLayer(t){if(_classPrivateFieldGet(this,A)){this.removePointerInTextLayer(t);var r=this.textLayerElements;if(r){var i=t.contentDiv,a=t.getIdForTextLayer(),o=(0,u.binarySearchFirstItem)(r,(function(t){return _classStaticPrivateMethodGet(AnnotationEditorLayer,AnnotationEditorLayer,_compareElementPositions).call(AnnotationEditorLayer,i,t)<0})),l=r[Math.max(0,o-1)],c=l.getAttribute("aria-owns");null!=c&&c.includes(a)||l.setAttribute("aria-owns",c?"".concat(c," ").concat(a):a);l.removeAttribute("role");_classPrivateFieldGet(this,m).set(a,l)}}else _classPrivateFieldGet(this,w).add(t)}},{key:"moveDivInDOM",value:function moveDivInDOM(t){this.addPointerInTextLayer(t);var r=t.div,i=t.contentDiv;if(this.div.hasChildNodes()){var a=Array.from(this.div.childNodes).filter((function(t){return t!==r}));if(0!==a.length){var o=(0,u.binarySearchFirstItem)(a,(function(t){return _classStaticPrivateMethodGet(AnnotationEditorLayer,AnnotationEditorLayer,_compareElementPositions).call(AnnotationEditorLayer,i,t)<0}));0===o?a[0].before(r):a[o-1].after(r)}}else this.div.append(r)}},{key:"add",value:function add(t){_classPrivateMethodGet(this,P,_changeParent2).call(this,t);this.addToAnnotationStorage(t);_classPrivateFieldGet(this,b).addEditor(t);this.attach(t);if(!t.isAttachedToDOM){var r=t.render();this.div.append(r);t.isAttachedToDOM=!0}this.moveDivInDOM(t);t.onceAdded()}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}},{key:"addOrRebuild",value:function addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}},{key:"addANewEditor",value:function addANewEditor(t){var r=this;this.addCommands({cmd:function cmd(){r.addOrRebuild(t)},undo:function undo(){t.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function addUndoableEditor(t){var r=this;this.addCommands({cmd:function cmd(){r.addOrRebuild(t)},undo:function undo(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function getNextId(){return _classPrivateFieldGet(this,b).getId()}},{key:"deserialize",value:function deserialize(t){switch(t.annotationType){case a.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(t,this);case a.AnnotationEditorType.INK:return c.InkEditor.deserialize(t,this)}return null}},{key:"setSelected",value:function setSelected(t){_classPrivateFieldGet(this,b).setSelected(t)}},{key:"toggleSelected",value:function toggleSelected(t){_classPrivateFieldGet(this,b).toggleSelected(t)}},{key:"isSelected",value:function isSelected(t){return _classPrivateFieldGet(this,b).isSelected(t)}},{key:"unselect",value:function unselect(t){_classPrivateFieldGet(this,b).unselect(t)}},{key:"pointerup",value:function pointerup(t){var r=o.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&r||t.target===this.div&&(_classPrivateFieldGet(this,d)?_classPrivateMethodGet(this,E,_createAndAddNewEditor2).call(this,t):_classPrivateFieldSet(this,d,!0))}},{key:"pointerdown",value:function pointerdown(t){var r=o.KeyboardManager.platform.isMac;if(!(0!==t.button||t.ctrlKey&&r)&&t.target===this.div){var i=_classPrivateFieldGet(this,b).getActive();_classPrivateFieldSet(this,d,!i||i.isEmpty())}}},{key:"drop",value:function drop(t){var r=t.dataTransfer.getData("text/plain"),i=_classPrivateFieldGet(this,b).getEditor(r);if(i){t.preventDefault();t.dataTransfer.dropEffect="move";_classPrivateMethodGet(this,P,_changeParent2).call(this,i);var a=this.div.getBoundingClientRect(),o=t.clientX-a.x,u=t.clientY-a.y;i.translate(o-i.startX,u-i.startY);this.moveDivInDOM(i);i.div.focus()}}},{key:"dragover",value:function dragover(t){t.preventDefault()}},{key:"destroy",value:function destroy(){var t;(null===(t=_classPrivateFieldGet(this,b).getActive())||void 0===t?void 0:t.parent)===this&&_classPrivateFieldGet(this,b).setActiveEditor(null);var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(i.s();!(r=i.n()).done;){var a=r.value;this.removePointerInTextLayer(a);a.isAttachedToDOM=!1;a.div.remove();a.parent=null}}catch(t){i.e(t)}finally{i.f()}_classPrivateFieldGet(this,m).clear();this.div=null;_classPrivateFieldGet(this,v).clear();_classPrivateFieldGet(this,w).clear();_classPrivateFieldGet(this,b).removeLayer(this)}},{key:"render",value:function render(t){this.viewport=t.viewport;(0,o.bindEvents)(this,this.div,["dragover","drop"]);this.setDimensions();var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,b).getEditors(this.pageIndex));try{for(i.s();!(r=i.n()).done;){var a=r.value;this.add(a)}}catch(t){i.e(t)}finally{i.f()}this.updateMode()}},{key:"update",value:function update(t){this.viewport=t.viewport;this.setDimensions();this.updateMode()}},{key:"scaleFactor",get:function get(){return this.viewport.scale}},{key:"pageDimensions",get:function get(){var t=_slicedToArray(this.viewport.viewBox,4),r=t[0],i=t[1];return[t[2]-r,t[3]-i]}},{key:"viewportBaseDimensions",get:function get(){var t=this.viewport,r=t.width,i=t.height;return t.rotation%180==0?[r,i]:[i,r]}},{key:"setDimensions",value:function setDimensions(){var t=this.viewport,r=t.width,i=t.height,a=t.rotation,o=a%180!=0,u=Math.floor(r)+"px",l=Math.floor(i)+"px";this.div.style.width=o?l:u;this.div.style.height=o?u:l;this.div.setAttribute("data-main-rotation",a)}}]);return AnnotationEditorLayer}();r.AnnotationEditorLayer=C;function _get_hasTextLayer(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")}function _changeParent2(t){var r;if(t.parent!==this){this.attach(t);t.pageIndex=this.pageIndex;null===(r=t.parent)||void 0===r||r.detach(t);t.parent=this;if(t.div&&t.isAttachedToDOM){t.div.remove();this.div.append(t.div)}}}function _compareElementPositions(t,r){var i=t.getBoundingClientRect(),a=r.getBoundingClientRect();return i.y+i.height<=a.y?-1:a.y+a.height<=i.y?1:i.x+i.width/2-(a.x+a.width/2)}function _createNewEditor2(t){switch(_classPrivateFieldGet(this,b).getMode()){case a.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(t);case a.AnnotationEditorType.INK:return new c.InkEditor(t)}return null}function _createAndAddNewEditor2(t){var r=this.getNextId(),i=_classPrivateMethodGet(this,D,_createNewEditor2).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY});i&&this.add(i);return i}function _cleanup2(){_classPrivateFieldSet(this,y,!0);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isEmpty()&&i.remove()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldSet(this,y,!1)}!function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}(C,"_initialized",!1)},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.FreeTextEditor=void 0;var a=i(1),o=i(134),u=i(133);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakSet,b=new WeakSet,w=new WeakSet,A=new WeakSet,P=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(FreeTextEditor,t);var r=_createSuper(FreeTextEditor);function FreeTextEditor(t){var i;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FreeTextEditor);_classPrivateMethodInitSpec(_assertThisInitialized(i=r.call(this,_objectSpread(_objectSpread({},t),{},{name:"freeTextEditor"}))),A);_classPrivateMethodInitSpec(_assertThisInitialized(i),w);_classPrivateMethodInitSpec(_assertThisInitialized(i),b);_classPrivateMethodInitSpec(_assertThisInitialized(i),m);_classPrivateFieldInitSpec(_assertThisInitialized(i),l,{writable:!0,value:i.editorDivBlur.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),c,{writable:!0,value:i.editorDivFocus.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),d,{writable:!0,value:i.editorDivKeydown.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),h,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(i),p,{writable:!0,value:""});_classPrivateFieldInitSpec(_assertThisInitialized(i),v,{writable:!0,value:""});_classPrivateFieldInitSpec(_assertThisInitialized(i),y,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(i),g,{writable:!0,value:void 0});_classPrivateFieldSet(_assertThisInitialized(i),h,t.color||FreeTextEditor._defaultColor||u.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_assertThisInitialized(i),g,t.fontSize||FreeTextEditor._defaultFontSize);return i}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(FreeTextEditor,[{key:"updateParams",value:function updateParams(t,r){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,m,_updateFontSize2).call(this,r);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,b,_updateColor2).call(this,r)}}},{key:"propertiesToUpdate",get:function get(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,g)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,h)]]}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[-FreeTextEditor._internalPadding*this.parent.scaleFactor,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,g))*this.parent.scaleFactor]}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(FreeTextEditor.prototype),"rebuild",this).call(this);null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function enableEditMode(){if(!this.isInEditMode()){this.parent.setEditingState(!1);this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT);_get(_getPrototypeOf(FreeTextEditor.prototype),"enableEditMode",this).call(this);this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=!0;this.div.draggable=!1;this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,d));this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,c));this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,l))}}},{key:"disableEditMode",value:function disableEditMode(){if(this.isInEditMode()){this.parent.setEditingState(!0);_get(_getPrototypeOf(FreeTextEditor.prototype),"disableEditMode",this).call(this);this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=!1;this.div.draggable=!0;this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,d));this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,c));this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,l));this.div.focus();this.isEditing=!1}}},{key:"focusin",value:function focusin(t){_get(_getPrototypeOf(FreeTextEditor.prototype),"focusin",this).call(this,t);t.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function onceAdded(){if(!this.width){this.enableEditMode();this.editorDiv.focus()}}},{key:"isEmpty",value:function isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function remove(){this.isEditing=!1;this.parent.setEditingState(!0);_get(_getPrototypeOf(FreeTextEditor.prototype),"remove",this).call(this)}},{key:"commit",value:function commit(){_get(_getPrototypeOf(FreeTextEditor.prototype),"commit",this).call(this);if(!_classPrivateFieldGet(this,y)){_classPrivateFieldSet(this,y,!0);this.parent.addUndoableEditor(this)}this.disableEditMode();_classPrivateFieldSet(this,v,this.editorDiv.innerHTML);_classPrivateFieldSet(this,p,_classPrivateMethodGet(this,w,_extractText2).call(this).trimEnd());_classPrivateMethodGet(this,A,_setEditorDimensions2).call(this)}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return this.isInEditMode()}},{key:"dblclick",value:function dblclick(t){this.enableEditMode();this.editorDiv.focus()}},{key:"keydown",value:function keydown(t){if(t.target===this.div&&"Enter"===t.key){this.enableEditMode();this.editorDiv.focus()}}},{key:"editorDivKeydown",value:function editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function editorDivFocus(t){this.isEditing=!0}},{key:"editorDivBlur",value:function editorDivBlur(t){this.isEditing=!1}},{key:"disableEditing",value:function disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"getIdForTextLayer",value:function getIdForTextLayer(){return this.editorDiv.id}},{key:"render",value:function render(){var t,r,i=this;if(this.div)return this.div;if(this.width){t=this.x;r=this.y}_get(_getPrototypeOf(FreeTextEditor.prototype),"render",this).call(this);this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id","".concat(this.id,"-editor"));this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text_aria_label").then((function(t){var r;return null===(r=i.editorDiv)||void 0===r?void 0:r.setAttribute("aria-label",t)}));FreeTextEditor._l10nPromise.get("free_text_default_content").then((function(t){var r;return null===(r=i.editorDiv)||void 0===r?void 0:r.setAttribute("default-content",t)}));this.editorDiv.contentEditable=!0;var a=this.editorDiv.style;a.fontSize="calc(".concat(_classPrivateFieldGet(this,g),"px * var(--scale-factor))");a.color=_classPrivateFieldGet(this,h);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,o.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){var u=_slicedToArray(this.parent.viewportBaseDimensions,2),l=u[0],c=u[1];this.setAt(t*l,r*c,this.width*l,this.height*c);this.editorDiv.innerHTML=_classPrivateFieldGet(this,v);this.div.draggable=!0;this.editorDiv.contentEditable=!1}else{this.div.draggable=!1;this.editorDiv.contentEditable=!0}return this.div}},{key:"contentDiv",get:function get(){return this.editorDiv}},{key:"serialize",value:function serialize(){if(this.isEmpty())return null;var t=FreeTextEditor._internalPadding*this.parent.scaleFactor,r=this.getRect(t,t),i=u.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:a.AnnotationEditorType.FREETEXT,color:i,fontSize:_classPrivateFieldGet(this,g),value:_classPrivateFieldGet(this,p),pageIndex:this.parent.pageIndex,rect:r,rotation:this.rotation}}}],[{key:"initialize",value:function initialize(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((function(r){return[r,t.get(r)]})));var r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function updateDefaultParams(t,r){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=r;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=r}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||u.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function deserialize(t,r){var i=_get(_getPrototypeOf(FreeTextEditor),"deserialize",this).call(this,t,r);_classPrivateFieldSet(i,g,t.fontSize);_classPrivateFieldSet(i,h,a.Util.makeHexColor.apply(a.Util,_toConsumableArray(t.color)));_classPrivateFieldSet(i,p,t.value);_classPrivateFieldSet(i,v,t.value.split("\n").map((function(t){return"<div>".concat(t,"</div>")})).join(""));return i}}]);return FreeTextEditor}(u.AnnotationEditor);r.FreeTextEditor=P;function _updateFontSize2(t){var r=this,i=function setFontsize(t){r.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))");r.translate(0,-(t-_classPrivateFieldGet(r,g))*r.parent.scaleFactor);_classPrivateFieldSet(r,g,t);_classPrivateMethodGet(r,A,_setEditorDimensions2).call(r)},o=_classPrivateFieldGet(this,g);this.parent.addCommands({cmd:function cmd(){i(t)},undo:function undo(){i(o)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(t){var r=this,i=_classPrivateFieldGet(this,h);this.parent.addCommands({cmd:function cmd(){_classPrivateFieldSet(r,h,t);r.editorDiv.style.color=t},undo:function undo(){_classPrivateFieldSet(r,h,i);r.editorDiv.style.color=i},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _extractText2(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;for(var r=[],i=0,a=t.length;i<a;i++){var o=t[i].firstChild;"#text"===(null==o?void 0:o.nodeName)?r.push(o.data):r.push("")}return r.join("\n")}function _setEditorDimensions2(){var t=_slicedToArray(this.parent.viewportBaseDimensions,2),r=t[0],i=t[1],a=this.div.getBoundingClientRect();this.width=a.width/r;this.height=a.height/i}_defineProperty(P,"_freeTextDefaultContent","");_defineProperty(P,"_l10nPromise",void 0);_defineProperty(P,"_internalPadding",0);_defineProperty(P,"_defaultColor",null);_defineProperty(P,"_defaultFontSize",10);_defineProperty(P,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],P.prototype.commitOrRemove]]))},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.InkEditor=void 0;Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function get(){return u.fitCurve}});var a=i(1),o=i(133),u=i(150),l=i(134);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var c=16,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,A=new WeakMap,P=new WeakMap,D=new WeakMap,E=new WeakMap,S=new WeakMap,C=new WeakSet,k=new WeakSet,x=new WeakSet,T=new WeakSet,I=new WeakSet,L=new WeakSet,O=new WeakSet,M=new WeakSet,R=new WeakSet,B=new WeakSet,G=new WeakSet,N=new WeakSet,j=new WeakSet,V=new WeakSet,W=new WeakSet,U=new WeakSet,H=new WeakSet,z=new WeakSet,X=new WeakSet,Y=new WeakSet,K=new WeakSet,$=new WeakSet,Q=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(InkEditor,t);var r=_createSuper(InkEditor);function InkEditor(t){var i;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,InkEditor);_classPrivateMethodInitSpec(_assertThisInitialized(i=r.call(this,_objectSpread(_objectSpread({},t),{},{name:"inkEditor"}))),$);_classPrivateMethodInitSpec(_assertThisInitialized(i),K);_classPrivateMethodInitSpec(_assertThisInitialized(i),Y);_classPrivateMethodInitSpec(_assertThisInitialized(i),X);_classPrivateMethodInitSpec(_assertThisInitialized(i),z);_classPrivateMethodInitSpec(_assertThisInitialized(i),H);_classPrivateMethodInitSpec(_assertThisInitialized(i),U);_classPrivateMethodInitSpec(_assertThisInitialized(i),W);_classPrivateMethodInitSpec(_assertThisInitialized(i),V);_classPrivateMethodInitSpec(_assertThisInitialized(i),j);_classPrivateMethodInitSpec(_assertThisInitialized(i),N);_classPrivateMethodInitSpec(_assertThisInitialized(i),G);_classPrivateMethodInitSpec(_assertThisInitialized(i),B);_classPrivateMethodInitSpec(_assertThisInitialized(i),R);_classPrivateMethodInitSpec(_assertThisInitialized(i),M);_classPrivateMethodInitSpec(_assertThisInitialized(i),O);_classPrivateMethodInitSpec(_assertThisInitialized(i),L);_classPrivateMethodInitSpec(_assertThisInitialized(i),I);_classPrivateMethodInitSpec(_assertThisInitialized(i),T);_classPrivateMethodInitSpec(_assertThisInitialized(i),x);_classPrivateMethodInitSpec(_assertThisInitialized(i),k);_classPrivateMethodInitSpec(_assertThisInitialized(i),C);_classPrivateFieldInitSpec(_assertThisInitialized(i),d,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),h,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),p,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),v,{writable:!0,value:i.canvasPointermove.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),y,{writable:!0,value:i.canvasPointerleave.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),g,{writable:!0,value:i.canvasPointerup.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),m,{writable:!0,value:i.canvasPointerdown.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),b,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(i),w,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(i),A,{writable:!0,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(i),P,{writable:!0,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(i),D,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),E,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),S,{writable:!0,value:null});i.color=t.color||null;i.thickness=t.thickness||null;i.opacity=t.opacity||null;i.paths=[];i.bezierPath2D=[];i.currentPath=[];i.scaleFactor=1;i.translationX=i.translationY=0;i.x=0;i.y=0;return i}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(InkEditor,[{key:"updateParams",value:function updateParams(t,r){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,C,_updateThickness2).call(this,r);break;case a.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,k,_updateColor2).call(this,r);break;case a.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,x,_updateOpacity2).call(this,r)}}},{key:"propertiesToUpdate",get:function get(){var t;return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:InkEditor._defaultOpacity))]]}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(InkEditor.prototype),"rebuild",this).call(this);if(null!==this.div){if(!this.canvas){_classPrivateMethodGet(this,G,_createCanvas2).call(this);_classPrivateMethodGet(this,N,_createObserver2).call(this)}if(!this.isAttachedToDOM){this.parent.add(this);_classPrivateMethodGet(this,j,_setCanvasDims2).call(this)}_classPrivateMethodGet(this,K,_fitToContent2).call(this)}}},{key:"remove",value:function remove(){if(null!==this.canvas){this.isEmpty()||this.commit();this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;_classPrivateFieldGet(this,P).disconnect();_classPrivateFieldSet(this,P,null);_get(_getPrototypeOf(InkEditor.prototype),"remove",this).call(this)}}},{key:"enableEditMode",value:function enableEditMode(){if(!_classPrivateFieldGet(this,b)&&null!==this.canvas){_get(_getPrototypeOf(InkEditor.prototype),"enableEditMode",this).call(this);this.div.draggable=!1;this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,m));this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,g))}}},{key:"disableEditMode",value:function disableEditMode(){if(this.isInEditMode()&&null!==this.canvas){_get(_getPrototypeOf(InkEditor.prototype),"disableEditMode",this).call(this);this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,m));this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,g))}}},{key:"onceAdded",value:function onceAdded(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function commit(){if(!_classPrivateFieldGet(this,b)){_get(_getPrototypeOf(InkEditor.prototype),"commit",this).call(this);this.isEditing=!1;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(this,b,!0);this.div.classList.add("disabled");_classPrivateMethodGet(this,K,_fitToContent2).call(this,!0);this.parent.addInkEditorIfNeeded(!0);this.parent.moveDivInDOM(this);this.div.focus()}}},{key:"focusin",value:function focusin(t){_get(_getPrototypeOf(InkEditor.prototype),"focusin",this).call(this,t);this.enableEditMode()}},{key:"canvasPointerdown",value:function canvasPointerdown(t){if(0===t.button&&this.isInEditMode()&&!_classPrivateFieldGet(this,b)){this.setInForeground();"mouse"!==t.type&&this.div.focus();t.stopPropagation();this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,y));this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,v));_classPrivateMethodGet(this,L,_startDrawing2).call(this,t.offsetX,t.offsetY)}}},{key:"canvasPointermove",value:function canvasPointermove(t){t.stopPropagation();_classPrivateMethodGet(this,O,_draw2).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function canvasPointerup(t){if(0===t.button&&this.isInEditMode()&&0!==this.currentPath.length){t.stopPropagation();_classPrivateMethodGet(this,B,_endDrawing2).call(this,t);this.setInBackground()}}},{key:"canvasPointerleave",value:function canvasPointerleave(t){_classPrivateMethodGet(this,B,_endDrawing2).call(this,t);this.setInBackground()}},{key:"render",value:function render(){var t,r,i=this;if(this.div)return this.div;if(this.width){t=this.x;r=this.y}_get(_getPrototypeOf(InkEditor.prototype),"render",this).call(this);InkEditor._l10nPromise.get("editor_ink_aria_label").then((function(t){var r;return null===(r=i.div)||void 0===r?void 0:r.setAttribute("aria-label",t)}));var a=_slicedToArray(_classPrivateMethodGet(this,T,_getInitialBBox2).call(this),4),o=a[0],u=a[1],l=a[2],c=a[3];this.setAt(o,u,0,0);this.setDims(l,c);_classPrivateMethodGet(this,G,_createCanvas2).call(this);if(this.width){var d=_slicedToArray(this.parent.viewportBaseDimensions,2),h=d[0],p=d[1];this.setAt(t*h,r*p,this.width*h,this.height*p);_classPrivateFieldSet(this,w,!0);_classPrivateMethodGet(this,j,_setCanvasDims2).call(this);this.setDims(this.width*h,this.height*p);_classPrivateMethodGet(this,R,_redraw2).call(this);_classPrivateMethodGet(this,$,_setMinDims2).call(this);this.div.classList.add("disabled")}else{this.div.classList.add("editing");this.enableEditMode()}_classPrivateMethodGet(this,N,_createObserver2).call(this);return this.div}},{key:"setDimensions",value:function setDimensions(t,r){var i=Math.round(t),a=Math.round(r);if(_classPrivateFieldGet(this,D)!==i||_classPrivateFieldGet(this,E)!==a){_classPrivateFieldSet(this,D,i);_classPrivateFieldSet(this,E,a);this.canvas.style.visibility="hidden";if(_classPrivateFieldGet(this,d)&&Math.abs(_classPrivateFieldGet(this,d)-t/r)>.01){r=Math.ceil(t/_classPrivateFieldGet(this,d));this.setDims(t,r)}var o=_slicedToArray(this.parent.viewportBaseDimensions,2),u=o[0],l=o[1];this.width=t/u;this.height=r/l;_classPrivateFieldGet(this,b)&&_classPrivateMethodGet(this,V,_setScaleFactor2).call(this,t,r);_classPrivateMethodGet(this,j,_setCanvasDims2).call(this);_classPrivateMethodGet(this,R,_redraw2).call(this);this.canvas.style.visibility="visible"}}},{key:"serialize",value:function serialize(){if(this.isEmpty())return null;var t=this.getRect(0,0),r=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],i=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,U,_serializePaths2).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,r),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}],[{key:"initialize",value:function initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((function(r){return[r,t.get(r)]})))}},{key:"updateDefaultParams",value:function updateDefaultParams(t,r){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=r;break;case a.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=r;break;case a.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=r/100}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}},{key:"deserialize",value:function deserialize(t,r){var i=_get(_getPrototypeOf(InkEditor),"deserialize",this).call(this,t,r);i.thickness=t.thickness;i.color=a.Util.makeHexColor.apply(a.Util,_toConsumableArray(t.color));i.opacity=t.opacity;var o=_slicedToArray(r.pageDimensions,2),u=o[0],l=o[1],c=i.width*u,v=i.height*l,y=r.scaleFactor,g=t.thickness/2;_classPrivateFieldSet(i,d,c/v);_classPrivateFieldSet(i,b,!0);_classPrivateFieldSet(i,D,Math.round(c));_classPrivateFieldSet(i,E,Math.round(v));var m,w=_createForOfIteratorHelper(t.paths);try{for(w.s();!(m=w.n()).done;){var A=m.value.bezier,P=[];i.paths.push(P);for(var S=y*(A[0]-g),C=y*(v-A[1]-g),k=2,x=A.length;k<x;k+=6){var T=y*(A[k]-g),I=y*(v-A[k+1]-g),L=y*(A[k+2]-g),O=y*(v-A[k+3]-g),M=y*(A[k+4]-g),R=y*(v-A[k+5]-g);P.push([[S,C],[T,I],[L,O],[M,R]]);S=M;C=R}var B=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,P);i.bezierPath2D.push(B)}}catch(t){w.e(t)}finally{w.f()}var G=_classPrivateMethodGet(i,X,_getBbox2).call(i);_classPrivateFieldSet(i,p,G[2]-G[0]);_classPrivateFieldSet(i,h,G[3]-G[1]);_classPrivateMethodGet(i,V,_setScaleFactor2).call(i,c,v);return i}}]);return InkEditor}(o.AnnotationEditor);r.InkEditor=Q;function _updateThickness2(t){var r=this,i=this.thickness;this.parent.addCommands({cmd:function cmd(){r.thickness=t;_classPrivateMethodGet(r,K,_fitToContent2).call(r)},undo:function undo(){r.thickness=i;_classPrivateMethodGet(r,K,_fitToContent2).call(r)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(t){var r=this,i=this.color;this.parent.addCommands({cmd:function cmd(){r.color=t;_classPrivateMethodGet(r,R,_redraw2).call(r)},undo:function undo(){r.color=i;_classPrivateMethodGet(r,R,_redraw2).call(r)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _updateOpacity2(t){var r=this;t/=100;var i=this.opacity;this.parent.addCommands({cmd:function cmd(){r.opacity=t;_classPrivateMethodGet(r,R,_redraw2).call(r)},undo:function undo(){r.opacity=i;_classPrivateMethodGet(r,R,_redraw2).call(r)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function _getInitialBBox2(){var t=this.parent.viewport,r=t.width,i=t.height;switch(t.rotation){case 90:return[0,r,r,i];case 180:return[r,i,r,i];case 270:return[i,0,r,i];default:return[0,0,r,i]}}function _setStroke2(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.miterLimit=10;this.ctx.strokeStyle="".concat(this.color).concat((0,l.opacityToHex)(this.opacity))}function _startDrawing2(t,r){var i=this;this.isEditing=!0;if(!_classPrivateFieldGet(this,w)){var a;_classPrivateFieldSet(this,w,!0);_classPrivateMethodGet(this,j,_setCanvasDims2).call(this);this.thickness||(this.thickness=Q._defaultThickness);this.color||(this.color=Q._defaultColor||o.AnnotationEditor._defaultLineColor);null!==(a=this.opacity)&&void 0!==a||(this.opacity=Q._defaultOpacity)}this.currentPath.push([t,r]);_classPrivateFieldSet(this,A,null);_classPrivateMethodGet(this,I,_setStroke2).call(this);this.ctx.beginPath();this.ctx.moveTo(t,r);_classPrivateFieldSet(this,S,(function(){if(_classPrivateFieldGet(i,S)){if(_classPrivateFieldGet(i,A)){var t;if(i.isEmpty()){i.ctx.setTransform(1,0,0,1,0,0);i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height)}else _classPrivateMethodGet(i,R,_redraw2).call(i);(t=i.ctx).lineTo.apply(t,_toConsumableArray(_classPrivateFieldGet(i,A)));_classPrivateFieldSet(i,A,null);i.ctx.stroke()}window.requestAnimationFrame(_classPrivateFieldGet(i,S))}}));window.requestAnimationFrame(_classPrivateFieldGet(this,S))}function _draw2(t,r){var i=_slicedToArray(this.currentPath.at(-1),2),a=i[0],o=i[1];if(t!==a||r!==o){this.currentPath.push([t,r]);_classPrivateFieldSet(this,A,[t,r])}}function _stopDrawing2(t,r){var i=this;this.ctx.closePath();_classPrivateFieldSet(this,S,null);t=Math.min(Math.max(t,0),this.canvas.width);r=Math.min(Math.max(r,0),this.canvas.height);var a,o=_slicedToArray(this.currentPath.at(-1),2),l=o[0],c=o[1];t===l&&r===c||this.currentPath.push([t,r]);if(1!==this.currentPath.length)a=(0,u.fitCurve)(this.currentPath,30,null);else{var d=[t,r];a=[[d,d.slice(),d.slice(),d]]}var h=_classStaticPrivateMethodGet(Q,Q,_buildPath2D).call(Q,a);this.currentPath.length=0;this.parent.addCommands({cmd:function cmd(){i.paths.push(a);i.bezierPath2D.push(h);i.rebuild()},undo:function undo(){i.paths.pop();i.bezierPath2D.pop();if(0===i.paths.length)i.remove();else{if(!i.canvas){_classPrivateMethodGet(i,G,_createCanvas2).call(i);_classPrivateMethodGet(i,N,_createObserver2).call(i)}_classPrivateMethodGet(i,K,_fitToContent2).call(i)}},mustExec:!0})}function _redraw2(){if(this.isEmpty())_classPrivateMethodGet(this,W,_updateTransform2).call(this);else{_classPrivateMethodGet(this,I,_setStroke2).call(this);var t=this.canvas,r=this.ctx;r.setTransform(1,0,0,1,0,0);r.clearRect(0,0,t.width,t.height);_classPrivateMethodGet(this,W,_updateTransform2).call(this);var i,a=_createForOfIteratorHelper(this.bezierPath2D);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.stroke(o)}}catch(t){a.e(t)}finally{a.f()}}}function _endDrawing2(t){_classPrivateMethodGet(this,M,_stopDrawing2).call(this,t.offsetX,t.offsetY);this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,y));this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,v));this.parent.addToAnnotationStorage(this)}function _createCanvas2(){var t=this;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";Q._l10nPromise.get("editor_ink_canvas_aria_label").then((function(r){var i;return null===(i=t.canvas)||void 0===i?void 0:i.setAttribute("aria-label",r)}));this.div.append(this.canvas);this.ctx=this.canvas.getContext("2d")}function _createObserver2(){var t=this;_classPrivateFieldSet(this,P,new ResizeObserver((function(r){var i=r[0].contentRect;i.width&&i.height&&t.setDimensions(i.width,i.height)})));_classPrivateFieldGet(this,P).observe(this.div)}function _setCanvasDims2(){if(_classPrivateFieldGet(this,w)){var t=_slicedToArray(this.parent.viewportBaseDimensions,2),r=t[0],i=t[1];this.canvas.width=Math.ceil(this.width*r);this.canvas.height=Math.ceil(this.height*i);_classPrivateMethodGet(this,W,_updateTransform2).call(this)}}function _setScaleFactor2(t,r){var i=_classPrivateMethodGet(this,Y,_getPadding2).call(this),a=(t-i)/_classPrivateFieldGet(this,p),o=(r-i)/_classPrivateFieldGet(this,h);this.scaleFactor=Math.min(a,o)}function _updateTransform2(){var t=_classPrivateMethodGet(this,Y,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function _buildPath2D(t){for(var r=new Path2D,i=0,a=t.length;i<a;i++){var o=_slicedToArray(t[i],4),u=o[0],l=o[1],c=o[2],d=o[3];0===i&&r.moveTo.apply(r,_toConsumableArray(u));r.bezierCurveTo(l[0],l[1],c[0],c[1],d[0],d[1])}return r}function _serializePaths2(t,r,i,a){var o,u,l,c=[],d=this.thickness/2,h=_createForOfIteratorHelper(this.paths);try{for(h.s();!(l=h.n()).done;){var p=l.value;o=[];u=[];for(var v=0,y=p.length;v<y;v++){var g=_slicedToArray(p[v],4),m=g[0],b=g[1],w=g[2],A=g[3],P=t*(m[0]+r)+d,D=a-t*(m[1]+i)-d,E=t*(b[0]+r)+d,S=a-t*(b[1]+i)-d,C=t*(w[0]+r)+d,k=a-t*(w[1]+i)-d,x=t*(A[0]+r)+d,T=a-t*(A[1]+i)-d;if(0===v){o.push(P,D);u.push(P,D)}o.push(E,S,C,k,x,T);_classPrivateMethodGet(this,H,_extractPointsOnBezier2).call(this,P,D,E,S,C,k,x,T,4,u)}c.push({bezier:o,points:u})}}catch(t){h.e(t)}finally{h.f()}return c}function _extractPointsOnBezier2(t,r,i,a,o,u,l,c,d,h){if(_classPrivateMethodGet(this,z,_isAlmostFlat2).call(this,t,r,i,a,o,u,l,c))h.push(l,c);else{for(var p=1;p<d-1;p++){var v=p/d,y=1-v,g=v*t+y*i,m=v*r+y*a,b=v*i+y*o,w=v*a+y*u;g=v*(g=v*g+y*b)+y*(b=v*b+y*(v*o+y*l));m=v*(m=v*m+y*w)+y*(w=v*w+y*(v*u+y*c));h.push(g,m)}h.push(l,c)}}function _isAlmostFlat2(t,r,i,a,o,u,l,c){var d=Math.pow(3*i-2*t-l,2),h=Math.pow(3*a-2*r-c,2),p=Math.pow(3*o-t-2*l,2),v=Math.pow(3*u-r-2*c,2);return Math.max(d,p)+Math.max(h,v)<=10}function _getBbox2(){var t,r=1/0,i=-1/0,o=1/0,u=-1/0,l=_createForOfIteratorHelper(this.paths);try{for(l.s();!(t=l.n()).done;){var c,d=_createForOfIteratorHelper(t.value);try{for(d.s();!(c=d.n()).done;){var h=_slicedToArray(c.value,4),p=h[0],v=h[1],y=h[2],g=h[3],m=a.Util.bezierBoundingBox.apply(a.Util,_toConsumableArray(p).concat(_toConsumableArray(v),_toConsumableArray(y),_toConsumableArray(g)));r=Math.min(r,m[0]);o=Math.min(o,m[1]);i=Math.max(i,m[2]);u=Math.max(u,m[3])}}catch(t){d.e(t)}finally{d.f()}}}catch(t){l.e(t)}finally{l.f()}return[r,o,i,u]}function _getPadding2(){return _classPrivateFieldGet(this,b)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function _fitToContent2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(_classPrivateFieldGet(this,b)){var r=_classPrivateMethodGet(this,X,_getBbox2).call(this),i=_classPrivateMethodGet(this,Y,_getPadding2).call(this);_classPrivateFieldSet(this,p,Math.max(c,r[2]-r[0]));_classPrivateFieldSet(this,h,Math.max(c,r[3]-r[1]));var a=Math.ceil(i+_classPrivateFieldGet(this,p)*this.scaleFactor),o=Math.ceil(i+_classPrivateFieldGet(this,h)*this.scaleFactor),u=_slicedToArray(this.parent.viewportBaseDimensions,2),l=u[0],v=u[1];this.width=a/l;this.height=o/v;_classPrivateFieldSet(this,d,a/o);_classPrivateMethodGet(this,$,_setMinDims2).call(this);var y=this.translationX,g=this.translationY;this.translationX=-r[0];this.translationY=-r[1];_classPrivateMethodGet(this,j,_setCanvasDims2).call(this);_classPrivateMethodGet(this,R,_redraw2).call(this);_classPrivateFieldSet(this,D,a);_classPrivateFieldSet(this,E,o);this.setDims(a,o);var m=t?i/this.scaleFactor/2:0;this.translate(y-this.translationX-m,g-this.translationY-m)}else _classPrivateMethodGet(this,R,_redraw2).call(this)}function _setMinDims2(){var t=this.div.style;if(_classPrivateFieldGet(this,d)>=1){t.minHeight="".concat(c,"px");t.minWidth="".concat(Math.round(_classPrivateFieldGet(this,d)*c),"px")}else{t.minWidth="".concat(c,"px");t.minHeight="".concat(Math.round(c/_classPrivateFieldGet(this,d)),"px")}}_defineProperty(Q,"_defaultColor",null);_defineProperty(Q,"_defaultOpacity",1);_defineProperty(Q,"_defaultThickness",1);_defineProperty(Q,"_l10nPromise",void 0)},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.fitCurve=void 0;var a=i(151);r.fitCurve=a},t=>{"use strict";function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function fitCubic(t,r,a,o,u){var l,c,d,h,p,v,y,g,m,b,w,A,P;if(2===t.length){A=i.vectorLen(i.subtract(t[0],t[1]))/3;return[l=[t[0],i.addArrays(t[0],i.mulItems(r,A)),i.addArrays(t[1],i.mulItems(a,A)),t[1]]]}c=function chordLengthParameterize(t){var r,a,o,u=[];t.forEach((function(t,l){r=l?a+i.vectorLen(i.subtract(t,o)):0;u.push(r);a=r;o=t}));return u=u.map((function(t){return t/a}))}(t);var D=_slicedToArray(generateAndReport(t,c,c,r,a,u),3);l=D[0];h=D[1];v=D[2];if(0===h||h<o)return[l];if(h<o*o){d=c;p=h;y=v;for(P=0;P<20;P++){var E=_slicedToArray(generateAndReport(t,c,d=reparameterize(l,t,d),r,a,u),3);l=E[0];h=E[1];v=E[2];if(h<o)return[l];if(v===y){var S=h/p;if(S>.9999&&S<1.0001)break}p=h;y=v}}w=[];if((g=i.subtract(t[v-1],t[v+1])).every((function(t){return 0===t}))){var C=[-(g=i.subtract(t[v-1],t[v]))[1],g[0]];g[0]=C[0];g[1]=C[1]}m=i.normalize(g);b=i.mulItems(m,-1);return w=(w=w.concat(fitCubic(t.slice(0,v+1),r,m,o,u))).concat(fitCubic(t.slice(v),b,a,o,u))}function generateAndReport(t,o,u,l,c,d){var h,p,v;h=function generateBezier(t,r,o,u){var l,c,d,h,p,v,y,g,m,b,w,A,P,D,E,S,C,k=t[0],x=t[t.length-1];l=[k,null,null,x];c=i.zeros_Xx2x2(r.length);for(P=0,D=r.length;P<D;P++){C=1-(S=r[P]);(d=c[P])[0]=i.mulItems(o,3*S*(C*C));d[1]=i.mulItems(u,3*C*(S*S))}h=[[0,0],[0,0]];p=[0,0];for(P=0,D=t.length;P<D;P++){S=r[P];d=c[P];h[0][0]+=i.dot(d[0],d[0]);h[0][1]+=i.dot(d[0],d[1]);h[1][0]+=i.dot(d[0],d[1]);h[1][1]+=i.dot(d[1],d[1]);E=i.subtract(t[P],a.q([k,k,x,x],S));p[0]+=i.dot(d[0],E);p[1]+=i.dot(d[1],E)}v=h[0][0]*h[1][1]-h[1][0]*h[0][1];y=h[0][0]*p[1]-h[1][0]*p[0];g=p[0]*h[1][1]-p[1]*h[0][1];m=0===v?0:g/v;b=0===v?0:y/v;A=i.vectorLen(i.subtract(k,x));if(m<(w=1e-6*A)||b<w){l[1]=i.addArrays(k,i.mulItems(o,A/3));l[2]=i.addArrays(x,i.mulItems(u,A/3))}else{l[1]=i.addArrays(k,i.mulItems(o,m));l[2]=i.addArrays(x,i.mulItems(u,b))}return l}(t,u,l,c);var y=function computeMaxError(t,o,u){var l,c,d,h,p,v,y,g;c=0;d=Math.floor(t.length/2);var m=r(o,10);for(p=0,v=t.length;p<v;p++){y=t[p];g=find_t(o,u[p],m,10);if((l=(h=i.subtract(a.q(o,g),y))[0]*h[0]+h[1]*h[1])>c){c=l;d=p}}return[c,d]}(t,h,o),g=_slicedToArray(y,2);p=g[0];v=g[1];d&&d({bez:h,points:t,params:o,maxErr:p,maxPoint:v});return[h,p,v]}function reparameterize(t,r,i){return i.map((function(i,a){return newtonRaphsonRootFind(t,r[a],i)}))}function newtonRaphsonRootFind(t,r,o){var u=i.subtract(a.q(t,o),r),l=a.qprime(t,o),c=i.mulMatrix(u,l),d=i.sum(i.squareItems(l))+2*i.mulMatrix(u,a.qprimeprime(t,o));return 0===d?o:o-c/d}var r=function mapTtoRelativeDistances(t,r){for(var o,u=[0],l=t[0],c=0,d=1;d<=r;d++){o=a.q(t,d/r);c+=i.vectorLen(i.subtract(o,l));u.push(c);l=o}return u=u.map((function(t){return t/c}))};function find_t(t,r,i,a){if(r<0)return 0;if(r>1)return 1;for(var o,u,l,c,d=1;d<=a;d++)if(r<=i[d]){l=(d-1)/a;u=d/a;c=(r-(o=i[d-1]))/(i[d]-o)*(u-l)+l;break}return c}function createTangent(t,r){return i.normalize(i.subtract(t,r))}var i=function(){function maths(){_classCallCheck(this,maths)}_createClass(maths,null,[{key:"zeros_Xx2x2",value:function zeros_Xx2x2(t){for(var r=[];t--;)r.push([0,0]);return r}},{key:"mulItems",value:function mulItems(t,r){return t.map((function(t){return t*r}))}},{key:"mulMatrix",value:function mulMatrix(t,r){return t.reduce((function(t,i,a){return t+i*r[a]}),0)}},{key:"subtract",value:function subtract(t,r){return t.map((function(t,i){return t-r[i]}))}},{key:"addArrays",value:function addArrays(t,r){return t.map((function(t,i){return t+r[i]}))}},{key:"addItems",value:function addItems(t,r){return t.map((function(t){return t+r}))}},{key:"sum",value:function sum(t){return t.reduce((function(t,r){return t+r}))}},{key:"dot",value:function dot(t,r){return maths.mulMatrix(t,r)}},{key:"vectorLen",value:function vectorLen(t){return Math.hypot.apply(Math,_toConsumableArray(t))}},{key:"divItems",value:function divItems(t,r){return t.map((function(t){return t/r}))}},{key:"squareItems",value:function squareItems(t){return t.map((function(t){return t*t}))}},{key:"normalize",value:function normalize(t){return this.divItems(t,this.vectorLen(t))}}]);return maths}(),a=function(){function bezier(){_classCallCheck(this,bezier)}_createClass(bezier,null,[{key:"q",value:function q(t,r){var a=1-r,o=i.mulItems(t[0],a*a*a),u=i.mulItems(t[1],3*a*a*r),l=i.mulItems(t[2],3*a*r*r),c=i.mulItems(t[3],r*r*r);return i.addArrays(i.addArrays(o,u),i.addArrays(l,c))}},{key:"qprime",value:function qprime(t,r){var a=1-r,o=i.mulItems(i.subtract(t[1],t[0]),3*a*a),u=i.mulItems(i.subtract(t[2],t[1]),6*a*r),l=i.mulItems(i.subtract(t[3],t[2]),3*r*r);return i.addArrays(i.addArrays(o,u),l)}},{key:"qprimeprime",value:function qprimeprime(t,r){return i.addArrays(i.mulItems(i.addArrays(i.subtract(t[2],i.mulItems(t[1],2)),t[0]),6*(1-r)),i.mulItems(i.addArrays(i.subtract(t[3],i.mulItems(t[2],2)),t[1]),6*r))}}]);return bezier}();t.exports=function fitCurve(t,r,i){if(!Array.isArray(t))throw new TypeError("First argument should be an array");t.forEach((function(r){if(!Array.isArray(r)||r.some((function(t){return"number"!=typeof t}))||r.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}));if((t=t.filter((function(r,i){return 0===i||!r.every((function(r,a){return r===t[i-1][a]}))}))).length<2)return[];var a=t.length,o=createTangent(t[1],t[0]),u=createTangent(t[a-2],t[a-1]);return fitCubic(t,o,u,r,i)};t.exports.fitCubic=fitCubic;t.exports.createTangent=createTangent},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationLayer=void 0;var a=i(1),o=i(129),u=i(132),l=i(153),c=i(154);function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var d=1e3,h=new WeakSet;function getRectDims(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var p=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}_createClass(AnnotationElementFactory,null,[{key:"create",value:function create(t){switch(t.data.annotationType){case a.AnnotationType.LINK:return new y(t);case a.AnnotationType.TEXT:return new g(t);case a.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new b(t);case"Btn":return t.data.radioButton?new A(t):t.data.checkBox?new w(t):new P(t);case"Ch":return new D(t)}return new m(t);case a.AnnotationType.POPUP:return new E(t);case a.AnnotationType.FREETEXT:return new C(t);case a.AnnotationType.LINE:return new k(t);case a.AnnotationType.SQUARE:return new x(t);case a.AnnotationType.CIRCLE:return new T(t);case a.AnnotationType.POLYLINE:return new I(t);case a.AnnotationType.CARET:return new O(t);case a.AnnotationType.INK:return new M(t);case a.AnnotationType.POLYGON:return new L(t);case a.AnnotationType.HIGHLIGHT:return new R(t);case a.AnnotationType.UNDERLINE:return new B(t);case a.AnnotationType.SQUIGGLY:return new G(t);case a.AnnotationType.STRIKEOUT:return new N(t);case a.AnnotationType.STAMP:return new j(t);case a.AnnotationType.FILEATTACHMENT:return new V(t);default:return new v(t)}}}]);return AnnotationElementFactory}(),v=function(){function AnnotationElement(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.isRenderable,a=void 0!==i&&i,o=r.ignoreBorder,u=void 0!==o&&o,l=r.createQuadrilaterals,c=void 0!==l&&l;_classCallCheck(this,AnnotationElement);this.isRenderable=a;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderForms=t.renderForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._fieldObjects=t.fieldObjects;this._mouseState=t.mouseState;a&&(this.container=this._createContainer(u));c&&(this.quadrilaterals=this._createQuadrilaterals(u))}_createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.data,i=this.page,o=this.viewport,u=document.createElement("section"),l=getRectDims(r.rect),c=l.width,d=l.height,h=_slicedToArray(o.viewBox,4),p=h[0],v=h[1],y=h[2],g=h[3],m=y-p,b=g-v;u.setAttribute("data-annotation-id",r.id);var w=a.Util.normalizeRect([r.rect[0],i.view[3]-r.rect[1]+i.view[1],r.rect[2],i.view[3]-r.rect[3]+i.view[1]]);if(!t&&r.borderStyle.width>0){u.style.borderWidth="".concat(r.borderStyle.width,"px");var A=r.borderStyle.horizontalCornerRadius,P=r.borderStyle.verticalCornerRadius;if(A>0||P>0){var D="calc(".concat(A,"px * var(--scale-factor)) / calc(").concat(P,"px * var(--scale-factor))");u.style.borderRadius=D}switch(r.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:u.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:u.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:u.style.borderBottomStyle="solid"}var E=r.borderColor||null;E?u.style.borderColor=a.Util.makeHexColor(0|E[0],0|E[1],0|E[2]):u.style.borderWidth=0}u.style.left="".concat(100*(w[0]-p)/m,"%");u.style.top="".concat(100*(w[1]-v)/b,"%");var S=r.rotation;if(r.hasOwnCanvas||0===S){u.style.width="".concat(100*c/m,"%");u.style.height="".concat(100*d/b,"%")}else this.setRotation(S,u);return u}},{key:"setRotation",value:function setRotation(t){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,o=_slicedToArray(this.viewport.viewBox,4),u=o[0],l=o[1],c=o[2],d=o[3],h=c-u,p=d-l,v=getRectDims(this.data.rect),y=v.width,g=v.height;if(t%180==0){r=100*y/h;i=100*g/p}else{r=100*g/h;i=100*y/p}a.style.width="".concat(r,"%");a.style.height="".concat(i,"%");a.setAttribute("data-main-rotation",(360-t)%360)}},{key:"_commonActions",get:function get(){var t=this,r=function setColor(t,r,i){var a=i.detail[t];i.target.style[r]=l.ColorConverters["".concat(a[0],"_HTML")](a.slice(1))};return(0,a.shadow)(this,"_commonActions",{display:function display(r){var i=r.detail.display%2==1;t.container.style.visibility=i?"hidden":"visible";t.annotationStorage.setValue(t.data.id,{hidden:i,print:0===r.detail.display||3===r.detail.display})},print:function print(r){t.annotationStorage.setValue(t.data.id,{print:r.detail.print})},hidden:function hidden(r){t.container.style.visibility=r.detail.hidden?"hidden":"visible";t.annotationStorage.setValue(t.data.id,{hidden:r.detail.hidden})},focus:function focus(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function userName(t){t.target.title=t.detail.userName},readonly:function readonly(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function required(r){t._setRequired(r.target,r.detail.required)},bgColor:function bgColor(t){r("bgColor","backgroundColor",t)},fillColor:function fillColor(t){r("fillColor","backgroundColor",t)},fgColor:function fgColor(t){r("fgColor","color",t)},textColor:function textColor(t){r("textColor","color",t)},borderColor:function borderColor(t){r("borderColor","borderColor",t)},strokeColor:function strokeColor(t){r("strokeColor","borderColor",t)},rotation:function rotation(r){var i=r.detail.rotation;t.setRotation(i);t.annotationStorage.setValue(t.data.id,{rotation:i})}})}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(t,r){for(var i=this._commonActions,a=0,o=Object.keys(r.detail);a<o.length;a++){var u=o[a],l=t[u]||i[u];l&&l(r)}}},{key:"_setDefaultPropertiesFromJS",value:function _setDefaultPropertiesFromJS(t){if(this.enableScripting){var r=this.annotationStorage.getRawValue(this.data.id);if(r)for(var i=this._commonActions,a=0,o=Object.entries(r);a<o.length;a++){var u=_slicedToArray(o[a],2),l=u[0],c=u[1],d=i[l];if(d){d({detail:c,target:t});delete r[l]}}}}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var r,i=[],a=this.data.rect,o=_createForOfIteratorHelper(this.data.quadPoints);try{for(o.s();!(r=o.n()).done;){var u=r.value;this.data.rect=[u[2].x,u[2].y,u[1].x,u[1].y];i.push(this._createContainer(t))}}catch(t){o.e(t)}finally{o.f()}this.data.rect=a;return i}},{key:"_createPopup",value:function _createPopup(t,r){var i=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;i=this.quadrilaterals[0]}if(!t){(t=document.createElement("div")).className="popupTriggerArea";i.append(t)}var a=new S({container:i,trigger:t,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();a.style.left="100%";i.append(a)}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(t){var r,i=_createForOfIteratorHelper(this.quadrilaterals);try{for(i.s();!(r=i.n()).done;){r.value.className=t}}catch(t){i.e(t)}finally{i.f()}return this.quadrilaterals}},{key:"render",value:function render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function _getElementsByName(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];if(this._fieldObjects){var o=this._fieldObjects[t];if(o){var u,l=_createForOfIteratorHelper(o);try{for(l.s();!(u=l.n()).done;){var c=u.value,d=c.page,p=c.id,v=c.exportValues;if(-1!==d&&p!==r){var y="string"==typeof v?v:null,g=document.querySelector('[data-element-id="'.concat(p,'"]'));!g||h.has(g)?i.push({id:p,exportValue:y,domElement:g}):(0,a.warn)("_getElementsByName - element not allowed: ".concat(p))}}}catch(t){l.e(t)}finally{l.f()}}return i}var m,b=_createForOfIteratorHelper(document.getElementsByName(t));try{for(b.s();!(m=b.n()).done;){var w=m.value,A=w.id,P=w.exportValue;A!==r&&(h.has(w)&&i.push({id:A,exportValue:P,domElement:w}))}}catch(t){b.e(t)}finally{b.f()}return i}}],[{key:"platform",get:function get(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]);return AnnotationElement}(),y=function(t){_inherits(LinkAnnotationElement,t);var r=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,LinkAnnotationElement);(i=r.call(this,t,{isRenderable:!0,ignoreBorder:!(null==a||!a.ignoreBorder),createQuadrilaterals:!0})).isTooltipOnly=t.data.isTooltipOnly;return i}_createClass(LinkAnnotationElement,[{key:"render",value:function render(){var t=this.data,r=this.linkService,i=document.createElement("a");i.setAttribute("data-element-id",t.id);var a=!1;if(t.url){r.addLinkAttributes(i,t.url,t.newWindow);a=!0}else if(t.action){this._bindNamedAction(i,t.action);a=!0}else if(t.dest){this._bindLink(i,t.dest);a=!0}else{if(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(i,t);a=!0}if(t.resetForm){this._bindResetFormAction(i,t.resetForm);a=!0}else if(this.isTooltipOnly&&!a){this._bindLink(i,"");a=!0}}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map((function(t,r){var a=0===r?i:i.cloneNode();t.append(a);return t}));this.container.className="linkAnnotation";a&&this.container.append(i);return this.container}},{key:"_bindLink",value:function _bindLink(t,r){var i=this;t.href=this.linkService.getDestinationHash(r);t.onclick=function(){r&&i.linkService.goToDestination(r);return!1};(r||""===r)&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function _bindNamedAction(t,r){var i=this;t.href=this.linkService.getAnchorUrl("");t.onclick=function(){i.linkService.executeNamedAction(r);return!1};t.className="internalLink"}},{key:"_bindJSAction",value:function _bindJSAction(t,r){var i=this;t.href=this.linkService.getAnchorUrl("");for(var a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),o=function _loop(){var o=l[u],c=a.get(o);if(!c)return"continue";t[c]=function(){var t;null===(t=i.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:i,detail:{id:r.id,name:o}});return!1}},u=0,l=Object.keys(r.actions);u<l.length;u++)o();t.onclick||(t.onclick=function(){return!1});t.className="internalLink"}},{key:"_bindResetFormAction",value:function _bindResetFormAction(t,r){var i=this,o=t.onclick;o||(t.href=this.linkService.getAnchorUrl(""));t.className="internalLink";if(this._fieldObjects)t.onclick=function(){o&&o();var t=r.fields,u=r.refs,l=r.include,c=[];if(0!==t.length||0!==u.length){var d,p=new Set(u),v=_createForOfIteratorHelper(t);try{for(v.s();!(d=v.n()).done;){var y,g=d.value,m=_createForOfIteratorHelper(i._fieldObjects[g]||[]);try{for(m.s();!(y=m.n()).done;){var b=y.value.id;p.add(b)}}catch(t){m.e(t)}finally{m.f()}}}catch(t){v.e(t)}finally{v.f()}for(var w=0,A=Object.values(i._fieldObjects);w<A.length;w++){var P,D=_createForOfIteratorHelper(A[w]);try{for(D.s();!(P=D.n()).done;){var E=P.value;p.has(E.id)===l&&c.push(E)}}catch(t){D.e(t)}finally{D.f()}}}else for(var S=0,C=Object.values(i._fieldObjects);S<C.length;S++){var k=C[S];c.push.apply(c,_toConsumableArray(k))}for(var x=i.annotationStorage,T=[],I=0,L=c;I<L.length;I++){var O=L[I],M=O.id;T.push(M);switch(O.type){case"text":var R=O.defaultValue||"";x.setValue(M,{value:R});break;case"checkbox":case"radiobutton":var B=O.defaultValue===O.exportValues;x.setValue(M,{value:B});break;case"combobox":case"listbox":var G=O.defaultValue||"";x.setValue(M,{value:G});break;default:continue}var N=document.querySelector('[data-element-id="'.concat(M,'"]'));N&&(h.has(N)?N.dispatchEvent(new Event("resetform")):(0,a.warn)("_bindResetFormAction - element not allowed: ".concat(M)))}if(i.enableScripting){var j;null===(j=i.linkService.eventBus)||void 0===j||j.dispatch("dispatcheventinsandbox",{source:i,detail:{id:"app",ids:T,name:"ResetForm"}})}return!1};else{(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.');o||(t.onclick=function(){return!1})}}}]);return LinkAnnotationElement}(v),g=function(t){_inherits(TextAnnotationElement,t);var r=_createSuper(TextAnnotationElement);function TextAnnotationElement(t){var i,a,o;_classCallCheck(this,TextAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u})}_createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.className="textAnnotation";var t=document.createElement("img");t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.append(t);return this.container}}]);return TextAnnotationElement}(v),m=function(t){_inherits(WidgetAnnotationElement,t);var r=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){_classCallCheck(this,WidgetAnnotationElement);return r.apply(this,arguments)}_createClass(WidgetAnnotationElement,[{key:"render",value:function render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}},{key:"_getKeyModifier",value:function _getKeyModifier(t){var r=v.platform,i=r.isWin,a=r.isMac;return i&&t.ctrlKey||a&&t.metaKey}},{key:"_setEventListener",value:function _setEventListener(t,r,i,a){var o=this;r.includes("mouse")?t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:i,value:a(t),shift:t.shiftKey,modifier:o._getKeyModifier(t)}})})):t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:i,value:a(t)}})}))}},{key:"_setEventListeners",value:function _setEventListeners(t,r,i){var a,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var u,l=_slicedToArray(a.value,2),c=l[0],d=l[1];("Action"===d||null!==(u=this.data.actions)&&void 0!==u&&u[d])&&this._setEventListener(t,c,d,i)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(t){var r=this.data.backgroundColor||null;t.style.backgroundColor=null===r?"transparent":a.Util.makeHexColor(r[0],r[1],r[2])}},{key:"_setTextStyle",value:function _setTextStyle(t){var r,i=this.data.defaultAppearanceData.fontColor,o=this.data.defaultAppearanceData.fontSize||9,u=t.style;if(this.data.multiLine){var l=Math.abs(this.data.rect[3]-this.data.rect[1]),c=l/(Math.round(l/(a.LINE_FACTOR*o))||1);r=Math.min(o,Math.round(c/a.LINE_FACTOR))}else{var d=Math.abs(this.data.rect[3]-this.data.rect[1]);r=Math.min(o,Math.round(d/a.LINE_FACTOR))}u.fontSize="calc(".concat(r,"px * var(--scale-factor))");u.color=a.Util.makeHexColor(i[0],i[1],i[2]);null!==this.data.textAlignment&&(u.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function _setRequired(t,r){r?t.setAttribute("required",!0):t.removeAttribute("required");t.setAttribute("aria-required",r)}}]);return WidgetAnnotationElement}(v),b=function(t){_inherits(TextWidgetAnnotationElement,t);var r=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(t){_classCallCheck(this,TextWidgetAnnotationElement);var i=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;return r.call(this,t,{isRenderable:i})}_createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(t,r,i,a){var o,u=this.annotationStorage,l=_createForOfIteratorHelper(this._getElementsByName(t.name,t.id));try{for(l.s();!(o=l.n()).done;){var c=o.value;c.domElement&&(c.domElement[r]=i);u.setValue(c.id,_defineProperty({},a,i))}}catch(t){l.e(t)}finally{l.f()}}},{key:"render",value:function render(){var t=this,r=this.annotationStorage,i=this.data.id;this.container.className="textWidgetAnnotation";var a=null;if(this.renderForms){var o=r.getValue(i,{value:this.data.fieldValue}),u=o.formattedValue||o.value||"",l={userValue:u,formattedValue:null,valueOnFocus:""};if(this.data.multiLine){(a=document.createElement("textarea")).textContent=u;this.data.doNotScroll&&(a.style.overflowY="hidden")}else{(a=document.createElement("input")).type="text";a.setAttribute("value",u);this.data.doNotScroll&&(a.style.overflowX="hidden")}h.add(a);a.setAttribute("data-element-id",i);a.disabled=this.data.readOnly;a.name=this.data.fieldName;a.tabIndex=d;this._setRequired(a,this.data.required);a.addEventListener("input",(function(o){r.setValue(i,{value:o.target.value});t.setPropertyOnSiblings(a,"value",o.target.value,"value")}));a.addEventListener("resetform",(function(r){var i,o=null!==(i=t.data.defaultFieldValue)&&void 0!==i?i:"";a.value=l.userValue=o;l.formattedValue=null}));var c=function blurListener(t){var r=l.formattedValue;null!=r&&(t.target.value=r);t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var p;a.addEventListener("focus",(function(t){l.userValue&&(t.target.value=l.userValue);l.valueOnFocus=t.target.value}));a.addEventListener("updatefromsandbox",(function(a){var o={value:function value(t){var a;l.userValue=null!==(a=t.detail.value)&&void 0!==a?a:"";r.setValue(i,{value:l.userValue.toString()});t.target.value=l.userValue},formattedValue:function formattedValue(t){var formattedValue=t.detail.formattedValue;l.formattedValue=formattedValue;null!=formattedValue&&t.target!==document.activeElement&&(t.target.value=formattedValue);r.setValue(i,{formattedValue:formattedValue})},selRange:function selRange(t){var r;(r=t.target).setSelectionRange.apply(r,_toConsumableArray(t.detail.selRange))}};t._dispatchEventFromSandbox(o,a)}));a.addEventListener("keydown",(function(r){var a,o=-1;"Escape"===r.key?o=0:"Enter"===r.key?o=2:"Tab"===r.key&&(o=3);if(-1!==o){var u=r.target.value;if(l.valueOnFocus!==u){l.userValue=u;null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:u,willCommit:!0,commitKey:o,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}}}));var v=c;c=null;a.addEventListener("blur",(function(r){var a=r.target.value;l.userValue=a;if(t._mouseState.isDown&&l.valueOnFocus!==a){var o;null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}v(r)}));null!==(p=this.data.actions)&&void 0!==p&&p.Keystroke&&a.addEventListener("beforeinput",(function(r){var a,o=r.data,u=r.target,l=u.value,c=u.selectionStart,d=u.selectionEnd,h=c,p=d;switch(r.inputType){case"deleteWordBackward":var v=l.substring(0,c).match(/\w*[^\w]*$/);v&&(h-=v[0].length);break;case"deleteWordForward":var y=l.substring(c).match(/^[^\w]*\w*/);y&&(p+=y[0].length);break;case"deleteContentBackward":c===d&&(h-=1);break;case"deleteContentForward":c===d&&(p+=1)}r.preventDefault();null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:l,change:o||"",willCommit:!1,selStart:h,selEnd:p}})}));this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}c&&a.addEventListener("blur",c);null!==this.data.maxLen&&(a.maxLength=this.data.maxLen);if(this.data.comb){var y=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;a.classList.add("comb");a.style.letterSpacing="calc(".concat(y,"px * var(--scale-factor) - 1ch)")}}else{(a=document.createElement("div")).textContent=this.data.fieldValue;a.style.verticalAlign="middle";a.style.display="table-cell"}this._setTextStyle(a);this._setBackgroundColor(a);this._setDefaultPropertiesFromJS(a);this.container.append(a);return this.container}}]);return TextWidgetAnnotationElement}(m),w=function(t){_inherits(CheckboxWidgetAnnotationElement,t);var r=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(t){_classCallCheck(this,CheckboxWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=this.annotationStorage,i=this.data,a=i.id,o=r.getValue(a,{value:i.exportValue===i.fieldValue}).value;if("string"==typeof o){o="Off"!==o;r.setValue(a,{value:o})}this.container.className="buttonWidgetAnnotation checkBox";var u=document.createElement("input");h.add(u);u.setAttribute("data-element-id",a);u.disabled=i.readOnly;this._setRequired(u,this.data.required);u.type="checkbox";u.name=i.fieldName;o&&u.setAttribute("checked",!0);u.setAttribute("exportValue",i.exportValue);u.tabIndex=d;u.addEventListener("change",(function(o){var u,l=o.target,c=l.name,d=l.checked,h=_createForOfIteratorHelper(t._getElementsByName(c,a));try{for(h.s();!(u=h.n()).done;){var p=u.value,v=d&&p.exportValue===i.exportValue;p.domElement&&(p.domElement.checked=v);r.setValue(p.id,{value:v})}}catch(t){h.e(t)}finally{h.f()}r.setValue(a,{value:d})}));u.addEventListener("resetform",(function(t){var r=i.defaultFieldValue||"Off";t.target.checked=r===i.exportValue}));if(this.enableScripting&&this.hasJSActions){u.addEventListener("updatefromsandbox",(function(i){var o={value:function value(t){t.target.checked="Off"!==t.detail.value;r.setValue(a,{value:t.target.checked})}};t._dispatchEventFromSandbox(o,i)}));this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this._setBackgroundColor(u);this._setDefaultPropertiesFromJS(u);this.container.append(u);return this.container}}]);return CheckboxWidgetAnnotationElement}(m),A=function(t){_inherits(RadioButtonWidgetAnnotationElement,t);var r=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(t){_classCallCheck(this,RadioButtonWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="buttonWidgetAnnotation radioButton";var r=this.annotationStorage,i=this.data,a=i.id,o=r.getValue(a,{value:i.fieldValue===i.buttonValue}).value;if("string"==typeof o){o=o!==i.buttonValue;r.setValue(a,{value:o})}var u=document.createElement("input");h.add(u);u.setAttribute("data-element-id",a);u.disabled=i.readOnly;this._setRequired(u,this.data.required);u.type="radio";u.name=i.fieldName;o&&u.setAttribute("checked",!0);u.tabIndex=d;u.addEventListener("change",(function(i){var o,u=i.target,l=u.name,c=u.checked,d=_createForOfIteratorHelper(t._getElementsByName(l,a));try{for(d.s();!(o=d.n()).done;){var h=o.value;r.setValue(h.id,{value:!1})}}catch(t){d.e(t)}finally{d.f()}r.setValue(a,{value:c})}));u.addEventListener("resetform",(function(t){var r=i.defaultFieldValue;t.target.checked=null!=r&&r===i.buttonValue}));if(this.enableScripting&&this.hasJSActions){var l=i.buttonValue;u.addEventListener("updatefromsandbox",(function(i){var o={value:function value(i){var o,u=l===i.detail.value,c=_createForOfIteratorHelper(t._getElementsByName(i.target.name));try{for(c.s();!(o=c.n()).done;){var d=o.value,h=u&&d.id===a;d.domElement&&(d.domElement.checked=h);r.setValue(d.id,{value:h})}}catch(t){c.e(t)}finally{c.f()}}};t._dispatchEventFromSandbox(o,i)}));this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this._setBackgroundColor(u);this._setDefaultPropertiesFromJS(u);this.container.append(u);return this.container}}]);return RadioButtonWidgetAnnotationElement}(m),P=function(t){_inherits(PushButtonWidgetAnnotationElement,t);var r=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(t){_classCallCheck(this,PushButtonWidgetAnnotationElement);return r.call(this,t,{ignoreBorder:t.data.hasAppearance})}_createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);r.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(r.title=this.data.alternativeText);var i=r.lastChild;if(this.enableScripting&&this.hasJSActions&&i){this._setDefaultPropertiesFromJS(i);i.addEventListener("updatefromsandbox",(function(r){t._dispatchEventFromSandbox({},r)}))}return r}}]);return PushButtonWidgetAnnotationElement}(y),D=function(t){_inherits(ChoiceWidgetAnnotationElement,t);var r=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(t){_classCallCheck(this,ChoiceWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="choiceWidgetAnnotation";var r=this.annotationStorage,i=this.data.id,a=r.getValue(i,{value:this.data.fieldValue}),o=document.createElement("select");h.add(o);o.setAttribute("data-element-id",i);o.disabled=this.data.readOnly;this._setRequired(o,this.data.required);o.name=this.data.fieldName;o.tabIndex=d;var u=this.data.combo&&this.data.options.length>0;if(!this.data.combo){o.size=this.data.options.length;this.data.multiSelect&&(o.multiple=!0)}o.addEventListener("resetform",(function(r){var i,a=t.data.defaultFieldValue,u=_createForOfIteratorHelper(o.options);try{for(u.s();!(i=u.n()).done;){var l=i.value;l.selected=l.value===a}}catch(t){u.e(t)}finally{u.f()}}));var l,c=_createForOfIteratorHelper(this.data.options);try{for(c.s();!(l=c.n()).done;){var p=l.value,v=document.createElement("option");v.textContent=p.displayValue;v.value=p.exportValue;if(a.value.includes(p.exportValue)){v.setAttribute("selected",!0);u=!1}o.append(v)}}catch(t){c.e(t)}finally{c.f()}var y=null;if(u){var g=document.createElement("option");g.value=" ";g.setAttribute("hidden",!0);g.setAttribute("selected",!0);o.prepend(g);y=function removeEmptyEntry(){g.remove();o.removeEventListener("input",y);y=null};o.addEventListener("input",y)}var m=function getValue(t,r){var i=r?"value":"textContent",a=t.target.options;return t.target.multiple?Array.prototype.filter.call(a,(function(t){return t.selected})).map((function(t){return t[i]})):-1===a.selectedIndex?null:a[a.selectedIndex][i]},b=function getItems(t){var r=t.target.options;return Array.prototype.map.call(r,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};if(this.enableScripting&&this.hasJSActions){o.addEventListener("updatefromsandbox",(function(a){var u={value:function value(t){var a;null===(a=y)||void 0===a||a();var u,value=t.detail.value,l=new Set(Array.isArray(value)?value:[value]),c=_createForOfIteratorHelper(o.options);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.selected=l.has(d.value)}}catch(t){c.e(t)}finally{c.f()}r.setValue(i,{value:m(t,!0)})},multipleSelection:function multipleSelection(t){o.multiple=!0},remove:function remove(t){var a=o.options,u=t.detail.remove;a[u].selected=!1;o.remove(u);if(a.length>0){var l=Array.prototype.findIndex.call(a,(function(t){return t.selected}));-1===l&&(a[0].selected=!0)}r.setValue(i,{value:m(t,!0),items:b(t)})},clear:function clear(t){for(;0!==o.length;)o.remove(0);r.setValue(i,{value:null,items:[]})},insert:function insert(t){var a=t.detail.insert,u=a.index,l=a.displayValue,c=a.exportValue,d=o.children[u],h=document.createElement("option");h.textContent=l;h.value=c;d?d.before(h):o.append(h);r.setValue(i,{value:m(t,!0),items:b(t)})},items:function items(t){for(var items=t.detail.items;0!==o.length;)o.remove(0);var a,u=_createForOfIteratorHelper(items);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=l.displayValue,d=l.exportValue,h=document.createElement("option");h.textContent=c;h.value=d;o.append(h)}}catch(t){u.e(t)}finally{u.f()}o.options.length>0&&(o.options[0].selected=!0);r.setValue(i,{value:m(t,!0),items:b(t)})},indices:function indices(t){var a,indices=new Set(t.detail.indices),o=_createForOfIteratorHelper(t.target.options);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.selected=indices.has(u.index)}}catch(t){o.e(t)}finally{o.f()}r.setValue(i,{value:m(t,!0)})},editable:function editable(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(u,a)}));o.addEventListener("input",(function(a){var o,u=m(a,!0),l=m(a,!1);r.setValue(i,{value:u});null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:l,changeEx:u,willCommit:!0,commitKey:1,keyDown:!1}})}));this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(t){return t.target.checked}))}else o.addEventListener("input",(function(t){r.setValue(i,{value:m(t,!0)})}));this.data.combo&&this._setTextStyle(o);this._setBackgroundColor(o);this._setDefaultPropertiesFromJS(o);this.container.append(o);return this.container}}]);return ChoiceWidgetAnnotationElement}(m),E=function(t){_inherits(PopupAnnotationElement,t);var r=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(t){var i,a,o;_classCallCheck(this,PopupAnnotationElement);var u=!!(null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u})}_createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.className="popupAnnotation";if(["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),r=this.layer.querySelectorAll(t);if(0===r.length)return this.container;var i=new S({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),o=this.page,u=a.Util.normalizeRect([this.data.parentRect[0],o.view[3]-this.data.parentRect[1]+o.view[1],this.data.parentRect[2],o.view[3]-this.data.parentRect[3]+o.view[1]]),l=u[0]+this.data.parentRect[2]-this.data.parentRect[0],c=u[1],d=_slicedToArray(this.viewport.viewBox,4),h=d[0],p=d[1],v=d[2]-h,y=d[3]-p;this.container.style.left="".concat(100*(l-h)/v,"%");this.container.style.top="".concat(100*(c-p)/y,"%");this.container.append(i.render());return this.container}}]);return PopupAnnotationElement}(v),S=function(){function PopupElement(t){_classCallCheck(this,PopupElement);this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.titleObj=t.titleObj;this.modificationDate=t.modificationDate;this.contentsObj=t.contentsObj;this.richText=t.richText;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}_createClass(PopupElement,[{key:"render",value:function render(){var t,r,i=document.createElement("div");i.className="popupWrapper";this.hideElement=this.hideWrapper?i:this.container;this.hideElement.hidden=!0;var u=document.createElement("div");u.className="popup";var l=this.color;if(l){var d=.7*(255-l[0])+l[0],h=.7*(255-l[1])+l[1],p=.7*(255-l[2])+l[2];u.style.backgroundColor=a.Util.makeHexColor(0|d,0|h,0|p)}var v=document.createElement("h1");v.dir=this.titleObj.dir;v.textContent=this.titleObj.str;u.append(v);var y=o.PDFDateString.toDateObject(this.modificationDate);if(y){var g=document.createElement("span");g.className="popupDate";g.textContent="{{date}}, {{time}}";g.dataset.l10nId="annotation_date_string";g.dataset.l10nArgs=JSON.stringify({date:y.toLocaleDateString(),time:y.toLocaleTimeString()});u.append(g)}if(null===(t=this.richText)||void 0===t||!t.str||null!==(r=this.contentsObj)&&void 0!==r&&r.str&&this.contentsObj.str!==this.richText.str){var m=this._formatContents(this.contentsObj);u.append(m)}else{c.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:u});u.lastChild.className="richText popupContent"}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var b,w=_createForOfIteratorHelper(this.trigger);try{for(w.s();!(b=w.n()).done;){var A=b.value;A.addEventListener("click",this._toggle.bind(this));A.addEventListener("mouseover",this._show.bind(this,!1));A.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(t){w.e(t)}finally{w.f()}u.addEventListener("click",this._hide.bind(this,!0));i.append(u);return i}},{key:"_formatContents",value:function _formatContents(t){var r=t.str,i=t.dir,a=document.createElement("p");a.className="popupContent";a.dir=i;for(var o=r.split(/(?:\r\n?|\n)/),u=0,l=o.length;u<l;++u){var c=o[u];a.append(document.createTextNode(c));u<l-1&&a.append(document.createElement("br"))}return a}},{key:"_toggle",value:function _toggle(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function _show(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=!1;this.container.style.zIndex+=1}}},{key:"_hide",value:function _hide(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container.style.zIndex-=1}}}]);return PopupElement}(),C=function(t){_inherits(FreeTextAnnotationElement,t);var r=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(t){var i,a,o;_classCallCheck(this,FreeTextAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0})}_createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.className="freeTextAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return FreeTextAnnotationElement}(v),k=function(t){_inherits(LineAnnotationElement,t);var r=_createSuper(LineAnnotationElement);function LineAnnotationElement(t){var i,a,o;_classCallCheck(this,LineAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0})}_createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.className="lineAnnotation";var t=this.data,r=getRectDims(t.rect),i=r.width,a=r.height,o=this.svgFactory.create(i,a,!0),u=this.svgFactory.createElement("svg:line");u.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);u.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);u.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);u.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]);u.setAttribute("stroke-width",t.borderStyle.width||1);u.setAttribute("stroke","transparent");u.setAttribute("fill","transparent");o.append(u);this.container.append(o);this._createPopup(u,t);return this.container}}]);return LineAnnotationElement}(v),x=function(t){_inherits(SquareAnnotationElement,t);var r=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(t){var i,a,o;_classCallCheck(this,SquareAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0})}_createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.className="squareAnnotation";var t=this.data,r=getRectDims(t.rect),i=r.width,a=r.height,o=this.svgFactory.create(i,a,!0),u=t.borderStyle.width,l=this.svgFactory.createElement("svg:rect");l.setAttribute("x",u/2);l.setAttribute("y",u/2);l.setAttribute("width",i-u);l.setAttribute("height",a-u);l.setAttribute("stroke-width",u||1);l.setAttribute("stroke","transparent");l.setAttribute("fill","transparent");o.append(l);this.container.append(o);this._createPopup(l,t);return this.container}}]);return SquareAnnotationElement}(v),T=function(t){_inherits(CircleAnnotationElement,t);var r=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(t){var i,a,o;_classCallCheck(this,CircleAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0})}_createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.className="circleAnnotation";var t=this.data,r=getRectDims(t.rect),i=r.width,a=r.height,o=this.svgFactory.create(i,a,!0),u=t.borderStyle.width,l=this.svgFactory.createElement("svg:ellipse");l.setAttribute("cx",i/2);l.setAttribute("cy",a/2);l.setAttribute("rx",i/2-u/2);l.setAttribute("ry",a/2-u/2);l.setAttribute("stroke-width",u||1);l.setAttribute("stroke","transparent");l.setAttribute("fill","transparent");o.append(l);this.container.append(o);this._createPopup(l,t);return this.container}}]);return CircleAnnotationElement}(v),I=function(t){_inherits(PolylineAnnotationElement,t);var r=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(t){var i,a,o,u;_classCallCheck(this,PolylineAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(u=r.call(this,t,{isRenderable:l,ignoreBorder:!0})).containerClassName="polylineAnnotation";u.svgElementName="svg:polyline";return u}_createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,i=getRectDims(r.rect),a=i.width,o=i.height,u=this.svgFactory.create(a,o,!0),l=[],c=_createForOfIteratorHelper(r.vertices);try{for(c.s();!(t=c.n()).done;){var d=t.value,h=d.x-r.rect[0],p=r.rect[3]-d.y;l.push(h+","+p)}}catch(t){c.e(t)}finally{c.f()}l=l.join(" ");var v=this.svgFactory.createElement(this.svgElementName);v.setAttribute("points",l);v.setAttribute("stroke-width",r.borderStyle.width||1);v.setAttribute("stroke","transparent");v.setAttribute("fill","transparent");u.append(v);this.container.append(u);this._createPopup(v,r);return this.container}}]);return PolylineAnnotationElement}(v),L=function(t){_inherits(PolygonAnnotationElement,t);var r=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(t){var i;_classCallCheck(this,PolygonAnnotationElement);(i=r.call(this,t)).containerClassName="polygonAnnotation";i.svgElementName="svg:polygon";return i}return _createClass(PolygonAnnotationElement)}(I),O=function(t){_inherits(CaretAnnotationElement,t);var r=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(t){var i,a,o;_classCallCheck(this,CaretAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0})}_createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return CaretAnnotationElement}(v),M=function(t){_inherits(InkAnnotationElement,t);var r=_createSuper(InkAnnotationElement);function InkAnnotationElement(t){var i,a,o,u;_classCallCheck(this,InkAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(u=r.call(this,t,{isRenderable:l,ignoreBorder:!0})).containerClassName="inkAnnotation";u.svgElementName="svg:polyline";return u}_createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,i=getRectDims(r.rect),a=i.width,o=i.height,u=this.svgFactory.create(a,o,!0),l=_createForOfIteratorHelper(r.inkLists);try{for(l.s();!(t=l.n()).done;){var c,d=t.value,h=[],p=_createForOfIteratorHelper(d);try{for(p.s();!(c=p.n()).done;){var v=c.value,y=v.x-r.rect[0],g=r.rect[3]-v.y;h.push("".concat(y,",").concat(g))}}catch(t){p.e(t)}finally{p.f()}h=h.join(" ");var m=this.svgFactory.createElement(this.svgElementName);m.setAttribute("points",h);m.setAttribute("stroke-width",r.borderStyle.width||1);m.setAttribute("stroke","transparent");m.setAttribute("fill","transparent");this._createPopup(m,r);u.append(m)}}catch(t){l.e(t)}finally{l.f()}this.container.append(u);return this.container}}]);return InkAnnotationElement}(v),R=function(t){_inherits(HighlightAnnotationElement,t);var r=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(t){var i,a,o;_classCallCheck(this,HighlightAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(HighlightAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this.container.className="highlightAnnotation";return this.container}}]);return HighlightAnnotationElement}(v),B=function(t){_inherits(UnderlineAnnotationElement,t);var r=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(t){var i,a,o;_classCallCheck(this,UnderlineAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("underlineAnnotation");this.container.className="underlineAnnotation";return this.container}}]);return UnderlineAnnotationElement}(v),G=function(t){_inherits(SquigglyAnnotationElement,t);var r=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(t){var i,a,o;_classCallCheck(this,SquigglyAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.className="squigglyAnnotation";return this.container}}]);return SquigglyAnnotationElement}(v),N=function(t){_inherits(StrikeOutAnnotationElement,t);var r=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(t){var i,a,o;_classCallCheck(this,StrikeOutAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}]);return StrikeOutAnnotationElement}(v),j=function(t){_inherits(StampAnnotationElement,t);var r=_createSuper(StampAnnotationElement);function StampAnnotationElement(t){var i,a,o;_classCallCheck(this,StampAnnotationElement);var u=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:u,ignoreBorder:!0})}_createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.className="stampAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return StampAnnotationElement}(v),V=function(t){_inherits(FileAttachmentAnnotationElement,t);var r=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(t){var i,a;_classCallCheck(this,FileAttachmentAnnotationElement);var u=(a=r.call(this,t,{isRenderable:!0})).data.file,l=u.filename,c=u.content;a.filename=(0,o.getFilenameFromUrl)(l);a.content=c;null===(i=a.linkService.eventBus)||void 0===i||i.dispatch("fileattachmentannotation",{source:_assertThisInitialized(a),filename:l,content:c});return a}_createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var t,r;this.container.className="fileAttachmentAnnotation";var i=document.createElement("div");i.className="popupTriggerArea";i.addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(null!==(t=this.data.titleObj)&&void 0!==t&&t.str||null!==(r=this.data.contentsObj)&&void 0!==r&&r.str||this.data.richText)&&this._createPopup(i,this.data);this.container.append(i);return this.container}},{key:"_download",value:function _download(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]);return FileAttachmentAnnotationElement}(v),W=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}_createClass(AnnotationLayer,null,[{key:"render",value:function render(t){var r=t.annotations,i=t.div,l=t.viewport;_classStaticPrivateMethodGet(this,AnnotationLayer,_setDimensions).call(this,i,l);var c,d=[],h=[],v=_createForOfIteratorHelper(r);try{for(v.s();!(c=v.n()).done;){var y=c.value;if(y)if(y.annotationType!==a.AnnotationType.POPUP){var g=getRectDims(y.rect),m=g.width,b=g.height;m<=0||b<=0||d.push(y)}else h.push(y)}}catch(t){v.e(t)}finally{v.f()}h.length&&d.push.apply(d,h);for(var w=0,A=d;w<A.length;w++){var P=A[w],D=p.create({data:P,layer:i,page:t.page,viewport:l,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new o.DOMSVGFactory,annotationStorage:t.annotationStorage||new u.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(D.isRenderable){var S=D.render();P.hidden&&(S.style.visibility="hidden");if(Array.isArray(S)){var C,k=_createForOfIteratorHelper(S);try{for(k.s();!(C=k.n()).done;){var x=C.value;i.append(x)}}catch(t){k.e(t)}finally{k.f()}}else D instanceof E?i.prepend(S):i.append(S)}}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,i,t.annotationCanvasMap)}},{key:"update",value:function update(t){var r=t.annotationCanvasMap,i=t.div,a=t.viewport;_classStaticPrivateMethodGet(this,AnnotationLayer,_setDimensions).call(this,i,a);_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,i,r);i.hidden=!1}}]);return AnnotationLayer}();r.AnnotationLayer=W;function _setDimensions(t,r){var i=r.width,a=r.height,o=r.rotation,u=t.style,l=o%180!=0,c=Math.floor(i)+"px",d=Math.floor(a)+"px";u.width=l?d:c;u.height=l?c:d;t.setAttribute("data-main-rotation",o)}function _setAnnotationCanvasMap(t,r){if(r){var i,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var o=_slicedToArray(i.value,2),u=o[0],l=o[1],c=t.querySelector('[data-annotation-id="'.concat(u,'"]'));if(c){var d=c.firstChild;d?"CANVAS"===d.nodeName?d.replaceWith(l):d.before(l):c.append(l)}}}catch(t){a.e(t)}finally{a.f()}r.clear()}}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ColorConverters=void 0;function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}var i=function(){function ColorConverters(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ColorConverters)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(t){var r=_slicedToArray(t,4),i=r[0],a=r[1],o=r[2],u=r[3];return["G",1-Math.min(1,.3*i+.59*o+.11*a+u)]}},{key:"G_CMYK",value:function G_CMYK(t){return["CMYK",0,0,0,1-_slicedToArray(t,1)[0]]}},{key:"G_RGB",value:function G_RGB(t){var r=_slicedToArray(t,1)[0];return["RGB",r,r,r]}},{key:"G_HTML",value:function G_HTML(t){var r=makeColorComp(_slicedToArray(t,1)[0]);return"#".concat(r).concat(r).concat(r)}},{key:"RGB_G",value:function RGB_G(t){var r=_slicedToArray(t,3);return["G",.3*r[0]+.59*r[1]+.11*r[2]]}},{key:"RGB_HTML",value:function RGB_HTML(t){var r=_slicedToArray(t,3),i=r[0],a=r[1],o=r[2],u=makeColorComp(i),l=makeColorComp(a),c=makeColorComp(o);return"#".concat(u).concat(l).concat(c)}},{key:"T_HTML",value:function T_HTML(){return"#00000000"}},{key:"CMYK_RGB",value:function CMYK_RGB(t){var r=_slicedToArray(t,4),i=r[0],a=r[1],o=r[2],u=r[3];return["RGB",1-Math.min(1,i+u),1-Math.min(1,o+u),1-Math.min(1,a+u)]}},{key:"CMYK_HTML",value:function CMYK_HTML(t){var r=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(r)}},{key:"RGB_CMYK",value:function RGB_CMYK(t){var r=_slicedToArray(t,3),i=1-r[0],a=1-r[1],o=1-r[2];return["CMYK",i,a,o,Math.min(i,a,o)]}}]);return ColorConverters}();r.ColorConverters=i},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaLayer=void 0;var a=i(145);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o=function(){function XfaLayer(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaLayer)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaLayer,null,[{key:"setupStorage",value:function setupStorage(t,r,i,a,o){var u=a.getValue(r,{value:null});switch(i.name){case"textarea":null!==u.value&&(t.textContent=u.value);if("print"===o)break;t.addEventListener("input",(function(t){a.setValue(r,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){u.value===i.attributes.xfaOn?t.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&t.removeAttribute("checked");if("print"===o)break;t.addEventListener("change",(function(t){a.setValue(r,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{null!==u.value&&t.setAttribute("value",u.value);if("print"===o)break;t.addEventListener("input",(function(t){a.setValue(r,{value:t.target.value})}))}break;case"select":if(null!==u.value){var l,c=_createForOfIteratorHelper(i.children);try{for(c.s();!(l=c.n()).done;){var d=l.value;d.attributes.value===u.value&&(d.attributes.selected=!0)}}catch(t){c.e(t)}finally{c.f()}}t.addEventListener("input",(function(t){var i=t.target.options,o=-1===i.selectedIndex?"":i[i.selectedIndex].value;a.setValue(r,{value:o})}))}}},{key:"setAttributes",value:function setAttributes(t){var r=t.html,i=t.element,a=t.storage,o=void 0===a?null:a,u=t.intent,l=t.linkService,c=i.attributes,d=r instanceof HTMLAnchorElement;"radio"===c.type&&(c.name="".concat(c.name,"-").concat(u));for(var h=0,p=Object.entries(c);h<p.length;h++){var v=_slicedToArray(p[h],2),y=v[0],g=v[1];if(null!=g)switch(y){case"class":g.length&&r.setAttribute(y,g.join(" "));break;case"dataId":break;case"id":r.setAttribute("data-element-id",g);break;case"style":Object.assign(r.style,g);break;case"textContent":r.textContent=g;break;default:(!d||"href"!==y&&"newWindow"!==y)&&r.setAttribute(y,g)}}d&&l.addLinkAttributes(r,c.href,c.newWindow);o&&c.dataId&&this.setupStorage(r,c.dataId,i,o)}},{key:"render",value:function render(t){var r=t.annotationStorage,i=t.linkService,o=t.xfaHtml,u=t.intent||"display",l=document.createElement(o.name);o.attributes&&this.setAttributes({html:l,element:o,intent:u,linkService:i});var c=[[o,-1,l]],d=t.div;d.append(l);if(t.viewport){var h="matrix(".concat(t.viewport.transform.join(","),")");d.style.transform=h}"richText"!==u&&d.setAttribute("class","xfaLayer xfaFont");for(var p=[];c.length>0;){var v,y=_slicedToArray(c.at(-1),3),g=y[0],m=y[1],b=y[2];if(m+1!==g.children.length){var w=g.children[++c.at(-1)[1]];if(null!==w){var A=w.name;if("#text"!==A){var P=void 0;P=null!=w&&null!==(v=w.attributes)&&void 0!==v&&v.xmlns?document.createElementNS(w.attributes.xmlns,A):document.createElement(A);b.append(P);w.attributes&&this.setAttributes({html:P,element:w,storage:r,intent:u,linkService:i});if(w.children&&w.children.length>0)c.push([w,-1,P]);else if(w.value){var D=document.createTextNode(w.value);a.XfaText.shouldBuildText(A)&&p.push(D);P.append(D)}}else{var E=document.createTextNode(w.value);p.push(E);b.append(E)}}}else c.pop()}var S,C=_createForOfIteratorHelper(d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(C.s();!(S=C.n()).done;){S.value.setAttribute("readOnly",!0)}}catch(t){C.e(t)}finally{C.f()}return{textDivs:p}}},{key:"update",value:function update(t){var r="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=r;t.div.hidden=!1}}]);return XfaLayer}();r.XfaLayer=o},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TextLayerRenderTask=void 0;r.renderTextLayer=function renderTextLayer(t){var r=new d({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});r._render(t.timeout);return r};var a=i(1),o=i(129);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var u=30,l=new Map,c=/^\s+$/g;function appendText(t,r,i,o){var d=document.createElement("span"),h=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==r.str,hasEOL:r.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==r.str,hasEOL:r.hasEOL,fontSize:0};t._textDivs.push(d);var p=a.Util.transform(t._viewport.transform,r.transform),v=Math.atan2(p[1],p[0]),y=i[r.fontName];y.vertical&&(v+=Math.PI/2);var g,m,b=Math.hypot(p[2],p[3]),w=b*function getAscent(t,r){var i=l.get(t);if(i)return i;r.save();r.font="".concat(u,"px ").concat(t);var a=r.measureText(""),o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(o){r.restore();var d=o/(o+c);l.set(t,d);return d}r.strokeStyle="red";r.clearRect(0,0,u,u);r.strokeText("g",0,0);var h=r.getImageData(0,0,u,u).data;c=0;for(var p=h.length-1-3;p>=0;p-=4)if(h[p]>0){c=Math.ceil(p/4/u);break}r.clearRect(0,0,u,u);r.strokeText("A",0,u);o=0;for(var v=0,y=(h=r.getImageData(0,0,u,u).data).length;v<y;v+=4)if(h[v]>0){o=u-Math.floor(v/4/u);break}r.restore();if(o){var g=o/(o+c);l.set(t,g);return g}l.set(t,.8);return.8}(y.fontFamily,o);if(0===v){g=p[4];m=p[5]-w}else{g=p[4]+w*Math.sin(v);m=p[5]-w*Math.cos(v)}d.style.left="".concat(g,"px");d.style.top="".concat(m,"px");d.style.fontSize="".concat(b,"px");d.style.fontFamily=y.fontFamily;h.fontSize=b;d.setAttribute("role","presentation");d.textContent=r.str;d.dir=r.dir;t._fontInspectorEnabled&&(d.dataset.fontName=r.fontName);0!==v&&(h.angle=v*(180/Math.PI));var A=!1;if(r.str.length>1||t._enhanceTextSelection&&c.test(r.str))A=!0;else if(" "!==r.str&&r.transform[0]!==r.transform[3]){var P=Math.abs(r.transform[0]),D=Math.abs(r.transform[3]);P!==D&&Math.max(P,D)/Math.min(P,D)>1.5&&(A=!0)}A&&(y.vertical?h.canvasWidth=r.height*t._viewport.scale:h.canvasWidth=r.width*t._viewport.scale);t._textDivProperties.set(d,h);t._textContentStream&&t._layoutText(d);if(t._enhanceTextSelection&&h.hasText){var E=1,S=0;if(0!==v){E=Math.cos(v);S=Math.sin(v)}var C,k,x=(y.vertical?r.height:r.width)*t._viewport.scale,T=b;if(0!==v){C=[E,S,-S,E,g,m];k=a.Util.getAxialAlignedBoundingBox([0,0,x,T],C)}else k=[g,m,g+x,m+T];t._bounds.push({left:k[0],top:k[1],right:k[2],bottom:k[3],div:d,size:[x,T],m:C})}}function render(t){if(!t._canceled){var r=t._textDivs,i=t._capability,a=r.length;if(a>1e5){t._renderingDone=!0;i.resolve()}else{if(!t._textContentStream)for(var o=0;o<a;o++)t._layoutText(r[o]);t._renderingDone=!0;i.resolve()}}}function findPositiveMin(t,r,i){for(var a=0,o=0;o<i;o++){var u=t[r++];u>0&&(a=a?Math.min(u,a):u)}return a}function expand(t){for(var r=t._bounds,i=t._viewport,o=function expandBounds(t,r,i){var a=i.map((function(t,r){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:r,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,a);var o,u=new Array(i.length),l=_createForOfIteratorHelper(a);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=c.index;u[d]={left:c.x1New,top:0,right:c.x2New,bottom:0}}}catch(t){l.e(t)}finally{l.f()}i.map((function(r,i){var o=u[i],l=a[i];l.x1=r.top;l.y1=t-o.right;l.x2=r.bottom;l.y2=t-o.left;l.index=i;l.x1New=void 0;l.x2New=void 0}));expandBoundsLTR(r,a);var h,p=_createForOfIteratorHelper(a);try{for(p.s();!(h=p.n()).done;){var v=h.value,y=v.index;u[y].top=v.x1New;u[y].bottom=v.x2New}}catch(t){p.e(t)}finally{p.f()}return u}(i.width,i.height,r),u=0;u<o.length;u++){var l=r[u].div,c=t._textDivProperties.get(l);if(0!==c.angle){for(var d=o[u],h=r[u],p=h.m,v=p[0],y=p[1],g=[[0,0],[0,h.size[1]],[h.size[0],0],h.size],m=new Float64Array(64),b=0,w=g.length;b<w;b++){var A=a.Util.applyTransform(g[b],p);m[b+0]=v&&(d.left-A[0])/v;m[b+4]=y&&(d.top-A[1])/y;m[b+8]=v&&(d.right-A[0])/v;m[b+12]=y&&(d.bottom-A[1])/y;m[b+16]=y&&(d.left-A[0])/-y;m[b+20]=v&&(d.top-A[1])/v;m[b+24]=y&&(d.right-A[0])/-y;m[b+28]=v&&(d.bottom-A[1])/v;m[b+32]=v&&(d.left-A[0])/-v;m[b+36]=y&&(d.top-A[1])/-y;m[b+40]=v&&(d.right-A[0])/-v;m[b+44]=y&&(d.bottom-A[1])/-y;m[b+48]=y&&(d.left-A[0])/y;m[b+52]=v&&(d.top-A[1])/-v;m[b+56]=y&&(d.right-A[0])/y;m[b+60]=v&&(d.bottom-A[1])/-v}var P=1+Math.min(Math.abs(v),Math.abs(y));c.paddingLeft=findPositiveMin(m,32,16)/P;c.paddingTop=findPositiveMin(m,48,16)/P;c.paddingRight=findPositiveMin(m,0,16)/P;c.paddingBottom=findPositiveMin(m,16,16)/P;t._textDivProperties.set(l,c)}else{c.paddingLeft=r[u].left-o[u].left;c.paddingTop=r[u].top-o[u].top;c.paddingRight=o[u].right-r[u].right;c.paddingBottom=o[u].bottom-r[u].bottom;t._textDivProperties.set(l,c)}}}function expandBoundsLTR(t,r){r.sort((function(t,r){return t.x1-r.x1||t.index-r.index}));var i,a=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){for(var u=i.value,l=0;l<a.length&&a[l].end<=u.y1;)l++;for(var c=a.length-1;c>=0&&a[c].start>=u.y2;)c--;var d=void 0,h=void 0,p=void 0,v=void 0,y=-1/0;for(p=l;p<=c;p++){h=(d=a[p]).boundary;var g=void 0;(g=h.x2>u.x1?h.index>u.index?h.x1New:u.x1:void 0===h.x2New?(h.x2+u.x1)/2:h.x2New)>y&&(y=g)}u.x1New=y;for(p=l;p<=c;p++)void 0===(h=(d=a[p]).boundary).x2New?h.x2>u.x1?h.index>u.index&&(h.x2New=h.x2):h.x2New=y:h.x2New>y&&(h.x2New=Math.max(y,h.x2));var m=[],b=null;for(p=l;p<=c;p++){var w=(h=(d=a[p]).boundary).x2>u.x2?h:u;if(b===w)m.at(-1).end=d.end;else{m.push({start:d.start,end:d.end,boundary:w});b=w}}if(a[l].start<u.y1){m[0].start=u.y1;m.unshift({start:a[l].start,end:u.y1,boundary:a[l].boundary})}if(u.y2<a[c].end){m.at(-1).end=u.y2;m.push({start:u.y2,end:a[c].end,boundary:a[c].boundary})}for(p=l;p<=c;p++)if(void 0===(h=(d=a[p]).boundary).x2New){var A=!1;for(v=l-1;!A&&v>=0&&a[v].start>=h.y1;v--)A=a[v].boundary===h;for(v=c+1;!A&&v<a.length&&a[v].end<=h.y2;v++)A=a[v].boundary===h;for(v=0;!A&&v<m.length;v++)A=m[v].boundary===h;A||(h.x2New=y)}Array.prototype.splice.apply(a,[l,c-l+1].concat(m))}}catch(t){o.e(t)}finally{o.f()}for(var P=0,D=a;P<D.length;P++){var E=D[P].boundary;void 0===E.x2New&&(E.x2New=Math.max(t,E.x2))}}var d=function(){function TextLayerRenderTask(t){var r,i=this,u=t.textContent,l=t.textContentStream,c=t.container,d=t.viewport,h=t.textDivs,p=t.textContentItemsStr,v=t.enhanceTextSelection;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextLayerRenderTask);v&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future.");this._textContent=u;this._textContentStream=l;this._container=c;this._document=c.ownerDocument;this._viewport=d;this._textDivs=h||[];this._textContentItemsStr=p||[];this._enhanceTextSelection=!!v;this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,a.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally((function(){i._enhanceTextSelection||(i._textDivProperties=null);if(i._layoutTextCtx){i._layoutTextCtx.canvas.width=0;i._layoutTextCtx.canvas.height=0;i._layoutTextCtx=null}})).catch((function(){}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextLayerRenderTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"cancel",value:function cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch((function(){}));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function _processItems(t,r){for(var i=0,a=t.length;i<a;i++)if(void 0!==t[i].str){this._textContentItemsStr.push(t[i].str);appendText(this,t[i],r,this._layoutTextCtx)}else if("beginMarkedContentProps"===t[i].type||"beginMarkedContent"===t[i].type){var o=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!==t[i].id&&this._container.setAttribute("id","".concat(t[i].id));o.append(this._container)}else"endMarkedContent"===t[i].type&&(this._container=this._container.parentNode)}},{key:"_layoutText",value:function _layoutText(t){var r=this._textDivProperties.get(t),i="";if(0!==r.canvasWidth&&r.hasText){var a=t.style.fontFamily,o=r.fontSize;if(o!==this._layoutTextLastFontSize||a!==this._layoutTextLastFontFamily){this._layoutTextCtx.font="".concat(o*this._devicePixelRatio,"px ").concat(a);this._layoutTextLastFontSize=o;this._layoutTextLastFontFamily=a}var u=this._layoutTextCtx.measureText(t.textContent).width;if(u>0){var l=this._devicePixelRatio*r.canvasWidth/u;this._enhanceTextSelection&&(r.scale=l);i="scaleX(".concat(l,")")}}0!==r.angle&&(i="rotate(".concat(r.angle,"deg) ").concat(i));if(i.length>0){this._enhanceTextSelection&&(r.originalTransform=i);t.style.transform=i}r.hasText&&this._container.append(t);if(r.hasEOL){var c=document.createElement("br");c.setAttribute("role","presentation");this._container.append(c)}}},{key:"_render",value:function _render(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=(0,a.createPromiseCapability)(),o=Object.create(null),l=this._document.createElement("canvas");l.height=l.width=u;this._layoutTextCtx=l.getContext("2d",{alpha:!1});if(this._textContent){var c=this._textContent.items,d=this._textContent.styles;this._processItems(c,d);i.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');var h=function pump(){t._reader.read().then((function(r){var a=r.value;if(r.done)i.resolve();else{Object.assign(o,a.styles);t._processItems(a.items,o);pump()}}),i.reject)};this._reader=this._textContentStream.getReader();h()}i.promise.then((function(){o=null;r?t._renderTimer=setTimeout((function(){render(t);t._renderTimer=null}),r):render(t)}),this._capability.reject)}},{key:"expandTextDivs",value:function expandTextDivs(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){if(null!==this._bounds){expand(this);this._bounds=null}for(var r=[],i=[],a=0,o=this._textDivs.length;a<o;a++){var u=this._textDivs[a],l=this._textDivProperties.get(u);if(l.hasText)if(t){r.length=0;i.length=0;l.originalTransform&&r.push(l.originalTransform);if(l.paddingTop>0){i.push("".concat(l.paddingTop,"px"));r.push("translateY(".concat(-l.paddingTop,"px)"))}else i.push(0);l.paddingRight>0?i.push("".concat(l.paddingRight/l.scale,"px")):i.push(0);l.paddingBottom>0?i.push("".concat(l.paddingBottom,"px")):i.push(0);if(l.paddingLeft>0){i.push("".concat(l.paddingLeft/l.scale,"px"));r.push("translateX(".concat(-l.paddingLeft/l.scale,"px)"))}else i.push(0);u.style.padding=i.join(" ");r.length&&(u.style.transform=r.join(" "))}else{u.style.padding=null;u.style.transform=l.originalTransform}}}}}]);return TextLayerRenderTask}();r.TextLayerRenderTask=d},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.SVGGraphics=void 0;var a=i(129),o=i(1),u=i(3);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var l=_createClass((function SVGGraphics(){_classCallCheck(this,SVGGraphics);(0,o.unreachable)("Not implemented: SVGGraphics")}));r.SVGGraphics=l;var c=function pf(t){if(Number.isInteger(t))return t.toString();var r=t.toFixed(10),i=r.length-1;if("0"!==r[i])return r;do{i--}while("0"===r[i]);return r.substring(0,"."===r[i]?i:i+1)},d=function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(c(t[0])," ").concat(c(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var r=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(c(r),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(c(t[4])," ").concat(c(t[5]),")");return"matrix(".concat(c(t[0])," ").concat(c(t[1])," ").concat(c(t[2])," ").concat(c(t[3])," ").concat(c(t[4])," ")+"".concat(c(t[5]),")")},h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p=["butt","round","square"],v=["miter","round","bevel"],y=function createObjectURL(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([t],{type:r}));for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="data:".concat(r,";base64,"),u=0,l=t.length;u<l;u+=3){var c=255&t[u],d=255&t[u+1],h=255&t[u+2],p=c>>2,v=(3&c)<<4|d>>4,y=u+1<l?(15&d)<<2|h>>6:64,g=u+2<l?63&h:64;o+=a[p]+a[v]+a[y]+a[g]}return o},g=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256),i=0;i<256;i++){for(var a=i,l=0;l<8;l++)a=1&a?3988292384^a>>1&2147483647:a>>1&2147483647;r[i]=a}function writePngChunk(t,i,a,o){var u=o,l=i.length;a[u]=l>>24&255;a[u+1]=l>>16&255;a[u+2]=l>>8&255;a[u+3]=255&l;a[u+=4]=255&t.charCodeAt(0);a[u+1]=255&t.charCodeAt(1);a[u+2]=255&t.charCodeAt(2);a[u+3]=255&t.charCodeAt(3);u+=4;a.set(i,u);var c=function crc32(t,i,a){for(var o=-1,u=i;u<a;u++){var l=255&(o^t[u]);o=o>>>8^r[l]}return-1^o}(a,o+4,u+=i.length);a[u]=c>>24&255;a[u+1]=c>>16&255;a[u+2]=c>>8&255;a[u+3]=255&c}function deflateSyncUncompressed(t){var r=t.length,i=65535,a=Math.ceil(r/i),o=new Uint8Array(2+r+5*a+4),u=0;o[u++]=120;o[u++]=156;for(var l=0;r>i;){o[u++]=0;o[u++]=255;o[u++]=255;o[u++]=0;o[u++]=0;o.set(t.subarray(l,l+i),u);u+=i;l+=i;r-=i}o[u++]=1;o[u++]=255&r;o[u++]=r>>8&255;o[u++]=255&~r;o[u++]=(65535&~r)>>8&255;o.set(t.subarray(l),u);u+=t.length-l;var c=function adler32(t,r,i){for(var a=1,o=0,u=r;u<i;++u)o=(o+(a=(a+(255&t[u]))%65521))%65521;return o<<16|a}(t,0,t.length);o[u++]=c>>24&255;o[u++]=c>>16&255;o[u++]=c>>8&255;o[u++]=255&c;return o}function encode(r,i,a,l){var c,d,h,p=r.width,v=r.height,g=r.data;switch(i){case o.ImageKind.GRAYSCALE_1BPP:d=0;c=1;h=p+7>>3;break;case o.ImageKind.RGB_24BPP:d=2;c=8;h=3*p;break;case o.ImageKind.RGBA_32BPP:d=6;c=8;h=4*p;break;default:throw new Error("invalid format")}for(var m=new Uint8Array((1+h)*v),b=0,w=0,A=0;A<v;++A){m[b++]=0;m.set(g.subarray(w,w+h),b);w+=h;b+=h}if(i===o.ImageKind.GRAYSCALE_1BPP&&l){b=0;for(var P=0;P<v;P++){b++;for(var D=0;D<h;D++)m[b++]^=255}}var E=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,v>>24&255,v>>16&255,v>>8&255,255&v,c,d,0,0,0]),S=function deflateSync(t){if(!u.isNodeJS)return deflateSyncUncompressed(t);try{var r;r=parseInt(process.versions.node)>=8?t:Buffer.from(t);var i=require("zlib").deflateSync(r,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(t){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(m),C=t.length+36+E.length+S.length,k=new Uint8Array(C),x=0;k.set(t,x);writePngChunk("IHDR",E,k,x+=t.length);writePngChunk("IDATA",S,k,x+=12+E.length);x+=12+S.length;writePngChunk("IEND",new Uint8Array(0),k,x);return y(k,"image/png",a)}return function convertImgDataToPng(t,r,i){return encode(t,void 0===t.kind?o.ImageKind.GRAYSCALE_1BPP:t.kind,r,i)}}(),m=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState);this.fontSizeScale=1;this.fontWeight=h.fontWeight;this.fontSize=0;this.textMatrix=o.IDENTITY_MATRIX;this.fontMatrix=o.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=o.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=h.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}_createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}}]);return SVGExtraState}(),b=0,w=0,A=0;r.SVGGraphics=l=function(){function SVGGraphics(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,SVGGraphics);(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new a.DOMSVGFactory;this.current=new m;this.transformMatrix=o.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=r;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!i;this._operatorIdMapping=[];for(var u in o.OPS)this._operatorIdMapping[o.OPS[u]]=u}_createClass(SVGGraphics,[{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}},{key:"group",value:function group(t){this.save();this.executeOpTree(t);this.restore()}},{key:"loadDependencies",value:function loadDependencies(t){for(var r=this,i=t.fnArray,a=t.argsArray,u=0,l=i.length;u<l;u++)if(i[u]===o.OPS.dependency){var c,d=_createForOfIteratorHelper(a[u]);try{var h=function _loop(){var t=c.value,i=t.startsWith("g_")?r.commonObjs:r.objs,a=new Promise((function(r){i.get(t,r)}));r.current.dependencies.push(a)};for(d.s();!(c=d.n()).done;)h()}catch(t){d.e(t)}finally{d.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,r,i,a,u,l){var c=[t,r,i,a,u,l];this.transformMatrix=o.Util.transform(this.transformMatrix,c);this.tgrp=null}},{key:"getSVG",value:function getSVG(t,r){var i=this;this.viewport=r;var a=this._initialize(r);return this.loadDependencies(t).then((function(){i.transformMatrix=o.IDENTITY_MATRIX;i.executeOpTree(i.convertOpList(t));return a}))}},{key:"convertOpList",value:function convertOpList(t){for(var r=this._operatorIdMapping,i=t.argsArray,a=t.fnArray,o=[],u=0,l=a.length;u<l;u++){var c=a[u];o.push({fnId:c,fn:r[c],args:i[u]})}return function opListToTree(t){var r,i=[],a=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;if("save"!==u.fn)"restore"===u.fn?i=a.pop():i.push(u);else{i.push({fnId:92,fn:"group",items:[]});a.push(i);i=i.at(-1).items}}}catch(t){o.e(t)}finally{o.f()}return i}(o)}},{key:"executeOpTree",value:function executeOpTree(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=a.fn,l=a.fnId,c=a.args;switch(0|l){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(c);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case o.OPS.setFont:this.setFont(c);break;case o.OPS.showText:case o.OPS.showSpacedText:this.showText(c[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(c[0],c[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case o.OPS.setHScale:this.setHScale(c[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case o.OPS.setTextRise:this.setTextRise(c[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case o.OPS.setLineWidth:this.setLineWidth(c[0]);break;case o.OPS.setLineJoin:this.setLineJoin(c[0]);break;case o.OPS.setLineCap:this.setLineCap(c[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case o.OPS.setFillColorN:this.setFillColorN(c);break;case o.OPS.shadingFill:this.shadingFill(c[0]);break;case o.OPS.setDash:this.setDash(c[0],c[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case o.OPS.setFlatness:this.setFlatness(c[0]);break;case o.OPS.setGState:this.setGState(c[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case o.OPS.constructPath:this.constructPath(c[0],c[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,o.warn)("Unimplemented operator ".concat(u))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,i,a,o,u){var l=this.current;l.textMatrix=l.lineMatrix=[t,r,i,a,o,u];l.textMatrixScale=Math.hypot(t,r);l.x=l.lineX=0;l.y=l.lineY=0;l.xcoords=[];l.ycoords=[];l.tspan=this.svgFactory.createElement("svg:tspan");l.tspan.setAttributeNS(null,"font-family",l.fontFamily);l.tspan.setAttributeNS(null,"font-size","".concat(c(l.fontSize),"px"));l.tspan.setAttributeNS(null,"y",c(-l.y));l.txtElement=this.svgFactory.createElement("svg:text");l.txtElement.append(l.tspan)}},{key:"beginText",value:function beginText(){var t=this.current;t.x=t.lineX=0;t.y=t.lineY=0;t.textMatrix=o.IDENTITY_MATRIX;t.lineMatrix=o.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}},{key:"moveText",value:function moveText(t,r){var i=this.current;i.x=i.lineX+=t;i.y=i.lineY+=r;i.xcoords=[];i.ycoords=[];i.tspan=this.svgFactory.createElement("svg:tspan");i.tspan.setAttributeNS(null,"font-family",i.fontFamily);i.tspan.setAttributeNS(null,"font-size","".concat(c(i.fontSize),"px"));i.tspan.setAttributeNS(null,"y",c(-i.y))}},{key:"showText",value:function showText(t){var r=this.current,i=r.font,a=r.fontSize;if(0!==a){var u,l=r.fontSizeScale,p=r.charSpacing,v=r.wordSpacing,y=r.fontDirection,g=r.textHScale*y,m=i.vertical,b=m?1:-1,w=i.defaultVMetrics,A=a*r.fontMatrix[0],P=0,D=_createForOfIteratorHelper(t);try{for(D.s();!(u=D.n()).done;){var E=u.value;if(null!==E)if("number"!=typeof E){var S=(E.isSpace?v:0)+p,C=E.fontChar,k=void 0,x=void 0,T=E.width;if(m){var I=void 0,L=E.vmetric||w;I=-(I=E.vmetric?L[1]:.5*T)*A;var O=L[2]*A;T=L?-L[0]:T;k=I/l;x=(P+O)/l}else{k=P/l;x=0}if(E.isInFont||i.missingFile){r.xcoords.push(r.x+k);m&&r.ycoords.push(-r.y+x);r.tspan.textContent+=C}P+=m?T*A-S*y:T*A+S*y}else P+=b*E*a/1e3;else P+=y*v}}catch(t){D.e(t)}finally{D.f()}r.tspan.setAttributeNS(null,"x",r.xcoords.map(c).join(" "));m?r.tspan.setAttributeNS(null,"y",r.ycoords.map(c).join(" ")):r.tspan.setAttributeNS(null,"y",c(-r.y));m?r.y-=P:r.x+=P*g;r.tspan.setAttributeNS(null,"font-family",r.fontFamily);r.tspan.setAttributeNS(null,"font-size","".concat(c(r.fontSize),"px"));r.fontStyle!==h.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle);r.fontWeight!==h.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);var M=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(M===o.TextRenderingMode.FILL||M===o.TextRenderingMode.FILL_STROKE){r.fillColor!==h.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor);r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)}else r.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none");if(M===o.TextRenderingMode.STROKE||M===o.TextRenderingMode.FILL_STROKE){var R=1/(r.textMatrixScale||1);this._setStrokeAttributes(r.tspan,R)}var B=r.textMatrix;0!==r.textRise&&((B=B.slice())[5]+=r.textRise);r.txtElement.setAttributeNS(null,"transform","".concat(d(B)," scale(").concat(c(g),", -1)"));r.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");r.txtElement.append(r.tspan);r.txtgrp.append(r.txtElement);this._ensureTransformGroup().append(r.txtElement)}}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"addFontStyle",value:function addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle)}var r=y(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(r,"); }\n")}},{key:"setFont",value:function setFont(t){var r=this.current,i=this.commonObjs.get(t[0]),a=t[1];r.font=i;if(this.embedFonts&&!i.missingFile&&!this.embeddedFonts[i.loadedName]){this.addFontStyle(i);this.embeddedFonts[i.loadedName]=i}r.fontMatrix=i.fontMatrix||o.FONT_IDENTITY_MATRIX;var u="normal";i.black?u="900":i.bold&&(u="bold");var l=i.italic?"italic":"normal";if(a<0){a=-a;r.fontDirection=-1}else r.fontDirection=1;r.fontSize=a;r.fontFamily=i.loadedName;r.fontWeight=u;r.fontStyle=l;r.tspan=this.svgFactory.createElement("svg:tspan");r.tspan.setAttributeNS(null,"y",c(-r.y));r.xcoords=[];r.ycoords=[]}},{key:"endText",value:function endText(){var t,r=this.current;if(r.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=r.txtElement)&&void 0!==t&&t.hasChildNodes()){r.element=r.txtElement;this.clip("nonzero");this.endPath()}}},{key:"setLineWidth",value:function setLineWidth(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function setLineCap(t){this.current.lineCap=p[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.current.lineJoin=v[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function setStrokeAlpha(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,i){this.current.strokeColor=o.Util.makeHexColor(t,r,i)}},{key:"setFillAlpha",value:function setFillAlpha(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,i){this.current.fillColor=o.Util.makeHexColor(t,r,i);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function shadingFill(t){var r=this.viewport.width,i=this.viewport.height,a=o.Util.inverseTransform(this.transformMatrix),u=o.Util.applyTransform([0,0],a),l=o.Util.applyTransform([0,i],a),c=o.Util.applyTransform([r,0],a),d=o.Util.applyTransform([r,i],a),h=Math.min(u[0],l[0],c[0],d[0]),p=Math.min(u[1],l[1],c[1],d[1]),v=Math.max(u[0],l[0],c[0],d[0]),y=Math.max(u[1],l[1],c[1],d[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",h);g.setAttributeNS(null,"y",p);g.setAttributeNS(null,"width",v-h);g.setAttributeNS(null,"height",y-p);g.setAttributeNS(null,"fill",this._makeShadingPattern(t));this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);this._ensureTransformGroup().append(g)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(t){var r=t[1],i=t[2],a=t[3]||o.IDENTITY_MATRIX,u=_slicedToArray(t[4],4),l=u[0],c=u[1],d=u[2],h=u[3],p=t[5],v=t[6],y=t[7],g="shading".concat(A++),m=_slicedToArray(o.Util.normalizeRect([].concat(_toConsumableArray(o.Util.applyTransform([l,c],a)),_toConsumableArray(o.Util.applyTransform([d,h],a)))),4),b=m[0],w=m[1],P=m[2],D=m[3],E=_slicedToArray(o.Util.singularValueDecompose2dScale(a),2),S=p*E[0],C=v*E[1],k=this.svgFactory.createElement("svg:pattern");k.setAttributeNS(null,"id",g);k.setAttributeNS(null,"patternUnits","userSpaceOnUse");k.setAttributeNS(null,"width",S);k.setAttributeNS(null,"height",C);k.setAttributeNS(null,"x","".concat(b));k.setAttributeNS(null,"y","".concat(w));var x=this.svg,T=this.transformMatrix,I=this.current.fillColor,L=this.current.strokeColor,O=this.svgFactory.create(P-b,D-w);this.svg=O;this.transformMatrix=a;if(2===y){var M=o.Util.makeHexColor.apply(o.Util,_toConsumableArray(r));this.current.fillColor=M;this.current.strokeColor=M}this.executeOpTree(this.convertOpList(i));this.svg=x;this.transformMatrix=T;this.current.fillColor=I;this.current.strokeColor=L;k.append(O.childNodes[0]);this.defs.append(k);return"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(t){"string"==typeof t&&(t=this.objs.get(t));switch(t[0]){case"RadialAxial":var r,i="shading".concat(A++),a=t[3];switch(t[1]){case"axial":var u=t[4],l=t[5];(r=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",i);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"x1",u[0]);r.setAttributeNS(null,"y1",u[1]);r.setAttributeNS(null,"x2",l[0]);r.setAttributeNS(null,"y2",l[1]);break;case"radial":var c=t[4],d=t[5],h=t[6],p=t[7];(r=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",i);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"cx",d[0]);r.setAttributeNS(null,"cy",d[1]);r.setAttributeNS(null,"r",p);r.setAttributeNS(null,"fx",c[0]);r.setAttributeNS(null,"fy",c[1]);r.setAttributeNS(null,"fr",h);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var v,y=_createForOfIteratorHelper(a);try{for(y.s();!(v=y.n()).done;){var g=v.value,m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",g[0]);m.setAttributeNS(null,"stop-color",g[1]);r.append(m)}}catch(t){y.e(t)}finally{y.f()}this.defs.append(r);return"url(#".concat(i,")");case"Mesh":(0,o.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function setDash(t,r){this.current.dashArray=t;this.current.dashPhase=r}},{key:"constructPath",value:function constructPath(t,r){var i,a=this.current,u=a.x,l=a.y,d=[],h=0,p=_createForOfIteratorHelper(t);try{for(p.s();!(i=p.n()).done;){switch(0|i.value){case o.OPS.rectangle:u=r[h++];l=r[h++];var v=r[h++],y=r[h++],g=u+v,m=l+y;d.push("M",c(u),c(l),"L",c(g),c(l),"L",c(g),c(m),"L",c(u),c(m),"Z");break;case o.OPS.moveTo:u=r[h++];l=r[h++];d.push("M",c(u),c(l));break;case o.OPS.lineTo:u=r[h++];l=r[h++];d.push("L",c(u),c(l));break;case o.OPS.curveTo:u=r[h+4];l=r[h+5];d.push("C",c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]),c(u),c(l));h+=6;break;case o.OPS.curveTo2:d.push("C",c(u),c(l),c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]));u=r[h+2];l=r[h+3];h+=4;break;case o.OPS.curveTo3:u=r[h+2];l=r[h+3];d.push("C",c(r[h]),c(r[h+1]),c(u),c(l),c(u),c(l));h+=4;break;case o.OPS.closePath:d.push("Z")}}}catch(t){p.e(t)}finally{p.f()}d=d.join(" ");if(a.path&&t.length>0&&t[0]!==o.OPS.rectangle&&t[0]!==o.OPS.moveTo)d=a.path.getAttributeNS(null,"d")+d;else{a.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(a.path)}a.path.setAttributeNS(null,"d",d);a.path.setAttributeNS(null,"fill","none");a.element=a.path;a.setCurrentPoint(u,l)}},{key:"endPath",value:function endPath(){var t=this.current;t.path=null;if(this.pendingClip)if(t.element){var r="clippath".concat(b++),i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",r);i.setAttributeNS(null,"transform",d(this.transformMatrix));var a=t.element.cloneNode(!0);"evenodd"===this.pendingClip?a.setAttributeNS(null,"clip-rule","evenodd"):a.setAttributeNS(null,"clip-rule","nonzero");this.pendingClip=null;i.append(a);this.defs.append(i);if(t.activeClipUrl){t.clipGroup=null;var o,u=_createForOfIteratorHelper(this.extraStack);try{for(u.s();!(o=u.n()).done;){o.value.clipGroup=null}}catch(t){u.e(t)}finally{u.f()}i.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(r,")");this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function clip(t){this.pendingClip=t}},{key:"closePath",value:function closePath(){var t=this.current;if(t.path){var r="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",r)}}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=_slicedToArray(r.value,2),u=a[0],l=a[1];switch(u){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l);break;case"CA":this.setStrokeAlpha(l);break;case"ca":this.setFillAlpha(l);break;default:(0,o.warn)("Unimplemented graphic state operator ".concat(u))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"fill",value:function fill(){var t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}},{key:"stroke",value:function stroke(){var t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.current,a=i.dashArray;1!==r&&a.length>0&&(a=a.map((function(t){return r*t})));t.setAttributeNS(null,"stroke",i.strokeColor);t.setAttributeNS(null,"stroke-opacity",i.strokeAlpha);t.setAttributeNS(null,"stroke-miterlimit",c(i.miterLimit));t.setAttributeNS(null,"stroke-linecap",i.lineCap);t.setAttributeNS(null,"stroke-linejoin",i.lineJoin);t.setAttributeNS(null,"stroke-width",c(r*i.lineWidth)+"px");t.setAttributeNS(null,"stroke-dasharray",a.map(c).join(" "));t.setAttributeNS(null,"stroke-dashoffset",c(r*i.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke();this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath();this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"width","1px");t.setAttributeNS(null,"height","1px");t.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(t)}},{key:"paintImageXObject",value:function paintImageXObject(t){var r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,o.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t,r){var i=t.width,a=t.height,o=g(t,this.forceDataSchema,!!r),u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0");u.setAttributeNS(null,"y","0");u.setAttributeNS(null,"width",c(i));u.setAttributeNS(null,"height",c(a));this.current.element=u;this.clip("nonzero");var l=this.svgFactory.createElement("svg:image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);l.setAttributeNS(null,"x","0");l.setAttributeNS(null,"y",c(-a));l.setAttributeNS(null,"width",c(i)+"px");l.setAttributeNS(null,"height",c(a)+"px");l.setAttributeNS(null,"transform","scale(".concat(c(1/i)," ").concat(c(-1/a),")"));r?r.append(l):this._ensureTransformGroup().append(l)}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){var r=this.current,i=t.width,a=t.height,o=r.fillColor;r.maskId="mask".concat(w++);var u=this.svgFactory.createElement("svg:mask");u.setAttributeNS(null,"id",r.maskId);var l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0");l.setAttributeNS(null,"y","0");l.setAttributeNS(null,"width",c(i));l.setAttributeNS(null,"height",c(a));l.setAttributeNS(null,"fill",o);l.setAttributeNS(null,"mask","url(#".concat(r.maskId,")"));this.defs.append(u);this._ensureTransformGroup().append(l);this.paintInlineImageXObject(t,u)}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);if(r){var i=r[2]-r[0],a=r[3]-r[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",r[0]);o.setAttributeNS(null,"y",r[1]);o.setAttributeNS(null,"width",c(i));o.setAttributeNS(null,"height",c(a));this.current.element=o;this.clip("nonzero");this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(t){var r=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");r.append(i);this.defs=i;var a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"transform",d(t.transform));r.append(a);this.svg=a;return r}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(t);this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix));this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)}return this.tgrp}}]);return SVGGraphics}()},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFNodeStream=void 0;var a=i(1),o=i(158);function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var u=require("fs"),l=require("http"),c=require("https"),d=require("url"),h=/^file:\/\/\/[a-zA-Z]:\//;var p=function(){function PDFNodeStream(t){_classCallCheck(this,PDFNodeStream);this.source=t;this.url=function parseUrl(t){var r=d.parse(t);if("file:"===r.protocol||r.host)return r;if(/^[a-z]:[/\\]/i.test(t))return d.parse("file:///".concat(t));r.host||(r.protocol="file:");return r}(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new b(this):new g(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var i=this.isFsUrl?new w(this,t,r):new m(this,t,r);this._rangeRequestReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var r,i=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(i.s();!(r=i.n()).done;){r.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}]);return PDFNodeStream}();r.PDFNodeStream=p;var v=function(){function BaseFullReader(t){_classCallCheck(this,BaseFullReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;var r=t.source;this._contentLength=r.length;this._loaded=0;this._filename=null;this._disableRange=r.disableRange||!1;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!r.disableStream;this._isRangeSupported=!r.disableRange;this._readableStream=null;this._readCapability=(0,a.createPromiseCapability)();this._headersCapability=(0,a.createPromiseCapability)()}_createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._readCapability.promise;case 2:if(!this._done){i.next=4;break}return i.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){i.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){i.next=10;break}this._readCapability=(0,a.createPromiseCapability)();return i.abrupt("return",this.read());case 10:this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});r=new Uint8Array(t).buffer;return i.abrupt("return",{value:r,done:!1});case 14:case"end":return i.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled"));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseFullReader}(),y=function(){function BaseRangeReader(t){_classCallCheck(this,BaseRangeReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,a.createPromiseCapability)();var r=t.source;this._isStreamingSupported=!r.disableStream}_createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._readCapability.promise;case 2:if(!this._done){i.next=4;break}return i.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){i.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){i.next=10;break}this._readCapability=(0,a.createPromiseCapability)();return i.abrupt("return",this.read());case 10:this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded});r=new Uint8Array(t).buffer;return i.abrupt("return",{value:r,done:!1});case 14:case"end":return i.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseRangeReader}();function createRequestOptions(t,r){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:r}}var g=function(t){_inherits(PDFNodeStreamFullReader,t);var r=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(t){var i;_classCallCheck(this,PDFNodeStreamFullReader);var u=function handleResponse(r){if(404!==r.statusCode){i._headersCapability.resolve();i._setReadableStream(r);var u=function getResponseHeader(t){return i._readableStream.headers[t.toLowerCase()]},l=(0,o.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:t.isHttp,rangeChunkSize:i._rangeChunkSize,disableRange:i._disableRange}),c=l.allowRangeRequests,d=l.suggestedLength;i._isRangeSupported=c;i._contentLength=d||i._contentLength;i._filename=(0,o.extractFilenameFromHeader)(u)}else{var h=new a.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=h;i._headersCapability.reject(h)}};(i=r.call(this,t))._request=null;"http:"===i._url.protocol?i._request=l.request(createRequestOptions(i._url,t.httpHeaders),u):i._request=c.request(createRequestOptions(i._url,t.httpHeaders),u);i._request.on("error",(function(t){i._storedError=t;i._headersCapability.reject(t)}));i._request.end();return i}return _createClass(PDFNodeStreamFullReader)}(v),m=function(t){_inherits(PDFNodeStreamRangeReader,t);var r=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(t,i,o){var u;_classCallCheck(this,PDFNodeStreamRangeReader);(u=r.call(this,t))._httpHeaders={};for(var d in t.httpHeaders){var h=t.httpHeaders[d];void 0!==h&&(u._httpHeaders[d]=h)}u._httpHeaders.Range="bytes=".concat(i,"-").concat(o-1);var p=function handleResponse(t){if(404!==t.statusCode)u._setReadableStream(t);else{var r=new a.MissingPDFException('Missing PDF "'.concat(u._url,'".'));u._storedError=r}};u._request=null;"http:"===u._url.protocol?u._request=l.request(createRequestOptions(u._url,u._httpHeaders),p):u._request=c.request(createRequestOptions(u._url,u._httpHeaders),p);u._request.on("error",(function(t){u._storedError=t}));u._request.end();return u}return _createClass(PDFNodeStreamRangeReader)}(y),b=function(t){_inherits(PDFNodeStreamFsFullReader,t);var r=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(t){var i;_classCallCheck(this,PDFNodeStreamFsFullReader);i=r.call(this,t);var o=decodeURIComponent(i._url.path);h.test(i._url.href)&&(o=o.replace(/^\//,""));u.lstat(o,(function(t,r){if(t){"ENOENT"===t.code&&(t=new a.MissingPDFException('Missing PDF "'.concat(o,'".')));i._storedError=t;i._headersCapability.reject(t)}else{i._contentLength=r.size;i._setReadableStream(u.createReadStream(o));i._headersCapability.resolve()}}));return i}return _createClass(PDFNodeStreamFsFullReader)}(v),w=function(t){_inherits(PDFNodeStreamFsRangeReader,t);var r=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(t,i,a){var o;_classCallCheck(this,PDFNodeStreamFsRangeReader);o=r.call(this,t);var l=decodeURIComponent(o._url.path);h.test(o._url.href)&&(l=l.replace(/^\//,""));o._setReadableStream(u.createReadStream(l,{start:i,end:a-1}));return o}return _createClass(PDFNodeStreamFsRangeReader)}(y)},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.createResponseStatusError=function createResponseStatusError(t,r){if(404===t||0===t&&r.startsWith("file:"))return new a.MissingPDFException('Missing PDF "'+r+'".');return new a.UnexpectedResponseException("Unexpected server response (".concat(t,') while retrieving PDF "').concat(r,'".'),t)};r.extractFilenameFromHeader=function extractFilenameFromHeader(t){var r=t("Content-Disposition");if(r){var i=(0,o.getFilenameFromContentDispositionHeader)(r);if(i.includes("%"))try{i=decodeURIComponent(i)}catch(t){}if((0,u.isPdfFile)(i))return i}return null};r.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(t){var r=t.getResponseHeader,i=t.isHttp,a=t.rangeChunkSize,o=t.disableRange,u={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(r("Content-Length"),10);if(!Number.isInteger(l))return u;u.suggestedLength=l;if(l<=2*a)return u;if(o||!i)return u;if("bytes"!==r("Accept-Ranges"))return u;if("identity"!==(r("Content-Encoding")||"identity"))return u;u.allowRangeRequests=!0;return u};r.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var a=i(1),o=i(159),u=i(129)},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){var r=!0,i=toParamRegExp("filename\\*","i").exec(t);if(i){var o=rfc2616unquote(i=i[1]);return fixupEncoding(o=rfc2047decode(o=rfc5987decode(o=unescape(o))))}if(i=function rfc2231getparam(t){var r,i=[],a=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(r=a.exec(t));){var o=_slicedToArray(r,4),u=o[1],l=o[2],c=o[3];if((u=parseInt(u,10))in i){if(0===u)break}else i[u]=[l,c]}for(var d=[],h=0;h<i.length&&h in i;++h){var p=_slicedToArray(i[h],2),v=p[0],y=p[1];y=rfc2616unquote(y);if(v){y=unescape(y);0===h&&(y=rfc5987decode(y))}d.push(y)}return d.join("")}(t)){return fixupEncoding(rfc2047decode(i))}if(i=toParamRegExp("filename","i").exec(t)){var u=rfc2616unquote(i=i[1]);return fixupEncoding(u=rfc2047decode(u))}function toParamRegExp(t,r){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function textdecode(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{var o=new TextDecoder(t,{fatal:!0}),u=(0,a.stringToBytes)(i);i=o.decode(u);r=!1}catch(t){}}return i}function fixupEncoding(t){if(r&&/[\x80-\xff]/.test(t)){t=textdecode("utf-8",t);r&&(t=textdecode("iso-8859-1",t))}return t}function rfc2616unquote(t){if(t.startsWith('"')){for(var r=t.slice(1).split('\\"'),i=0;i<r.length;++i){var a=r[i].indexOf('"');if(-1!==a){r[i]=r[i].slice(0,a);r.length=i+1}r[i]=r[i].replace(/\\(.)/g,"$1")}t=r.join('"')}return t}function rfc5987decode(t){var r=t.indexOf("'");return-1===r?t:textdecode(t.slice(0,r),t.slice(r+1).replace(/^[^']*'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,r,i,a){if("q"===i||"Q"===i)return textdecode(r,a=(a=a.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,r){return String.fromCharCode(parseInt(r,16))})));try{a=atob(a)}catch(t){}return textdecode(r,a)}))}return""};var a=i(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFNetworkStream=void 0;var a=i(1),o=i(158);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var u=function(){function NetworkManager(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,NetworkManager);this.url=t;this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null);this.withCredentials=r.withCredentials||!1;this.getXhr=r.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}_createClass(NetworkManager,[{key:"requestRange",value:function requestRange(t,r,i){var a={begin:t,end:r};for(var o in i)a[o]=i[o];return this.request(a)}},{key:"requestFull",value:function requestFull(t){return this.request(t)}},{key:"request",value:function request(t){var r=this.getXhr(),i=this.currXhrId++,a=this.pendingRequests[i]={xhr:r};r.open("GET",this.url);r.withCredentials=this.withCredentials;for(var o in this.httpHeaders){var u=this.httpHeaders[o];void 0!==u&&r.setRequestHeader(o,u)}if(this.isHttp&&"begin"in t&&"end"in t){r.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1));a.expectedStatus=206}else a.expectedStatus=200;r.responseType="arraybuffer";t.onError&&(r.onerror=function(i){t.onError(r.status)});r.onreadystatechange=this.onStateChange.bind(this,i);r.onprogress=this.onProgress.bind(this,i);a.onHeadersReceived=t.onHeadersReceived;a.onDone=t.onDone;a.onError=t.onError;a.onProgress=t.onProgress;r.send(null);return i}},{key:"onProgress",value:function onProgress(t,r){var i,a=this.pendingRequests[t];a&&(null===(i=a.onProgress)||void 0===i||i.call(a,r))}},{key:"onStateChange",value:function onStateChange(t,r){var i=this.pendingRequests[t];if(i){var o=i.xhr;if(o.readyState>=2&&i.onHeadersReceived){i.onHeadersReceived();delete i.onHeadersReceived}if(4===o.readyState&&t in this.pendingRequests){delete this.pendingRequests[t];if(0===o.status&&this.isHttp){var u;null===(u=i.onError)||void 0===u||u.call(i,o.status)}else{var l=o.status||200;if(200===l&&206===i.expectedStatus||l===i.expectedStatus){var c=function getArrayBuffer(t){var r=t.response;return"string"!=typeof r?r:(0,a.stringToBytes)(r).buffer}(o);if(206===l){var d=o.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(h[1],10),chunk:c})}else if(c)i.onDone({begin:0,chunk:c});else{var p;null===(p=i.onError)||void 0===p||p.call(i,o.status)}}else{var v;null===(v=i.onError)||void 0===v||v.call(i,o.status)}}}}}},{key:"getRequestXhr",value:function getRequestXhr(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function isPendingRequest(t){return t in this.pendingRequests}},{key:"abortRequest",value:function abortRequest(t){var r=this.pendingRequests[t].xhr;delete this.pendingRequests[t];r.abort()}}]);return NetworkManager}(),l=function(){function PDFNetworkStream(t){_classCallCheck(this,PDFNetworkStream);this._source=t;this._manager=new u(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(t){var r=this._rangeRequestReaders.indexOf(t);r>=0&&this._rangeRequestReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new c(this._manager,this._source);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){var i=new d(this._manager,t,r);i.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var r;null===(r=this._fullRequestReader)||void 0===r||r.cancel(t);var i,a=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(a.s();!(i=a.n()).done;){i.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}}}]);return PDFNetworkStream}();r.PDFNetworkStream=l;var c=function(){function PDFNetworkStreamFullRequestReader(t,r){_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=t;var i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url;this._fullRequestId=t.requestFull(i);this._headersReceivedCapability=(0,a.createPromiseCapability)();this._disableRange=r.disableRange||!1;this._contentLength=r.length;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var t=this._fullRequestId,r=this._manager.getRequestXhr(t),i=function getResponseHeader(t){return r.getResponseHeader(t)},a=(0,o.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),u=a.allowRangeRequests,l=a.suggestedLength;u&&(this._isRangeSupported=!0);this._contentLength=l||this._contentLength;this._filename=(0,o.extractFilenameFromHeader)(i);this._isRangeSupported&&this._manager.abortRequest(t);this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);this._done=!0;if(!(this._cachedChunks.length>0)){var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0}}},{key:"_onError",value:function _onError(t){this._storedError=(0,o.createResponseStatusError)(t,this._url);this._headersReceivedCapability.reject(this._storedError);var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.reject(this._storedError)}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._cachedChunks.length=0}},{key:"_onProgress",value:function _onProgress(t){var r;null===(r=this.onProgress)||void 0===r||r.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._storedError){i.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){i.next=5;break}t=this._cachedChunks.shift();return i.abrupt("return",{value:t,done:!1});case 5:if(!this._done){i.next=7;break}return i.abrupt("return",{value:void 0,done:!0});case 7:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 10:case"end":return i.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._headersReceivedCapability.reject(t);var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId);this._fullRequestReader=null}}]);var t;return PDFNetworkStreamFullRequestReader}(),d=function(){function PDFNetworkStreamRangeRequestReader(t,r,i){_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=t;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._requestId=t.requestRange(r,i,a);this._requests=[];this._queuedChunk=null;this._done=!1;this._storedError=void 0;this.onProgress=null;this.onClosed=null}_createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function _onDone(t){var r=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:r,done:!1})}else this._queuedChunk=r;this._done=!0;var i,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(i=a.n()).done;){i.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._close()}},{key:"_onError",value:function _onError(t){this._storedError=(0,o.createResponseStatusError)(t,this._url);var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.reject(this._storedError)}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._queuedChunk=null}},{key:"_onProgress",value:function _onProgress(t){if(!this.isStreamingSupported){var r;null===(r=this.onProgress)||void 0===r||r.call(this,{loaded:t.loaded})}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._storedError){i.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){i.next=6;break}t=this._queuedChunk;this._queuedChunk=null;return i.abrupt("return",{value:t,done:!1});case 6:if(!this._done){i.next=8;break}return i.abrupt("return",{value:void 0,done:!0});case 8:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 11:case"end":return i.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}]);var t;return PDFNetworkStreamRangeRequestReader}()},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFFetchStream=void 0;var a=i(1),o=i(158);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function createFetchOptions(t,r,i){return{method:"GET",headers:t,signal:null==i?void 0:i.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function createHeaders(t){var r=new Headers;for(var i in t){var a=t[i];void 0!==a&&r.append(i,a)}return r}var u=function(){function PDFFetchStream(t){_classCallCheck(this,PDFFetchStream);this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new l(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var i=new c(this,t,r);this._rangeRequestReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var r,i=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(i.s();!(r=i.n()).done;){r.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}]);return PDFFetchStream}();r.PDFFetchStream=u;var l=function(){function PDFFetchStreamReader(t){var r=this;_classCallCheck(this,PDFFetchStreamReader);this._stream=t;this._reader=null;this._loaded=0;this._filename=null;var i=t.source;this._withCredentials=i.withCredentials||!1;this._contentLength=i.length;this._headersCapability=(0,a.createPromiseCapability)();this._disableRange=i.disableRange||!1;this._rangeChunkSize=i.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._isStreamingSupported=!i.disableStream;this._isRangeSupported=!i.disableRange;this._headers=createHeaders(this._stream.httpHeaders);var u=i.url;fetch(u,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,u);r._reader=t.body.getReader();r._headersCapability.resolve();var i=function getResponseHeader(r){return t.headers.get(r)},l=(0,o.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),c=l.allowRangeRequests,d=l.suggestedLength;r._isRangeSupported=c;r._contentLength=d||r._contentLength;r._filename=(0,o.extractFilenameFromHeader)(i);!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new a.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._headersCapability.promise;case 2:o.next=4;return this._reader.read();case 4:t=o.sent;r=t.value;if(!(i=t.done)){o.next=9;break}return o.abrupt("return",{value:r,done:i});case 9:this._loaded+=r.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});a=new Uint8Array(r).buffer;return o.abrupt("return",{value:a,done:!1});case 13:case"end":return o.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}]);var t;return PDFFetchStreamReader}(),c=function(){function PDFFetchStreamRangeReader(t,r,i){var u=this;_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=t;this._reader=null;this._loaded=0;var l=t.source;this._withCredentials=l.withCredentials||!1;this._readCapability=(0,a.createPromiseCapability)();this._isStreamingSupported=!l.disableStream;"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(r,"-").concat(i-1));var c=l.url;fetch(c,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,c);u._readCapability.resolve();u._reader=t.body.getReader()})).catch(this._readCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r,i,a;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._readCapability.promise;case 2:o.next=4;return this._reader.read();case 4:t=o.sent;r=t.value;if(!(i=t.done)){o.next=9;break}return o.abrupt("return",{value:r,done:i});case 9:this._loaded+=r.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded});a=new Uint8Array(r).buffer;return o.abrupt("return",{value:a,done:!1});case 13:case"end":return o.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}]);var t;return PDFFetchStreamRangeReader}()}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var r=__webpack_module_cache__[t];if(void 0!==r)return r.exports;var i=__webpack_module_cache__[t]={exports:{}};__webpack_modules__[t](i,i.exports,__w_pdfjs_require__);return i.exports}var __webpack_exports__={};(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function get(){return o.AnnotationEditorLayer}});Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function get(){return r.AnnotationEditorParamsType}});Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function get(){return r.AnnotationEditorType}});Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function get(){return u.AnnotationEditorUIManager}});Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function get(){return l.AnnotationLayer}});Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function get(){return r.AnnotationMode}});Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function get(){return r.CMapCompressionType}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return c.GlobalWorkerOptions}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function get(){return r.InvalidPDFException}});Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function get(){return a.LoopbackPort}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function get(){return r.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function get(){return r.OPS}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return a.PDFDataRangeTransport}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function get(){return i.PDFDateString}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function get(){return a.PDFWorker}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function get(){return r.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function get(){return r.PermissionFlag}});Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function get(){return i.PixelsPerInch}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function get(){return i.RenderingCancelledException}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function get(){return p.SVGGraphics}});Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function get(){return r.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function get(){return r.UnexpectedResponseException}});Object.defineProperty(t,"Util",{enumerable:!0,get:function get(){return r.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function get(){return r.VerbosityLevel}});Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function get(){return v.XfaLayer}});Object.defineProperty(t,"binarySearchFirstItem",{enumerable:!0,get:function get(){return i.binarySearchFirstItem}});Object.defineProperty(t,"build",{enumerable:!0,get:function get(){return a.build}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function get(){return r.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return r.createValidAbsoluteUrl}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function get(){return a.getDocument}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function get(){return i.getFilenameFromUrl}});Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function get(){return i.getPdfFilenameFromUrl}});Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function get(){return i.getXfaPageViewport}});Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function get(){return i.isPdfFile}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return i.loadScript}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function get(){return h.renderTextLayer}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function get(){return r.shadow}});Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return a.version}});var r=__w_pdfjs_require__(1),i=__w_pdfjs_require__(129),a=__w_pdfjs_require__(131),o=__w_pdfjs_require__(147),u=__w_pdfjs_require__(134),l=__w_pdfjs_require__(152),c=__w_pdfjs_require__(140),d=__w_pdfjs_require__(3),h=__w_pdfjs_require__(155),p=__w_pdfjs_require__(156),v=__w_pdfjs_require__(154);if(d.isNodeJS){var y=__w_pdfjs_require__(157).PDFNodeStream;(0,a.setPDFNetworkStreamFactory)((function(t){return new y(t)}))}else{var g=__w_pdfjs_require__(160).PDFNetworkStream,m=__w_pdfjs_require__(161).PDFFetchStream;(0,a.setPDFNetworkStreamFactory)((function(t){return(0,i.isValidFetchUrl)(t.url)?new m(t):new g(t)}))}})();return __webpack_exports__})()));
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */(()=>{"use strict";var t=[,(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.compatibilityParams=r.OptionKind=r.AppOptions=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var i=Object.create(null);r.compatibilityParams=i;var a=navigator.userAgent||"",o=navigator.platform||"",u=navigator.maxTouchPoints||1,l=/Android/.test(a),c=/\b(iPad|iPhone|iPod)(?=;)/.test(a)||"MacIntel"===o&&u>1;!function checkCanvasSizeLimitation(){(c||l)&&(i.maxCanvasPixels=5242880)}();!function checkResizeObserver(){"undefined"==typeof ResizeObserver&&(i.annotationEditorMode=-1)}();var d={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};r.OptionKind=d;var h={annotationEditorMode:{value:-1,kind:d.VIEWER+d.PREFERENCE},annotationMode:{value:2,kind:d.VIEWER+d.PREFERENCE},cursorToolOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},defaultZoomValue:{value:"",kind:d.VIEWER+d.PREFERENCE},disableHistory:{value:!1,kind:d.VIEWER},disablePageLabels:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePermissions:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:d.VIEWER+d.PREFERENCE},enableScripting:{value:!0,kind:d.VIEWER+d.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:d.VIEWER},externalLinkTarget:{value:0,kind:d.VIEWER+d.PREFERENCE},historyUpdateUrl:{value:!1,kind:d.VIEWER+d.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},imageResourcesPath:{value:"./images/",kind:d.VIEWER},maxCanvasPixels:{value:16777216,kind:d.VIEWER},forcePageColors:{value:!1,kind:d.VIEWER+d.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:d.VIEWER+d.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:d.VIEWER+d.PREFERENCE},pdfBugEnabled:{value:!1,kind:d.VIEWER+d.PREFERENCE},printResolution:{value:150,kind:d.VIEWER},sidebarViewOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},scrollModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},spreadModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},textLayerMode:{value:1,kind:d.VIEWER+d.PREFERENCE},useOnlyCssZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},viewerCssTheme:{value:0,kind:d.VIEWER+d.PREFERENCE},viewOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},cMapPacked:{value:!0,kind:d.API},cMapUrl:{value:"../web/cmaps/",kind:d.API},disableAutoFetch:{value:!1,kind:d.API+d.PREFERENCE},disableFontFace:{value:!1,kind:d.API+d.PREFERENCE},disableRange:{value:!1,kind:d.API+d.PREFERENCE},disableStream:{value:!1,kind:d.API+d.PREFERENCE},docBaseUrl:{value:"",kind:d.API},enableXfa:{value:!0,kind:d.API+d.PREFERENCE},fontExtraProperties:{value:!1,kind:d.API},isEvalSupported:{value:!0,kind:d.API},maxImageSize:{value:-1,kind:d.API},pdfBug:{value:!1,kind:d.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:d.API},verbosity:{value:1,kind:d.API},workerPort:{value:null,kind:d.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:d.WORKER}};h.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:d.VIEWER};h.disablePreferences={value:!1,kind:d.VIEWER};h.locale={value:navigator.language||"en-US",kind:d.VIEWER};h.renderer={value:"canvas",kind:d.VIEWER+d.PREFERENCE};h.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:d.VIEWER};var p=Object.create(null),v=function(){function AppOptions(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AppOptions);throw new Error("Cannot initialize AppOptions.")}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AppOptions,null,[{key:"get",value:function get(t){var r=p[t];if(void 0!==r)return r;var a=h[t];if(void 0!==a){var o;return null!==(o=i[t])&&void 0!==o?o:a.value}}},{key:"getAll",value:function getAll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Object.create(null);for(var a in h){var o,u=h[a];if(t){if(0==(t&u.kind))continue;if(t===d.PREFERENCE){var l=u.value,c=_typeof(l);if("boolean"===c||"string"===c||"number"===c&&Number.isInteger(l)){r[a]=l;continue}throw new Error("Invalid type for preference: ".concat(a))}}var v=p[a];r[a]=void 0!==v?v:null!==(o=i[a])&&void 0!==o?o:u.value}return r}},{key:"set",value:function set(t,r){p[t]=r}},{key:"setAll",value:function setAll(t){for(var r in t)p[r]=t[r]}},{key:"remove",value:function remove(t){delete p[t]}},{key:"_hasUserOptions",value:function _hasUserOptions(){return Object.keys(p).length>0}}]);return AppOptions}();r.AppOptions=v},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFViewerApplication=r.PDFPrintServiceFactory=r.DefaultExternalServices=void 0;var a=i(3),o=i(4),u=i(1),l=i(5),c=i(6),d=i(8),h=i(9),p=i(10),v=i(12),y=i(13),g=i(15),m=i(16),b=i(17),w=i(19),A=i(20),P=i(21),D=i(22),E=i(23),S=i(24),C=i(25),k=i(26),x=i(27),T=i(29),I=i(39),L=i(40),O=i(41);function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var M=-1,R=1,B={AUTOMATIC:0,LIGHT:1,DARK:2},G=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],N=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"],j=function(){function DefaultExternalServices(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DefaultExternalServices);throw new Error("Cannot initialize DefaultExternalServices.")}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(DefaultExternalServices,null,[{key:"updateFindControlState",value:function updateFindControlState(t){}},{key:"updateFindMatchesCount",value:function updateFindMatchesCount(t){}},{key:"initPassiveLoading",value:function initPassiveLoading(t){}},{key:"reportTelemetry",value:function reportTelemetry(t){}},{key:"createDownloadManager",value:function createDownloadManager(t){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function createPreferences(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function createL10n(t){throw new Error("Not implemented: createL10n")}},{key:"createScripting",value:function createScripting(t){throw new Error("Not implemented: createScripting")}},{key:"supportsIntegratedFind",get:function get(){return(0,o.shadow)(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function get(){return(0,o.shadow)(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function get(){return(0,o.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function get(){return(0,o.shadow)(this,"isInAutomation",!1)}},{key:"updateEditorStates",value:function updateEditorStates(t){throw new Error("Not implemented: updateEditorStates")}}]);return DefaultExternalServices}();r.DefaultExternalServices=j;var V,W={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,o.createPromiseCapability)(),appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,annotationEditorParams:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:j,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:!1,_docStats:null,_wheelUnusedTicks:0,_idleCallbacks:new Set,_PDFBug:null,_printAnnotationStoragePromise:null,initialize:function initialize(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var i;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:r.preferences=r.externalServices.createPreferences();r.appConfig=t;a.next=4;return r._readPreferences();case 4:a.next=6;return r._parseHashParameters();case 6:r._forceCssTheme();a.next=9;return r._initializeL10n();case 9:u.AppOptions.set("enablePermissions",!0);r.isViewerEmbedded&&u.AppOptions.get("externalLinkTarget")===d.LinkTarget.NONE&&u.AppOptions.set("externalLinkTarget",d.LinkTarget.TOP);a.next=13;return r._initializeViewerComponents();case 13:r.bindEvents();r.bindWindowEvents();i=t.appContainer||document.documentElement;r.l10n.translate(i).then((function(){r.eventBus.dispatch("localized",{source:r})}));r._initializedCapability.resolve();case 18:case"end":return a.stop()}}),_callee)})))()},_readPreferences:function _readPreferences(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!u.AppOptions.get("disablePreferences")){r.next=2;break}return r.abrupt("return");case 2:u.AppOptions._hasUserOptions()&&console.warn('_readPreferences: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');r.prev=3;r.t0=u.AppOptions;r.next=7;return t.preferences.getAll();case 7:r.t1=r.sent;r.t0.setAll.call(r.t0,r.t1);r.next=14;break;case 11:r.prev=11;r.t2=r.catch(3);console.error('_readPreferences: "'.concat(null===r.t2||void 0===r.t2?void 0:r.t2.message,'".'));case 14:case"end":return r.stop()}}),_callee2,null,[[3,11]])})))()},_parseHashParameters:function _parseHashParameters(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var r,i,l,c,d,h;return _regeneratorRuntime().wrap((function _callee3$(p){for(;;)switch(p.prev=p.next){case 0:if(u.AppOptions.get("pdfBugEnabled")){p.next=2;break}return p.abrupt("return");case 2:if(r=document.location.hash.substring(1)){p.next=5;break}return p.abrupt("return");case 5:i=t.appConfig,l=i.mainContainer,c=i.viewerContainer;if("true"!==(d=(0,a.parseQueryString)(r)).get("disableworker")){p.next=15;break}p.prev=7;p.next=10;return loadFakeWorker();case 10:p.next=15;break;case 12:p.prev=12;p.t0=p.catch(7);console.error('_parseHashParameters: "'.concat(p.t0.message,'".'));case 15:d.has("disablerange")&&u.AppOptions.set("disableRange","true"===d.get("disablerange"));d.has("disablestream")&&u.AppOptions.set("disableStream","true"===d.get("disablestream"));d.has("disableautofetch")&&u.AppOptions.set("disableAutoFetch","true"===d.get("disableautofetch"));d.has("disablefontface")&&u.AppOptions.set("disableFontFace","true"===d.get("disablefontface"));d.has("disablehistory")&&u.AppOptions.set("disableHistory","true"===d.get("disablehistory"));d.has("verbosity")&&u.AppOptions.set("verbosity",0|d.get("verbosity"));if(!d.has("textlayer")){p.next=38;break}p.t1=d.get("textlayer");p.next="off"===p.t1?25:"visible"===p.t1||"shadow"===p.t1||"hover"===p.t1?27:38;break;case 25:u.AppOptions.set("textLayerMode",a.TextLayerMode.DISABLE);return p.abrupt("break",38);case 27:c.classList.add("textLayer-".concat(d.get("textlayer")));p.prev=28;p.next=31;return loadPDFBug(t);case 31:t._PDFBug.loadCSS();p.next=37;break;case 34:p.prev=34;p.t2=p.catch(28);console.error('_parseHashParameters: "'.concat(p.t2.message,'".'));case 37:return p.abrupt("break",38);case 38:if(!d.has("pdfbug")){p.next=51;break}u.AppOptions.set("pdfBug",!0);u.AppOptions.set("fontExtraProperties",!0);h=d.get("pdfbug").split(",");p.prev=42;p.next=45;return loadPDFBug(t);case 45:t._PDFBug.init({OPS:o.OPS},l,h);p.next=51;break;case 48:p.prev=48;p.t3=p.catch(42);console.error('_parseHashParameters: "'.concat(p.t3.message,'".'));case 51:d.has("locale")&&u.AppOptions.set("locale",d.get("locale"));case 52:case"end":return p.stop()}}),_callee3,null,[[7,12],[28,34],[42,48]])})))()},_initializeL10n:function _initializeL10n(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var r;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:t.l10n=t.externalServices.createL10n({locale:u.AppOptions.get("locale")});i.next=3;return t.l10n.getDirection();case 3:r=i.sent;document.getElementsByTagName("html")[0].dir=r;case 5:case"end":return i.stop()}}),_callee4)})))()},_forceCssTheme:function _forceCssTheme(){var t=u.AppOptions.get("viewerCssTheme");if(t!==B.AUTOMATIC&&Object.values(B).includes(t))try{for(var r=document.styleSheets[0],i=(null==r?void 0:r.cssRules)||[],a=0,o=i.length;a<o;a++){var l,c=i[a];if(c instanceof CSSMediaRule&&"(prefers-color-scheme: dark)"===(null===(l=c.media)||void 0===l?void 0:l[0])){if(t===B.LIGHT){r.deleteRule(a);return}var d=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(c.cssText);if(null!=d&&d[1]){r.deleteRule(a);r.insertRule(d[1],a)}return}}}catch(t){console.error('_forceCssTheme: "'.concat(null==t?void 0:t.message,'".'))}},_initializeViewerComponents:function _initializeViewerComponents(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var r,i,a,O,M,R,B,G,N,j,V,W,U,H;return _regeneratorRuntime().wrap((function _callee5$(z){for(;;)switch(z.prev=z.next){case 0:r=t.appConfig,i=t.externalServices;a=i.isInAutomation?new l.AutomationEventBus:new l.EventBus;t.eventBus=a;t.overlayManager=new p.OverlayManager;(O=new E.PDFRenderingQueue).onIdle=t._cleanup.bind(t);t.pdfRenderingQueue=O;M=new d.PDFLinkService({eventBus:a,externalLinkTarget:u.AppOptions.get("externalLinkTarget"),externalLinkRel:u.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:u.AppOptions.get("ignoreDestinationZoom")});t.pdfLinkService=M;R=i.createDownloadManager();t.downloadManager=R;B=new b.PDFFindController({linkService:M,eventBus:a});t.findController=B;G=new S.PDFScriptingManager({eventBus:a,sandboxBundleSrc:u.AppOptions.get("sandboxBundleSrc"),scriptingFactory:i,docPropertiesLookup:t._scriptingDocProperties.bind(t)});t.pdfScriptingManager=G;N=r.mainContainer,j=r.viewerContainer;V=u.AppOptions.get("annotationEditorMode");W=u.AppOptions.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:u.AppOptions.get("pageColorsBackground"),foreground:u.AppOptions.get("pageColorsForeground")}:null;t.pdfViewer=new T.PDFViewer({container:N,viewer:j,eventBus:a,renderingQueue:O,linkService:M,downloadManager:R,findController:B,scriptingManager:u.AppOptions.get("enableScripting")&&G,renderer:u.AppOptions.get("renderer"),l10n:t.l10n,textLayerMode:u.AppOptions.get("textLayerMode"),annotationMode:u.AppOptions.get("annotationMode"),annotationEditorMode:V,imageResourcesPath:u.AppOptions.get("imageResourcesPath"),enablePrintAutoRotate:u.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:u.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:u.AppOptions.get("maxCanvasPixels"),enablePermissions:u.AppOptions.get("enablePermissions"),pageColors:W});O.setViewer(t.pdfViewer);M.setViewer(t.pdfViewer);G.setViewer(t.pdfViewer);t.pdfThumbnailViewer=new x.PDFThumbnailViewer({container:r.sidebar.thumbnailView,eventBus:a,renderingQueue:O,linkService:M,l10n:t.l10n,pageColors:W});O.setThumbnailViewer(t.pdfThumbnailViewer);if(!t.isViewerEmbedded&&!u.AppOptions.get("disableHistory")){t.pdfHistory=new w.PDFHistory({linkService:M,eventBus:a});M.setHistory(t.pdfHistory)}t.supportsIntegratedFind||(t.findBar=new m.PDFFindBar(r.findBar,a,t.l10n));if(V!==o.AnnotationEditorType.DISABLE){t.annotationEditorParams=new h.AnnotationEditorParams(r.annotationEditorParams,a);for(U=0,H=[document.getElementById("editorModeButtons"),document.getElementById("editorModeSeparator")];U<H.length;U++)H[U].classList.remove("hidden")}t.pdfDocumentProperties=new g.PDFDocumentProperties(r.documentProperties,t.overlayManager,a,t.l10n,(function(){return t._docFilename}));t.pdfCursorTools=new c.PDFCursorTools({container:N,eventBus:a,cursorToolOnLoad:u.AppOptions.get("cursorToolOnLoad")});t.toolbar=new L.Toolbar(r.toolbar,a,t.l10n);t.secondaryToolbar=new I.SecondaryToolbar(r.secondaryToolbar,a);t.supportsFullscreen&&(t.pdfPresentationMode=new D.PDFPresentationMode({container:N,pdfViewer:t.pdfViewer,eventBus:a}));t.passwordPrompt=new v.PasswordPrompt(r.passwordOverlay,t.overlayManager,t.l10n,t.isViewerEmbedded);t.pdfOutlineViewer=new P.PDFOutlineViewer({container:r.sidebar.outlineView,eventBus:a,linkService:M});t.pdfAttachmentViewer=new y.PDFAttachmentViewer({container:r.sidebar.attachmentsView,eventBus:a,downloadManager:R});t.pdfLayerViewer=new A.PDFLayerViewer({container:r.sidebar.layersView,eventBus:a,l10n:t.l10n});t.pdfSidebar=new C.PDFSidebar({elements:r.sidebar,pdfViewer:t.pdfViewer,pdfThumbnailViewer:t.pdfThumbnailViewer,eventBus:a,l10n:t.l10n});t.pdfSidebar.onToggled=t.forceRendering.bind(t);t.pdfSidebarResizer=new k.PDFSidebarResizer(r.sidebarResizer,a,t.l10n);case 39:case"end":return z.stop()}}),_callee5)})))()},run:function run(t){this.initialize(t).then(webViewerInitialized)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn:function zoomIn(t){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale(t)},zoomOut:function zoomOut(t){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale(t)},zoomReset:function zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(t){this.pdfViewer.currentPageNumber=t},get supportsPrinting(){return Y.instance.supportsPrinting},get supportsFullscreen(){return(0,o.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){var t=new a.ProgressBar("loadingBar");return(0,o.shadow)(this,"loadingBar",t)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading:function initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl:function setTitleUsingUrl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.url=t;this.baseUrl=t.split("#")[0];r&&(this._downloadUrl=r===t?this.baseUrl:r.split("#")[0]);var i=(0,o.getPdfFilenameFromUrl)(t,"");if(!i)try{i=decodeURIComponent((0,o.getFilenameFromUrl)(t))||t}catch(r){i=t}this.setTitle(i)},setTitle:function setTitle(t){this.isViewerEmbedded||(document.title=t)},get _docFilename(){return this._contentDispositionFilename||(0,o.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark:function _hideViewBookmark(){var t=this.appConfig,r=t.toolbar,i=t.secondaryToolbar;r.viewBookmark.hidden=!0;i.viewBookmarkButton.hidden=!0},_cancelIdleCallbacks:function _cancelIdleCallbacks(){if(this._idleCallbacks.size){var t,r=_createForOfIteratorHelper(this._idleCallbacks);try{for(r.s();!(t=r.n()).done;){var i=t.value;window.cancelIdleCallback(i)}}catch(t){r.e(t)}finally{r.f()}this._idleCallbacks.clear()}},close:function close(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){var r,i,a,o,u;return _regeneratorRuntime().wrap((function _callee6$(l){for(;;)switch(l.prev=l.next){case 0:t._unblockDocumentLoadEvent();t._hideViewBookmark();t.appConfig.errorWrapper.container.hidden=!0;if(t.pdfLoadingTask){l.next=6;break}return l.abrupt("return");case 6:if(!((null===(r=t.pdfDocument)||void 0===r?void 0:r.annotationStorage.size)>0&&t._annotationStorageModified)){l.next=14;break}l.prev=7;l.next=10;return t.save();case 10:l.next=14;break;case 12:l.prev=12;l.t0=l.catch(7);case 14:(u=[]).push(t.pdfLoadingTask.destroy());t.pdfLoadingTask=null;if(t.pdfDocument){t.pdfDocument=null;t.pdfThumbnailViewer.setDocument(null);t.pdfViewer.setDocument(null);t.pdfLinkService.setDocument(null);t.pdfDocumentProperties.setDocument(null)}t.pdfLinkService.externalLinkEnabled=!0;t.store=null;t.isInitialViewSet=!1;t.downloadComplete=!1;t.url="";t.baseUrl="";t._downloadUrl="";t.documentInfo=null;t.metadata=null;t._contentDispositionFilename=null;t._contentLength=null;t._saveInProgress=!1;t._docStats=null;t._cancelIdleCallbacks();u.push(t.pdfScriptingManager.destroyPromise);t.pdfSidebar.reset();t.pdfOutlineViewer.reset();t.pdfAttachmentViewer.reset();t.pdfLayerViewer.reset();null===(i=t.pdfHistory)||void 0===i||i.reset();null===(a=t.findBar)||void 0===a||a.reset();t.toolbar.reset();t.secondaryToolbar.reset();null===(o=t._PDFBug)||void 0===o||o.cleanup();l.next=44;return Promise.all(u);case 44:case"end":return l.stop()}}),_callee6,null,[[7,12]])})))()},open:function open(t,r){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee7(){var a,l,c,d,h,p,v,y;return _regeneratorRuntime().wrap((function _callee7$(g){for(;;)switch(g.prev=g.next){case 0:if(!i.pdfLoadingTask){g.next=3;break}g.next=3;return i.close();case 3:a=u.AppOptions.getAll(u.OptionKind.WORKER);for(l in a)o.GlobalWorkerOptions[l]=a[l];c=Object.create(null);if("string"==typeof t){i.setTitleUsingUrl(t,t);c.url=t}else if(t&&"byteLength"in t)c.data=t;else if(t.url&&t.originalUrl){i.setTitleUsingUrl(t.originalUrl,t.url);c.url=t.url}d=u.AppOptions.getAll(u.OptionKind.API);for(h in d){p=d[h];c[h]=p}if(r)for(v in r)c[v]=r[v];y=(0,o.getDocument)(c);i.pdfLoadingTask=y;y.onPassword=function(t,r){i.pdfLinkService.externalLinkEnabled=!1;i.passwordPrompt.setUpdateCallback(t,r);i.passwordPrompt.open()};y.onProgress=function(t){var r=t.loaded,a=t.total;i.progress(r/a)};y.onUnsupportedFeature=i.fallback.bind(i);return g.abrupt("return",y.promise.then((function(t){i.load(t)}),(function(t){if(y===i.pdfLoadingTask){var r="loading_error";t instanceof o.InvalidPDFException?r="invalid_file_error":t instanceof o.MissingPDFException?r="missing_file_error":t instanceof o.UnexpectedResponseException&&(r="unexpected_response_error");return i.l10n.get(r).then((function(r){i._documentError(r,{message:null==t?void 0:t.message});throw t}))}})));case 16:case"end":return g.stop()}}),_callee7)})))()},_ensureDownloadComplete:function _ensureDownloadComplete(){if(!this.pdfDocument||!this.downloadComplete)throw new Error("PDF document not downloaded.")},download:function download(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee8(){var r,i,a,o;return _regeneratorRuntime().wrap((function _callee8$(u){for(;;)switch(u.prev=u.next){case 0:r=t._downloadUrl,i=t._docFilename;u.prev=1;t._ensureDownloadComplete();u.next=5;return t.pdfDocument.getData();case 5:a=u.sent;o=new Blob([a],{type:"application/pdf"});u.next=9;return t.downloadManager.download(o,r,i);case 9:u.next=15;break;case 11:u.prev=11;u.t0=u.catch(1);u.next=15;return t.downloadManager.downloadUrl(r,i);case 15:case"end":return u.stop()}}),_callee8,null,[[1,11]])})))()},save:function save(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee9(){var r,i,a,o;return _regeneratorRuntime().wrap((function _callee9$(u){for(;;)switch(u.prev=u.next){case 0:if(!t._saveInProgress){u.next=2;break}return u.abrupt("return");case 2:t._saveInProgress=!0;u.next=5;return t.pdfScriptingManager.dispatchWillSave();case 5:r=t._downloadUrl,i=t._docFilename;u.prev=6;t._ensureDownloadComplete();u.next=10;return t.pdfDocument.saveDocument();case 10:a=u.sent;o=new Blob([a],{type:"application/pdf"});u.next=14;return t.downloadManager.download(o,r,i);case 14:u.next=21;break;case 16:u.prev=16;u.t0=u.catch(6);console.error("Error when saving the document: ".concat(u.t0.message));u.next=21;return t.download();case 21:u.prev=21;u.next=24;return t.pdfScriptingManager.dispatchDidSave();case 24:t._saveInProgress=!1;return u.finish(21);case 26:case"end":return u.stop()}}),_callee9,null,[[6,16,21,26]])})))()},downloadOrSave:function downloadOrSave(){var t;(null===(t=this.pdfDocument)||void 0===t?void 0:t.annotationStorage.size)>0?this.save():this.download()},fallback:function fallback(t){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:t})},_documentError:function _documentError(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unblockDocumentLoadEvent();this._otherError(t,i);this.eventBus.dispatch("documenterror",{source:this,message:t,reason:null!==(r=null==i?void 0:i.message)&&void 0!==r?r:null})},_otherError:function _otherError(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.l10n.get("error_version_info",{version:o.version||"?",build:o.build||"?"})];if(r){i.push(this.l10n.get("error_message",{message:r.message}));if(r.stack)i.push(this.l10n.get("error_stack",{stack:r.stack}));else{r.filename&&i.push(this.l10n.get("error_file",{file:r.filename}));r.lineNumber&&i.push(this.l10n.get("error_line",{line:r.lineNumber}))}}var u=this.appConfig.errorWrapper,l=u.container;l.hidden=!1;var c=u.errorMessage;c.textContent=t;var d=u.closeButton;d.onclick=function(){l.hidden=!0};var h=u.errorMoreInfo,p=u.moreInfoButton,v=u.lessInfoButton;p.onclick=function(){h.hidden=!1;p.hidden=!0;v.hidden=!1;h.style.height=h.scrollHeight+"px"};v.onclick=function(){h.hidden=!0;p.hidden=!1;v.hidden=!0};p.oncontextmenu=a.noContextMenuHandler;v.oncontextmenu=a.noContextMenuHandler;d.oncontextmenu=a.noContextMenuHandler;p.hidden=!1;v.hidden=!0;Promise.all(i).then((function(t){h.value=t.join("\n")}))},progress:function progress(t){var r,i,a=this;if(!this.downloadComplete){var o=Math.round(100*t);if(!(o<=this.loadingBar.percent)){this.loadingBar.percent=o;if((null!==(r=null===(i=this.pdfDocument)||void 0===i?void 0:i.loadingParams.disableAutoFetch)&&void 0!==r?r:u.AppOptions.get("disableAutoFetch"))&&!isNaN(o)){if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout((function(){a.loadingBar.hide();a.disableAutoFetchLoadingBarTimeout=null}),5e3)}}}},load:function load(t){var r=this;this.pdfDocument=t;t.getDownloadInfo().then((function(t){var i=t.length;r._contentLength=i;r.downloadComplete=!0;r.loadingBar.hide();d.then((function(){r.eventBus.dispatch("documentloaded",{source:r})}))}));var i=t.getPageLayout().catch((function(){})),o=t.getPageMode().catch((function(){})),l=t.getOpenAction().catch((function(){}));this.toolbar.setPagesCount(t.numPages,!1);this.secondaryToolbar.setPagesCount(t.numPages);null;this.pdfLinkService.setDocument(t,null);this.pdfDocumentProperties.setDocument(t);var c=this.pdfViewer;c.setDocument(t);var d=c.firstPagePromise,h=c.onePageRendered,p=c.pagesPromise;this.pdfThumbnailViewer.setDocument(t);var v=(this.store=new O.ViewHistory(t.fingerprints[0])).getMultiple({page:null,zoom:a.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:a.SidebarView.UNKNOWN,scrollMode:a.ScrollMode.UNKNOWN,spreadMode:a.SpreadMode.UNKNOWN}).catch((function(){return Object.create(null)}));d.then((function(d){r.loadingBar.setWidth(r.appConfig.viewerContainer);r._initializeAnnotationStorageCallbacks(t);Promise.all([a.animationStarted,v,i,o,l]).then(function(){var i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(i){var o,l,d,h,v,y,g,m,b,w,A,P,D,E;return _regeneratorRuntime().wrap((function _callee10$(S){for(;;)switch(S.prev=S.next){case 0:o=_slicedToArray(i,5),o[0],l=o[1],d=o[2],h=o[3],v=o[4];y=u.AppOptions.get("viewOnLoad");r._initializePdfHistory({fingerprint:t.fingerprints[0],viewOnLoad:y,initialDest:null==v?void 0:v.dest});g=r.initialBookmark;m=u.AppOptions.get("defaultZoomValue");b=m?"zoom=".concat(m):null;w=null;A=u.AppOptions.get("sidebarViewOnLoad");P=u.AppOptions.get("scrollModeOnLoad");D=u.AppOptions.get("spreadModeOnLoad");if(l.page&&y!==R){b="page=".concat(l.page,"&zoom=").concat(m||l.zoom,",")+"".concat(l.scrollLeft,",").concat(l.scrollTop);w=parseInt(l.rotation,10);A===a.SidebarView.UNKNOWN&&(A=0|l.sidebarView);P===a.ScrollMode.UNKNOWN&&(P=0|l.scrollMode);D===a.SpreadMode.UNKNOWN&&(D=0|l.spreadMode)}h&&A===a.SidebarView.UNKNOWN&&(A=(0,a.apiPageModeToSidebarView)(h));if(d&&P===a.ScrollMode.UNKNOWN&&D===a.SpreadMode.UNKNOWN){E=(0,a.apiPageLayoutToViewerModes)(d);D=E.spreadMode}r.setInitialView(b,{rotation:w,sidebarView:A,scrollMode:P,spreadMode:D});r.eventBus.dispatch("documentinit",{source:r});r.isViewerEmbedded||c.focus();S.next=18;return Promise.race([p,new Promise((function(t){setTimeout(t,1e4)}))]);case 18:if(g||b){S.next=20;break}return S.abrupt("return");case 20:if(!c.hasEqualPageSizes){S.next=22;break}return S.abrupt("return");case 22:r.initialBookmark=g;c.currentScaleValue=c.currentScaleValue;r.setInitialView(b);case 25:case"end":return S.stop()}}),_callee10)})));return function(t){return i.apply(this,arguments)}}()).catch((function(){r.setInitialView()})).then((function(){c.update()}))}));p.then((function(){r._unblockDocumentLoadEvent();r._initializeAutoPrint(t,l)}),(function(t){r.l10n.get("loading_error").then((function(i){r._documentError(i,{message:null==t?void 0:t.message})}))}));h.then((function(i){r.externalServices.reportTelemetry({type:"pageInfo",timestamp:i.timestamp});t.getOutline().then((function(i){t===r.pdfDocument&&r.pdfOutlineViewer.render({outline:i,pdfDocument:t})}));t.getAttachments().then((function(i){t===r.pdfDocument&&r.pdfAttachmentViewer.render({attachments:i})}));c.optionalContentConfigPromise.then((function(i){t===r.pdfDocument&&r.pdfLayerViewer.render({optionalContentConfig:i,pdfDocument:t})}));if("requestIdleCallback"in window){var a=window.requestIdleCallback((function(){r._collectTelemetry(t);r._idleCallbacks.delete(a)}),{timeout:1e3});r._idleCallbacks.add(a)}}));this._initializePageLabels(t);this._initializeMetadata(t)},_scriptingDocProperties:function _scriptingDocProperties(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){var i,a;return _regeneratorRuntime().wrap((function _callee11$(o){for(;;)switch(o.prev=o.next){case 0:if(r.documentInfo){o.next=5;break}o.next=3;return new Promise((function(t){r.eventBus._on("metadataloaded",t,{once:!0})}));case 3:if(t===r.pdfDocument){o.next=5;break}return o.abrupt("return",null);case 5:if(r._contentLength){o.next=10;break}o.next=8;return new Promise((function(t){r.eventBus._on("documentloaded",t,{once:!0})}));case 8:if(t===r.pdfDocument){o.next=10;break}return o.abrupt("return",null);case 10:return o.abrupt("return",_objectSpread(_objectSpread({},r.documentInfo),{},{baseURL:r.baseUrl,filesize:r._contentLength,filename:r._docFilename,metadata:null===(i=r.metadata)||void 0===i?void 0:i.getRaw(),authors:null===(a=r.metadata)||void 0===a?void 0:a.get("dc:creator"),numPages:r.pagesCount,URL:r.url}));case 11:case"end":return o.stop()}}),_callee11)})))()},_collectTelemetry:function _collectTelemetry(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee12(){var i,a;return _regeneratorRuntime().wrap((function _callee12$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return r.pdfDocument.getMarkInfo();case 2:i=o.sent;if(t===r.pdfDocument){o.next=5;break}return o.abrupt("return");case 5:a=(null==i?void 0:i.Marked)||!1;r.externalServices.reportTelemetry({type:"tagged",tagged:a});case 7:case"end":return o.stop()}}),_callee12)})))()},_initializeAutoPrint:function _initializeAutoPrint(t,r){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee13(){var u,l,c,d,h,p,v,y;return _regeneratorRuntime().wrap((function _callee13$(g){for(;;)switch(g.prev=g.next){case 0:g.next=2;return Promise.all([r,i.pdfViewer.enableScripting?null:t.getJavaScript()]);case 2:u=g.sent;l=_slicedToArray(u,2);c=l[0];d=l[1];if(t===i.pdfDocument){g.next=8;break}return g.abrupt("return");case 8:h=!1;"Print"===(null==c?void 0:c.action)&&(h=!0);if(!d){g.next=31;break}d.some((function(t){if(!t)return!1;console.warn("Warning: JavaScript support is not enabled");i.fallback(o.UNSUPPORTED_FEATURES.javaScript);return!0}));if(h){g.next=31;break}p=_createForOfIteratorHelper(d);g.prev=14;p.s();case 16:if((v=p.n()).done){g.next=23;break}if(!(y=v.value)||!a.AutoPrintRegExp.test(y)){g.next=21;break}h=!0;return g.abrupt("break",23);case 21:g.next=16;break;case 23:g.next=28;break;case 25:g.prev=25;g.t0=g.catch(14);p.e(g.t0);case 28:g.prev=28;p.f();return g.finish(28);case 31:h&&i.triggerPrinting();case 32:case"end":return g.stop()}}),_callee13,null,[[14,25,28,31]])})))()},_initializeMetadata:function _initializeMetadata(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee14(){var i,a,u,l,c,d,h,p,v,y,g,m,b;return _regeneratorRuntime().wrap((function _callee14$(w){for(;;)switch(w.prev=w.next){case 0:w.next=2;return t.getMetadata();case 2:u=w.sent;l=u.info;c=u.metadata;d=u.contentDispositionFilename;h=u.contentLength;if(t===r.pdfDocument){w.next=9;break}return w.abrupt("return");case 9:r.documentInfo=l;r.metadata=c;null!==(i=r._contentDispositionFilename)&&void 0!==i||(r._contentDispositionFilename=d);null!==(a=r._contentLength)&&void 0!==a||(r._contentLength=h);console.log("PDF ".concat(t.fingerprints[0]," [").concat(l.PDFFormatVersion," ")+"".concat((l.Producer||"-").trim()," / ").concat((l.Creator||"-").trim(),"] ")+"(PDF.js: ".concat(o.version||"-",")"));p=l.Title;(v=null==c?void 0:c.get("dc:title"))&&("Untitled"===v||/[\uFFF0-\uFFFF]/g.test(v)||(p=v));p?r.setTitle("".concat(p," - ").concat(r._contentDispositionFilename||document.title)):r._contentDispositionFilename&&r.setTitle(r._contentDispositionFilename);if(!l.IsXFAPresent||l.IsAcroFormPresent||t.isPureXfa){if((l.IsAcroFormPresent||l.IsXFAPresent)&&!r.pdfViewer.renderForms){console.warn("Warning: Interactive form support is not enabled");r.fallback(o.UNSUPPORTED_FEATURES.forms)}}else{t.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled");r.fallback(o.UNSUPPORTED_FEATURES.forms)}if(l.IsSignaturesPresent){console.warn("Warning: Digital signatures validation is not supported");r.fallback(o.UNSUPPORTED_FEATURES.signatures)}y="other";G.includes(l.PDFFormatVersion)&&(y="v".concat(l.PDFFormatVersion.replace(".","_")));g="other";if(l.Producer){m=l.Producer.toLowerCase();N.some((function(t){if(!m.includes(t))return!1;g=t.replace(/[ .-]/g,"_");return!0}))}b=null;l.IsXFAPresent?b="xfa":l.IsAcroFormPresent&&(b="acroform");r.externalServices.reportTelemetry({type:"documentInfo",version:y,generator:g,formType:b});r.eventBus.dispatch("metadataloaded",{source:r});case 28:case"end":return w.stop()}}),_callee14)})))()},_initializePageLabels:function _initializePageLabels(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee15(){var i,a,o,l,c,d,h,p,v;return _regeneratorRuntime().wrap((function _callee15$(y){for(;;)switch(y.prev=y.next){case 0:y.next=2;return t.getPageLabels();case 2:i=y.sent;if(t===r.pdfDocument){y.next=5;break}return y.abrupt("return");case 5:if(i&&!u.AppOptions.get("disablePageLabels")){y.next=7;break}return y.abrupt("return");case 7:a=i.length;o=0,l=0;c=0;case 10:if(!(c<a)){y.next=24;break}if((d=i[c])!==(c+1).toString()){y.next=16;break}o++;y.next=21;break;case 16:if(""!==d){y.next=20;break}l++;y.next=21;break;case 20:return y.abrupt("break",24);case 21:c++;y.next=10;break;case 24:if(!(o>=a||l>=a)){y.next=26;break}return y.abrupt("return");case 26:h=r.pdfViewer,p=r.pdfThumbnailViewer,v=r.toolbar;h.setPageLabels(i);p.setPageLabels(i);v.setPagesCount(a,!0);v.setPageNumber(h.currentPageNumber,h.currentPageLabel);case 31:case"end":return y.stop()}}),_callee15)})))()},_initializePdfHistory:function _initializePdfHistory(t){var r=t.fingerprint,i=t.viewOnLoad,a=t.initialDest,o=void 0===a?null:a;if(this.pdfHistory){this.pdfHistory.initialize({fingerprint:r,resetHistory:i===R,updateUrl:u.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(o&&!this.initialBookmark&&i===M){this.initialBookmark=JSON.stringify(o);this.pdfHistory.push({explicitDest:o,pageNumber:null})}}},_initializeAnnotationStorageCallbacks:function _initializeAnnotationStorageCallbacks(t){var r=this;if(t===this.pdfDocument){var i=t.annotationStorage;i.onSetModified=function(){window.addEventListener("beforeunload",beforeUnload);r._annotationStorageModified=!0};i.onResetModified=function(){window.removeEventListener("beforeunload",beforeUnload);delete r._annotationStorageModified}}},setInitialView:function setInitialView(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.rotation,u=i.sidebarView,l=i.scrollMode,c=i.spreadMode,d=function setRotation(t){(0,a.isValidRotation)(t)&&(r.pdfViewer.pagesRotation=t)},h=function setViewerModes(t,i){(0,a.isValidScrollMode)(t)&&(r.pdfViewer.scrollMode=t);(0,a.isValidSpreadMode)(i)&&(r.pdfViewer.spreadMode=i)};this.isInitialViewSet=!0;this.pdfSidebar.setInitialView(u);h(l,c);if(this.initialBookmark){d(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(t){d(o);this.pdfLinkService.setHash(t)}this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)},_cleanup:function _cleanup(){if(this.pdfDocument){this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfDocument.cleanup(this.pdfViewer.renderer===a.RendererType.SVG)}},forceRendering:function forceRendering(){this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===a.SidebarView.THUMBS;this.pdfRenderingQueue.renderHighestPriority()},beforePrint:function beforePrint(){var t=this;this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch((function(){})).then((function(){var r;return null===(r=t.pdfDocument)||void 0===r?void 0:r.annotationStorage.print}));if(!this.printService)if(this.supportsPrinting)if(this.pdfViewer.pageViewsReady){var r=this.pdfViewer.getPagesOverview(),i=this.appConfig.printContainer,a=u.AppOptions.get("printResolution"),o=this.pdfViewer.optionalContentConfigPromise,l=Y.instance.createPrintService(this.pdfDocument,r,i,a,o,this._printAnnotationStoragePromise,this.l10n);this.printService=l;this.forceRendering();l.layout();this.externalServices.reportTelemetry({type:"print"})}else this.l10n.get("printing_not_ready").then((function(t){window.alert(t)}));else this.l10n.get("printing_not_supported").then((function(r){t._otherError(r)}))},afterPrint:function afterPrint(){var t=this;if(this._printAnnotationStoragePromise){this._printAnnotationStoragePromise.then((function(){t.pdfScriptingManager.dispatchDidPrint()}));this._printAnnotationStoragePromise=null}if(this.printService){var r;this.printService.destroy();this.printService=null;null===(r=this.pdfDocument)||void 0===r||r.annotationStorage.resetModified()}this.forceRendering()},rotatePages:function rotatePages(t){this.pdfViewer.pagesRotation+=t},requestPresentationMode:function requestPresentationMode(){var t,r;null===(t=this.pdfPresentationMode)||void 0===t||t.request();null===(r=this.pdfPresentationMode)||void 0===r||r.toggleFullscreen(window.parent)},triggerPrinting:function triggerPrinting(){this.supportsPrinting&&window.print()},bindEvents:function bindEvents(){var t=this.eventBus,r=this._boundEvents;r.beforePrint=this.beforePrint.bind(this);r.afterPrint=this.afterPrint.bind(this);t._on("resize",webViewerResize);t._on("hashchange",webViewerHashchange);t._on("beforeprint",r.beforePrint);t._on("afterprint",r.afterPrint);t._on("pagerendered",webViewerPageRendered);t._on("updateviewarea",webViewerUpdateViewarea);t._on("pagechanging",webViewerPageChanging);t._on("scalechanging",webViewerScaleChanging);t._on("rotationchanging",webViewerRotationChanging);t._on("sidebarviewchanged",webViewerSidebarViewChanged);t._on("pagemode",webViewerPageMode);t._on("namedaction",webViewerNamedAction);t._on("presentationmodechanged",webViewerPresentationModeChanged);t._on("presentationmode",webViewerPresentationMode);t._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode);t._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams);t._on("print",webViewerPrint);t._on("download",webViewerDownload);t._on("firstpage",webViewerFirstPage);t._on("lastpage",webViewerLastPage);t._on("nextpage",webViewerNextPage);t._on("previouspage",webViewerPreviousPage);t._on("zoomin",webViewerZoomIn);t._on("zoomout",webViewerZoomOut);t._on("zoomreset",webViewerZoomReset);t._on("pagenumberchanged",webViewerPageNumberChanged);t._on("scalechanged",webViewerScaleChanged);t._on("rotatecw",webViewerRotateCw);t._on("rotateccw",webViewerRotateCcw);t._on("optionalcontentconfig",webViewerOptionalContentConfig);t._on("switchscrollmode",webViewerSwitchScrollMode);t._on("scrollmodechanged",webViewerScrollModeChanged);t._on("switchspreadmode",webViewerSwitchSpreadMode);t._on("spreadmodechanged",webViewerSpreadModeChanged);t._on("documentproperties",webViewerDocumentProperties);t._on("findfromurlhash",webViewerFindFromUrlHash);t._on("updatefindmatchescount",webViewerUpdateFindMatchesCount);t._on("updatefindcontrolstate",webViewerUpdateFindControlState);if(u.AppOptions.get("pdfBug")){r.reportPageStatsPDFBug=reportPageStatsPDFBug;t._on("pagerendered",r.reportPageStatsPDFBug);t._on("pagechanging",r.reportPageStatsPDFBug)}t._on("fileinputchange",H);t._on("openfile",z)},bindWindowEvents:function bindWindowEvents(){var t=this.eventBus,r=this._boundEvents;r.windowResize=function(){t.dispatch("resize",{source:window})};r.windowHashChange=function(){t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};r.windowBeforePrint=function(){t.dispatch("beforeprint",{source:window})};r.windowAfterPrint=function(){t.dispatch("afterprint",{source:window})};r.windowUpdateFromSandbox=function(r){t.dispatch("updatefromsandbox",{source:window,detail:r.detail})};window.addEventListener("visibilitychange",webViewerVisibilityChange);window.addEventListener("wheel",webViewerWheel,{passive:!1});window.addEventListener("touchstart",webViewerTouchStart,{passive:!1});window.addEventListener("click",webViewerClick);window.addEventListener("keydown",webViewerKeyDown);window.addEventListener("resize",r.windowResize);window.addEventListener("hashchange",r.windowHashChange);window.addEventListener("beforeprint",r.windowBeforePrint);window.addEventListener("afterprint",r.windowAfterPrint);window.addEventListener("updatefromsandbox",r.windowUpdateFromSandbox)},unbindEvents:function unbindEvents(){var t=this.eventBus,r=this._boundEvents;t._off("resize",webViewerResize);t._off("hashchange",webViewerHashchange);t._off("beforeprint",r.beforePrint);t._off("afterprint",r.afterPrint);t._off("pagerendered",webViewerPageRendered);t._off("updateviewarea",webViewerUpdateViewarea);t._off("pagechanging",webViewerPageChanging);t._off("scalechanging",webViewerScaleChanging);t._off("rotationchanging",webViewerRotationChanging);t._off("sidebarviewchanged",webViewerSidebarViewChanged);t._off("pagemode",webViewerPageMode);t._off("namedaction",webViewerNamedAction);t._off("presentationmodechanged",webViewerPresentationModeChanged);t._off("presentationmode",webViewerPresentationMode);t._off("print",webViewerPrint);t._off("download",webViewerDownload);t._off("firstpage",webViewerFirstPage);t._off("lastpage",webViewerLastPage);t._off("nextpage",webViewerNextPage);t._off("previouspage",webViewerPreviousPage);t._off("zoomin",webViewerZoomIn);t._off("zoomout",webViewerZoomOut);t._off("zoomreset",webViewerZoomReset);t._off("pagenumberchanged",webViewerPageNumberChanged);t._off("scalechanged",webViewerScaleChanged);t._off("rotatecw",webViewerRotateCw);t._off("rotateccw",webViewerRotateCcw);t._off("optionalcontentconfig",webViewerOptionalContentConfig);t._off("switchscrollmode",webViewerSwitchScrollMode);t._off("scrollmodechanged",webViewerScrollModeChanged);t._off("switchspreadmode",webViewerSwitchSpreadMode);t._off("spreadmodechanged",webViewerSpreadModeChanged);t._off("documentproperties",webViewerDocumentProperties);t._off("findfromurlhash",webViewerFindFromUrlHash);t._off("updatefindmatchescount",webViewerUpdateFindMatchesCount);t._off("updatefindcontrolstate",webViewerUpdateFindControlState);if(r.reportPageStatsPDFBug){t._off("pagerendered",r.reportPageStatsPDFBug);t._off("pagechanging",r.reportPageStatsPDFBug);r.reportPageStatsPDFBug=null}t._off("fileinputchange",H);t._off("openfile",z);r.beforePrint=null;r.afterPrint=null},unbindWindowEvents:function unbindWindowEvents(){var t=this._boundEvents;window.removeEventListener("visibilitychange",webViewerVisibilityChange);window.removeEventListener("wheel",webViewerWheel,{passive:!1});window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1});window.removeEventListener("click",webViewerClick);window.removeEventListener("keydown",webViewerKeyDown);window.removeEventListener("resize",t.windowResize);window.removeEventListener("hashchange",t.windowHashChange);window.removeEventListener("beforeprint",t.windowBeforePrint);window.removeEventListener("afterprint",t.windowAfterPrint);window.removeEventListener("updatefromsandbox",t.windowUpdateFromSandbox);t.windowResize=null;t.windowHashChange=null;t.windowBeforePrint=null;t.windowAfterPrint=null;t.windowUpdateFromSandbox=null},accumulateWheelTicks:function accumulateWheelTicks(t){(this._wheelUnusedTicks>0&&t<0||this._wheelUnusedTicks<0&&t>0)&&(this._wheelUnusedTicks=0);this._wheelUnusedTicks+=t;var r=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));this._wheelUnusedTicks-=r;return r},_unblockDocumentLoadEvent:function _unblockDocumentLoadEvent(){var t,r;null===(t=(r=document).blockUnblockOnload)||void 0===t||t.call(r,!1);this._unblockDocumentLoadEvent=function(){}},_reportDocumentStatsTelemetry:function _reportDocumentStatsTelemetry(){var t=this.pdfDocument.stats;if(t!==this._docStats){this._docStats=t;this.externalServices.reportTelemetry({type:"documentStats",stats:t})}},get scriptingReady(){return this.pdfScriptingManager.ready}};r.PDFViewerApplication=W;var U=["null","http://mozilla.github.io","https://mozilla.github.io","https://s3.amazonaws.com","https://s3-us-west-2.amazonaws.com","https://s3.amazonaws.com","https://s3-us-west-2.amazonaws.com","https://s3-us-west-1.amazonaws.com","https://s3-eu-west-1.amazonaws.com","https://s3-ap-southeast-1.amazonaws.com","https://s3-ap-southeast-2.amazonaws.com","https://s3-ap-northeast-1.amazonaws.com","https://s3-sa-east-1.amazonaws.com"];V=function validateFileURL(t){if(t)try{var r=new URL(window.location.href).origin||"null";if(U.includes(r))return;new URL(t,window.location.href).origin!==r&&console.warn("file origin does not match viewer's")}catch(t){W.l10n.get("loading_error").then((function(r){W._documentError(r,{message:null==t?void 0:t.message})}));throw t}};function loadFakeWorker(){return _loadFakeWorker.apply(this,arguments)}function _loadFakeWorker(){return(_loadFakeWorker=_asyncToGenerator(_regeneratorRuntime().mark((function _callee16(){return _regeneratorRuntime().wrap((function _callee16$(t){for(;;)switch(t.prev=t.next){case 0:o.GlobalWorkerOptions.workerSrc||(o.GlobalWorkerOptions.workerSrc=u.AppOptions.get("workerSrc"));t.next=3;return(0,o.loadScript)(o.PDFWorker.workerSrc);case 3:case"end":return t.stop()}}),_callee16)})))).apply(this,arguments)}function loadPDFBug(t){return _loadPDFBug.apply(this,arguments)}function _loadPDFBug(){return(_loadPDFBug=_asyncToGenerator(_regeneratorRuntime().mark((function _callee17(t){var r,i,a;return _regeneratorRuntime().wrap((function _callee17$(o){for(;;)switch(o.prev=o.next){case 0:r=t.appConfig.debuggerScriptPath;o.next=3;return import(r);case 3:i=o.sent;a=i.PDFBug;t._PDFBug=a;case 6:case"end":return o.stop()}}),_callee17)})))).apply(this,arguments)}function reportPageStatsPDFBug(t){var r,i,a=t.pageNumber;if(null!==(r=globalThis.Stats)&&void 0!==r&&r.enabled){var o=W.pdfViewer.getPageView(a-1);globalThis.Stats.add(a,null==o||null===(i=o.pdfPage)||void 0===i?void 0:i.stats)}}function webViewerInitialized(){var t,r,i=W.appConfig,o=W.eventBus,l=document.location.search.substring(1);r=null!==(t=(0,a.parseQueryString)(l).get("file"))&&void 0!==t?t:u.AppOptions.get("defaultUrl");V(r);var c=i.openFileInput;c.value=null;c.addEventListener("change",(function(t){var r=t.target.files;r&&0!==r.length&&o.dispatch("fileinputchange",{source:this,fileInput:t.target})}));i.mainContainer.addEventListener("dragover",(function(t){t.preventDefault();t.dataTransfer.dropEffect="copy"===t.dataTransfer.effectAllowed?"copy":"move"}));i.mainContainer.addEventListener("drop",(function(t){t.preventDefault();var r=t.dataTransfer.files;r&&0!==r.length&&o.dispatch("fileinputchange",{source:this,fileInput:t.dataTransfer})}));if(!W.supportsDocumentFonts){u.AppOptions.set("disableFontFace",!0);W.l10n.get("web_fonts_disabled").then((function(t){console.warn(t)}))}if(!W.supportsPrinting){i.toolbar.print.classList.add("hidden");i.secondaryToolbar.printButton.classList.add("hidden")}if(!W.supportsFullscreen){i.toolbar.presentationModeButton.classList.add("hidden");i.secondaryToolbar.presentationModeButton.classList.add("hidden")}W.supportsIntegratedFind&&i.toolbar.viewFind.classList.add("hidden");i.mainContainer.addEventListener("transitionend",(function(t){t.target===this&&o.dispatch("resize",{source:this})}),!0);try{r?W.open(r):W._hideViewBookmark()}catch(t){W.l10n.get("loading_error").then((function(r){W._documentError(r,t)}))}}function webViewerPageRendered(t){var r=t.pageNumber,i=t.error;r===W.page&&W.toolbar.updateLoadingIndicatorState(!1);if(W.pdfSidebar.visibleView===a.SidebarView.THUMBS){var o=W.pdfViewer.getPageView(r-1),u=W.pdfThumbnailViewer.getThumbnail(r-1);o&&u&&u.setImage(o)}i&&W.l10n.get("rendering_error").then((function(t){W._otherError(t,i)}));W._reportDocumentStatsTelemetry()}function webViewerPageMode(t){var r,i=t.mode;switch(i){case"thumbs":r=a.SidebarView.THUMBS;break;case"bookmarks":case"outline":r=a.SidebarView.OUTLINE;break;case"attachments":r=a.SidebarView.ATTACHMENTS;break;case"layers":r=a.SidebarView.LAYERS;break;case"none":r=a.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+i);return}W.pdfSidebar.switchView(r,!0)}function webViewerNamedAction(t){switch(t.action){case"GoToPage":W.appConfig.toolbar.pageNumber.select();break;case"Find":W.supportsIntegratedFind||W.findBar.toggle();break;case"Print":W.triggerPrinting();break;case"SaveAs":W.downloadOrSave()}}function webViewerPresentationModeChanged(t){W.pdfViewer.presentationModeState=t.state}function webViewerSidebarViewChanged(t){var r=t.view;W.pdfRenderingQueue.isThumbnailViewEnabled=r===a.SidebarView.THUMBS;if(W.isInitialViewSet){var i;null===(i=W.store)||void 0===i||i.set("sidebarView",r).catch((function(){}))}}function webViewerUpdateViewarea(t){var r=t.location;if(W.isInitialViewSet){var i;null===(i=W.store)||void 0===i||i.setMultiple({page:r.pageNumber,zoom:r.scale,scrollLeft:r.left,scrollTop:r.top,rotation:r.rotation}).catch((function(){}))}var o=W.pdfLinkService.getAnchorUrl(r.pdfOpenParams);W.appConfig.toolbar.viewBookmark.href=o;W.appConfig.secondaryToolbar.viewBookmarkButton.href=o;var u=W.pdfViewer.getPageView(W.page-1),l=(null==u?void 0:u.renderingState)!==a.RenderingStates.FINISHED;W.toolbar.updateLoadingIndicatorState(l)}function webViewerScrollModeChanged(t){if(W.isInitialViewSet){var r;null===(r=W.store)||void 0===r||r.set("scrollMode",t.mode).catch((function(){}))}}function webViewerSpreadModeChanged(t){if(W.isInitialViewSet){var r;null===(r=W.store)||void 0===r||r.set("spreadMode",t.mode).catch((function(){}))}}function webViewerResize(){var t=W.pdfDocument,r=W.pdfViewer;r.updateContainerHeightCss();if(t){var i=r.currentScaleValue;"auto"!==i&&"page-fit"!==i&&"page-width"!==i||(r.currentScaleValue=i);r.update()}}function webViewerHashchange(t){var r,i=t.hash;i&&(W.isInitialViewSet?null!==(r=W.pdfHistory)&&void 0!==r&&r.popStateInProgress||W.pdfLinkService.setHash(i):W.initialBookmark=i)}var H=function webViewerFileInputChange(t){var r;if(null===(r=W.pdfViewer)||void 0===r||!r.isInPresentationMode){var i=t.fileInput.files[0],a=URL.createObjectURL(i);i.name&&(a={url:a,originalUrl:i.name});W.open(a)}},z=function webViewerOpenFile(t){W.appConfig.openFileInput.click()};function webViewerPresentationMode(){W.requestPresentationMode()}function webViewerSwitchAnnotationEditorMode(t){W.pdfViewer.annotationEditorMode=t.mode}function webViewerSwitchAnnotationEditorParams(t){W.pdfViewer.annotationEditorParams=t}function webViewerPrint(){W.triggerPrinting()}function webViewerDownload(){W.downloadOrSave()}function webViewerFirstPage(){W.pdfDocument&&(W.page=1)}function webViewerLastPage(){W.pdfDocument&&(W.page=W.pagesCount)}function webViewerNextPage(){W.pdfViewer.nextPage()}function webViewerPreviousPage(){W.pdfViewer.previousPage()}function webViewerZoomIn(){W.zoomIn()}function webViewerZoomOut(){W.zoomOut()}function webViewerZoomReset(){W.zoomReset()}function webViewerPageNumberChanged(t){var r=W.pdfViewer;""!==t.value&&W.pdfLinkService.goToPage(t.value);t.value!==r.currentPageNumber.toString()&&t.value!==r.currentPageLabel&&W.toolbar.setPageNumber(r.currentPageNumber,r.currentPageLabel)}function webViewerScaleChanged(t){W.pdfViewer.currentScaleValue=t.value}function webViewerRotateCw(){W.rotatePages(90)}function webViewerRotateCcw(){W.rotatePages(-90)}function webViewerOptionalContentConfig(t){W.pdfViewer.optionalContentConfigPromise=t.promise}function webViewerSwitchScrollMode(t){W.pdfViewer.scrollMode=t.mode}function webViewerSwitchSpreadMode(t){W.pdfViewer.spreadMode=t.mode}function webViewerDocumentProperties(){W.pdfDocumentProperties.open()}function webViewerFindFromUrlHash(t){W.eventBus.dispatch("find",{source:t.source,type:"",query:t.query,phraseSearch:t.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function webViewerUpdateFindMatchesCount(t){var r=t.matchesCount;W.supportsIntegratedFind?W.externalServices.updateFindMatchesCount(r):W.findBar.updateResultsCount(r)}function webViewerUpdateFindControlState(t){var r=t.state,i=t.previous,a=t.matchesCount,o=t.rawQuery;W.supportsIntegratedFind?W.externalServices.updateFindControlState({result:r,findPrevious:i,matchesCount:a,rawQuery:o}):W.findBar.updateUIState(r,i,a)}function webViewerScaleChanging(t){W.toolbar.setPageScale(t.presetValue,t.scale);W.pdfViewer.update()}function webViewerRotationChanging(t){W.pdfThumbnailViewer.pagesRotation=t.pagesRotation;W.forceRendering();W.pdfViewer.currentPageNumber=t.pageNumber}function webViewerPageChanging(t){var r=t.pageNumber,i=t.pageLabel;W.toolbar.setPageNumber(r,i);W.secondaryToolbar.setPageNumber(r);W.pdfSidebar.visibleView===a.SidebarView.THUMBS&&W.pdfThumbnailViewer.scrollThumbnailIntoView(r)}function webViewerVisibilityChange(t){"visible"===document.visibilityState&&setZoomDisabledTimeout()}var X=null;function setZoomDisabledTimeout(){X&&clearTimeout(X);X=setTimeout((function(){X=null}),1e3)}function webViewerWheel(t){var r=W.pdfViewer,i=W.supportedMouseWheelZoomModifierKeys;if(!r.isInPresentationMode)if(t.ctrlKey&&i.ctrlKey||t.metaKey&&i.metaKey){t.preventDefault();if(X||"hidden"===document.visibilityState)return;var o=t.deltaMode,u=(0,a.normalizeWheelEventDirection)(t),l=r.currentScale,c=0;if(o===WheelEvent.DOM_DELTA_LINE||o===WheelEvent.DOM_DELTA_PAGE)c=Math.abs(u)>=1?Math.sign(u):W.accumulateWheelTicks(u);else{c=W.accumulateWheelTicks(u/30)}c<0?W.zoomOut(-c):c>0&&W.zoomIn(c);var d=r.currentScale;if(l!==d){var h=d/l-1,p=r.container.getBoundingClientRect(),v=t.clientX-p.left,y=t.clientY-p.top;r.container.scrollLeft+=v*h;r.container.scrollTop+=y*h}}else setZoomDisabledTimeout()}function webViewerTouchStart(t){t.touches.length>1&&t.preventDefault()}function webViewerClick(t){if(W.secondaryToolbar.isOpen){var r=W.appConfig;(W.pdfViewer.containsElement(t.target)||r.toolbar.container.contains(t.target)&&t.target!==r.secondaryToolbar.toggleButton)&&W.secondaryToolbar.close()}}function webViewerKeyDown(t){if(!W.overlayManager.active){var r=W.eventBus,i=W.pdfViewer,o=i.isInPresentationMode,u=!1,l=!1,d=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0);if(1===d||8===d||5===d||12===d)switch(t.keyCode){case 70:if(!W.supportsIntegratedFind&&!t.shiftKey){W.findBar.open();u=!0}break;case 71:if(!W.supportsIntegratedFind){var h=W.findController.state;if(h){var p=Object.assign(Object.create(null),h,{source:window,type:"again",findPrevious:5===d||12===d});r.dispatch("find",p)}u=!0}break;case 61:case 107:case 187:case 171:o||W.zoomIn();u=!0;break;case 173:case 109:case 189:o||W.zoomOut();u=!0;break;case 48:case 96:if(!o){setTimeout((function(){W.zoomReset()}));u=!1}break;case 38:if(o||W.page>1){W.page=1;u=!0;l=!0}break;case 40:if(o||W.page<W.pagesCount){W.page=W.pagesCount;u=!0;l=!0}}if(1===d||8===d)switch(t.keyCode){case 83:r.dispatch("download",{source:window});u=!0;break;case 79:r.dispatch("openfile",{source:window});u=!0}if(3===d||10===d)switch(t.keyCode){case 80:W.requestPresentationMode();u=!0;break;case 71:W.appConfig.toolbar.pageNumber.select();u=!0}if(u){l&&!o&&i.focus();t.preventDefault()}else{var v=(0,a.getActiveOrFocusedElement)(),y=null==v?void 0:v.tagName.toUpperCase();if(!("INPUT"===y||"TEXTAREA"===y||"SELECT"===y||null!=v&&v.isContentEditable)||27===t.keyCode){if(0===d){var g=0,m=!1;switch(t.keyCode){case 38:case 33:i.isVerticalScrollbarEnabled&&(m=!0);g=-1;break;case 8:o||(m=!0);g=-1;break;case 37:i.isHorizontalScrollbarEnabled&&(m=!0);case 75:case 80:g=-1;break;case 27:if(W.secondaryToolbar.isOpen){W.secondaryToolbar.close();u=!0}if(!W.supportsIntegratedFind&&W.findBar.opened){W.findBar.close();u=!0}break;case 40:case 34:i.isVerticalScrollbarEnabled&&(m=!0);g=1;break;case 13:case 32:o||(m=!0);g=1;break;case 39:i.isHorizontalScrollbarEnabled&&(m=!0);case 74:case 78:g=1;break;case 36:if(o||W.page>1){W.page=1;u=!0;l=!0}break;case 35:if(o||W.page<W.pagesCount){W.page=W.pagesCount;u=!0;l=!0}break;case 83:W.pdfCursorTools.switchTool(c.CursorTool.SELECT);break;case 72:W.pdfCursorTools.switchTool(c.CursorTool.HAND);break;case 82:W.rotatePages(90);break;case 115:W.pdfSidebar.toggle()}if(0!==g&&(!m||"page-fit"===i.currentScaleValue)){g>0?i.nextPage():i.previousPage();u=!0}}if(4===d)switch(t.keyCode){case 13:case 32:if(!o&&"page-fit"!==i.currentScaleValue)break;i.previousPage();u=!0;break;case 82:W.rotatePages(-90)}u||o||(t.keyCode>=33&&t.keyCode<=40||32===t.keyCode&&"BUTTON"!==y)&&(l=!0);l&&!i.containsElement(v)&&i.focus();u&&t.preventDefault()}}}}function beforeUnload(t){t.preventDefault();t.returnValue="";return!1}var Y={instance:{supportsPrinting:!1,createPrintService:function createPrintService(){throw new Error("Not implemented: createPrintService")}}};r.PDFPrintServiceFactory=Y},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.animationStarted=r.VERTICAL_PADDING=r.UNKNOWN_SCALE=r.TextLayerMode=r.SpreadMode=r.SidebarView=r.ScrollMode=r.SCROLLBAR_PADDING=r.RenderingStates=r.RendererType=r.ProgressBar=r.PresentationModeState=r.OutputScale=r.MIN_SCALE=r.MAX_SCALE=r.MAX_AUTO_SCALE=r.DEFAULT_SCALE_VALUE=r.DEFAULT_SCALE_DELTA=r.DEFAULT_SCALE=r.AutoPrintRegExp=void 0;r.apiPageLayoutToViewerModes=function apiPageLayoutToViewerModes(t){var r=u.VERTICAL,i=l.NONE;switch(t){case"SinglePage":r=u.PAGE;break;case"OneColumn":break;case"TwoPageLeft":r=u.PAGE;case"TwoColumnLeft":i=l.ODD;break;case"TwoPageRight":r=u.PAGE;case"TwoColumnRight":i=l.EVEN}return{scrollMode:r,spreadMode:i}};r.apiPageModeToSidebarView=function apiPageModeToSidebarView(t){switch(t){case"UseNone":return o.NONE;case"UseThumbs":return o.THUMBS;case"UseOutlines":return o.OUTLINE;case"UseAttachments":return o.ATTACHMENTS;case"UseOC":return o.LAYERS}return o.NONE};r.approximateFraction=function approximateFraction(t){if(Math.floor(t)===t)return[t,1];var r=1/t;if(r>8)return[1,8];if(Math.floor(r)===r)return[1,r];var i,a=t>1?r:t,o=0,u=1,l=1,c=1;for(;;){var d=o+l,h=u+c;if(h>8)break;if(a<=d/h){l=d;c=h}else{o=d;u=h}}i=a-o/u<l/c-a?a===t?[o,u]:[u,o]:a===t?[l,c]:[c,l];return i};r.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements;r.docStyle=void 0;r.getActiveOrFocusedElement=function getActiveOrFocusedElement(){var t=document,r=t.activeElement||t.querySelector(":focus");for(;null!==(i=r)&&void 0!==i&&i.shadowRoot;){var i;t=r.shadowRoot;r=t.activeElement||t.querySelector(":focus")}return r};r.getPageSizeInches=function getPageSizeInches(t){var r=t.view,i=t.userUnit,a=t.rotate,o=_slicedToArray(r,4),u=o[0],l=o[1],c=o[2],d=o[3],h=a%180!=0,p=(c-u)/72*i,v=(d-l)/72*i;return{width:h?v:p,height:h?p:v}};r.getVisibleElements=function getVisibleElements(t){var r=t.scrollEl,i=t.views,o=t.sortByVisibility,u=void 0!==o&&o,l=t.horizontal,c=void 0!==l&&l,d=t.rtl,h=void 0!==d&&d,p=r.scrollTop,v=p+r.clientHeight,y=r.scrollLeft,g=y+r.clientWidth;var m=[],b=new Set,w=i.length,A=(0,a.binarySearchFirstItem)(i,c?function isElementNextAfterViewHorizontally(t){var r=t.div,i=r.offsetLeft+r.clientLeft,a=i+r.clientWidth;return h?i<g:a>y}:function isElementBottomAfterViewTop(t){var r=t.div;return r.offsetTop+r.clientTop+r.clientHeight>p});A>0&&A<w&&!c&&(A=backtrackBeforeAllVisibleElements(A,i,p));for(var P=c?g:-1,D=A;D<w;D++){var E=i[D],S=E.div,C=S.offsetLeft+S.clientLeft,k=S.offsetTop+S.clientTop,x=S.clientWidth,T=S.clientHeight,I=C+x,L=k+T;if(-1===P)L>=v&&(P=L);else if((c?C:k)>P)break;if(!(L<=p||k>=v||I<=y||C>=g)){var O=Math.max(0,p-k)+Math.max(0,L-v),M=Math.max(0,y-C)+Math.max(0,I-g),R=(x-M)/x,B=(T-O)/T*R*100|0;m.push({id:E.id,x:C,y:k,view:E,percent:B,widthPercent:100*R|0});b.add(E.id)}}var G=m[0],N=m.at(-1);u&&m.sort((function(t,r){var i=t.percent-r.percent;return Math.abs(i)>.001?-i:t.id-r.id}));return{first:G,last:N,views:m,ids:b}};r.isPortraitOrientation=function isPortraitOrientation(t){return t.width<=t.height};r.isValidRotation=function isValidRotation(t){return Number.isInteger(t)&&t%90==0};r.isValidScrollMode=function isValidScrollMode(t){return Number.isInteger(t)&&Object.values(u).includes(t)&&t!==u.UNKNOWN};r.isValidSpreadMode=function isValidSpreadMode(t){return Number.isInteger(t)&&Object.values(l).includes(t)&&t!==l.UNKNOWN};r.noContextMenuHandler=function noContextMenuHandler(t){t.preventDefault()};r.normalizeWheelEventDelta=function normalizeWheelEventDelta(t){var r=normalizeWheelEventDirection(t);0===t.deltaMode?r/=900:1===t.deltaMode&&(r/=30);return r};r.normalizeWheelEventDirection=normalizeWheelEventDirection;r.parseQueryString=function parseQueryString(t){var r,i=new Map,a=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}(new URLSearchParams(t));try{for(a.s();!(r=a.n()).done;){var o=_slicedToArray(r.value,2),u=o[0],l=o[1];i.set(u.toLowerCase(),l)}}catch(t){a.e(t)}finally{a.f()}return i};r.removeNullCharacters=function removeNullCharacters(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof t){console.error("The argument must be a string.");return t}r&&(t=t.replace(h," "));return t.replace(d,"")};r.roundToDivide=function roundToDivide(t,r){var i=t%r;return 0===i?t:Math.round(t-i+r)};r.scrollIntoView=function scrollIntoView(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.offsetParent;if(!a){console.error("offsetParent is not set -- cannot scroll");return}var o=t.offsetTop+t.clientTop,u=t.offsetLeft+t.clientLeft;for(;a.clientHeight===a.scrollHeight&&a.clientWidth===a.scrollWidth||i&&(a.classList.contains("markedContent")||"hidden"===getComputedStyle(a).overflow);){o+=a.offsetTop;u+=a.offsetLeft;if(!(a=a.offsetParent))return}if(r){void 0!==r.top&&(o+=r.top);if(void 0!==r.left){u+=r.left;a.scrollLeft=u}}a.scrollTop=o};r.watchScroll=function watchScroll(t,r){var i=function debounceScroll(i){o||(o=window.requestAnimationFrame((function viewAreaElementScrolled(){o=null;var i=t.scrollLeft,u=a.lastX;i!==u&&(a.right=i>u);a.lastX=i;var l=t.scrollTop,c=a.lastY;l!==c&&(a.down=l>c);a.lastY=l;r(a)})))},a={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:i},o=null;t.addEventListener("scroll",i,!0);return a};var a=i(4);function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}r.DEFAULT_SCALE_VALUE="auto";r.DEFAULT_SCALE=1;r.DEFAULT_SCALE_DELTA=1.1;r.MIN_SCALE=.1;r.MAX_SCALE=10;r.UNKNOWN_SCALE=0;r.MAX_AUTO_SCALE=1.25;r.SCROLLBAR_PADDING=40;r.VERTICAL_PADDING=5;r.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};r.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var o={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};r.SidebarView=o;r.RendererType={CANVAS:"canvas",SVG:"svg"};r.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};var u={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};r.ScrollMode=u;var l={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};r.SpreadMode=l;r.AutoPrintRegExp=/\bprint\s*\(/;var c=function(){function OutputScale(){_classCallCheck(this,OutputScale);var t=window.devicePixelRatio||1;this.sx=t;this.sy=t}_createClass(OutputScale,[{key:"scaled",get:function get(){return 1!==this.sx||1!==this.sy}}]);return OutputScale}();r.OutputScale=c;var d=/\x00/g,h=/[\x01-\x1F]/g;function backtrackBeforeAllVisibleElements(t,r,i){if(t<2)return t;var a=r[t].div,o=a.offsetTop+a.clientTop;o>=i&&(o=(a=r[t-1].div).offsetTop+a.clientTop);for(var u=t-2;u>=0&&!((a=r[u].div).offsetTop+a.clientTop+a.clientHeight<=o);--u)t=u;return t}function normalizeWheelEventDirection(t){var r=Math.hypot(t.deltaX,t.deltaY),i=Math.atan2(t.deltaY,t.deltaX);-.25*Math.PI<i&&i<.75*Math.PI&&(r=-r);return r}var p=new Promise((function(t){window.requestAnimationFrame(t)}));r.animationStarted=p;var v=document.documentElement.style;r.docStyle=v;var y=new WeakMap,g=new WeakMap,m=new WeakMap,b=function(){function ProgressBar(t){_classCallCheck(this,ProgressBar);_classPrivateFieldInitSpec(this,y,{writable:!0,value:null});_classPrivateFieldInitSpec(this,g,{writable:!0,value:0});_classPrivateFieldInitSpec(this,m,{writable:!0,value:!0});if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");var r=document.getElementById(t);_classPrivateFieldSet(this,y,r.classList)}_createClass(ProgressBar,[{key:"percent",get:function get(){return _classPrivateFieldGet(this,g)},set:function set(t){_classPrivateFieldSet(this,g,function clamp(t,r,i){return Math.min(Math.max(t,r),i)}(t,0,100));if(isNaN(t))_classPrivateFieldGet(this,y).add("indeterminate");else{_classPrivateFieldGet(this,y).remove("indeterminate");v.setProperty("--progressBar-percent","".concat(_classPrivateFieldGet(this,g),"%"))}}},{key:"setWidth",value:function setWidth(t){if(t){var r=t.parentNode.offsetWidth-t.offsetWidth;r>0&&v.setProperty("--progressBar-end-offset","".concat(r,"px"))}}},{key:"hide",value:function hide(){if(_classPrivateFieldGet(this,m)){_classPrivateFieldSet(this,m,!1);_classPrivateFieldGet(this,y).add("hidden")}}},{key:"show",value:function show(){if(!_classPrivateFieldGet(this,m)){_classPrivateFieldSet(this,m,!0);_classPrivateFieldGet(this,y).remove("hidden")}}}]);return ProgressBar}();r.ProgressBar=b},t=>{var r;r="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:require("../build/pdf.js");t.exports=r},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.WaitOnType=r.EventBus=r.AutomationEventBus=void 0;r.waitOnEventOrTimeout=function waitOnEventOrTimeout(t){var r=t.target,o=t.name,u=t.delay,l=void 0===u?0:u;return new Promise((function(t,u){if("object"!==_typeof(r)||!o||"string"!=typeof o||!(Number.isInteger(l)&&l>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(i){r instanceof a?r._off(o,c):r.removeEventListener(o,c);h&&clearTimeout(h);t(i)}var c=handler.bind(null,i.EVENT);r instanceof a?r._on(o,c):r.addEventListener(o,c);var d=handler.bind(null,i.TIMEOUT),h=setTimeout(d,l)}))};function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var i={EVENT:"event",TIMEOUT:"timeout"};r.WaitOnType=i;var a=function(){function EventBus(){_classCallCheck(this,EventBus);this._listeners=Object.create(null)}_createClass(EventBus,[{key:"on",value:function on(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(t,r,{external:!0,once:null==i?void 0:i.once})}},{key:"off",value:function off(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(t,r,{external:!0,once:null==i?void 0:i.once})}},{key:"dispatch",value:function dispatch(t,r){var i=this._listeners[t];if(i&&0!==i.length){var a,o,u=_createForOfIteratorHelper(i.slice(0));try{for(u.s();!(o=u.n()).done;){var l=o.value,c=l.listener,d=l.external;l.once&&this._off(t,c);d?(a||(a=[])).push(c):c(r)}}catch(t){u.e(t)}finally{u.f()}if(a){var h,p=_createForOfIteratorHelper(a);try{for(p.s();!(h=p.n()).done;){(0,h.value)(r)}}catch(t){p.e(t)}finally{p.f()}a=null}}}},{key:"_on",value:function _on(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=(i=this._listeners)[t]||(i[t]=[]);o.push({listener:r,external:!0===(null==a?void 0:a.external),once:!0===(null==a?void 0:a.once)})}},{key:"_off",value:function _off(t,r){var i=this._listeners[t];if(i)for(var a=0,o=i.length;a<o;a++)if(i[a].listener===r){i.splice(a,1);return}}}]);return EventBus}();r.EventBus=a;var o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(AutomationEventBus,t);var r=_createSuper(AutomationEventBus);function AutomationEventBus(){_classCallCheck(this,AutomationEventBus);return r.apply(this,arguments)}_createClass(AutomationEventBus,[{key:"dispatch",value:function dispatch(t,r){throw new Error("Not implemented: AutomationEventBus.dispatch")}}]);return AutomationEventBus}(a);r.AutomationEventBus=o},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFCursorTools=r.CursorTool=void 0;var a=i(7),o=i(3);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var u={SELECT:0,HAND:1,ZOOM:2};r.CursorTool=u;var l=new WeakSet,c=new WeakSet,d=function(){function PDFCursorTools(t){var r=this,i=t.container,o=t.eventBus,d=t.cursorToolOnLoad,h=void 0===d?u.SELECT:d;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFCursorTools);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);this.container=i;this.eventBus=o;this.active=u.SELECT;this.activeBeforePresentationMode=null;this.handTool=new a.GrabToPan({element:this.container});_classPrivateMethodGet(this,c,_addEventListeners2).call(this);Promise.resolve().then((function(){r.switchTool(h)}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFCursorTools,[{key:"activeTool",get:function get(){return this.active}},{key:"switchTool",value:function switchTool(t){var r=this;if(null===this.activeBeforePresentationMode&&t!==this.active){var i=function disableActiveTool(){switch(r.active){case u.SELECT:break;case u.HAND:r.handTool.deactivate()}};switch(t){case u.SELECT:i();break;case u.HAND:i();this.handTool.activate();break;default:console.error('switchTool: "'.concat(t,'" is an unsupported value.'));return}this.active=t;_classPrivateMethodGet(this,l,_dispatchEvent2).call(this)}}}]);return PDFCursorTools}();r.PDFCursorTools=d;function _dispatchEvent2(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}function _addEventListeners2(){var t=this;this.eventBus._on("switchcursortool",(function(r){t.switchTool(r.tool)}));this.eventBus._on("presentationmodechanged",(function(r){switch(r.state){case o.PresentationModeState.FULLSCREEN:var i=t.active;t.switchTool(u.SELECT);t.activeBeforePresentationMode=i;break;case o.PresentationModeState.NORMAL:var a=t.activeBeforePresentationMode;t.activeBeforePresentationMode=null;t.switchTool(a)}}))}},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.GrabToPan=void 0;function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var i="grab-to-pan-grab",a=new WeakSet,o=new WeakSet,u=new WeakSet,l=function(){function GrabToPan(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GrabToPan);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);this.element=t.element;this.document=t.element.ownerDocument;"function"==typeof t.ignoreTarget&&(this.ignoreTarget=t.ignoreTarget);this.onActiveChanged=t.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onMouseDown=_classPrivateMethodGet(this,a,_onMouseDown2).bind(this);this._onMouseMove=_classPrivateMethodGet(this,o,_onMouseMove2).bind(this);this._endPan=_classPrivateMethodGet(this,u,_endPan2).bind(this);(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(GrabToPan,[{key:"activate",value:function activate(){if(!this.active){var t;this.active=!0;this.element.addEventListener("mousedown",this._onMouseDown,!0);this.element.classList.add(i);null===(t=this.onActiveChanged)||void 0===t||t.call(this,!0)}}},{key:"deactivate",value:function deactivate(){if(this.active){var t;this.active=!1;this.element.removeEventListener("mousedown",this._onMouseDown,!0);this._endPan();this.element.classList.remove(i);null===(t=this.onActiveChanged)||void 0===t||t.call(this,!1)}}},{key:"toggle",value:function toggle(){this.active?this.deactivate():this.activate()}},{key:"ignoreTarget",value:function ignoreTarget(t){return t.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}]);return GrabToPan}();r.GrabToPan=l;function _onMouseDown2(t){if(0===t.button&&!this.ignoreTarget(t.target)){if(t.originalTarget)try{t.originalTarget.tagName}catch(t){return}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=t.clientX;this.clientYStart=t.clientY;this.document.addEventListener("mousemove",this._onMouseMove,!0);this.document.addEventListener("mouseup",this._endPan,!0);this.element.addEventListener("scroll",this._endPan,!0);t.preventDefault();t.stopPropagation();var r=document.activeElement;r&&!r.contains(t.target)&&r.blur()}}function _onMouseMove2(t){this.element.removeEventListener("scroll",this._endPan,!0);if(1&t.buttons){var r=t.clientX-this.clientXStart,i=t.clientY-this.clientYStart,a=this.scrollTopStart-i,o=this.scrollLeftStart-r;if(this.element.scrollTo)this.element.scrollTo({top:a,left:o,behavior:"instant"});else{this.element.scrollTop=a;this.element.scrollLeft=o}this.overlay.parentNode||document.body.append(this.overlay)}else this._endPan()}function _endPan2(){this.element.removeEventListener("scroll",this._endPan,!0);this.document.removeEventListener("mousemove",this._onMouseMove,!0);this.document.removeEventListener("mouseup",this._endPan,!0);this.overlay.remove()}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.SimpleLinkService=r.PDFLinkService=r.LinkTarget=void 0;var a=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){var i=function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}(t,r,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}var o="noopener noreferrer nofollow",u={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=u;function _addLinkAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.url,l=r.target,c=r.rel,d=r.enabled,h=void 0===d||d;if(!i||"string"!=typeof i)throw new Error('A valid "url" parameter must provided.');var p=(0,a.removeNullCharacters)(i);if(h)t.href=t.title=p;else{t.href="";t.title="Disabled: ".concat(p);t.onclick=function(){return!1}}var v="";switch(l){case u.NONE:break;case u.SELF:v="_self";break;case u.BLANK:v="_blank";break;case u.PARENT:v="_parent";break;case u.TOP:v="_top"}t.target=v;t.rel="string"==typeof c?c:o}var l=new WeakMap,c=new WeakSet,d=function(){function PDFLinkService(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.eventBus,i=t.externalLinkTarget,a=void 0===i?null:i,o=t.externalLinkRel,u=void 0===o?null:o,d=t.ignoreDestinationZoom,h=void 0!==d&&d;_classCallCheck(this,PDFLinkService);_classPrivateMethodInitSpec(this,c);_classPrivateFieldInitSpec(this,l,{writable:!0,value:new Map});this.eventBus=r;this.externalLinkTarget=a;this.externalLinkRel=u;this.externalLinkEnabled=!0;this._ignoreDestinationZoom=h;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null}_createClass(PDFLinkService,[{key:"setDocument",value:function setDocument(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=r;this.pdfDocument=t;_classPrivateFieldGet(this,l).clear()}},{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setHistory",value:function setHistory(t){this.pdfHistory=t}},{key:"pagesCount",get:function get(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function get(){return this.pdfViewer.currentPageNumber},set:function set(t){this.pdfViewer.currentPageNumber=t}},{key:"rotation",get:function get(){return this.pdfViewer.pagesRotation},set:function set(t){this.pdfViewer.pagesRotation=t}},{key:"goToDestination",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(this.pdfDocument){a.next=2;break}return a.abrupt("return");case 2:if("string"!=typeof t){a.next=9;break}r=t;a.next=6;return this.pdfDocument.getDestination(t);case 6:i=a.sent;a.next=13;break;case 9:r=null;a.next=12;return t;case 12:i=a.sent;case 13:if(Array.isArray(i)){a.next=15;break}return a.abrupt("return");case 15:_classPrivateMethodGet(this,c,_goToDestinationHelper2).call(this,t,r,i);case 16:case"end":return a.stop()}}),_callee,this)}))),function goToDestination(r){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){if(this.pdfDocument){var r="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;if(Number.isInteger(r)&&r>0&&r<=this.pagesCount){if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(r)}this.pdfViewer.scrollPageIntoView({pageNumber:r})}else console.error('PDFLinkService.goToPage: "'.concat(t,'" is not a valid page.'))}}},{key:"addLinkAttributes",value:function addLinkAttributes(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_addLinkAttributes(t,{url:r,target:i?u.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){var r=JSON.stringify(t);if(r.length>0)return this.getAnchorUrl("#"+escape(r))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return(this.baseUrl||"")+t}},{key:"setHash",value:function setHash(t){if(this.pdfDocument){var r,i;if(t.includes("=")){var o=(0,a.parseQueryString)(t);o.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:o.get("search").replace(/"/g,""),phraseSearch:"true"===o.get("phrase")});o.has("page")&&(r=0|o.get("page")||1);if(o.has("zoom")){var u=o.get("zoom").split(","),l=u[0],c=parseFloat(l);l.includes("Fit")?"Fit"===l||"FitB"===l?i=[null,{name:l}]:"FitH"===l||"FitBH"===l||"FitV"===l||"FitBV"===l?i=[null,{name:l},u.length>1?0|u[1]:null]:"FitR"===l?5!==u.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:l},0|u[1],0|u[2],0|u[3],0|u[4]]:console.error('PDFLinkService.setHash: "'.concat(l,'" is not a valid zoom value.')):i=[null,{name:"XYZ"},u.length>1?0|u[1]:null,u.length>2?0|u[2]:null,c?c/100:l]}i?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:i,allowNegativeOffset:!0}):r&&(this.page=r);o.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:o.get("pagemode")});o.has("nameddest")&&this.goToDestination(o.get("nameddest"))}else{i=unescape(t);try{i=JSON.parse(i);Array.isArray(i)||(i=i.toString())}catch(t){}if("string"==typeof i||_classStaticPrivateMethodGet(PDFLinkService,PDFLinkService,_isValidExplicitDestination).call(PDFLinkService,i)){this.goToDestination(i);return}console.error('PDFLinkService.setHash: "'.concat(unescape(t),'" is not a valid destination.'))}}}},{key:"executeNamedAction",value:function executeNamedAction(t){var r,i;switch(t){case"GoBack":null===(r=this.pdfHistory)||void 0===r||r.back();break;case"GoForward":null===(i=this.pdfHistory)||void 0===i||i.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}},{key:"cachePageRef",value:function cachePageRef(t,r){if(r){var i=0===r.gen?"".concat(r.num,"R"):"".concat(r.num,"R").concat(r.gen);_classPrivateFieldGet(this,l).set(i,t)}}},{key:"_cachedPageNumber",value:function _cachedPageNumber(t){if(!t)return null;var r=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return _classPrivateFieldGet(this,l).get(r)||null}},{key:"isPageVisible",value:function isPageVisible(t){return this.pdfViewer.isPageVisible(t)}},{key:"isPageCached",value:function isPageCached(t){return this.pdfViewer.isPageCached(t)}}]);var t;return PDFLinkService}();r.PDFLinkService=d;function _goToDestinationHelper2(t){var r,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,u=o[0];if("object"===_typeof(u)&&null!==u){if(!(r=this._cachedPageNumber(u))){this.pdfDocument.getPageIndex(u).then((function(r){i.cachePageRef(r+1,u);_classPrivateMethodGet(i,c,_goToDestinationHelper2).call(i,t,a,o)})).catch((function(){console.error('PDFLinkService.#goToDestinationHelper: "'.concat(u,'" is not ')+'a valid page reference, for dest="'.concat(t,'".'))}));return}}else{if(!Number.isInteger(u)){console.error('PDFLinkService.#goToDestinationHelper: "'.concat(u,'" is not ')+'a valid destination reference, for dest="'.concat(t,'".'));return}r=u+1}if(!r||r<1||r>this.pagesCount)console.error('PDFLinkService.#goToDestinationHelper: "'.concat(r,'" is not ')+'a valid page number, for dest="'.concat(t,'".'));else{if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:a,explicitDest:o,pageNumber:r})}this.pdfViewer.scrollPageIntoView({pageNumber:r,destArray:o,ignoreDestinationZoom:this._ignoreDestinationZoom})}}function _isValidExplicitDestination(t){if(!Array.isArray(t))return!1;var r=t.length;if(r<2)return!1;var i=t[0];if(!("object"===_typeof(i)&&Number.isInteger(i.num)&&Number.isInteger(i.gen)||Number.isInteger(i)&&i>=0))return!1;var a=t[1];if("object"!==_typeof(a)||"string"!=typeof a.name)return!1;var o=!0;switch(a.name){case"XYZ":if(5!==r)return!1;break;case"Fit":case"FitB":return 2===r;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==r)return!1;break;case"FitR":if(6!==r)return!1;o=!1;break;default:return!1}for(var u=2;u<r;u++){var l=t[u];if(!("number"==typeof l||o&&null===l))return!1}return!0}var h=function(){function SimpleLinkService(){_classCallCheck(this,SimpleLinkService);this.externalLinkEnabled=!0}_createClass(SimpleLinkService,[{key:"pagesCount",get:function get(){return 0}},{key:"page",get:function get(){return 0},set:function set(t){}},{key:"rotation",get:function get(){return 0},set:function set(t){}},{key:"goToDestination",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee2)}))),function goToDestination(r){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){}},{key:"addLinkAttributes",value:function addLinkAttributes(t,r){_addLinkAttributes(t,{url:r,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function getDestinationHash(t){return"#"}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return"#"}},{key:"setHash",value:function setHash(t){}},{key:"executeNamedAction",value:function executeNamedAction(t){}},{key:"cachePageRef",value:function cachePageRef(t,r){}},{key:"isPageVisible",value:function isPageVisible(t){return!0}},{key:"isPageCached",value:function isPageCached(t){return!0}}]);var t;return SimpleLinkService}();r.SimpleLinkService=h},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorParams=void 0;var a=i(4);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}var o=new WeakSet,u=_createClass((function AnnotationEditorParams(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorParams);_classPrivateMethodInitSpec(this,o);this.eventBus=r;(function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i})(this,o,_bindListeners2).call(this,t)}));r.AnnotationEditorParams=u;function _bindListeners2(t){var r=this,i=t.editorFreeTextFontSize,o=t.editorFreeTextColor,u=t.editorInkColor,l=t.editorInkThickness,c=t.editorInkOpacity;i.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,value:i.valueAsNumber})}));o.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,value:o.value})}));u.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.INK_COLOR,value:u.value})}));l.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.INK_THICKNESS,value:l.valueAsNumber})}));c.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.INK_OPACITY,value:c.valueAsNumber})}));this.eventBus._on("annotationeditorparamschanged",(function(t){var r,d=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}(t.details);try{for(d.s();!(r=d.n()).done;){var h=_slicedToArray(r.value,2),p=h[0],v=h[1];switch(p){case a.AnnotationEditorParamsType.FREETEXT_SIZE:i.value=v;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:o.value=v;break;case a.AnnotationEditorParamsType.INK_COLOR:u.value=v;break;case a.AnnotationEditorParamsType.INK_THICKNESS:l.value=v;break;case a.AnnotationEditorParamsType.INK_OPACITY:c.value=v}}}catch(t){d.e(t)}finally{d.f()}}))}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.OverlayManager=void 0;function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var a=new WeakMap,o=new WeakMap,u=function(){function OverlayManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OverlayManager);_classPrivateFieldInitSpec(this,a,{writable:!0,value:new WeakMap});_classPrivateFieldInitSpec(this,o,{writable:!0,value:null})}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(OverlayManager,[{key:"active",get:function get(){return _classPrivateFieldGet(this,o)}},{key:"register",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,u,l=this,c=arguments;return _regeneratorRuntime().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:r=c.length>1&&void 0!==c[1]&&c[1];if("object"===_typeof(t)){d.next=5;break}throw new Error("Not enough parameters.");case 5:if(!_classPrivateFieldGet(this,a).has(t)){d.next=7;break}throw new Error("The overlay is already registered.");case 7:_classPrivateFieldGet(this,a).set(t,{canForceClose:r});if(!t.showModal){i(11).registerDialog(t);if(!this._dialogPolyfillCSS){this._dialogPolyfillCSS=!0;(u=document.createElement("style")).textContent="dialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: block;\n}\n\ndialog:not([open]) {\n  display: none;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}";document.head.prepend(u)}}t.addEventListener("cancel",(function(t){_classPrivateFieldSet(l,o,null)}));case 10:case"end":return d.stop()}}),_callee,this)}))),function register(t){return l.apply(this,arguments)})},{key:"unregister",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(_classPrivateFieldGet(this,a).has(t)){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(_classPrivateFieldGet(this,o)!==t){r.next=6;break}throw new Error("The overlay cannot be removed while it is active.");case 6:_classPrivateFieldGet(this,a).delete(t);case 7:case"end":return r.stop()}}),_callee2,this)}))),function unregister(t){return u.apply(this,arguments)})},{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(_classPrivateFieldGet(this,a).has(t)){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(!_classPrivateFieldGet(this,o)){r.next=15;break}if(_classPrivateFieldGet(this,o)!==t){r.next=9;break}throw new Error("The overlay is already active.");case 9:if(!_classPrivateFieldGet(this,a).get(t).canForceClose){r.next=14;break}r.next=12;return this.close();case 12:r.next=15;break;case 14:throw new Error("Another overlay is currently active.");case 15:_classPrivateFieldSet(this,o,t);t.showModal();case 17:case"end":return r.stop()}}),_callee3,this)}))),function open(t){return r.apply(this,arguments)})},{key:"close",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var t,r=arguments;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:_classPrivateFieldGet(this,o);if(_classPrivateFieldGet(this,a).has(t)){i.next=5;break}throw new Error("The overlay does not exist.");case 5:if(_classPrivateFieldGet(this,o)){i.next=9;break}throw new Error("The overlay is currently not active.");case 9:if(_classPrivateFieldGet(this,o)===t){i.next=11;break}throw new Error("Another overlay is currently active.");case 11:t.close();_classPrivateFieldSet(this,o,null);case 13:case"end":return i.stop()}}),_callee4,this)}))),function close(){return t.apply(this,arguments)})}]);var t,r,u,l;return OverlayManager}();r.OverlayManager=u},(t,r,i)=>{var a,o,u;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}u=function(){var t=window.CustomEvent;t&&"object"!==_typeof(t)||((t=function CustomEvent(t,r){r=r||{};var i=document.createEvent("CustomEvent");i.initCustomEvent(t,!!r.bubbles,!!r.cancelable,r.detail||null);return i}).prototype=window.Event.prototype);function safeDispatchEvent(t,r){var i="on"+r.type.toLowerCase();"function"==typeof t[i]&&t[i](r);return t.dispatchEvent(r)}function findNearestDialog(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement?t.parentElement:t.parentNode?t.parentNode.host:null}return null}function safeBlur(t){for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;t&&t.blur&&t!==document.body&&t.blur()}function inNodeList(t,r){for(var i=0;i<t.length;++i)if(t[i]===r)return!0;return!1}function isFormMethodDialog(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function findFocusableElementWithin(t){var r=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));r.push('[tabindex]:not([disabled]):not([tabindex=""])');var i=t.querySelector(r.join(", "));if(!i&&"attachShadow"in Element.prototype)for(var a=t.querySelectorAll("*"),o=0;o<a.length&&!(a[o].tagName&&a[o].shadowRoot&&(i=findFocusableElementWithin(a[o].shadowRoot)));o++);return i}function isConnected(t){return t.isConnected||document.body.contains(t)}function findFormSubmitter(t){if(t.submitter)return t.submitter;var i=t.target;if(!(i instanceof HTMLFormElement))return null;var a=r.formSubmitter;if(!a){var o=t.target;a=("getRootNode"in o&&o.getRootNode()||document).activeElement}return a&&a.form===i?a:null}function maybeHandleSubmit(t){if(!t.defaultPrevented){var i=t.target,a=r.imagemapUseValue,o=findFormSubmitter(t);null===a&&o&&(a=o.value);var u=findNearestDialog(i);if(u&&"dialog"===(o&&o.getAttribute("formmethod")||i.getAttribute("method"))){t.preventDefault();null!=a?u.close(a):u.close()}}}function dialogPolyfillInfo(t){this.dialog_=t;this.replacedStyleTop_=!1;this.openAsModal_=!1;t.hasAttribute("role")||t.setAttribute("role","dialog");t.show=this.show.bind(this);t.showModal=this.showModal.bind(this);t.close=this.close.bind(this);t.addEventListener("submit",maybeHandleSubmit,!1);"returnValue"in t||(t.returnValue="");if("MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]});else{var r,i=!1,a=function(){i?this.downgradeModal():this.maybeHideModal();i=!1}.bind(this),o=function delayModel(o){if(o.target===t){var u="DOMNodeRemoved";i|=o.type.substr(0,u.length)===u;window.clearTimeout(r);r=window.setTimeout(a,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(r){t.addEventListener(r,o)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")});this.backdrop_=document.createElement("div");this.backdrop_.className="backdrop";this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this));this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this));this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}dialogPolyfillInfo.prototype={get dialog(){return this.dialog_},maybeHideModal:function maybeHideModal(){this.dialog_.hasAttribute("open")&&isConnected(this.dialog_)||this.downgradeModal()},downgradeModal:function downgradeModal(){if(this.openAsModal_){this.openAsModal_=!1;this.dialog_.style.zIndex="";if(this.replacedStyleTop_){this.dialog_.style.top="";this.replacedStyleTop_=!1}this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_);r.dm.removeDialog(this)}},setOpen:function setOpen(t){if(t)this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open","");else{this.dialog_.removeAttribute("open");this.maybeHideModal()}},backdropMouseEvent_:function backdropMouseEvent_(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var r=document.createElement("div");this.dialog_.insertBefore(r,this.dialog_.firstChild);r.tabIndex=-1;r.focus();this.dialog_.removeChild(r)}var i=document.createEvent("MouseEvents");i.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget);this.dialog_.dispatchEvent(i);t.stopPropagation()},focus_:function focus_(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_);t||(t=findFocusableElementWithin(this.dialog_));safeBlur(document.activeElement);t&&t.focus()},updateZIndex:function updateZIndex(t,r){if(t<r)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t;this.backdrop_.style.zIndex=r},show:function show(){if(!this.dialog_.open){this.setOpen(!0);this.focus_()}},showModal:function showModal(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!isConnected(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!r.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function createsStackingContext(t){for(;t&&t!==document.body;){var r=window.getComputedStyle(t),i=function invalid(t,i){return!(void 0===r[t]||r[t]===i)};if(r.opacity<1||i("zIndex","auto")||i("transform","none")||i("mixBlendMode","normal")||i("filter","none")||i("perspective","none")||"isolate"===r.isolation||"fixed"===r.position||"touch"===r.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context");this.setOpen(!0);this.openAsModal_=!0;if(r.needsCentering(this.dialog_)){r.reposition(this.dialog_);this.replacedStyleTop_=!0}else this.replacedStyleTop_=!1;this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);this.focus_()},close:function close(r){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1);void 0!==r&&(this.dialog_.returnValue=r);var i=new t("close",{bubbles:!1,cancelable:!1});safeDispatchEvent(this.dialog_,i)}};var r={reposition:function(t){var r=document.body.scrollTop||document.documentElement.scrollTop,i=r+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(r,i)+"px"},isInlinePositionSetByStylesheet:function(t){for(var r=0;r<document.styleSheets.length;++r){var i=document.styleSheets[r],a=null;try{a=i.cssRules}catch(t){}if(a)for(var o=0;o<a.length;++o){var u=a[o],l=null;try{l=document.querySelectorAll(u.selectorText)}catch(t){}if(l&&inNodeList(l,t)){var c=u.style.getPropertyValue("top"),d=u.style.getPropertyValue("bottom");if(c&&"auto"!==c||d&&"auto"!==d)return!0}}}return!1},needsCentering:function(t){return!("absolute"!==window.getComputedStyle(t).position||"auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom||r.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){(window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t);if("dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new dialogPolyfillInfo(t)},registerDialog:function(t){t.showModal||r.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div");this.overlay.className="_dialog_overlay";this.overlay.addEventListener("click",function(r){this.forwardTab_=void 0;r.stopPropagation();t([])}.bind(this));this.handleKey_=this.handleKey_.bind(this);this.handleFocus_=this.handleFocus_.bind(this);this.zIndexLow_=1e5;this.zIndexHigh_=100150;this.forwardTab_=void 0;"MutationObserver"in window&&(this.mo_=new MutationObserver((function(r){var i=[];r.forEach((function(t){for(var r,a=0;r=t.removedNodes[a];++a)if(r instanceof Element){"dialog"===r.localName&&i.push(r);i=i.concat(r.querySelectorAll("dialog"))}}));i.length&&t(i)})))}};r.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0);document.addEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};r.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0);document.removeEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.disconnect()};r.DialogManager.prototype.updateStacking=function(){for(var t,r=this.zIndexHigh_,i=0;t=this.pendingDialogStack[i];++i){t.updateZIndex(--r,--r);0===i&&(this.overlay.style.zIndex=--r)}var a=this.pendingDialogStack[0];a?(a.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};r.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=findNearestDialog(t);){for(var r,i=0;r=this.pendingDialogStack[i];++i)if(r.dialog===t)return 0===i;t=t.parentElement}return!1};r.DialogManager.prototype.handleFocus_=function(t){var r=t.composedPath?t.composedPath()[0]:t.target;if(!this.containedByTopDialog_(r)&&document.activeElement!==document.documentElement){t.preventDefault();t.stopPropagation();safeBlur(r);if(void 0!==this.forwardTab_){var i=this.pendingDialogStack[0];i.dialog.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?i.focus_():r!==document.documentElement&&document.documentElement.focus());return!1}}};r.DialogManager.prototype.handleKey_=function(r){this.forwardTab_=void 0;if(27===r.keyCode){r.preventDefault();r.stopPropagation();var i=new t("cancel",{bubbles:!1,cancelable:!0}),a=this.pendingDialogStack[0];a&&safeDispatchEvent(a.dialog,i)&&a.dialog.close()}else 9===r.keyCode&&(this.forwardTab_=!r.shiftKey)};r.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(r){-1!==t.indexOf(r.dialog)?r.downgradeModal():r.maybeHideModal()}))};r.DialogManager.prototype.pushDialog=function(t){var r=(this.zIndexHigh_-this.zIndexLow_)/2-1;if(this.pendingDialogStack.length>=r)return!1;1===this.pendingDialogStack.unshift(t)&&this.blockDocument();this.updateStacking();return!0};r.DialogManager.prototype.removeDialog=function(t){var r=this.pendingDialogStack.indexOf(t);if(-1!==r){this.pendingDialogStack.splice(r,1);0===this.pendingDialogStack.length&&this.unblockDocument();this.updateStacking()}};r.dm=new r.DialogManager;r.formSubmitter=null;r.imagemapUseValue=null;if(void 0===window.HTMLDialogElement){var i=document.createElement("form");i.setAttribute("method","dialog");if("dialog"!==i.method){var a=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(a){var o=a.get;a.get=function(){return isFormMethodDialog(this)?"dialog":o.call(this)};var u=a.set;a.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):u.call(this,t)};Object.defineProperty(HTMLFormElement.prototype,"method",a)}}document.addEventListener("click",(function(t){r.formSubmitter=null;r.imagemapUseValue=null;if(!t.defaultPrevented){var i=t.target;"composedPath"in t&&(i=t.composedPath().shift()||i);if(i&&isFormMethodDialog(i.form)){if(!("submit"===i.type&&["button","input"].indexOf(i.localName)>-1)){if("input"!==i.localName||"image"!==i.type)return;r.imagemapUseValue=t.offsetX+","+t.offsetY}findNearestDialog(i)&&(r.formSubmitter=i)}}}),!1);document.addEventListener("submit",(function(t){var r=t.target;if(!findNearestDialog(r)){var i=findFormSubmitter(t);"dialog"===(i&&i.getAttribute("formmethod")||r.getAttribute("method"))&&t.preventDefault()}}));var l=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function replacementFormSubmit(){if(!isFormMethodDialog(this))return l.call(this);var t=findNearestDialog(this);t&&t.close()}}return r},"object"===_typeof(r)?t.exports=u():void 0!==(o="function"==typeof(a=u)?a.call(r,i,r,t):a)&&(t.exports=o)},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PasswordPrompt=void 0;var a=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o=new WeakMap,u=new WeakMap,l=new WeakSet,c=new WeakSet,d=new WeakSet,h=function(){function PasswordPrompt(t,r,i){var a=this,h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,PasswordPrompt);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);_classPrivateFieldInitSpec(this,o,{writable:!0,value:null});_classPrivateFieldInitSpec(this,u,{writable:!0,value:null});this.dialog=t.dialog;this.label=t.label;this.input=t.input;this.submitButton=t.submitButton;this.cancelButton=t.cancelButton;this.overlayManager=r;this.l10n=i;this._isViewerEmbedded=h;this.submitButton.addEventListener("click",_classPrivateMethodGet(this,l,_verify2).bind(this));this.cancelButton.addEventListener("click",_classPrivateMethodGet(this,c,_cancel2).bind(this));this.input.addEventListener("keydown",(function(t){13===t.keyCode&&_classPrivateMethodGet(a,l,_verify2).call(a)}));this.overlayManager.register(this.dialog,!0);this.dialog.addEventListener("close",_classPrivateMethodGet(this,c,_cancel2).bind(this))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PasswordPrompt,[{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this.overlayManager.open(this.dialog);case 2:t=_classPrivateFieldGet(this,u)===a.PasswordResponses.INCORRECT_PASSWORD;this._isViewerEmbedded&&!t||this.input.focus();r.next=6;return this.l10n.get("password_".concat(t?"invalid":"label"));case 6:this.label.textContent=r.sent;case 7:case"end":return r.stop()}}),_callee,this)}))),function open(){return r.apply(this,arguments)})},{key:"close",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:this.overlayManager.active===this.dialog&&this.overlayManager.close(this.dialog);case 1:case"end":return t.stop()}}),_callee2,this)}))),function close(){return t.apply(this,arguments)})},{key:"setUpdateCallback",value:function setUpdateCallback(t,r){_classPrivateFieldSet(this,o,t);_classPrivateFieldSet(this,u,r)}}]);var t,r;return PasswordPrompt}();r.PasswordPrompt=h;function _verify2(){var t=this.input.value;(null==t?void 0:t.length)>0&&_classPrivateMethodGet(this,d,_invokeCallback2).call(this,t)}function _cancel2(){_classPrivateMethodGet(this,d,_invokeCallback2).call(this,new Error("PasswordPrompt cancelled."))}function _invokeCallback2(t){if(_classPrivateFieldGet(this,o)){this.close();this.input.value="";_classPrivateFieldGet(this,o).call(this,t);_classPrivateFieldSet(this,o,null)}}},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFAttachmentViewer=void 0;var a=i(4),o=i(14),u=i(5);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}var l=new WeakSet,c=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PDFAttachmentViewer,t);var r,i=_createSuper(PDFAttachmentViewer);function PDFAttachmentViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFAttachmentViewer);_classPrivateMethodInitSpec(_assertThisInitialized(r=i.call(this,t)),l);r.downloadManager=t.downloadManager;r.eventBus._on("fileattachmentannotation",function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(_assertThisInitialized(r),l,_appendAttachment2).bind(_assertThisInitialized(r)));return r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFAttachmentViewer,[{key:"reset",value:function reset(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_get(_getPrototypeOf(PDFAttachmentViewer.prototype),"reset",this).call(this);this._attachments=null;t||(this._renderedCapability=(0,a.createPromiseCapability)());this._pendingDispatchEvent=!1}},{key:"_dispatchEvent",value:(r=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:this._renderedCapability.resolve();if(0!==t||this._pendingDispatchEvent){r.next=7;break}this._pendingDispatchEvent=!0;r.next=5;return(0,u.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3});case 5:if(this._pendingDispatchEvent){r.next=7;break}return r.abrupt("return");case 7:this._pendingDispatchEvent=!1;this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:t});case 9:case"end":return r.stop()}}),_callee,this)}))),function _dispatchEvent(t){return r.apply(this,arguments)})},{key:"_bindLink",value:function _bindLink(t,r){var i=this,a=r.content,o=r.filename;t.onclick=function(){i.downloadManager.openOrDownloadData(t,a,o);return!1}}},{key:"render",value:function render(t){var r=t.attachments,i=t.keepRenderedCapability,o=void 0!==i&&i;this._attachments&&this.reset(o);this._attachments=r||null;if(r){var u,l=Object.keys(r).sort((function(t,r){return t.toLowerCase().localeCompare(r.toLowerCase())})),c=document.createDocumentFragment(),d=0,h=_createForOfIteratorHelper(l);try{for(h.s();!(u=h.n()).done;){var p=r[u.value],v=p.content,y=(0,a.getFilenameFromUrl)(p.filename),g=document.createElement("div");g.className="treeItem";var m=document.createElement("a");this._bindLink(m,{content:v,filename:y});m.textContent=this._normalizeTextContent(y);g.append(m);c.append(g);d++}}catch(t){h.e(t)}finally{h.f()}this._finishRendering(c,d)}else this._dispatchEvent(0)}}]);return PDFAttachmentViewer}(o.BaseTreeViewer);r.PDFAttachmentViewer=c;function _appendAttachment2(t){var r=this,i=t.filename,a=t.content,o=this._renderedCapability.promise;o.then((function(){if(o===r._renderedCapability.promise){var t=r._attachments||Object.create(null);for(var u in t)if(i===u)return;t[i]={filename:i,content:a};r.render({attachments:t,keepRenderedCapability:!0})}}))}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.BaseTreeViewer=void 0;var a=i(3);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o="selected",u=function(){function BaseTreeViewer(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseTreeViewer);if(this.constructor===BaseTreeViewer)throw new Error("Cannot initialize BaseTreeViewer.");this.container=t.container;this.eventBus=t.eventBus;this.reset()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(BaseTreeViewer,[{key:"reset",value:function reset(){this._pdfDocument=null;this._lastToggleIsShow=!0;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}},{key:"_dispatchEvent",value:function _dispatchEvent(t){throw new Error("Not implemented: _dispatchEvent")}},{key:"_bindLink",value:function _bindLink(t,r){throw new Error("Not implemented: _bindLink")}},{key:"_normalizeTextContent",value:function _normalizeTextContent(t){return(0,a.removeNullCharacters)(t,!0)||"–"}},{key:"_addToggleButton",value:function _addToggleButton(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.createElement("div");a.className="treeItemToggler";i&&a.classList.add("treeItemsHidden");a.onclick=function(i){i.stopPropagation();a.classList.toggle("treeItemsHidden");if(i.shiftKey){var o=!a.classList.contains("treeItemsHidden");r._toggleTreeItem(t,o)}};t.prepend(a)}},{key:"_toggleTreeItem",value:function _toggleTreeItem(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._lastToggleIsShow=r;var i,a=_createForOfIteratorHelper(t.querySelectorAll(".treeItemToggler"));try{for(a.s();!(i=a.n()).done;){var o=i.value;o.classList.toggle("treeItemsHidden",!r)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}},{key:"_finishRendering",value:function _finishRendering(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!t.querySelector(".treeItemsHidden")}this.container.append(t);this._dispatchEvent(r)}},{key:"render",value:function render(t){throw new Error("Not implemented: render")}},{key:"_updateCurrentTreeItem",value:function _updateCurrentTreeItem(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._currentTreeItem){this._currentTreeItem.classList.remove(o);this._currentTreeItem=null}if(t){t.classList.add(o);this._currentTreeItem=t}}},{key:"_scrollToCurrentTreeItem",value:function _scrollToCurrentTreeItem(t){if(t){for(var r=t.parentNode;r&&r!==this.container;){if(r.classList.contains("treeItem")){var i=r.firstElementChild;null==i||i.classList.remove("treeItemsHidden")}r=r.parentNode}this._updateCurrentTreeItem(t);this.container.scrollTo(t.offsetLeft,t.offsetTop+-100)}}}]);return BaseTreeViewer}();r.BaseTreeViewer=u},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFDocumentProperties=void 0;var a=i(4),o=i(3);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var u="-",l=["en-us","en-lr","my"],c={"8.5x11":"Letter","8.5x14":"Legal"},d={"297x420":"A3","210x297":"A4"};function getPageName(t,r,i){var a=r?t.width:t.height,o=r?t.height:t.width;return i["".concat(a,"x").concat(o)]}var h=new WeakMap,p=new WeakSet,v=new WeakSet,y=new WeakSet,g=new WeakSet,m=new WeakSet,b=new WeakSet,w=function(){function PDFDocumentProperties(t,r,i,a,o){var u=this,c=t.dialog,d=t.fields,w=t.closeButton;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFDocumentProperties);_classPrivateMethodInitSpec(this,b);_classPrivateMethodInitSpec(this,m);_classPrivateMethodInitSpec(this,g);_classPrivateMethodInitSpec(this,y);_classPrivateMethodInitSpec(this,v);_classPrivateMethodInitSpec(this,p);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(this,h,{writable:!0,value:null});this.dialog=c;this.fields=d;this.overlayManager=r;this.l10n=a;this._fileNameLookup=o;_classPrivateMethodGet(this,p,_reset2).call(this);w.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.dialog);i._on("pagechanging",(function(t){u._currentPageNumber=t.pageNumber}));i._on("rotationchanging",(function(t){u._pagesRotation=t.pagesRotation}));this._isNonMetricLocale=!0;a.getLanguage().then((function(t){u._isNonMetricLocale=l.includes(t)}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFDocumentProperties,[{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a,u,l,c,d,p,w,A,P,D,E,S,C,k=this;return _regeneratorRuntime().wrap((function _callee$(x){for(;;)switch(x.prev=x.next){case 0:x.next=2;return Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);case 2:t=this._currentPageNumber;r=this._pagesRotation;if(!_classPrivateFieldGet(this,h)||t!==_classPrivateFieldGet(this,h)._currentPageNumber||r!==_classPrivateFieldGet(this,h)._pagesRotation){x.next=7;break}_classPrivateMethodGet(this,v,_updateUI2).call(this);return x.abrupt("return");case 7:x.next=9;return this.pdfDocument.getMetadata();case 9:i=x.sent;a=i.info;u=i.contentLength;x.next=14;return Promise.all([this._fileNameLookup(),_classPrivateMethodGet(this,y,_parseFileSize2).call(this,u),_classPrivateMethodGet(this,m,_parseDate2).call(this,a.CreationDate),_classPrivateMethodGet(this,m,_parseDate2).call(this,a.ModDate),this.pdfDocument.getPage(t).then((function(t){return _classPrivateMethodGet(k,g,_parsePageSize2).call(k,(0,o.getPageSizeInches)(t),r)})),_classPrivateMethodGet(this,b,_parseLinearization2).call(this,a.IsLinearized)]);case 14:l=x.sent;c=_slicedToArray(l,6);d=c[0];p=c[1];w=c[2];A=c[3];P=c[4];D=c[5];_classPrivateFieldSet(this,h,Object.freeze({fileName:d,fileSize:p,title:a.Title,author:a.Author,subject:a.Subject,keywords:a.Keywords,creationDate:w,modificationDate:A,creator:a.Creator,producer:a.Producer,version:a.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:P,linearized:D,_currentPageNumber:t,_pagesRotation:r}));_classPrivateMethodGet(this,v,_updateUI2).call(this);x.next=26;return this.pdfDocument.getDownloadInfo();case 26:E=x.sent;S=E.length;if(u!==S){x.next=30;break}return x.abrupt("return");case 30:C=Object.assign(Object.create(null),_classPrivateFieldGet(this,h));x.next=33;return _classPrivateMethodGet(this,y,_parseFileSize2).call(this,S);case 33:C.fileSize=x.sent;_classPrivateFieldSet(this,h,Object.freeze(C));_classPrivateMethodGet(this,v,_updateUI2).call(this);case 36:case"end":return x.stop()}}),_callee,this)}))),function open(){return r.apply(this,arguments)})},{key:"close",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:this.overlayManager.close(this.dialog);case 1:case"end":return t.stop()}}),_callee2,this)}))),function close(){return t.apply(this,arguments)})},{key:"setDocument",value:function setDocument(t){if(this.pdfDocument){_classPrivateMethodGet(this,p,_reset2).call(this);_classPrivateMethodGet(this,v,_updateUI2).call(this,!0)}if(t){this.pdfDocument=t;this._dataAvailableCapability.resolve()}}}]);var t,r;return PDFDocumentProperties}();r.PDFDocumentProperties=w;function _reset2(){this.pdfDocument=null;_classPrivateFieldSet(this,h,null);this._dataAvailableCapability=(0,a.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}function _updateUI2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t&&_classPrivateFieldGet(this,h)){if(this.overlayManager.active===this.dialog)for(var r in this.fields){var i=_classPrivateFieldGet(this,h)[r];this.fields[r].textContent=i||0===i?i:u}}else for(var a in this.fields)this.fields[a].textContent=u}function _parseFileSize2(){return _parseFileSize3.apply(this,arguments)}function _parseFileSize3(){_parseFileSize3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t,r,i,a=arguments;return _regeneratorRuntime().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:0;i=(r=t/1024)/1024;if(r){o.next=4;break}return o.abrupt("return",void 0);case 4:return o.abrupt("return",this.l10n.get("document_properties_".concat(i>=1?"mb":"kb"),{size_mb:i>=1&&(+i.toPrecision(3)).toLocaleString(),size_kb:i<1&&(+r.toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()}));case 5:case"end":return o.stop()}}),_callee3,this)})));return _parseFileSize3.apply(this,arguments)}function _parsePageSize2(t,r){return _parsePageSize3.apply(this,arguments)}function _parsePageSize3(){return(_parsePageSize3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t,r){var i,a,u,l,h,p,v,y,g,m,b,w,A,P;return _regeneratorRuntime().wrap((function _callee4$(D){for(;;)switch(D.prev=D.next){case 0:if(t){D.next=2;break}return D.abrupt("return",void 0);case 2:r%180!=0&&(t={width:t.height,height:t.width});i=(0,o.isPortraitOrientation)(t);a={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100};u={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10};if(!((l=getPageName(a,i,c)||getPageName(u,i,d))||Number.isInteger(u.width)&&Number.isInteger(u.height))){h={width:25.4*t.width,height:25.4*t.height};p={width:Math.round(u.width),height:Math.round(u.height)};if(Math.abs(h.width-p.width)<.1&&Math.abs(h.height-p.height)<.1&&(l=getPageName(p,i,d))){a={width:Math.round(p.width/25.4*100)/100,height:Math.round(p.height/25.4*100)/100};u=p}}D.next=10;return Promise.all([this._isNonMetricLocale?a:u,this.l10n.get("document_properties_page_size_unit_".concat(this._isNonMetricLocale?"inches":"millimeters")),l&&this.l10n.get("document_properties_page_size_name_".concat(l.toLowerCase())),this.l10n.get("document_properties_page_size_orientation_".concat(i?"portrait":"landscape"))]);case 10:v=D.sent;y=_slicedToArray(v,4);g=y[0];m=g.width;b=g.height;w=y[1];A=y[2];P=y[3];return D.abrupt("return",this.l10n.get("document_properties_page_size_dimension_".concat(A?"name_":"","string"),{width:m.toLocaleString(),height:b.toLocaleString(),unit:w,name:A,orientation:P}));case 19:case"end":return D.stop()}}),_callee4,this)})))).apply(this,arguments)}function _parseDate2(t){return _parseDate3.apply(this,arguments)}function _parseDate3(){return(_parseDate3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){var r;return _regeneratorRuntime().wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:if(r=a.PDFDateString.toDateObject(t)){i.next=3;break}return i.abrupt("return",void 0);case 3:return i.abrupt("return",this.l10n.get("document_properties_date_string",{date:r.toLocaleDateString(),time:r.toLocaleTimeString()}));case 4:case"end":return i.stop()}}),_callee5,this)})))).apply(this,arguments)}function _parseLinearization2(t){return this.l10n.get("document_properties_linearized_".concat(t?"yes":"no"))}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFFindBar=void 0;var a=i(17);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o=new WeakSet,u=function(){function PDFFindBar(t,r,i){var a=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFindBar);_classPrivateMethodInitSpec(this,o);this.opened=!1;this.bar=t.bar;this.toggleButton=t.toggleButton;this.findField=t.findField;this.highlightAll=t.highlightAllCheckbox;this.caseSensitive=t.caseSensitiveCheckbox;this.matchDiacritics=t.matchDiacriticsCheckbox;this.entireWord=t.entireWordCheckbox;this.findMsg=t.findMsg;this.findResultsCount=t.findResultsCount;this.findPreviousButton=t.findPreviousButton;this.findNextButton=t.findNextButton;this.eventBus=r;this.l10n=i;this.toggleButton.addEventListener("click",(function(){a.toggle()}));this.findField.addEventListener("input",(function(){a.dispatchEvent("")}));this.bar.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:t.target===a.findField&&a.dispatchEvent("again",t.shiftKey);break;case 27:a.close()}}));this.findPreviousButton.addEventListener("click",(function(){a.dispatchEvent("again",!0)}));this.findNextButton.addEventListener("click",(function(){a.dispatchEvent("again",!1)}));this.highlightAll.addEventListener("click",(function(){a.dispatchEvent("highlightallchange")}));this.caseSensitive.addEventListener("click",(function(){a.dispatchEvent("casesensitivitychange")}));this.entireWord.addEventListener("click",(function(){a.dispatchEvent("entirewordchange")}));this.matchDiacritics.addEventListener("click",(function(){a.dispatchEvent("diacriticmatchingchange")}));this.eventBus._on("resize",_classPrivateMethodGet(this,o,_adjustWidth2).bind(this))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFFindBar,[{key:"reset",value:function reset(){this.updateUIState()}},{key:"dispatchEvent",value:function dispatchEvent(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.eventBus.dispatch("find",{source:this,type:t,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:r,matchDiacritics:this.matchDiacritics.checked})}},{key:"updateUIState",value:function updateUIState(t,r,i){var u=this,l=Promise.resolve(""),c="";switch(t){case a.FindState.FOUND:break;case a.FindState.PENDING:c="pending";break;case a.FindState.NOT_FOUND:l=this.l10n.get("find_not_found");c="notFound";break;case a.FindState.WRAPPED:l=this.l10n.get("find_reached_".concat(r?"top":"bottom"))}this.findField.setAttribute("data-status",c);this.findField.setAttribute("aria-invalid",t===a.FindState.NOT_FOUND);l.then((function(t){u.findMsg.textContent=t;_classPrivateMethodGet(u,o,_adjustWidth2).call(u)}));this.updateResultsCount(i)}},{key:"updateResultsCount",value:function updateResultsCount(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.current,a=void 0===i?0:i,u=r.total,l=void 0===u?0:u,c=1e3,d=Promise.resolve("");if(l>0)if(l>c){var h="find_match_count_limit";d=this.l10n.get(h,{limit:c})}else{var p="find_match_count";d=this.l10n.get(p,{current:a,total:l})}d.then((function(r){t.findResultsCount.textContent=r;_classPrivateMethodGet(t,o,_adjustWidth2).call(t)}))}},{key:"open",value:function open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();_classPrivateMethodGet(this,o,_adjustWidth2).call(this)}},{key:"close",value:function close(){if(this.opened){this.opened=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}}},{key:"toggle",value:function toggle(){this.opened?this.close():this.open()}}]);return PDFFindBar}();r.PDFFindBar=u;function _adjustWidth2(){if(this.opened){this.bar.classList.remove("wrapContainers");this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers")}}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFFindController=r.FindState=void 0;var a=i(4),o=i(18),u=i(3);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){var i=function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}(t,r,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var l={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};r.FindState=l;var c={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},d=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),h=function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(d.values()).map((function(t){return String.fromCharCode(t)})).join(""),p=/(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])+/g,v=/([\$\(-\+\.\?\[-\^\{-\}])|((?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))|([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|((?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]))|((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]))/g,y=/((?:(?![\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])[\s\S]))(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/,g=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*((?:(?![\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])[\s\S]))/,m=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,b=new Map,w=null,A=null;function normalize(t){for(var r,i,a=[];null!==(r=m.exec(t));){var o,u=r.index,l=_createForOfIteratorHelper(r[0]);try{for(l.s();!(o=l.n()).done;){var d=o.value,h=b.get(d);if(!h){h=d.normalize("NFD").length;b.set(d,h)}a.push([h,u++])}}catch(t){l.e(t)}finally{l.f()}}if(0===a.length&&w)i=w;else if(a.length>0&&A)i=A;else{var v=Object.keys(c).join(""),y="([".concat(v,"])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)");i=0===a.length?w=new RegExp(y+"|(\\u0000)","gum"):A=new RegExp(y+"|(".concat("[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",")"),"gum")}for(var g=[];null!==(r=p.exec(t));)g.push([r[0].length,r.index]);var P=t.normalize("NFD"),D=[[0,0]],E=0,S=0,C=0,k=0,x=0,T=!1;P=P.replace(i,(function(t,r,i,o,u,l,d){var h;d-=k;if(r){for(var p=c[t],v=p.length,y=1;y<v;y++)D.push([d-C+y,C-y]);C-=v-1;return p}if(i){var m,b=i.endsWith("\n"),w=b?i.length-2:i.length;T=!0;var A=w;if(d+x===(null===(m=g[E])||void 0===m?void 0:m[1])){A-=g[E][0];++E}for(var P=1;P<=A;P++)D.push([d-1-C+P,C-P]);C-=A;k+=A;if(b){d+=w-1;D.push([d-C+1,1+C]);C+=1;k+=1;x+=1;return i.slice(0,w)}return i}if(o){D.push([d-C+1,1+C]);C+=1;k+=1;x+=1;return o.charAt(0)}if(u){D.push([d-C+1,C-1]);C-=1;k+=1;x+=1;return" "}if(d+x===(null===(h=a[S])||void 0===h?void 0:h[1])){var I=a[S][0]-1;++S;for(var L=1;L<=I;L++)D.push([d-(C-L),C-L]);C-=I;k+=I}return l}));D.push([P.length,C]);return[P,D,T]}function getOriginalIndex(t,r,i){if(!t)return[r,i];var o=r,u=r+i,l=(0,a.binarySearchFirstItem)(t,(function(t){return t[0]>=o}));t[l][0]>o&&--l;var c=(0,a.binarySearchFirstItem)(t,(function(t){return t[0]>=u}),l);t[c][0]>u&&--c;return[o+t[l][1],i+t[c][1]-t[l][1]]}var P=new WeakSet,D=new WeakSet,E=new WeakMap,S=new WeakSet,C=new WeakSet,k=new WeakSet,x=new WeakSet,T=new WeakSet,I=new WeakSet,L=new WeakSet,O=new WeakSet,M=new WeakSet,R=new WeakSet,B=new WeakSet,G=new WeakSet,N=new WeakSet,j=new WeakSet,V=new WeakSet,W=new WeakSet,U=new WeakSet,H=function(){function PDFFindController(t){var r=t.linkService,i=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFindController);_classPrivateMethodInitSpec(this,U);_classPrivateMethodInitSpec(this,W);_classPrivateMethodInitSpec(this,V);_classPrivateMethodInitSpec(this,j);_classPrivateMethodInitSpec(this,N);_classPrivateMethodInitSpec(this,G);_classPrivateMethodInitSpec(this,B);_classPrivateMethodInitSpec(this,R);_classPrivateMethodInitSpec(this,M);_classPrivateMethodInitSpec(this,O);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,T);_classPrivateMethodInitSpec(this,x);_classPrivateMethodInitSpec(this,k);_classPrivateMethodInitSpec(this,C);_classPrivateMethodInitSpec(this,S);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(this,E,{get:_get_query,set:void 0});_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,P);this._linkService=r;this._eventBus=i;_classPrivateMethodGet(this,D,_reset2).call(this);i._on("find",_classPrivateMethodGet(this,P,_onFind2).bind(this));i._on("findbarclose",_classPrivateMethodGet(this,j,_onFindBarClose2).bind(this))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFFindController,[{key:"highlightMatches",get:function get(){return this._highlightMatches}},{key:"pageMatches",get:function get(){return this._pageMatches}},{key:"pageMatchesLength",get:function get(){return this._pageMatchesLength}},{key:"selected",get:function get(){return this._selected}},{key:"state",get:function get(){return this._state}},{key:"setDocument",value:function setDocument(t){this._pdfDocument&&_classPrivateMethodGet(this,D,_reset2).call(this);if(t){this._pdfDocument=t;this._firstPageCapability.resolve()}}},{key:"scrollMatchIntoView",value:function scrollMatchIntoView(t){var r=t.element,i=void 0===r?null:r,a=t.selectedLeft,o=void 0===a?0:a,l=t.pageIndex,c=void 0===l?-1:l,d=t.matchIndex,h=void 0===d?-1:d;if(this._scrollMatches&&i&&-1!==h&&h===this._selected.matchIdx&&-1!==c&&c===this._selected.pageIdx){this._scrollMatches=!1;var p={top:-50,left:o+-400};(0,u.scrollIntoView)(i,p,!0)}}}]);return PDFFindController}();r.PDFFindController=H;function _onFind2(t){var r=this;if(t){var i=this._pdfDocument,a=t.type;(null===this._state||_classPrivateMethodGet(this,S,_shouldDirtyMatch2).call(this,t))&&(this._dirtyMatch=!0);this._state=t;"highlightallchange"!==a&&_classPrivateMethodGet(this,U,_updateUIState2).call(this,l.PENDING);this._firstPageCapability.promise.then((function(){if(r._pdfDocument&&(!i||r._pdfDocument===i)){_classPrivateMethodGet(r,I,_extractText2).call(r);var t=!r._highlightMatches,o=!!r._findTimeout;if(r._findTimeout){clearTimeout(r._findTimeout);r._findTimeout=null}if(a)if(r._dirtyMatch)_classPrivateMethodGet(r,M,_nextMatch2).call(r);else if("again"===a){_classPrivateMethodGet(r,M,_nextMatch2).call(r);t&&r._state.highlightAll&&_classPrivateMethodGet(r,O,_updateAllPages2).call(r)}else if("highlightallchange"===a){o?_classPrivateMethodGet(r,M,_nextMatch2).call(r):r._highlightMatches=!0;_classPrivateMethodGet(r,O,_updateAllPages2).call(r)}else _classPrivateMethodGet(r,M,_nextMatch2).call(r);else r._findTimeout=setTimeout((function(){_classPrivateMethodGet(r,M,_nextMatch2).call(r);r._findTimeout=null}),250)}}))}}function _reset2(){this._highlightMatches=!1;this._scrollMatches=!1;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:!1};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._hasDiacritics=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=!1;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,a.createPromiseCapability)()}function _get_query(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;var t=_slicedToArray(normalize(this._state.query),1);this._normalizedQuery=t[0]}return this._normalizedQuery}function _shouldDirtyMatch2(t){if(t.query!==this._state.query)return!0;switch(t.type){case"again":var r=this._selected.pageIdx+1,i=this._linkService;return r>=1&&r<=i.pagesCount&&r!==i.page&&!i.isPageVisible(r);case"highlightallchange":return!1}return!0}function _isEntireWord2(t,r,i){var a=t.slice(0,r).match(y);if(a){var u=t.charCodeAt(r),l=a[1].charCodeAt(0);if((0,o.getCharacterType)(u)===(0,o.getCharacterType)(l))return!1}if(a=t.slice(r+i).match(g)){var c=t.charCodeAt(r+i-1),d=a[1].charCodeAt(0);if((0,o.getCharacterType)(c)===(0,o.getCharacterType)(d))return!1}return!0}function _calculateRegExpMatch2(t,r,i,a){for(var o,u=[],l=[],c=this._pageDiffs[i];null!==(o=t.exec(a));)if(!r||_classPrivateMethodGet(this,C,_isEntireWord2).call(this,a,o.index,o[0].length)){var d=_slicedToArray(getOriginalIndex(c,o.index,o[0].length),2),h=d[0],p=d[1];if(p){u.push(h);l.push(p)}}this._pageMatches[i]=u;this._pageMatchesLength[i]=l}function _convertToRegExpString2(t,r){var i=this._state.matchDiacritics,a=!1,o="[ ]*";(t=t.replace(v,(function(t,o,u,l,c,h){if(o)return"[ ]*\\".concat(o,"[ ]*");if(u)return"[ ]*".concat(u,"[ ]*");if(l)return"[ ]+";if(i)return c||h;if(c)return d.has(c.charCodeAt(0))?c:"";if(r){a=!0;return"".concat(h,"\\p{M}*")}return h}))).endsWith(o)&&(t=t.slice(0,t.length-o.length));if(i&&r){a=!0;t="".concat(t,"(?=[").concat(h,"]|[^\\p{M}]|$)")}return[a,t]}function _calculateMatch2(t){var r=this,i=_classPrivateFieldGet(this,E);if(0!==i.length){var a=this._state,o=a.caseSensitive,u=a.entireWord,l=a.phraseSearch,c=this._pageContents[t],d=this._hasDiacritics[t],h=!1;if(l){var p=_slicedToArray(_classPrivateMethodGet(this,x,_convertToRegExpString2).call(this,i,d),2);h=p[0];i=p[1]}else{var v=i.match(/\S+/g);v&&(i=v.sort().reverse().map((function(t){var i=_slicedToArray(_classPrivateMethodGet(r,x,_convertToRegExpString2).call(r,t,d),2),a=i[0],o=i[1];h||(h=a);return"(".concat(o,")")})).join("|"))}var y="g".concat(h?"u":"").concat(o?"":"i");i=new RegExp(i,y);_classPrivateMethodGet(this,k,_calculateRegExpMatch2).call(this,i,u,t,c);this._state.highlightAll&&_classPrivateMethodGet(this,L,_updatePage2).call(this,t);if(this._resumePageIdx===t){this._resumePageIdx=null;_classPrivateMethodGet(this,B,_nextPageMatch2).call(this)}var g=this._pageMatches[t].length;if(g>0){this._matchesCountTotal+=g;_classPrivateMethodGet(this,W,_updateUIResultsCount2).call(this)}}}function _extractText2(){var t=this;if(!(this._extractTextPromises.length>0))for(var r=Promise.resolve(),i=function _loop(i,o){var u=(0,a.createPromiseCapability)();t._extractTextPromises[i]=u.promise;r=r.then((function(){return t._pdfDocument.getPage(i+1).then((function(t){return t.getTextContent()})).then((function(r){var a,o=[],l=_createForOfIteratorHelper(r.items);try{for(l.s();!(a=l.n()).done;){var c=a.value;o.push(c.str);c.hasEOL&&o.push("\n")}}catch(t){l.e(t)}finally{l.f()}var d=_slicedToArray(normalize(o.join("")),3);t._pageContents[i]=d[0];t._pageDiffs[i]=d[1];t._hasDiacritics[i]=d[2];u.resolve()}),(function(r){console.error("Unable to get text content for page ".concat(i+1),r);t._pageContents[i]="";t._pageDiffs[i]=null;t._hasDiacritics[i]=!1;u.resolve()}))}))},o=0,u=this._linkService.pagesCount;o<u;o++)i(o)}function _updatePage2(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1);this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}function _updateAllPages2(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function _nextMatch2(){var t=this,r=this._state.findPrevious,i=this._linkService.page-1,a=this._linkService.pagesCount;this._highlightMatches=!0;if(this._dirtyMatch){this._dirtyMatch=!1;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=i;this._offset.matchIdx=null;this._offset.wrapped=!1;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._matchesCountTotal=0;_classPrivateMethodGet(this,O,_updateAllPages2).call(this);for(var o=function _loop2(r){if(t._pendingFindMatches.has(r))return"continue";t._pendingFindMatches.add(r);t._extractTextPromises[r].then((function(){t._pendingFindMatches.delete(r);_classPrivateMethodGet(t,T,_calculateMatch2).call(t,r)}))},u=0;u<a;u++)o(u)}if(""!==_classPrivateFieldGet(this,E)){if(!this._resumePageIdx){var c=this._offset;this._pagesToSearch=a;if(null!==c.matchIdx){var d=this._pageMatches[c.pageIdx].length;if(!r&&c.matchIdx+1<d||r&&c.matchIdx>0){c.matchIdx=r?c.matchIdx-1:c.matchIdx+1;_classPrivateMethodGet(this,N,_updateMatch2).call(this,!0);return}_classPrivateMethodGet(this,G,_advanceOffsetPage2).call(this,r)}_classPrivateMethodGet(this,B,_nextPageMatch2).call(this)}}else _classPrivateMethodGet(this,U,_updateUIState2).call(this,l.FOUND)}function _matchesReady2(t){var r=this._offset,i=t.length,a=this._state.findPrevious;if(i){r.matchIdx=a?i-1:0;_classPrivateMethodGet(this,N,_updateMatch2).call(this,!0);return!0}_classPrivateMethodGet(this,G,_advanceOffsetPage2).call(this,a);if(r.wrapped){r.matchIdx=null;if(this._pagesToSearch<0){_classPrivateMethodGet(this,N,_updateMatch2).call(this,!1);return!0}}return!1}function _nextPageMatch2(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var r=this._offset.pageIdx;if(!(t=this._pageMatches[r])){this._resumePageIdx=r;break}}while(!_classPrivateMethodGet(this,R,_matchesReady2).call(this,t))}function _advanceOffsetPage2(t){var r=this._offset,i=this._linkService.pagesCount;r.pageIdx=t?r.pageIdx-1:r.pageIdx+1;r.matchIdx=null;this._pagesToSearch--;if(r.pageIdx>=i||r.pageIdx<0){r.pageIdx=t?i-1:0;r.wrapped=!0}}function _updateMatch2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=l.NOT_FOUND,i=this._offset.wrapped;this._offset.wrapped=!1;if(t){var a=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;r=i?l.WRAPPED:l.FOUND;-1!==a&&a!==this._selected.pageIdx&&_classPrivateMethodGet(this,L,_updatePage2).call(this,a)}_classPrivateMethodGet(this,U,_updateUIState2).call(this,r,this._state.findPrevious);if(-1!==this._selected.pageIdx){this._scrollMatches=!0;_classPrivateMethodGet(this,L,_updatePage2).call(this,this._selected.pageIdx)}}function _onFindBarClose2(t){var r=this,i=this._pdfDocument;this._firstPageCapability.promise.then((function(){if(r._pdfDocument&&(!i||r._pdfDocument===i)){if(r._findTimeout){clearTimeout(r._findTimeout);r._findTimeout=null}if(r._resumePageIdx){r._resumePageIdx=null;r._dirtyMatch=!0}_classPrivateMethodGet(r,U,_updateUIState2).call(r,l.FOUND);r._highlightMatches=!1;_classPrivateMethodGet(r,O,_updateAllPages2).call(r)}}))}function _requestMatchesCount2(){var t=this._selected,r=t.pageIdx,i=t.matchIdx,a=0,o=this._matchesCountTotal;if(-1!==i){for(var u=0;u<r;u++){var l;a+=(null===(l=this._pageMatches[u])||void 0===l?void 0:l.length)||0}a+=i+1}(a<1||a>o)&&(a=o=0);return{current:a,total:o}}function _updateUIResultsCount2(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:_classPrivateMethodGet(this,V,_requestMatchesCount2).call(this)})}function _updateUIState2(t){var r,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:a,matchesCount:_classPrivateMethodGet(this,V,_requestMatchesCount2).call(this),rawQuery:null!==(r=null===(i=this._state)||void 0===i?void 0:i.query)&&void 0!==r?r:null})}},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.CharacterType=void 0;r.getCharacterType=function getCharacterType(t){if(function isAlphabeticalScript(t){return t<11904}(t))return function isAscii(t){return 0==(65408&t)}(t)?function isAsciiSpace(t){return 32===t||9===t||13===t||10===t}(t)?i.SPACE:function isAsciiAlpha(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function isAsciiDigit(t){return t>=48&&t<=57}(t)||95===t?i.ALPHA_LETTER:i.PUNCT:function isThai(t){return 3584==(65408&t)}(t)?i.THAI_LETTER:160===t?i.SPACE:i.ALPHA_LETTER;if(function isHan(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t))return i.HAN_LETTER;if(function isKatakana(t){return t>=12448&&t<=12543}(t))return i.KATAKANA_LETTER;if(function isHiragana(t){return t>=12352&&t<=12447}(t))return i.HIRAGANA_LETTER;if(function isHalfwidthKatakana(t){return t>=65376&&t<=65439}(t))return i.HALFWIDTH_KATAKANA_LETTER;return i.ALPHA_LETTER};var i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};r.CharacterType=i},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFHistory=void 0;r.isDestArraysEqual=isDestArraysEqual;r.isDestHashesEqual=isDestHashesEqual;var a=i(3),o=i(5);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function getCurrentHash(){return document.location.hash}var u=function(){function PDFHistory(t){var r=this,i=t.linkService,a=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFHistory);this.linkService=i;this.eventBus=a;this._initialized=!1;this._fingerprint="";this.reset();this._boundEvents=null;this.eventBus._on("pagesinit",(function(){r._isPagesLoaded=!1;r.eventBus._on("pagesloaded",(function(t){r._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFHistory,[{key:"initialize",value:function initialize(t){var r=t.fingerprint,i=t.resetHistory,a=void 0!==i&&i,o=t.updateUrl,u=void 0!==o&&o;if(r&&"string"==typeof r){this._initialized&&this.reset();var l=""!==this._fingerprint&&this._fingerprint!==r;this._fingerprint=r;this._updateUrl=!0===u;this._initialized=!0;this._bindEvents();var c=window.history.state;this._popStateInProgress=!1;this._blockHashChange=0;this._currentHash=getCurrentHash();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(this._isValidState(c,!0)&&!a){var d=c.destination;this._updateInternalState(d,c.uid,!0);void 0!==d.rotation&&(this._initialRotation=d.rotation);if(d.dest){this._initialBookmark=JSON.stringify(d.dest);this._destination.page=null}else d.hash?this._initialBookmark=d.hash:d.page&&(this._initialBookmark="page=".concat(d.page))}else{var h=this._parseCurrentHash(!0),p=h.hash,v=h.page,y=h.rotation;if(!p||l||a){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:p,page:v,rotation:y},!0)}}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function reset(){if(this._initialized){this._pageHide();this._initialized=!1;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}},{key:"push",value:function push(t){var r=this,i=t.namedDest,a=void 0===i?null:i,o=t.explicitDest,u=t.pageNumber;if(this._initialized)if(a&&"string"!=typeof a)console.error("PDFHistory.push: "+'"'.concat(a,'" is not a valid namedDest parameter.'));else if(Array.isArray(o))if(this._isValidPage(u)||null===u&&!this._destination){var l=a||JSON.stringify(o);if(l){var c=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,l)||isDestArraysEqual(this._destination.dest,o))){if(this._destination.page)return;c=!0}if(!this._popStateInProgress||c){this._pushOrReplaceState({dest:o,hash:l,page:u,rotation:this.linkService.rotation},c);if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((function(){r._popStateInProgress=!1}))}}}}else console.error("PDFHistory.push: "+'"'.concat(u,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(o,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function pushPage(t){var r,i=this;if(this._initialized)if(this._isValidPage(t)){if((null===(r=this._destination)||void 0===r?void 0:r.page)!==t&&!this._popStateInProgress){this._pushOrReplaceState({dest:null,hash:"page=".concat(t),page:t,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((function(){i._popStateInProgress=!1}))}}}else console.error('PDFHistory.pushPage: "'.concat(t,'" is not a valid page number.'))}},{key:"pushCurrentPosition",value:function pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function back(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function forward(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function get(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function get(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function get(){return this._initialized?this._initialRotation:null}},{key:"_pushOrReplaceState",value:function _pushOrReplaceState(t){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i||!this._destination,o={fingerprint:this._fingerprint,uid:a?this._uid:this._uid+1,destination:t};this._updateInternalState(t,o.uid);if(this._updateUrl&&null!=t&&t.hash){var u=document.location.href.split("#")[0];u.startsWith("file://")||(r="".concat(u,"#").concat(t.hash))}a?window.history.replaceState(o,"",r):window.history.pushState(o,"",r)}},{key:"_tryPushCurrentPosition",value:function _tryPushCurrentPosition(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var r=this._position;t&&((r=Object.assign(Object.create(null),this._position)).temporary=!0);if(this._destination){if(this._destination.temporary)this._pushOrReplaceState(r,!0);else if(this._destination.hash!==r.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var i=!1;if(this._destination.page>=r.first&&this._destination.page<=r.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this._pushOrReplaceState(r,i)}}else this._pushOrReplaceState(r)}}},{key:"_isValidPage",value:function _isValidPage(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}},{key:"_isValidState",value:function _isValidState(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!r)return!1;if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;var i=performance.getEntriesByType("navigation"),a=_slicedToArray(i,1),o=a[0];if("reload"!==(null==o?void 0:o.type))return!1}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"===_typeof(t.destination))}},{key:"_updateInternalState",value:function _updateInternalState(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}i&&null!=t&&t.temporary&&delete t.temporary;this._destination=t;this._uid=r;this._maxUid=Math.max(this._maxUid,r);this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function _parseCurrentHash(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=unescape(getCurrentHash()).substring(1),i=(0,a.parseQueryString)(r),o=i.get("nameddest")||"",u=0|i.get("page");(!this._isValidPage(u)||t&&o.length>0)&&(u=null);return{hash:r,page:u,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function _updateViewarea(t){var r=this,i=t.location;if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:i.pdfOpenParams.substring(1),page:this.linkService.page,first:i.pageNumber,rotation:i.rotation};if(!this._popStateInProgress){this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++;this._updateViewareaTimeout=setTimeout((function(){r._popStateInProgress||r._tryPushCurrentPosition(!0);r._updateViewareaTimeout=null}),1e3)}}},{key:"_popState",value:function _popState(t){var r=this,i=t.state,u=getCurrentHash(),l=this._currentHash!==u;this._currentHash=u;if(i){if(this._isValidState(i)){this._popStateInProgress=!0;if(l){this._blockHashChange++;(0,o.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((function(){r._blockHashChange--}))}var c=i.destination;this._updateInternalState(c,i.uid,!0);(0,a.isValidRotation)(c.rotation)&&(this.linkService.rotation=c.rotation);c.dest?this.linkService.goToDestination(c.dest):c.hash?this.linkService.setHash(c.hash):c.page&&(this.linkService.page=c.page);Promise.resolve().then((function(){r._popStateInProgress=!1}))}}else{this._uid++;var d=this._parseCurrentHash(),h=d.hash,p=d.page,v=d.rotation;this._pushOrReplaceState({hash:h,page:p,rotation:v},!0)}}},{key:"_pageHide",value:function _pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function _bindEvents(){if(!this._boundEvents){this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}}},{key:"_unbindEvents",value:function _unbindEvents(){if(this._boundEvents){this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}}]);return PDFHistory}();r.PDFHistory=u;function isDestHashesEqual(t,r){return"string"==typeof t&&"string"==typeof r&&(t===r||(0,a.parseQueryString)(t).get("nameddest")===r)}function isDestArraysEqual(t,r){function isEntryEqual(t,r){if(_typeof(t)!==_typeof(r))return!1;if(Array.isArray(t)||Array.isArray(r))return!1;if(null!==t&&"object"===_typeof(t)&&null!==r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(var i in t)if(!isEntryEqual(t[i],r[i]))return!1;return!0}return t===r||Number.isNaN(t)&&Number.isNaN(r)}if(!Array.isArray(t)||!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(var i=0,a=t.length;i<a;i++)if(!isEntryEqual(t[i],r[i]))return!1;return!0}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFLayerViewer=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var a=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PDFLayerViewer,t);var r,i,a=_createSuper(PDFLayerViewer);function PDFLayerViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFLayerViewer);(r=a.call(this,t)).l10n=t.l10n;r.eventBus._on("resetlayers",r._resetLayers.bind(_assertThisInitialized(r)));r.eventBus._on("togglelayerstree",r._toggleAllTreeItems.bind(_assertThisInitialized(r)));return r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFLayerViewer,[{key:"reset",value:function reset(){_get(_getPrototypeOf(PDFLayerViewer.prototype),"reset",this).call(this);this._optionalContentConfig=null}},{key:"_dispatchEvent",value:function _dispatchEvent(t){this.eventBus.dispatch("layersloaded",{source:this,layersCount:t})}},{key:"_bindLink",value:function _bindLink(t,r){var i=this,a=r.groupId,o=r.input,u=function setVisibility(){i._optionalContentConfig.setVisibility(a,o.checked);i.eventBus.dispatch("optionalcontentconfig",{source:i,promise:Promise.resolve(i._optionalContentConfig)})};t.onclick=function(r){if(r.target===o){u();return!0}if(r.target!==t)return!0;o.checked=!o.checked;u();return!1}}},{key:"_setNestedName",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t,r){var i,a;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:i=r.name;if("string"!=typeof(a=void 0===i?null:i)){o.next=4;break}t.textContent=this._normalizeTextContent(a);return o.abrupt("return");case 4:o.next=6;return this.l10n.get("additional_layers");case 6:t.textContent=o.sent;t.style.fontStyle="italic";case 8:case"end":return o.stop()}}),_callee,this)}))),function _setNestedName(t,r){return i.apply(this,arguments)})},{key:"_addToggleButton",value:function _addToggleButton(t,r){var i=r.name,a=void 0===i?null:i;_get(_getPrototypeOf(PDFLayerViewer.prototype),"_addToggleButton",this).call(this,t,null===a)}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._optionalContentConfig&&_get(_getPrototypeOf(PDFLayerViewer.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function render(t){var r=t.optionalContentConfig,i=t.pdfDocument;this._optionalContentConfig&&this.reset();this._optionalContentConfig=r||null;this._pdfDocument=i||null;var a=null==r?void 0:r.getOrder();if(a){for(var o=document.createDocumentFragment(),u=[{parent:o,groups:a}],l=0,c=!1;u.length>0;){var d,h=u.shift(),p=_createForOfIteratorHelper(h.groups);try{for(p.s();!(d=p.n()).done;){var v=d.value,y=document.createElement("div");y.className="treeItem";var g=document.createElement("a");y.append(g);if("object"===_typeof(v)){c=!0;this._addToggleButton(y,v);this._setNestedName(g,v);var m=document.createElement("div");m.className="treeItems";y.append(m);u.push({parent:m,groups:v.order})}else{var b=r.getGroup(v),w=document.createElement("input");this._bindLink(g,{groupId:v,input:w});w.type="checkbox";w.checked=b.visible;var A=document.createElement("label");A.textContent=this._normalizeTextContent(b.name);A.append(w);g.append(A);l++}h.parent.append(y)}}catch(t){p.e(t)}finally{p.f()}}this._finishRendering(o,l,c)}else this._dispatchEvent(0)}},{key:"_resetLayers",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t;return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(this._optionalContentConfig){r.next=2;break}return r.abrupt("return");case 2:r.next=4;return this._pdfDocument.getOptionalContentConfig();case 4:t=r.sent;this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(t)});this.render({optionalContentConfig:t,pdfDocument:this._pdfDocument});case 7:case"end":return r.stop()}}),_callee2,this)}))),function _resetLayers(){return r.apply(this,arguments)})}]);return PDFLayerViewer}(i(14).BaseTreeViewer);r.PDFLayerViewer=a},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFOutlineViewer=void 0;var a=i(14),o=i(4),u=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PDFOutlineViewer,t);var r,i,a=_createSuper(PDFOutlineViewer);function PDFOutlineViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFOutlineViewer);(r=a.call(this,t)).linkService=t.linkService;r.eventBus._on("toggleoutlinetree",r._toggleAllTreeItems.bind(_assertThisInitialized(r)));r.eventBus._on("currentoutlineitem",r._currentOutlineItem.bind(_assertThisInitialized(r)));r.eventBus._on("pagechanging",(function(t){r._currentPageNumber=t.pageNumber}));r.eventBus._on("pagesloaded",(function(t){r._isPagesLoaded=!!t.pagesCount;r._currentOutlineItemCapability&&!r._currentOutlineItemCapability.settled&&r._currentOutlineItemCapability.resolve(r._isPagesLoaded)}));r.eventBus._on("sidebarviewchanged",(function(t){r._sidebarView=t.view}));return r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFOutlineViewer,[{key:"reset",value:function reset(){_get(_getPrototypeOf(PDFOutlineViewer.prototype),"reset",this).call(this);this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=null;this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1);this._currentOutlineItemCapability=null}},{key:"_dispatchEvent",value:function _dispatchEvent(t){var r;this._currentOutlineItemCapability=(0,o.createPromiseCapability)();0===t||null!==(r=this._pdfDocument)&&void 0!==r&&r.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):null!==this._isPagesLoaded&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded);this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:t,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}},{key:"_bindLink",value:function _bindLink(t,r){var i=this,a=r.url,o=r.newWindow,u=r.dest,l=this.linkService;if(a)l.addLinkAttributes(t,a,o);else{t.href=l.getDestinationHash(u);t.onclick=function(t){i._updateCurrentTreeItem(t.target.parentNode);u&&l.goToDestination(u);return!1}}}},{key:"_setStyles",value:function _setStyles(t,r){var i=r.bold,a=r.italic;i&&(t.style.fontWeight="bold");a&&(t.style.fontStyle="italic")}},{key:"_addToggleButton",value:function _addToggleButton(t,r){var i=r.count,a=r.items,o=!1;if(i<0){var u=a.length;if(u>0)for(var l=_toConsumableArray(a);l.length>0;){var c=l.shift(),d=c.count,h=c.items;if(d>0&&h.length>0){u+=h.length;l.push.apply(l,_toConsumableArray(h))}}Math.abs(i)===u&&(o=!0)}_get(_getPrototypeOf(PDFOutlineViewer.prototype),"_addToggleButton",this).call(this,t,o)}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._outline&&_get(_getPrototypeOf(PDFOutlineViewer.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function render(t){var r=t.outline,i=t.pdfDocument;this._outline&&this.reset();this._outline=r||null;this._pdfDocument=i||null;if(r){for(var a=document.createDocumentFragment(),o=[{parent:a,items:r}],u=0,l=!1;o.length>0;){var c,d=o.shift(),h=_createForOfIteratorHelper(d.items);try{for(h.s();!(c=h.n()).done;){var p=c.value,v=document.createElement("div");v.className="treeItem";var y=document.createElement("a");this._bindLink(y,p);this._setStyles(y,p);y.textContent=this._normalizeTextContent(p.title);v.append(y);if(p.items.length>0){l=!0;this._addToggleButton(v,p);var g=document.createElement("div");g.className="treeItems";v.append(g);o.push({parent:g,items:p.items})}d.parent.append(v);u++}}catch(t){h.e(t)}finally{h.f()}}this._finishRendering(a,u,l)}else this._dispatchEvent(0)}},{key:"_currentOutlineItem",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(this._isPagesLoaded){o.next=2;break}throw new Error("_currentOutlineItem: All pages have not been loaded.");case 2:if(this._outline&&this._pdfDocument){o.next=4;break}return o.abrupt("return");case 4:o.next=6;return this._getPageNumberToDestHash(this._pdfDocument);case 6:if(t=o.sent){o.next=9;break}return o.abrupt("return");case 9:this._updateCurrentTreeItem(null);if(this._sidebarView===u.SidebarView.OUTLINE){o.next=12;break}return o.abrupt("return");case 12:r=this._currentPageNumber;case 13:if(!(r>0)){o.next=25;break}if(i=t.get(r)){o.next=17;break}return o.abrupt("continue",22);case 17:if(a=this.container.querySelector('a[href="'.concat(i,'"]'))){o.next=20;break}return o.abrupt("continue",22);case 20:this._scrollToCurrentTreeItem(a.parentNode);return o.abrupt("break",25);case 22:r--;o.next=13;break;case 25:case"end":return o.stop()}}),_callee,this)}))),function _currentOutlineItem(){return i.apply(this,arguments)})},{key:"_getPageNumberToDestHash",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i,a,u,l,c,d,h,p,v,y,g,m,b,w;return _regeneratorRuntime().wrap((function _callee2$(A){for(;;)switch(A.prev=A.next){case 0:if(!this._pageNumberToDestHashCapability){A.next=2;break}return A.abrupt("return",this._pageNumberToDestHashCapability.promise);case 2:this._pageNumberToDestHashCapability=(0,o.createPromiseCapability)();r=new Map,i=new Map;a=[{nesting:0,items:this._outline}];case 5:if(!(a.length>0)){A.next=56;break}u=a.shift(),l=u.nesting;c=_createForOfIteratorHelper(u.items);A.prev=8;c.s();case 10:if((d=c.n()).done){A.next=46;break}h=d.value,p=h.dest,v=h.items;y=void 0,g=void 0;if("string"!=typeof p){A.next=21;break}A.next=16;return t.getDestination(p);case 16:y=A.sent;if(t===this._pdfDocument){A.next=19;break}return A.abrupt("return",null);case 19:A.next=22;break;case 21:y=p;case 22:if(!Array.isArray(y)){A.next=43;break}m=_slicedToArray(y,1);if("object"!==_typeof(b=m[0])||null===b){A.next=41;break}if(g=this.linkService._cachedPageNumber(b)){A.next=39;break}A.prev=27;A.next=30;return t.getPageIndex(b);case 30:A.t0=A.sent;g=A.t0+1;if(t===this._pdfDocument){A.next=34;break}return A.abrupt("return",null);case 34:this.linkService.cachePageRef(g,b);A.next=39;break;case 37:A.prev=37;A.t1=A.catch(27);case 39:A.next=42;break;case 41:Number.isInteger(b)&&(g=b+1);case 42:if(Number.isInteger(g)&&(!r.has(g)||l>i.get(g))){w=this.linkService.getDestinationHash(p);r.set(g,w);i.set(g,l)}case 43:v.length>0&&a.push({nesting:l+1,items:v});case 44:A.next=10;break;case 46:A.next=51;break;case 48:A.prev=48;A.t2=A.catch(8);c.e(A.t2);case 51:A.prev=51;c.f();return A.finish(51);case 54:A.next=5;break;case 56:this._pageNumberToDestHashCapability.resolve(r.size>0?r:null);return A.abrupt("return",this._pageNumberToDestHashCapability.promise);case 58:case"end":return A.stop()}}),_callee2,this,[[8,48,51,54],[27,37]])}))),function _getPageNumberToDestHash(t){return r.apply(this,arguments)})}]);return PDFOutlineViewer}(a.BaseTreeViewer);r.PDFOutlineViewer=l},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFPresentationMode=void 0;var a=i(3),o=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var u="pdfPresentationMode",l="pdfPresentationModeControls",c=Math.PI/6,d=new WeakMap,h=new WeakMap,p=new WeakSet,v=new WeakSet,y=new WeakSet,g=new WeakSet,m=new WeakSet,b=new WeakSet,w=new WeakSet,A=new WeakSet,P=new WeakSet,D=new WeakSet,E=new WeakSet,S=new WeakSet,C=new WeakSet,k=new WeakSet,x=new WeakSet,T=function(){function PDFPresentationMode(t){var r=t.container,i=t.pdfViewer,o=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFPresentationMode);_classPrivateMethodInitSpec(this,x);_classPrivateMethodInitSpec(this,k);_classPrivateMethodInitSpec(this,C);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,E);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,P);_classPrivateMethodInitSpec(this,A);_classPrivateMethodInitSpec(this,w);_classPrivateMethodInitSpec(this,b);_classPrivateMethodInitSpec(this,m);_classPrivateMethodInitSpec(this,g);_classPrivateMethodInitSpec(this,y);_classPrivateMethodInitSpec(this,v);_classPrivateMethodInitSpec(this,p);_classPrivateFieldInitSpec(this,d,{writable:!0,value:a.PresentationModeState.UNKNOWN});_classPrivateFieldInitSpec(this,h,{writable:!0,value:null});this.container=r;this.pdfViewer=i;this.eventBus=o;this.contextMenuOpen=!1;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null;this.fullscreen=!1;this.scrollLocation=0}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFPresentationMode,[{key:"toggleFullscreen",value:function toggleFullscreen(t){t||(t=window.parent);var r=this._getQueryVariable("container")||"d2l-fileviewer-rendered-pdf",i=this._getQueryVariable("fullscreen")||"d2l-fileviewer-rendered-pdf-fullscreen",a=t.document.getElementsByClassName(r);if(a&&0!==a.length){var o=a[0];if(this.fullscreen){o.className=o.className.replace(" "+i,"");t.document.documentElement.style.overflow="auto";t.document.body.style.overflow="hidden";t.scrollTo(0,this.scrollLocation);this.fullscreen=!1}else{o.className=o.className+" "+i;t.document.documentElement.style.overflow="hidden";this.scrollLocation=(t.pageYOffset||t.document.scrollTop)-(t.document.clientTop||0);t.scrollTo(0,0);this.fullscreen=!0}}else console.warn("Unable to locate document viewer's parent container. Fullscreen mode will not function at this time.")}},{key:"_getQueryVariable",value:function _getQueryVariable(t){for(var r=window.location.search.substring(1).split("&"),i=0;i<r.length;i++){var a=r[i].split("=");if(a[0]==t)return a[1]}return!1}},{key:"request",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){var t,r,i;return _regeneratorRuntime().wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:t=this.container,r=this.pdfViewer;if(!this.active&&r.pagesCount&&t.requestFullscreen){u.next=3;break}return u.abrupt("return",!1);case 3:_classPrivateMethodGet(this,k,_addFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,v,_notifyStateChange2).call(this,a.PresentationModeState.CHANGING);i=t.requestFullscreen();_classPrivateFieldSet(this,h,{pageNumber:r.currentPageNumber,scaleValue:r.currentScaleValue,scrollMode:r.scrollMode,spreadMode:null,annotationEditorMode:null});if(!(r.spreadMode===a.SpreadMode.NONE||r.pageViewsReady&&r.hasEqualPageSizes)){console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes.");_classPrivateFieldGet(this,h).spreadMode=r.spreadMode}r.annotationEditorMode!==o.AnnotationEditorType.DISABLE&&(_classPrivateFieldGet(this,h).annotationEditorMode=r.annotationEditorMode);u.prev=9;u.next=12;return i;case 12:return u.abrupt("return",!0);case 15:u.prev=15;u.t0=u.catch(9);_classPrivateMethodGet(this,x,_removeFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,v,_notifyStateChange2).call(this,a.PresentationModeState.NORMAL);case 19:return u.abrupt("return",!1);case 20:case"end":return u.stop()}}),_callee,this,[[9,15]])}))),function request(){return t.apply(this,arguments)})},{key:"active",get:function get(){return _classPrivateFieldGet(this,d)===a.PresentationModeState.CHANGING||_classPrivateFieldGet(this,d)===a.PresentationModeState.FULLSCREEN}}]);var t;return PDFPresentationMode}();r.PDFPresentationMode=T;function _mouseWheel2(t){if(this.active){t.preventDefault();var r=(0,a.normalizeWheelEventDelta)(t),i=Date.now(),o=this.mouseScrollTimeStamp;if(!(i>o&&i-o<50)){(this.mouseScrollDelta>0&&r<0||this.mouseScrollDelta<0&&r>0)&&_classPrivateMethodGet(this,P,_resetMouseScrollState2).call(this);this.mouseScrollDelta+=r;if(Math.abs(this.mouseScrollDelta)>=.1){var u=this.mouseScrollDelta;_classPrivateMethodGet(this,P,_resetMouseScrollState2).call(this);(u>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=i)}}}}function _notifyStateChange2(t){_classPrivateFieldSet(this,d,t);this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})}function _enter2(){var t=this;_classPrivateMethodGet(this,v,_notifyStateChange2).call(this,a.PresentationModeState.FULLSCREEN);this.container.classList.add(u);setTimeout((function(){t.pdfViewer.scrollMode=a.ScrollMode.PAGE;null!==_classPrivateFieldGet(t,h).spreadMode&&(t.pdfViewer.spreadMode=a.SpreadMode.NONE);t.pdfViewer.currentPageNumber=_classPrivateFieldGet(t,h).pageNumber;t.pdfViewer.currentScaleValue="page-fit";null!==_classPrivateFieldGet(t,h).annotationEditorMode&&(t.pdfViewer.annotationEditorMode=o.AnnotationEditorType.NONE)}),0);_classPrivateMethodGet(this,E,_addWindowListeners2).call(this);_classPrivateMethodGet(this,w,_showControls2).call(this);this.contextMenuOpen=!1;window.getSelection().removeAllRanges()}function _exit2(){var t=this,r=this.pdfViewer.currentPageNumber;this.container.classList.remove(u);setTimeout((function(){_classPrivateMethodGet(t,x,_removeFullscreenChangeListeners2).call(t);_classPrivateMethodGet(t,v,_notifyStateChange2).call(t,a.PresentationModeState.NORMAL);t.pdfViewer.scrollMode=_classPrivateFieldGet(t,h).scrollMode;null!==_classPrivateFieldGet(t,h).spreadMode&&(t.pdfViewer.spreadMode=_classPrivateFieldGet(t,h).spreadMode);t.pdfViewer.currentScaleValue=_classPrivateFieldGet(t,h).scaleValue;t.pdfViewer.currentPageNumber=r;null!==_classPrivateFieldGet(t,h).annotationEditorMode&&(t.pdfViewer.annotationEditorMode=_classPrivateFieldGet(t,h).annotationEditorMode);_classPrivateFieldSet(t,h,null)}),0);_classPrivateMethodGet(this,S,_removeWindowListeners2).call(this);_classPrivateMethodGet(this,A,_hideControls2).call(this);_classPrivateMethodGet(this,P,_resetMouseScrollState2).call(this);this.contextMenuOpen=!1}function _mouseDown2(t){if(this.contextMenuOpen){this.contextMenuOpen=!1;t.preventDefault()}else if(0===t.button){if(!(t.target.href&&t.target.classList.contains("internalLink"))){t.preventDefault();t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()}}}function _contextMenu2(){this.contextMenuOpen=!0}function _showControls2(){var t=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(l);this.controlsTimeout=setTimeout((function(){t.container.classList.remove(l);delete t.controlsTimeout}),3e3)}function _hideControls2(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout);this.container.classList.remove(l);delete this.controlsTimeout}}function _resetMouseScrollState2(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}function _touchSwipe2(t){if(this.active)if(t.touches.length>1)this.touchSwipeState=null;else switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=t.touches[0].pageX;this.touchSwipeState.endY=t.touches[0].pageY;t.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;var r=0,i=this.touchSwipeState.endX-this.touchSwipeState.startX,a=this.touchSwipeState.endY-this.touchSwipeState.startY,o=Math.abs(Math.atan2(a,i));Math.abs(i)>50&&(o<=c||o>=Math.PI-c)?r=i:Math.abs(a)>50&&Math.abs(o-Math.PI/2)<=c&&(r=a);r>0?this.pdfViewer.previousPage():r<0&&this.pdfViewer.nextPage()}}function _addWindowListeners2(){this.showControlsBind=_classPrivateMethodGet(this,w,_showControls2).bind(this);this.mouseDownBind=_classPrivateMethodGet(this,m,_mouseDown2).bind(this);this.mouseWheelBind=_classPrivateMethodGet(this,p,_mouseWheel2).bind(this);this.resetMouseScrollStateBind=_classPrivateMethodGet(this,P,_resetMouseScrollState2).bind(this);this.contextMenuBind=_classPrivateMethodGet(this,b,_contextMenu2).bind(this);this.touchSwipeBind=_classPrivateMethodGet(this,D,_touchSwipe2).bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:!1});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}function _removeWindowListeners2(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}function _fullscreenChange2(){document.fullscreenElement?_classPrivateMethodGet(this,y,_enter2).call(this):_classPrivateMethodGet(this,g,_exit2).call(this)}function _addFullscreenChangeListeners2(){this.fullscreenChangeBind=_classPrivateMethodGet(this,C,_fullscreenChange2).bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind)}function _removeFullscreenChangeListeners2(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFRenderingQueue=void 0;var a=i(4),o=i(3);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var u=function(){function PDFRenderingQueue(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFRenderingQueue);this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=!1;this.isThumbnailViewEnabled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFRenderingQueue,[{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function setThumbnailViewer(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function isHighestPriority(t){return this.highestPriorityPage===t.renderingId}},{key:"hasViewer",value:function hasViewer(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:function renderHighestPriority(t){var r;if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&null!==(r=this.pdfThumbnailViewer)&&void 0!==r&&r.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function getHighestPriority(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.views,u=o.length;if(0===u)return null;for(var l=0;l<u;l++){var c=o[l].view;if(!this.isViewFinished(c))return c}var d=t.first.id,h=t.last.id;if(h-d+1>u)for(var p=t.ids,v=1,y=h-d;v<y;v++){var g=i?d+v:h-v;if(!p.has(g)){var m=r[g-1];if(!this.isViewFinished(m))return m}}var b=i?h:d-2,w=r[b];return w&&!this.isViewFinished(w)||a&&(w=r[b+=i?1:-1])&&!this.isViewFinished(w)?w:null}},{key:"isViewFinished",value:function isViewFinished(t){return t.renderingState===o.RenderingStates.FINISHED}},{key:"renderView",value:function renderView(t){var r=this;switch(t.renderingState){case o.RenderingStates.FINISHED:return!1;case o.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId;t.resume();break;case o.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case o.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId;t.draw().finally((function(){r.renderHighestPriority()})).catch((function(t){t instanceof a.RenderingCancelledException||console.error('renderView: "'.concat(t,'"'))}))}return!0}}]);return PDFRenderingQueue}();r.PDFRenderingQueue=u},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFScriptingManager=void 0;var a=i(3),o=i(4);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var u=function(){function PDFScriptingManager(t){var r=t.eventBus,i=t.sandboxBundleSrc,a=void 0===i?null:i,o=t.scriptingFactory,u=void 0===o?null:o,l=t.docPropertiesLookup,c=void 0===l?null:l;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFScriptingManager);this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._mouseState=Object.create(null);this._ready=!1;this._eventBus=r;this._sandboxBundleSrc=a;this._scriptingFactory=u;this._docPropertiesLookup=c}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFScriptingManager,[{key:"setViewer",value:function setViewer(t){this._pdfViewer=t}},{key:"setDocument",value:(v=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i,a,o,u,l,c,d,h,p,v,y,g,m,b,w,A,P=this;return _regeneratorRuntime().wrap((function _callee2$(D){for(;;)switch(D.prev=D.next){case 0:if(!this._pdfDocument){D.next=3;break}D.next=3;return this._destroyScripting();case 3:this._pdfDocument=t;if(t){D.next=6;break}return D.abrupt("return");case 6:D.next=8;return Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);case 8:i=D.sent;a=_slicedToArray(i,3);o=a[0];u=a[1];l=a[2];if(o||l){D.next=17;break}D.next=16;return this._destroyScripting();case 16:return D.abrupt("return");case 17:if(t===this._pdfDocument){D.next=19;break}return D.abrupt("return");case 19:D.prev=19;this._scripting=this._createScripting();D.next=29;break;case 23:D.prev=23;D.t0=D.catch(19);console.error('PDFScriptingManager.setDocument: "'.concat(null===D.t0||void 0===D.t0?void 0:D.t0.message,'".'));D.next=28;return this._destroyScripting();case 28:return D.abrupt("return");case 29:this._internalEvents.set("updatefromsandbox",(function(t){(null==t?void 0:t.source)===window&&P._updateFromSandbox(t.detail)}));this._internalEvents.set("dispatcheventinsandbox",(function(t){var r;null===(r=P._scripting)||void 0===r||r.dispatchEventInSandbox(t.detail)}));this._internalEvents.set("pagechanging",(function(t){var r=t.pageNumber,i=t.previous;if(r!==i){P._dispatchPageClose(i);P._dispatchPageOpen(r)}}));this._internalEvents.set("pagerendered",(function(t){var r=t.pageNumber;P._pageOpenPending.has(r)&&r===P._pdfViewer.currentPageNumber&&P._dispatchPageOpen(r)}));this._internalEvents.set("pagesdestroy",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i;return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return P._dispatchPageClose(P._pdfViewer.currentPageNumber);case 2:t.next=4;return null===(r=P._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillClose"});case 4:null===(i=P._closeCapability)||void 0===i||i.resolve();case 5:case"end":return t.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}());this._domEvents.set("mousedown",(function(t){P._mouseState.isDown=!0}));this._domEvents.set("mouseup",(function(t){P._mouseState.isDown=!1}));c=_createForOfIteratorHelper(this._internalEvents);try{for(c.s();!(d=c.n()).done;){h=_slicedToArray(d.value,2),p=h[0],v=h[1];this._eventBus._on(p,v)}}catch(t){c.e(t)}finally{c.f()}y=_createForOfIteratorHelper(this._domEvents);try{for(y.s();!(g=y.n()).done;){m=_slicedToArray(g.value,2),b=m[0],w=m[1];window.addEventListener(b,w,!0)}}catch(t){y.e(t)}finally{y.f()}D.prev=40;D.next=43;return this._getDocProperties();case 43:A=D.sent;if(t===this._pdfDocument){D.next=46;break}return D.abrupt("return");case 46:D.next=48;return this._scripting.createSandbox({objects:o,calculationOrder:u,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:_objectSpread(_objectSpread({},A),{},{actions:l})});case 48:this._eventBus.dispatch("sandboxcreated",{source:this});D.next=57;break;case 51:D.prev=51;D.t1=D.catch(40);console.error('PDFScriptingManager.setDocument: "'.concat(null===D.t1||void 0===D.t1?void 0:D.t1.message,'".'));D.next=56;return this._destroyScripting();case 56:return D.abrupt("return");case 57:D.next=59;return null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"Open"});case 59:D.next=61;return this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);case 61:Promise.resolve().then((function(){t===P._pdfDocument&&(P._ready=!0)}));case 62:case"end":return D.stop()}}),_callee2,this,[[19,23],[40,51]])}))),function setDocument(t){return v.apply(this,arguments)})},{key:"dispatchWillSave",value:(p=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){var r;return _regeneratorRuntime().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return t.stop()}}),_callee3,this)}))),function dispatchWillSave(t){return p.apply(this,arguments)})},{key:"dispatchDidSave",value:(h=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r;return _regeneratorRuntime().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return t.stop()}}),_callee4,this)}))),function dispatchDidSave(t){return h.apply(this,arguments)})},{key:"dispatchWillPrint",value:(d=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){var r;return _regeneratorRuntime().wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillPrint"}));case 1:case"end":return t.stop()}}),_callee5,this)}))),function dispatchWillPrint(t){return d.apply(this,arguments)})},{key:"dispatchDidPrint",value:(c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t){var r;return _regeneratorRuntime().wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return t.stop()}}),_callee6,this)}))),function dispatchDidPrint(t){return c.apply(this,arguments)})},{key:"mouseState",get:function get(){return this._mouseState}},{key:"destroyPromise",get:function get(){var t;return(null===(t=this._destroyCapability)||void 0===t?void 0:t.promise)||null}},{key:"ready",get:function get(){return this._ready}},{key:"_internalEvents",get:function get(){return(0,o.shadow)(this,"_internalEvents",new Map)}},{key:"_domEvents",get:function get(){return(0,o.shadow)(this,"_domEvents",new Map)}},{key:"_pageOpenPending",get:function get(){return(0,o.shadow)(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function get(){return(0,o.shadow)(this,"_visitedPages",new Map)}},{key:"_updateFromSandbox",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(t){var r,i,o,u,l,c,d,h,p,v,y,g;return _regeneratorRuntime().wrap((function _callee7$(m){for(;;)switch(m.prev=m.next){case 0:r=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode;i=t.id,o=t.siblings,u=t.command,l=t.value;if(i){m.next=46;break}m.t0=u;m.next="clear"===m.t0?6:"error"===m.t0?8:"layout"===m.t0?10:"page-num"===m.t0?15:"print"===m.t0?17:"println"===m.t0?21:"zoom"===m.t0?23:"SaveAs"===m.t0?27:"FirstPage"===m.t0?29:"LastPage"===m.t0?31:"NextPage"===m.t0?33:"PrevPage"===m.t0?35:"ZoomViewIn"===m.t0?37:"ZoomViewOut"===m.t0?41:45;break;case 6:console.clear();return m.abrupt("break",45);case 8:console.error(l);return m.abrupt("break",45);case 10:if(!r){m.next=12;break}return m.abrupt("return");case 12:c=(0,a.apiPageLayoutToViewerModes)(l);this._pdfViewer.spreadMode=c.spreadMode;return m.abrupt("break",45);case 15:this._pdfViewer.currentPageNumber=l+1;return m.abrupt("break",45);case 17:m.next=19;return this._pdfViewer.pagesPromise;case 19:this._eventBus.dispatch("print",{source:this});return m.abrupt("break",45);case 21:console.log(l);return m.abrupt("break",45);case 23:if(!r){m.next=25;break}return m.abrupt("return");case 25:this._pdfViewer.currentScaleValue=l;return m.abrupt("break",45);case 27:this._eventBus.dispatch("download",{source:this});return m.abrupt("break",45);case 29:this._pdfViewer.currentPageNumber=1;return m.abrupt("break",45);case 31:this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;return m.abrupt("break",45);case 33:this._pdfViewer.nextPage();return m.abrupt("break",45);case 35:this._pdfViewer.previousPage();return m.abrupt("break",45);case 37:if(!r){m.next=39;break}return m.abrupt("return");case 39:this._pdfViewer.increaseScale();return m.abrupt("break",45);case 41:if(!r){m.next=43;break}return m.abrupt("return");case 43:this._pdfViewer.decreaseScale();return m.abrupt("break",45);case 45:return m.abrupt("return");case 46:if(!r){m.next=49;break}if(!t.focus){m.next=49;break}return m.abrupt("return");case 49:delete t.id;delete t.siblings;d=o?[i].concat(_toConsumableArray(o)):[i];h=_createForOfIteratorHelper(d);try{for(h.s();!(p=h.n()).done;){v=p.value;(y=document.querySelector('[data-element-id="'.concat(v,'"]')))?y.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):null===(g=this._pdfDocument)||void 0===g||g.annotationStorage.setValue(v,t)}}catch(t){h.e(t)}finally{h.f()}case 54:case"end":return m.stop()}}),_callee7,this)}))),function _updateFromSandbox(t){return l.apply(this,arguments)})},{key:"_dispatchPageOpen",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee9(t){var r,i,u,l,c,d=this,h=arguments;return _regeneratorRuntime().wrap((function _callee9$(p){for(;;)switch(p.prev=p.next){case 0:r=h.length>1&&void 0!==h[1]&&h[1];i=this._pdfDocument,u=this._visitedPages;r&&(this._closeCapability=(0,o.createPromiseCapability)());if(this._closeCapability){p.next=5;break}return p.abrupt("return");case 5:if((null==(l=this._pdfViewer.getPageView(t-1))?void 0:l.renderingState)===a.RenderingStates.FINISHED){p.next=9;break}this._pageOpenPending.add(t);return p.abrupt("return");case 9:this._pageOpenPending.delete(t);c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(){var r,a,o;return _regeneratorRuntime().wrap((function _callee8$(c){for(;;)switch(c.prev=c.next){case 0:c.next=2;return u.has(t)?null:null===(r=l.pdfPage)||void 0===r?void 0:r.getJSActions();case 2:o=c.sent;if(i===d._pdfDocument){c.next=5;break}return c.abrupt("return");case 5:c.next=7;return null===(a=d._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:o});case 7:case"end":return c.stop()}}),_callee8)})))();u.set(t,c);case 12:case"end":return p.stop()}}),_callee9,this)}))),function _dispatchPageOpen(t){return u.apply(this,arguments)})},{key:"_dispatchPageClose",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(t){var r,i,a,o;return _regeneratorRuntime().wrap((function _callee10$(u){for(;;)switch(u.prev=u.next){case 0:i=this._pdfDocument,a=this._visitedPages;if(this._closeCapability){u.next=3;break}return u.abrupt("return");case 3:if(!this._pageOpenPending.has(t)){u.next=5;break}return u.abrupt("return");case 5:if(o=a.get(t)){u.next=8;break}return u.abrupt("return");case 8:a.set(t,null);u.next=11;return o;case 11:if(i===this._pdfDocument){u.next=13;break}return u.abrupt("return");case 13:u.next=15;return null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t});case 15:case"end":return u.stop()}}),_callee10,this)}))),function _dispatchPageClose(t){return i.apply(this,arguments)})},{key:"_getDocProperties",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){return _regeneratorRuntime().wrap((function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:if(!this._docPropertiesLookup){t.next=2;break}return t.abrupt("return",this._docPropertiesLookup(this._pdfDocument));case 2:throw new Error("_getDocProperties: Unable to lookup properties.");case 3:case"end":return t.stop()}}),_callee11,this)}))),function _getDocProperties(){return r.apply(this,arguments)})},{key:"_createScripting",value:function _createScripting(){this._destroyCapability=(0,o.createPromiseCapability)();if(this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});throw new Error("_createScripting: Cannot create scripting.")}},{key:"_destroyScripting",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee12(){var t,r,i,a,o,u,l,c,d,h,p,v;return _regeneratorRuntime().wrap((function _callee12$(y){for(;;)switch(y.prev=y.next){case 0:if(this._scripting){y.next=4;break}this._pdfDocument=null;null===(r=this._destroyCapability)||void 0===r||r.resolve();return y.abrupt("return");case 4:if(!this._closeCapability){y.next=8;break}y.next=7;return Promise.race([this._closeCapability.promise,new Promise((function(t){setTimeout(t,1e3)}))]).catch((function(t){}));case 7:this._closeCapability=null;case 8:this._pdfDocument=null;y.prev=9;y.next=12;return this._scripting.destroySandbox();case 12:y.next=16;break;case 14:y.prev=14;y.t0=y.catch(9);case 16:i=_createForOfIteratorHelper(this._internalEvents);try{for(i.s();!(a=i.n()).done;){o=_slicedToArray(a.value,2),u=o[0],l=o[1];this._eventBus._off(u,l)}}catch(t){i.e(t)}finally{i.f()}this._internalEvents.clear();c=_createForOfIteratorHelper(this._domEvents);try{for(c.s();!(d=c.n()).done;){h=_slicedToArray(d.value,2),p=h[0],v=h[1];window.removeEventListener(p,v,!0)}}catch(t){c.e(t)}finally{c.f()}this._domEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;delete this._mouseState.isDown;this._ready=!1;null===(t=this._destroyCapability)||void 0===t||t.resolve();case 28:case"end":return y.stop()}}),_callee12,this,[[9,14]])}))),function _destroyScripting(){return t.apply(this,arguments)})}]);var t,r,i,u,l,c,d,h,p,v;return PDFScriptingManager}();r.PDFScriptingManager=u},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFSidebar=void 0;var a=i(3);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o="pdfSidebarNotification",u=new WeakSet,l=new WeakSet,c=new WeakSet,d=new WeakSet,h=new WeakSet,p=new WeakSet,v=function(){function PDFSidebar(t){var r=t.elements,i=t.pdfViewer,o=t.pdfThumbnailViewer,v=t.eventBus,y=t.l10n;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSidebar);_classPrivateMethodInitSpec(this,p);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);_classPrivateMethodInitSpec(this,u);this.isOpen=!1;this.active=a.SidebarView.THUMBS;this.isInitialViewSet=!1;this.isInitialEventDispatched=!1;this.onToggled=null;this.pdfViewer=i;this.pdfThumbnailViewer=o;this.outerContainer=r.outerContainer;this.sidebarContainer=r.sidebarContainer;this.toggleButton=r.toggleButton;this.thumbnailButton=r.thumbnailButton;this.outlineButton=r.outlineButton;this.attachmentsButton=r.attachmentsButton;this.layersButton=r.layersButton;this.thumbnailView=r.thumbnailView;this.outlineView=r.outlineView;this.attachmentsView=r.attachmentsView;this.layersView=r.layersView;this._outlineOptionsContainer=r.outlineOptionsContainer;this._currentOutlineItemButton=r.currentOutlineItemButton;this.eventBus=v;this.l10n=y;_classPrivateMethodGet(this,p,_addEventListeners2).call(this)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFSidebar,[{key:"reset",value:function reset(){this.isInitialViewSet=!1;this.isInitialEventDispatched=!1;_classPrivateMethodGet(this,h,_hideUINotification2).call(this,!0);this.switchView(a.SidebarView.THUMBS);this.outlineButton.disabled=!1;this.attachmentsButton.disabled=!1;this.layersButton.disabled=!1;this._currentOutlineItemButton.disabled=!0}},{key:"visibleView",get:function get(){return this.isOpen?this.active:a.SidebarView.NONE}},{key:"setInitialView",value:function setInitialView(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.SidebarView.NONE;if(!this.isInitialViewSet){this.isInitialViewSet=!0;if(t!==a.SidebarView.NONE&&t!==a.SidebarView.UNKNOWN){this.switchView(t,!0);this.isInitialEventDispatched||_classPrivateMethodGet(this,u,_dispatchEvent2).call(this)}else _classPrivateMethodGet(this,u,_dispatchEvent2).call(this)}}},{key:"switchView",value:function switchView(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t!==this.active,o=!1;switch(t){case a.SidebarView.NONE:this.isOpen&&this.close();return;case a.SidebarView.THUMBS:this.isOpen&&i&&(o=!0);break;case a.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case a.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case a.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:console.error('PDFSidebar.switchView: "'.concat(t,'" is not a valid view.'));return}this.active=t;var d=t===a.SidebarView.THUMBS,h=t===a.SidebarView.OUTLINE,p=t===a.SidebarView.ATTACHMENTS,v=t===a.SidebarView.LAYERS;this.thumbnailButton.classList.toggle("toggled",d);this.outlineButton.classList.toggle("toggled",h);this.attachmentsButton.classList.toggle("toggled",p);this.layersButton.classList.toggle("toggled",v);this.thumbnailButton.setAttribute("aria-checked",d);this.outlineButton.setAttribute("aria-checked",h);this.attachmentsButton.setAttribute("aria-checked",p);this.layersButton.setAttribute("aria-checked",v);this.thumbnailView.classList.toggle("hidden",!d);this.outlineView.classList.toggle("hidden",!h);this.attachmentsView.classList.toggle("hidden",!p);this.layersView.classList.toggle("hidden",!v);this._outlineOptionsContainer.classList.toggle("hidden",!h);if(!r||this.isOpen){if(o){_classPrivateMethodGet(this,c,_updateThumbnailViewer2).call(this);_classPrivateMethodGet(this,l,_forceRendering2).call(this)}i&&_classPrivateMethodGet(this,u,_dispatchEvent2).call(this)}else this.open()}},{key:"open",value:function open(){if(!this.isOpen){this.isOpen=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");this.active===a.SidebarView.THUMBS&&_classPrivateMethodGet(this,c,_updateThumbnailViewer2).call(this);_classPrivateMethodGet(this,l,_forceRendering2).call(this);_classPrivateMethodGet(this,u,_dispatchEvent2).call(this);_classPrivateMethodGet(this,h,_hideUINotification2).call(this)}}},{key:"close",value:function close(){if(this.isOpen){this.isOpen=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");_classPrivateMethodGet(this,l,_forceRendering2).call(this);_classPrivateMethodGet(this,u,_dispatchEvent2).call(this)}}},{key:"toggle",value:function toggle(){this.isOpen?this.close():this.open()}}]);return PDFSidebar}();r.PDFSidebar=v;function _dispatchEvent2(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0);this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}function _forceRendering2(){if(this.onToggled)this.onToggled();else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}function _updateThumbnailViewer2(){for(var t=this.pdfViewer,r=this.pdfThumbnailViewer,i=t.pagesCount,o=0;o<i;o++){var u=t.getPageView(o);if((null==u?void 0:u.renderingState)===a.RenderingStates.FINISHED){r.getThumbnail(o).setImage(u)}}r.scrollThumbnailIntoView(t.currentPageNumber)}function _showUINotification2(){var t=this;this.l10n.get("toggle_sidebar_notification2.title").then((function(r){t.toggleButton.title=r}));this.isOpen||this.toggleButton.classList.add(o)}function _hideUINotification2(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isOpen||r)&&this.toggleButton.classList.remove(o);r&&this.l10n.get("toggle_sidebar.title").then((function(r){t.toggleButton.title=r}))}function _addEventListeners2(){var t=this;this.sidebarContainer.addEventListener("transitionend",(function(r){r.target===t.sidebarContainer&&t.outerContainer.classList.remove("sidebarMoving")}));this.toggleButton.addEventListener("click",(function(){t.toggle()}));this.thumbnailButton.addEventListener("click",(function(){t.switchView(a.SidebarView.THUMBS)}));this.outlineButton.addEventListener("click",(function(){t.switchView(a.SidebarView.OUTLINE)}));this.outlineButton.addEventListener("dblclick",(function(){t.eventBus.dispatch("toggleoutlinetree",{source:t})}));this.attachmentsButton.addEventListener("click",(function(){t.switchView(a.SidebarView.ATTACHMENTS)}));this.layersButton.addEventListener("click",(function(){t.switchView(a.SidebarView.LAYERS)}));this.layersButton.addEventListener("dblclick",(function(){t.eventBus.dispatch("resetlayers",{source:t})}));this._currentOutlineItemButton.addEventListener("click",(function(){t.eventBus.dispatch("currentoutlineitem",{source:t})}));var r=function onTreeLoaded(r,i,o){i.disabled=!r;r?_classPrivateMethodGet(t,d,_showUINotification2).call(t):t.active===o&&t.switchView(a.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",(function(i){r(i.outlineCount,t.outlineButton,a.SidebarView.OUTLINE);i.currentOutlineItemPromise.then((function(r){t.isInitialViewSet&&(t._currentOutlineItemButton.disabled=!r)}))}));this.eventBus._on("attachmentsloaded",(function(i){r(i.attachmentsCount,t.attachmentsButton,a.SidebarView.ATTACHMENTS)}));this.eventBus._on("layersloaded",(function(i){r(i.layersCount,t.layersButton,a.SidebarView.LAYERS)}));this.eventBus._on("presentationmodechanged",(function(r){r.state===a.PresentationModeState.NORMAL&&t.visibleView===a.SidebarView.THUMBS&&_classPrivateMethodGet(t,c,_updateThumbnailViewer2).call(t)}))}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFSidebarResizer=void 0;var a=i(3);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o="--sidebar-width",u=200,l="sidebarResizing",c=function(){function PDFSidebarResizer(t,r,i){var a=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSidebarResizer);this.isRTL=!1;this.sidebarOpen=!0;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=t.outerContainer;this.resizer=t.resizer;this.eventBus=r;i.getDirection().then((function(t){a.isRTL="rtl"===t}));this._addEventListeners()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFSidebarResizer,[{key:"outerContainerWidth",get:function get(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth)}},{key:"_updateWidth",value:function _updateWidth(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=Math.floor(this.outerContainerWidth/2);t>r&&(t=r);t<u&&(t=u);if(t===this._width)return!1;this._width=t;a.docStyle.setProperty(o,"".concat(t,"px"));return!0}},{key:"_mouseMove",value:function _mouseMove(t){var r=t.clientX;this.isRTL&&(r=this.outerContainerWidth-r);this._updateWidth(r)}},{key:"_mouseUp",value:function _mouseUp(t){this.outerContainer.classList.remove(l);this.eventBus.dispatch("resize",{source:this});var r=this._boundEvents;window.removeEventListener("mousemove",r.mouseMove);window.removeEventListener("mouseup",r.mouseUp)}},{key:"_addEventListeners",value:function _addEventListeners(){var t=this,r=this._boundEvents;r.mouseMove=this._mouseMove.bind(this);r.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",(function(i){if(0===i.button){t.outerContainer.classList.add(l);window.addEventListener("mousemove",r.mouseMove);window.addEventListener("mouseup",r.mouseUp)}}));this.eventBus._on("sidebarviewchanged",(function(r){t.sidebarOpen=!(null==r||!r.view)}));this.eventBus._on("resize",(function(r){if((null==r?void 0:r.source)===window){t._outerContainerWidth=null;if(t._width)if(t.sidebarOpen){t.outerContainer.classList.add(l);var i=t._updateWidth(t._width);Promise.resolve().then((function(){t.outerContainer.classList.remove(l);i&&t.eventBus.dispatch("resize",{source:t})}))}else t._updateWidth(t._width)}}))}}]);return PDFSidebarResizer}();r.PDFSidebarResizer=c},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFThumbnailViewer=void 0;var a=i(3),o=i(28);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var u="selected",l=new WeakSet,c=new WeakSet,d=function(){function PDFThumbnailViewer(t){var r=t.container,i=(t.eventBus,t.linkService),o=t.renderingQueue,u=t.l10n,d=t.pageColors;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFThumbnailViewer);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);this.container=r;this.linkService=i;this.renderingQueue=o;this.l10n=u;this.pageColors=d||null;if(this.pageColors&&(!CSS.supports("color",this.pageColors.background)||!CSS.supports("color",this.pageColors.foreground))){(this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.");this.pageColors=null}this.scroll=(0,a.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFThumbnailViewer,[{key:"_scrollUpdated",value:function _scrollUpdated(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function getThumbnail(t){return this._thumbnails[t]}},{key:"_getVisibleThumbs",value:function _getVisibleThumbs(){return(0,a.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}},{key:"scrollThumbnailIntoView",value:function scrollThumbnailIntoView(t){if(this.pdfDocument){var r=this._thumbnails[t-1];if(r){if(t!==this._currentPageNumber){this._thumbnails[this._currentPageNumber-1].div.classList.remove(u);r.div.classList.add(u)}var i=this._getVisibleThumbs(),o=i.first,l=i.last,c=i.views;if(c.length>0){var d=!1;if(t<=o.id||t>=l.id)d=!0;else{var h,p=_createForOfIteratorHelper(c);try{for(p.s();!(h=p.n()).done;){var v=h.value,y=v.id,g=v.percent;if(y===t){d=g<100;break}}}catch(t){p.e(t)}finally{p.f()}}d&&(0,a.scrollIntoView)(r.div,{top:-19})}this._currentPageNumber=t}else console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,a.isValidRotation)(t))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==t){this._pagesRotation=t;var r,i={rotation:t},o=_createForOfIteratorHelper(this._thumbnails);try{for(o.s();!(r=o.n()).done;){r.value.update(i)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"cleanup",value:function cleanup(){var t,r=_createForOfIteratorHelper(this._thumbnails);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.renderingState!==a.RenderingStates.FINISHED&&i.reset()}}catch(t){r.e(t)}finally{r.f()}o.TempImageFactory.destroyCanvas()}},{key:"_resetView",value:function _resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this.container.textContent=""}},{key:"setDocument",value:function setDocument(t){var r=this;if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=t;if(t){var i=t.getPage(1),a=t.getOptionalContentConfig();i.then((function(i){for(var l=t.numPages,c=i.getViewport({scale:1}),d=1;d<=l;++d){var h=new o.PDFThumbnailView({container:r.container,id:d,defaultViewport:c.clone(),optionalContentConfigPromise:a,linkService:r.linkService,renderingQueue:r.renderingQueue,l10n:r.l10n,pageColors:r.pageColors});r._thumbnails.push(h)}var p=r._thumbnails[0];p&&p.setPdfPage(i);r._thumbnails[r._currentPageNumber-1].div.classList.add(u)})).catch((function(t){console.error("Unable to initialize thumbnail viewer",t)}))}}},{key:"_cancelRendering",value:function _cancelRendering(){var t,r=_createForOfIteratorHelper(this._thumbnails);try{for(r.s();!(t=r.n()).done;){t.value.cancelRendering()}}catch(t){r.e(t)}finally{r.f()}}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){if(t)if(Array.isArray(t)&&this.pdfDocument.numPages===t.length)this._pageLabels=t;else{this._pageLabels=null;console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(var r=0,i=this._thumbnails.length;r<i;r++){var a,o;this._thumbnails[r].setPageLabel(null!==(a=null===(o=this._pageLabels)||void 0===o?void 0:o[r])&&void 0!==a?a:null)}}}},{key:"forceRendering",value:function forceRendering(){var t=this,r=this._getVisibleThumbs(),i=_classPrivateMethodGet(this,c,_getScrollAhead2).call(this,r),a=this.renderingQueue.getHighestPriority(r,this._thumbnails,i);if(a){_classPrivateMethodGet(this,l,_ensurePdfPageLoaded2).call(this,a).then((function(){t.renderingQueue.renderView(a)}));return!0}return!1}}]);return PDFThumbnailViewer}();r.PDFThumbnailViewer=d;function _ensurePdfPageLoaded2(t){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){return(_ensurePdfPageLoaded3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!t.pdfPage){i.next=2;break}return i.abrupt("return",t.pdfPage);case 2:i.prev=2;i.next=5;return this.pdfDocument.getPage(t.id);case 5:r=i.sent;t.pdfPage||t.setPdfPage(r);return i.abrupt("return",r);case 10:i.prev=10;i.t0=i.catch(2);console.error("Unable to get page for thumb view",i.t0);return i.abrupt("return",null);case 14:case"end":return i.stop()}}),_callee,this,[[2,10]])})))).apply(this,arguments)}function _getScrollAhead2(t){var r,i;return 1===(null===(r=t.first)||void 0===r?void 0:r.id)||(null===(i=t.last)||void 0===i?void 0:i.id)!==this._thumbnails.length&&this.scroll.down}},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TempImageFactory=r.PDFThumbnailView=void 0;var a=i(3),o=i(4);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classStaticPrivateFieldSpecSet(t,r,i,a){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"set");!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,i,a);return a}function _classStaticPrivateFieldSpecGet(t,r,i){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}function _classCheckPrivateStaticFieldDescriptor(t,r){if(void 0===t)throw new TypeError("attempted to "+r+" private static field before its declaration")}function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}var u=function(){function TempImageFactory(){_classCallCheck(this,TempImageFactory)}_createClass(TempImageFactory,null,[{key:"getCanvas",value:function getCanvas(t,r){var i=_classStaticPrivateFieldSpecGet(this,TempImageFactory,l)||_classStaticPrivateFieldSpecSet(this,TempImageFactory,l,document.createElement("canvas"));i.width=t;i.height=r;var a=i.getContext("2d",{alpha:!1});a.save();a.fillStyle="rgb(255, 255, 255)";a.fillRect(0,0,t,r);a.restore();return[i,i.getContext("2d")]}},{key:"destroyCanvas",value:function destroyCanvas(){var t=_classStaticPrivateFieldSpecGet(this,TempImageFactory,l);if(t){t.width=0;t.height=0}_classStaticPrivateFieldSpecSet(this,TempImageFactory,l,null)}}]);return TempImageFactory}();r.TempImageFactory=u;var l={writable:!0,value:null},c=function(){function PDFThumbnailView(t){var r=t.container,i=t.id,o=t.defaultViewport,u=t.optionalContentConfigPromise,l=t.linkService,c=t.renderingQueue,d=t.l10n,h=t.pageColors;_classCallCheck(this,PDFThumbnailView);this.id=i;this.renderingId="thumbnail"+i;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=o;this.pdfPageRotate=o.rotation;this._optionalContentConfigPromise=u||null;this.pageColors=h||null;this.linkService=l;this.renderingQueue=c;this.renderTask=null;this.renderingState=a.RenderingStates.INITIAL;this.resume=null;var p=this.viewport.width,v=p/this.viewport.height;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/v|0;this.scale=this.canvasWidth/p;this.l10n=d;var y=document.createElement("a");y.href=l.getAnchorUrl("#page="+i);this._thumbPageTitle.then((function(t){y.title=t}));y.onclick=function(){l.goToPage(i);return!1};this.anchor=y;var g=document.createElement("div");g.className="thumbnail";g.setAttribute("data-page-number",this.id);this.div=g;var m=document.createElement("div");m.className="thumbnailSelectionRing";m.style.width=this.canvasWidth+2+"px";m.style.height=this.canvasHeight+2+"px";this.ring=m;g.append(m);y.append(g);r.append(y)}_createClass(PDFThumbnailView,[{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:r});this.reset()}},{key:"reset",value:function reset(){this.cancelRendering();this.renderingState=a.RenderingStates.INITIAL;var t=this.viewport.width,r=t/this.viewport.height;this.canvasHeight=this.canvasWidth/r|0;this.scale=this.canvasWidth/t;this.div.removeAttribute("data-loaded");var i=this.ring;i.textContent="";i.style.width=this.canvasWidth+2+"px";i.style.height=this.canvasHeight+2+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}},{key:"update",value:function update(t){var r=t.rotation,i=void 0===r?null:r;"number"==typeof i&&(this.rotation=i);var a=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:a});this.reset()}},{key:"cancelRendering",value:function cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}},{key:"_getPageDrawContext",value:function _getPageDrawContext(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=document.createElement("canvas"),i=r.getContext("2d",{alpha:!1}),o=new a.OutputScale;r.width=t*this.canvasWidth*o.sx|0;r.height=t*this.canvasHeight*o.sy|0;var u=o.scaled?[o.sx,0,0,o.sy,0,0]:null;return{ctx:i,canvas:r,transform:u}}},{key:"_convertCanvasToImage",value:function _convertCanvasToImage(t){if(this.renderingState!==a.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");var r=this._reduceImage(t),i=document.createElement("img");i.className="thumbnailImage";this._thumbPageCanvas.then((function(t){i.setAttribute("aria-label",t)}));i.style.width=this.canvasWidth+"px";i.style.height=this.canvasHeight+"px";i.src=r.toDataURL();this.image=i;this.div.setAttribute("data-loaded",!0);this.ring.append(i);r.width=0;r.height=0}},{key:"draw",value:function draw(){var t=this;if(this.renderingState!==a.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return Promise.resolve()}var r=this.pdfPage;if(!r){this.renderingState=a.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=a.RenderingStates.RUNNING;var i=function(){var r=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){var r,i=arguments;return _regeneratorRuntime().wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:r=i.length>0&&void 0!==i[0]?i[0]:null;h===t.renderTask&&(t.renderTask=null);if(!(r instanceof o.RenderingCancelledException)){u.next=4;break}return u.abrupt("return");case 4:t.renderingState=a.RenderingStates.FINISHED;t._convertCanvasToImage(c);if(!r){u.next=8;break}throw r;case 8:case"end":return u.stop()}}),_callee)})));return function finishRenderTask(){return r.apply(this,arguments)}}(),u=this._getPageDrawContext(2),l=u.ctx,c=u.canvas,d={canvasContext:l,transform:u.transform,viewport:this.viewport.clone({scale:2*this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},h=this.renderTask=r.render(d);h.onContinue=function renderContinueCallback(r){if(t.renderingQueue.isHighestPriority(t))r();else{t.renderingState=a.RenderingStates.PAUSED;t.resume=function(){t.renderingState=a.RenderingStates.RUNNING;r()}}};var p=h.promise.then((function(){return i(null)}),(function(t){return i(t)}));p.finally((function(){c.width=0;c.height=0;if(!t.linkService.isPageCached(t.id)){var r;null===(r=t.pdfPage)||void 0===r||r.cleanup()}}));return p}},{key:"setImage",value:function setImage(t){if(this.renderingState===a.RenderingStates.INITIAL){var r=t.thumbnailCanvas,i=t.pdfPage;if(r){this.pdfPage||this.setPdfPage(i);this.renderingState=a.RenderingStates.FINISHED;this._convertCanvasToImage(r)}}}},{key:"_reduceImage",value:function _reduceImage(t){var r=this._getPageDrawContext(),i=r.ctx,a=r.canvas;if(t.width<=2*a.width){i.drawImage(t,0,0,t.width,t.height,0,0,a.width,a.height);return a}for(var o=a.width<<3,l=a.height<<3,c=_slicedToArray(u.getCanvas(o,l),2),d=c[0],h=c[1];o>t.width||l>t.height;){o>>=1;l>>=1}h.drawImage(t,0,0,t.width,t.height,0,0,o,l);for(;o>2*a.width;){h.drawImage(d,0,0,o,l,0,0,o>>1,l>>1);o>>=1;l>>=1}i.drawImage(d,0,0,o,l,0,0,a.width,a.height);return a}},{key:"_thumbPageTitle",get:function get(){var t;return this.l10n.get("thumb_page_title",{page:null!==(t=this.pageLabel)&&void 0!==t?t:this.id})}},{key:"_thumbPageCanvas",get:function get(){var t;return this.l10n.get("thumb_page_canvas",{page:null!==(t=this.pageLabel)&&void 0!==t?t:this.id})}},{key:"setPageLabel",value:function setPageLabel(t){var r=this;this.pageLabel="string"==typeof t?t:null;this._thumbPageTitle.then((function(t){r.anchor.title=t}));this.renderingState===a.RenderingStates.FINISHED&&this._thumbPageCanvas.then((function(t){var i;null===(i=r.image)||void 0===i||i.setAttribute("aria-label",t)}))}}]);return PDFThumbnailView}();r.PDFThumbnailView=c},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFViewer=r.PDFSinglePageViewer=void 0;var a=i(3),o=i(30);function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=_superPropBase(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var u=function(t){_inherits(PDFViewer,t);var r=_createSuper(PDFViewer);function PDFViewer(){_classCallCheck(this,PDFViewer);return r.apply(this,arguments)}return _createClass(PDFViewer)}(o.BaseViewer);r.PDFViewer=u;var l=function(t){_inherits(PDFSinglePageViewer,t);var r=_createSuper(PDFSinglePageViewer);function PDFSinglePageViewer(){_classCallCheck(this,PDFSinglePageViewer);return r.apply(this,arguments)}_createClass(PDFSinglePageViewer,[{key:"_resetView",value:function _resetView(){_get(_getPrototypeOf(PDFSinglePageViewer.prototype),"_resetView",this).call(this);this._scrollMode=a.ScrollMode.PAGE;this._spreadMode=a.SpreadMode.NONE}},{key:"scrollMode",set:function set(t){}},{key:"_updateScrollMode",value:function _updateScrollMode(){}},{key:"spreadMode",set:function set(t){}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){}}]);return PDFSinglePageViewer}(o.BaseViewer);r.PDFSinglePageViewer=l},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PagesCountLimit=r.PDFPageViewBuffer=r.BaseViewer=void 0;var a,o,u=i(4),l=i(3),c=i(31),d=i(33),h=i(1),p=i(32),v=i(34),y=i(23),g=i(8),m=i(35),b=i(36),w=i(37),A=i(38);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var P="enablePermissions",D={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};r.PagesCountLimit=D;var E=null!==(o=h.compatibilityParams.annotationEditorMode)&&void 0!==o?o:u.AnnotationEditorType.DISABLE;function isValidAnnotationEditorMode(t){return Object.values(u.AnnotationEditorType).includes(t)&&t!==u.AnnotationEditorType.DISABLE}var S=new WeakMap,C=new WeakMap,k=new WeakSet;a=Symbol.iterator;var x=function(){function PDFPageViewBuffer(t){_classCallCheck(this,PDFPageViewBuffer);_classPrivateMethodInitSpec(this,k);_classPrivateFieldInitSpec(this,S,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,C,{writable:!0,value:0});_classPrivateFieldSet(this,C,t)}_createClass(PDFPageViewBuffer,[{key:"push",value:function push(t){var r=_classPrivateFieldGet(this,S);r.has(t)&&r.delete(t);r.add(t);r.size>_classPrivateFieldGet(this,C)&&_classPrivateMethodGet(this,k,_destroyFirstView2).call(this)}},{key:"resize",value:function resize(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,C,t);var i=_classPrivateFieldGet(this,S);if(r){var a,o=i.size,u=1,l=_createForOfIteratorHelper(i);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(r.has(c.id)){i.delete(c);i.add(c)}if(++u>o)break}}catch(t){l.e(t)}finally{l.f()}}for(;i.size>_classPrivateFieldGet(this,C);)_classPrivateMethodGet(this,k,_destroyFirstView2).call(this)}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,S).has(t)}},{key:a,value:function value(){return _classPrivateFieldGet(this,S).keys()}}]);return PDFPageViewBuffer}();r.PDFPageViewBuffer=x;function _destroyFirstView2(){var t=_classPrivateFieldGet(this,S).keys().next().value;null==t||t.destroy();_classPrivateFieldGet(this,S).delete(t)}var T=new WeakMap,I=new WeakMap,L=new WeakMap,O=new WeakMap,M=new WeakMap,R=new WeakMap,B=new WeakMap,G=new WeakMap,N=new WeakSet,j=new WeakSet,V=new WeakSet,W=new WeakSet,U=new WeakSet,H=new WeakSet,z=new WeakSet,X=new WeakSet,Y=new WeakSet,K=function(){function BaseViewer(t){var r,i,a,o,c;_classCallCheck(this,BaseViewer);_classPrivateMethodInitSpec(this,Y);_classPrivateMethodInitSpec(this,X);_classPrivateMethodInitSpec(this,z);_classPrivateMethodInitSpec(this,H);_classPrivateMethodInitSpec(this,U);_classPrivateMethodInitSpec(this,W);_classPrivateMethodInitSpec(this,V);_classPrivateMethodInitSpec(this,j);_classPrivateMethodInitSpec(this,N);_classPrivateFieldInitSpec(this,T,{writable:!0,value:null});_classPrivateFieldInitSpec(this,I,{writable:!0,value:u.AnnotationEditorType.DISABLE});_classPrivateFieldInitSpec(this,L,{writable:!0,value:null});_classPrivateFieldInitSpec(this,O,{writable:!0,value:u.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,M,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,R,{writable:!0,value:0});_classPrivateFieldInitSpec(this,B,{writable:!0,value:null});_classPrivateFieldInitSpec(this,G,{writable:!0,value:null});if(this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");var d="2.15.0";if(u.version!==d)throw new Error('The API version "'.concat(u.version,'" does not match the Viewer version "').concat(d,'".'));this.container=t.container;this.viewer=t.viewer||t.container.firstElementChild;if("DIV"!==(null===(r=this.container)||void 0===r?void 0:r.tagName.toUpperCase())||"DIV"!==(null===(i=this.viewer)||void 0===i?void 0:i.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=t.eventBus;this.linkService=t.linkService||new g.SimpleLinkService;this.downloadManager=t.downloadManager||null;this.findController=t.findController||null;this._scriptingManager=t.scriptingManager||null;this.removePageBorders=t.removePageBorders||!1;this.textLayerMode=null!==(a=t.textLayerMode)&&void 0!==a?a:l.TextLayerMode.ENABLE;_classPrivateFieldSet(this,O,null!==(o=t.annotationMode)&&void 0!==o?o:u.AnnotationMode.ENABLE_FORMS);_classPrivateFieldSet(this,I,null!==(c=t.annotationEditorMode)&&void 0!==c?c:E);this.imageResourcesPath=t.imageResourcesPath||"";this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1;this.renderer=t.renderer||l.RendererType.CANVAS;this.useOnlyCssZoom=t.useOnlyCssZoom||!1;this.maxCanvasPixels=t.maxCanvasPixels;this.l10n=t.l10n||p.NullL10n;_classPrivateFieldSet(this,M,t.enablePermissions||!1);this.pageColors=t.pageColors||null;if(this.pageColors&&(!CSS.supports("color",this.pageColors.background)||!CSS.supports("color",this.pageColors.foreground))){(this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.");this.pageColors=null}this.defaultRenderingQueue=!t.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new y.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else this.renderingQueue=t.renderingQueue;this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=l.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();this.removePageBorders&&this.viewer.classList.add("removePageBorders");this.updateContainerHeightCss()}_createClass(BaseViewer,[{key:"pagesCount",get:function get(){return this._pages.length}},{key:"getPageView",value:function getPageView(t){return this._pages[t]}},{key:"pageViewsReady",get:function get(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return null==t?void 0:t.pdfPage}))}},{key:"renderForms",get:function get(){return _classPrivateFieldGet(this,O)===u.AnnotationMode.ENABLE_FORMS}},{key:"enableScripting",get:function get(){return!!this._scriptingManager}},{key:"currentPageNumber",get:function get(){return this._currentPageNumber},set:function set(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error('currentPageNumber: "'.concat(t,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function _setCurrentPageNumber(t){var r,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===t){a&&_classPrivateMethodGet(this,H,_resetCurrentPageView2).call(this);return!0}if(!(0<t&&t<=this.pagesCount))return!1;var o=this._currentPageNumber;this._currentPageNumber=t;this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!==(r=null===(i=this._pageLabels)||void 0===i?void 0:i[t-1])&&void 0!==r?r:null,previous:o});a&&_classPrivateMethodGet(this,H,_resetCurrentPageView2).call(this);return!0}},{key:"currentPageLabel",get:function get(){var t,r;return null!==(t=null===(r=this._pageLabels)||void 0===r?void 0:r[this._currentPageNumber-1])&&void 0!==t?t:null},set:function set(t){if(this.pdfDocument){var r=0|t;if(this._pageLabels){var i=this._pageLabels.indexOf(t);i>=0&&(r=i+1)}this._setCurrentPageNumber(r,!0)||console.error('currentPageLabel: "'.concat(t,'" is not a valid page.'))}}},{key:"currentScale",get:function get(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE},set:function set(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(t,!1)}},{key:"currentScaleValue",get:function get(){return this._currentScaleValue},set:function set(t){this.pdfDocument&&this._setScale(t,!1)}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,l.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument){(t%=360)<0&&(t+=360);if(this._pagesRotation!==t){this._pagesRotation=t;var r,i=this._currentPageNumber,a={rotation:t},o=_createForOfIteratorHelper(this._pages);try{for(o.s();!(r=o.n()).done;){r.value.update(a)}}catch(t){o.e(t)}finally{o.f()}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0);this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:i});this.defaultRenderingQueue&&this.update()}}}},{key:"firstPagePromise",get:function get(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function get(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function get(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"setDocument",value:function setDocument(t){var r=this;if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();this.findController&&this.findController.setDocument(null);this._scriptingManager&&this._scriptingManager.setDocument(null);if(_classPrivateFieldGet(this,L)){_classPrivateFieldGet(this,L).destroy();_classPrivateFieldSet(this,L,null)}}this.pdfDocument=t;if(t){var i=t.isPureXfa,a=t.numPages,o=t.getPage(1),c=t.getOptionalContentConfig(),d=_classPrivateFieldGet(this,M)?t.getPermissions():Promise.resolve();if(a>D.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var h=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:h})}this._pagesCapability.promise.then((function(){r.eventBus.dispatch("pagesloaded",{source:r,pagesCount:a})}),(function(){}));this._onBeforeDraw=function(t){var i=r._pages[t.pageNumber-1];i&&_classPrivateFieldGet(r,T).push(i)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=function(t){if(!t.cssTransform&&!r._onePageRenderedCapability.settled){r._onePageRenderedCapability.resolve({timestamp:t.timestamp});r.eventBus._off("pagerendered",r._onAfterDraw);r._onAfterDraw=null;if(_classPrivateFieldGet(r,G)){document.removeEventListener("visibilitychange",_classPrivateFieldGet(r,G));_classPrivateFieldSet(r,G,null)}}};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([o,d]).then((function(o){var d=_slicedToArray(o,2),h=d[0],p=d[1];if(t===r.pdfDocument){r._firstPageCapability.resolve(h);r._optionalContentConfigPromise=c;var y=_classPrivateMethodGet(r,N,_initializePermissions2).call(r,p),g=y.annotationEditorMode,m=y.annotationMode,b=y.textLayerMode;if(g!==u.AnnotationEditorType.DISABLE){var w=g;if(i)console.warn("Warning: XFA-editing is not implemented.");else if(isValidAnnotationEditorMode(w)){r.eventBus.dispatch("annotationeditormodechanged",{source:r,mode:w});_classPrivateFieldSet(r,L,new u.AnnotationEditorUIManager(r.container,r.eventBus));w!==u.AnnotationEditorType.NONE&&_classPrivateFieldGet(r,L).updateMode(w)}else console.error("Invalid AnnotationEditor mode: ".concat(w))}for(var A=r._scrollMode===l.ScrollMode.PAGE?null:r.viewer,P=r.currentScale,E=h.getViewport({scale:P*u.PixelsPerInch.PDF_TO_CSS_UNITS}),S=b===l.TextLayerMode.DISABLE||i?null:r,C=m!==u.AnnotationMode.DISABLE?r:null,k=i?r:null,x=_classPrivateFieldGet(r,L)?r:null,T=1;T<=a;++T){var I=new v.PDFPageView({container:A,eventBus:r.eventBus,id:T,scale:P,defaultViewport:E.clone(),optionalContentConfigPromise:c,renderingQueue:r.renderingQueue,textLayerFactory:S,textLayerMode:b,annotationLayerFactory:C,annotationMode:m,xfaLayerFactory:k,annotationEditorLayerFactory:x,textHighlighterFactory:r,structTreeLayerFactory:r,imageResourcesPath:r.imageResourcesPath,renderer:r.renderer,useOnlyCssZoom:r.useOnlyCssZoom,maxCanvasPixels:r.maxCanvasPixels,pageColors:r.pageColors,l10n:r.l10n});r._pages.push(I)}var O=r._pages[0];if(O){O.setPdfPage(h);r.linkService.cachePageRef(1,h.ref)}r._scrollMode===l.ScrollMode.PAGE?_classPrivateMethodGet(r,V,_ensurePageViewVisible2).call(r):r._spreadMode!==l.SpreadMode.NONE&&r._updateSpreadMode();_classPrivateMethodGet(r,j,_onePageRenderedOrForceFetch2).call(r).then(_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var i,o,u;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r.findController&&r.findController.setDocument(t);r._scriptingManager&&r._scriptingManager.setDocument(t);if(!(t.loadingParams.disableAutoFetch||a>D.FORCE_LAZY_PAGE_INIT)){l.next=5;break}r._pagesCapability.resolve();return l.abrupt("return");case 5:if(!((i=a-1)<=0)){l.next=9;break}r._pagesCapability.resolve();return l.abrupt("return");case 9:o=_regeneratorRuntime().mark((function _loop(a){var o;return _regeneratorRuntime().wrap((function _loop$(u){for(;;)switch(u.prev=u.next){case 0:o=t.getPage(a).then((function(t){var o=r._pages[a-1];o.pdfPage||o.setPdfPage(t);r.linkService.cachePageRef(a,t.ref);0==--i&&r._pagesCapability.resolve()}),(function(t){console.error("Unable to get page ".concat(a," to initialize viewer"),t);0==--i&&r._pagesCapability.resolve()}));if(a%D.PAUSE_EAGER_PAGE_INIT!=0){u.next=4;break}u.next=4;return o;case 4:case"end":return u.stop()}}),_loop)}));u=2;case 11:if(!(u<=a)){l.next=16;break}return l.delegateYield(o(u),"t0",13);case 13:++u;l.next=11;break;case 16:case"end":return l.stop()}}),_callee)}))));r.eventBus.dispatch("pagesinit",{source:r});t.getMetadata().then((function(i){var a=i.info;t===r.pdfDocument&&a.Language&&(r.viewer.lang=a.Language)}));r.defaultRenderingQueue&&r.update()}})).catch((function(t){console.error("Unable to initialize viewer",t);r._pagesCapability.reject(t)}))}}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){if(t)if(Array.isArray(t)&&this.pdfDocument.numPages===t.length)this._pageLabels=t;else{this._pageLabels=null;console.error("setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(var r=0,i=this._pages.length;r<i;r++){var a,o;this._pages[r].setPageLabel(null!==(a=null===(o=this._pageLabels)||void 0===o?void 0:o[r])&&void 0!==a?a:null)}}}},{key:"_resetView",value:function _resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=l.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;_classPrivateFieldSet(this,T,new x(10));this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=(0,u.createPromiseCapability)();this._onePageRenderedCapability=(0,u.createPromiseCapability)();this._pagesCapability=(0,u.createPromiseCapability)();this._scrollMode=l.ScrollMode.VERTICAL;this._previousScrollMode=l.ScrollMode.UNKNOWN;this._spreadMode=l.SpreadMode.NONE;_classPrivateFieldSet(this,B,{previousPageNumber:1,scrollDown:!0,pages:[]});if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}if(_classPrivateFieldGet(this,G)){document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,G));_classPrivateFieldSet(this,G,null)}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");this.viewer.classList.remove(P)}},{key:"_scrollUpdate",value:function _scrollUpdate(){0!==this.pagesCount&&this.update()}},{key:"_setScaleUpdatePages",value:function _setScaleUpdatePages(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._currentScaleValue=r.toString();if(_classPrivateMethodGet(this,U,_isSameScale2).call(this,t))a&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:r});else{l.docStyle.setProperty("--scale-factor",t*u.PixelsPerInch.PDF_TO_CSS_UNITS);var o,c={scale:t},d=_createForOfIteratorHelper(this._pages);try{for(d.s();!(o=d.n()).done;){var h=o.value;h.update(c)}}catch(t){d.e(t)}finally{d.f()}this._currentScale=t;if(!i){var p,v=this._currentPageNumber;if(this._location&&!this.isInPresentationMode&&!this.isChangingPresentationMode){v=this._location.pageNumber;p=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:v,destArray:p,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:a?r:void 0});this.defaultRenderingQueue&&this.update();this.updateContainerHeightCss()}}},{key:"_pageWidthScaleFactor",get:function get(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1}},{key:"_setScale",value:function _setScale(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=parseFloat(t);if(i>0)this._setScaleUpdatePages(i,t,r,!1);else{var a=this._pages[this._currentPageNumber-1];if(!a)return;var o=l.SCROLLBAR_PADDING,u=l.VERTICAL_PADDING;if(this.isInPresentationMode)o=u=4;else if(this.removePageBorders)o=u=0;else if(this._scrollMode===l.ScrollMode.HORIZONTAL){var c=[u,o];o=c[0];u=c[1]}var d=(this.container.clientWidth-o)/a.width*a.scale/this._pageWidthScaleFactor,h=(this.container.clientHeight-u)/a.height*a.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=d;break;case"page-height":i=h;break;case"page-fit":i=Math.min(d,h);break;case"auto":var p=(0,l.isPortraitOrientation)(a)?d:Math.min(h,d);i=Math.min(l.MAX_AUTO_SCALE,p);break;default:console.error('_setScale: "'.concat(t,'" is an unknown zoom value.'));return}this._setScaleUpdatePages(i,t,r,!0)}}},{key:"pageLabelToPageNumber",value:function pageLabelToPageNumber(t){if(!this._pageLabels)return null;var r=this._pageLabels.indexOf(t);return r<0?null:r+1}},{key:"scrollPageIntoView",value:function scrollPageIntoView(t){var r=t.pageNumber,i=t.destArray,a=void 0===i?null:i,o=t.allowNegativeOffset,c=void 0!==o&&o,d=t.ignoreDestinationZoom,h=void 0!==d&&d;if(this.pdfDocument){var p=Number.isInteger(r)&&this._pages[r-1];if(p)if(!this.isInPresentationMode&&a){var v,y,g=0,m=0,b=0,w=0,A=p.rotation%180!=0,P=(A?p.height:p.width)/p.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS,D=(A?p.width:p.height)/p.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS,E=0;switch(a[1].name){case"XYZ":g=a[2];m=a[3];E=a[4];g=null!==g?g:0;m=null!==m?m:D;break;case"Fit":case"FitB":E="page-fit";break;case"FitH":case"FitBH":E="page-width";if(null===(m=a[2])&&this._location){g=this._location.left;m=this._location.top}else("number"!=typeof m||m<0)&&(m=D);break;case"FitV":case"FitBV":g=a[2];b=P;w=D;E="page-height";break;case"FitR":g=a[2];m=a[3];b=a[4]-g;w=a[5]-m;var S=this.removePageBorders?0:l.SCROLLBAR_PADDING,C=this.removePageBorders?0:l.VERTICAL_PADDING;v=(this.container.clientWidth-S)/b/u.PixelsPerInch.PDF_TO_CSS_UNITS;y=(this.container.clientHeight-C)/w/u.PixelsPerInch.PDF_TO_CSS_UNITS;E=Math.min(Math.abs(v),Math.abs(y));break;default:console.error('scrollPageIntoView: "'.concat(a[1].name,'" is not a valid destination type.'));return}h||(E&&E!==this._currentScale?this.currentScaleValue=E:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE));if("page-fit"!==E||a[4]){var k=[p.viewport.convertToViewportPoint(g,m),p.viewport.convertToViewportPoint(g+b,m+w)],x=Math.min(k[0][0],k[1][0]),T=Math.min(k[0][1],k[1][1]);if(!c){x=Math.max(x,0);T=Math.max(T,0)}_classPrivateMethodGet(this,W,_scrollIntoView2).call(this,p,{left:x,top:T})}else _classPrivateMethodGet(this,W,_scrollIntoView2).call(this,p)}else this._setCurrentPageNumber(r,!0);else console.error('scrollPageIntoView: "'.concat(r,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function _updateLocation(t){var r=this._currentScale,i=this._currentScaleValue,a=parseFloat(i)===r?Math.round(1e4*r)/100:i,o=t.id,u=this._pages[o-1],l=this.container,c=u.getPagePoint(l.scrollLeft-t.x,l.scrollTop-t.y),d=Math.round(c[0]),h=Math.round(c[1]),p="#page=".concat(o);this.isInPresentationMode||(p+="&zoom=".concat(a,",").concat(d,",").concat(h));this._location={pageNumber:o,scale:a,top:h,left:d,rotation:this._pagesRotation,pdfOpenParams:p}}},{key:"update",value:function update(){var t=this._getVisiblePages(),r=t.views,i=r.length;if(0!==i){var a=Math.max(10,2*i+1);_classPrivateFieldGet(this,T).resize(a,t.ids);this.renderingQueue.renderHighestPriority(t);var o,u=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),c=this._currentPageNumber,d=!1,h=_createForOfIteratorHelper(r);try{for(h.s();!(o=h.n()).done;){var p=o.value;if(p.percent<100)break;if(p.id===c&&u){d=!0;break}}}catch(t){h.e(t)}finally{h.f()}this._setCurrentPageNumber(d?c:r[0].id);this._updateLocation(t.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function containsElement(t){return this.container.contains(t)}},{key:"focus",value:function focus(){this.container.focus()}},{key:"_isContainerRtl",get:function get(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function get(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function get(){return this.presentationModeState===l.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function _getVisiblePages(){var t=this._scrollMode===l.ScrollMode.PAGE?_classPrivateFieldGet(this,B).pages:this._pages,r=this._scrollMode===l.ScrollMode.HORIZONTAL,i=r&&this._isContainerRtl;return(0,l.getVisibleElements)({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:r,rtl:i})}},{key:"isPageVisible",value:function isPageVisible(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error('isPageVisible: "'.concat(t,'" is not a valid page.'));return!1}return this._getVisiblePages().ids.has(t)}},{key:"isPageCached",value:function isPageCached(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error('isPageCached: "'.concat(t,'" is not a valid page.'));return!1}var r=this._pages[t-1];return _classPrivateFieldGet(this,T).has(r)}},{key:"cleanup",value:function cleanup(){var t,r=_createForOfIteratorHelper(this._pages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.renderingState!==l.RenderingStates.FINISHED&&i.reset()}}catch(t){r.e(t)}finally{r.f()}}},{key:"_cancelRendering",value:function _cancelRendering(){var t,r=_createForOfIteratorHelper(this._pages);try{for(r.s();!(t=r.n()).done;){t.value.cancelRendering()}}catch(t){r.e(t)}finally{r.f()}}},{key:"forceRendering",value:function forceRendering(t){var r=this,i=t||this._getVisiblePages(),a=_classPrivateMethodGet(this,X,_getScrollAhead2).call(this,i),o=this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL,u=this.renderingQueue.getHighestPriority(i,this._pages,a,o);_classPrivateMethodGet(this,Y,_toggleLoadingIconSpinner2).call(this,i.ids);if(u){_classPrivateMethodGet(this,z,_ensurePdfPageLoaded2).call(this,u).then((function(){r.renderingQueue.renderView(u)}));return!0}return!1}},{key:"createTextLayerBuilder",value:function createTextLayerBuilder(t){var r=t.textLayerDiv,i=t.pageIndex,a=t.viewport,o=t.enhanceTextSelection,u=void 0!==o&&o,l=t.eventBus,c=t.highlighter;return new w.TextLayerBuilder({textLayerDiv:r,eventBus:l,pageIndex:i,viewport:a,enhanceTextSelection:!this.isInPresentationMode&&u,highlighter:c})}},{key:"createTextHighlighter",value:function createTextHighlighter(t){var r=t.pageIndex,i=t.eventBus;return new b.TextHighlighter({eventBus:i,pageIndex:r,findController:this.isInPresentationMode?null:this.findController})}},{key:"createAnnotationLayerBuilder",value:function createAnnotationLayerBuilder(t){var r,i,a,o,u=t.pageDiv,l=t.pdfPage,c=t.annotationStorage,h=void 0===c?null===(r=this.pdfDocument)||void 0===r?void 0:r.annotationStorage:c,v=t.imageResourcesPath,y=void 0===v?"":v,g=t.renderForms,m=void 0===g||g,b=t.l10n,w=void 0===b?p.NullL10n:b,A=t.enableScripting,P=void 0===A?this.enableScripting:A,D=t.hasJSActionsPromise,E=void 0===D?null===(i=this.pdfDocument)||void 0===i?void 0:i.hasJSActions():D,S=t.mouseState,C=void 0===S?null===(a=this._scriptingManager)||void 0===a?void 0:a.mouseState:S,k=t.fieldObjectsPromise,x=void 0===k?null===(o=this.pdfDocument)||void 0===o?void 0:o.getFieldObjects():k,T=t.annotationCanvasMap,I=void 0===T?null:T;return new d.AnnotationLayerBuilder({pageDiv:u,pdfPage:l,annotationStorage:h,imageResourcesPath:y,renderForms:m,linkService:this.linkService,downloadManager:this.downloadManager,l10n:w,enableScripting:P,hasJSActionsPromise:E,mouseState:C,fieldObjectsPromise:x,annotationCanvasMap:I})}},{key:"createAnnotationEditorLayerBuilder",value:function createAnnotationEditorLayerBuilder(t){var r,i=t.uiManager,a=void 0===i?_classPrivateFieldGet(this,L):i,o=t.pageDiv,u=t.pdfPage,l=t.l10n,d=t.annotationStorage,h=void 0===d?null===(r=this.pdfDocument)||void 0===r?void 0:r.annotationStorage:d;return new c.AnnotationEditorLayerBuilder({uiManager:a,pageDiv:o,pdfPage:u,annotationStorage:h,l10n:l})}},{key:"createXfaLayerBuilder",value:function createXfaLayerBuilder(t){var r,i=t.pageDiv,a=t.pdfPage,o=t.annotationStorage,u=void 0===o?null===(r=this.pdfDocument)||void 0===r?void 0:r.annotationStorage:o;return new A.XfaLayerBuilder({pageDiv:i,pdfPage:a,annotationStorage:u,linkService:this.linkService})}},{key:"createStructTreeLayerBuilder",value:function createStructTreeLayerBuilder(t){var r=t.pdfPage;return new m.StructTreeLayerBuilder({pdfPage:r})}},{key:"hasEqualPageSizes",get:function get(){for(var t=this._pages[0],r=1,i=this._pages.length;r<i;++r){var a=this._pages[r];if(a.width!==t.width||a.height!==t.height)return!1}return!0}},{key:"getPagesOverview",value:function getPagesOverview(){var t=this;return this._pages.map((function(r){var i=r.pdfPage.getViewport({scale:1});return!t.enablePrintAutoRotate||(0,l.isPortraitOrientation)(i)?{width:i.width,height:i.height,rotation:i.rotation}:{width:i.height,height:i.width,rotation:(i.rotation-90)%360}}))}},{key:"optionalContentConfigPromise",get:function get(){if(!this.pdfDocument)return Promise.resolve(null);if(!this._optionalContentConfigPromise){console.error("optionalContentConfigPromise: Not initialized yet.");return this.pdfDocument.getOptionalContentConfig()}return this._optionalContentConfigPromise},set:function set(t){if(!(t instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(t));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=t;var r,i={optionalContentConfigPromise:t},a=_createForOfIteratorHelper(this._pages);try{for(a.s();!(r=a.n()).done;){r.value.update(i)}}catch(t){a.e(t)}finally{a.f()}this.update();this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}}},{key:"scrollMode",get:function get(){return this._scrollMode},set:function set(t){if(this._scrollMode!==t){if(!(0,l.isValidScrollMode)(t))throw new Error("Invalid scroll mode: ".concat(t));if(!(this.pagesCount>D.FORCE_SCROLL_MODE_PAGE)){this._previousScrollMode=this._scrollMode;this._scrollMode=t;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t});this._updateScrollMode(this._currentPageNumber)}}}},{key:"_updateScrollMode",value:function _updateScrollMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",r===l.ScrollMode.HORIZONTAL);i.classList.toggle("scrollWrapped",r===l.ScrollMode.WRAPPED);if(this.pdfDocument&&t){r===l.ScrollMode.PAGE?_classPrivateMethodGet(this,V,_ensurePageViewVisible2).call(this):this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode();this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(t,!0);this.update()}}},{key:"spreadMode",get:function get(){return this._spreadMode},set:function set(t){if(this._spreadMode!==t){if(!(0,l.isValidSpreadMode)(t))throw new Error("Invalid spread mode: ".concat(t));this._spreadMode=t;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t});this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var r=this.viewer,i=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)_classPrivateMethodGet(this,V,_ensurePageViewVisible2).call(this);else{r.textContent="";if(this._spreadMode===l.SpreadMode.NONE){var a,o=_createForOfIteratorHelper(this._pages);try{for(o.s();!(a=o.n()).done;){var u=a.value;r.append(u.div)}}catch(t){o.e(t)}finally{o.f()}}else for(var c=this._spreadMode-1,d=null,h=0,p=i.length;h<p;++h){if(null===d){(d=document.createElement("div")).className="spread";r.append(d)}else if(h%2===c){d=d.cloneNode(!1);r.append(d)}d.append(i[h].div)}}if(t){this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(t,!0);this.update()}}}},{key:"_getPageAdvance",value:function _getPageAdvance(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case l.ScrollMode.WRAPPED:var i,a=this._getVisiblePages(),o=a.views,u=new Map,c=_createForOfIteratorHelper(o);try{for(c.s();!(i=c.n()).done;){var d=i.value,h=d.id,p=d.y,v=d.percent,y=d.widthPercent;if(!(0===v||y<100)){var g=u.get(p);g||u.set(p,g||(g=[]));g.push(h)}}}catch(t){c.e(t)}finally{c.f()}var m,b=_createForOfIteratorHelper(u.values());try{for(b.s();!(m=b.n()).done;){var w=m.value,A=w.indexOf(t);if(-1!==A){var P=w.length;if(1===P)break;if(r)for(var D=A-1,E=0;D>=E;D--){var S=w[D],C=w[D+1]-1;if(S<C)return t-C}else for(var k=A+1,x=P;k<x;k++){var T=w[k],I=w[k-1]+1;if(T>I)return I-t}if(r){var L=w[0];if(L<t)return t-L+1}else{var O=w[P-1];if(O>t)return O-t+1}break}}}catch(t){b.e(t)}finally{b.f()}break;case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:if(this._spreadMode===l.SpreadMode.NONE)break;var M=this._spreadMode-1;if(r&&t%2!==M)break;if(!r&&t%2===M)break;var R,B=this._getVisiblePages(),G=B.views,N=r?t-1:t+1,j=_createForOfIteratorHelper(G);try{for(j.s();!(R=j.n()).done;){var V=R.value,W=V.id,U=V.percent,H=V.widthPercent;if(W===N){if(U>0&&100===H)return 2;break}}}catch(t){j.e(t)}finally{j.f()}}return 1}},{key:"nextPage",value:function nextPage(){var t=this._currentPageNumber,r=this.pagesCount;if(t>=r)return!1;var i=this._getPageAdvance(t,!1)||1;this.currentPageNumber=Math.min(t+i,r);return!0}},{key:"previousPage",value:function previousPage(){var t=this._currentPageNumber;if(t<=1)return!1;var r=this._getPageAdvance(t,!0)||1;this.currentPageNumber=Math.max(t-r,1);return!0}},{key:"increaseScale",value:function increaseScale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=this._currentScale;do{r=(r*l.DEFAULT_SCALE_DELTA).toFixed(2);r=Math.ceil(10*r)/10;r=Math.min(l.MAX_SCALE,r)}while(--t>0&&r<l.MAX_SCALE);this.currentScaleValue=r}},{key:"decreaseScale",value:function decreaseScale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=this._currentScale;do{r=(r/l.DEFAULT_SCALE_DELTA).toFixed(2);r=Math.floor(10*r)/10;r=Math.max(l.MIN_SCALE,r)}while(--t>0&&r>l.MIN_SCALE);this.currentScaleValue=r}},{key:"updateContainerHeightCss",value:function updateContainerHeightCss(){var t=this.container.clientHeight;if(t!==_classPrivateFieldGet(this,R)){_classPrivateFieldSet(this,R,t);l.docStyle.setProperty("--viewer-container-height","".concat(t,"px"))}}},{key:"annotationEditorMode",get:function get(){return _classPrivateFieldGet(this,L)?_classPrivateFieldGet(this,I):u.AnnotationEditorType.DISABLE},set:function set(t){if(!_classPrivateFieldGet(this,L))throw new Error("The AnnotationEditor is not enabled.");if(_classPrivateFieldGet(this,I)!==t){if(!isValidAnnotationEditorMode(t))throw new Error("Invalid AnnotationEditor mode: ".concat(t));if(this.pdfDocument){_classPrivateFieldSet(this,I,t);this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:t});_classPrivateFieldGet(this,L).updateMode(t)}}}},{key:"annotationEditorParams",set:function set(t){var r=t.type,i=t.value;if(!_classPrivateFieldGet(this,L))throw new Error("The AnnotationEditor is not enabled.");_classPrivateFieldGet(this,L).updateParams(r,i)}}]);return BaseViewer}();r.BaseViewer=K;function _initializePermissions2(t){var r={annotationEditorMode:_classPrivateFieldGet(this,I),annotationMode:_classPrivateFieldGet(this,O),textLayerMode:this.textLayerMode};if(!t)return r;t.includes(u.PermissionFlag.COPY)||this.viewer.classList.add(P);t.includes(u.PermissionFlag.MODIFY_CONTENTS)||(r.annotationEditorMode=u.AnnotationEditorType.DISABLE);t.includes(u.PermissionFlag.MODIFY_ANNOTATIONS)||t.includes(u.PermissionFlag.FILL_INTERACTIVE_FORMS)||_classPrivateFieldGet(this,O)!==u.AnnotationMode.ENABLE_FORMS||(r.annotationMode=u.AnnotationMode.ENABLE);return r}function _onePageRenderedOrForceFetch2(){var t=this;if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();var r=new Promise((function(r){_classPrivateFieldSet(t,G,(function(){if("hidden"===document.visibilityState){r();document.removeEventListener("visibilitychange",_classPrivateFieldGet(t,G));_classPrivateFieldSet(t,G,null)}}));document.addEventListener("visibilitychange",_classPrivateFieldGet(t,G))}));return Promise.race([this._onePageRenderedCapability.promise,r])}function _ensurePageViewVisible2(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var t=this._currentPageNumber,r=_classPrivateFieldGet(this,B),i=this.viewer;i.textContent="";r.pages.length=0;if(this._spreadMode!==l.SpreadMode.NONE||this.isInPresentationMode){var a=new Set,o=this._spreadMode-1;if(-1===o)a.add(t-1);else if(t%2!==o){a.add(t-1);a.add(t)}else{a.add(t-2);a.add(t-1)}var u=document.createElement("div");u.className="spread";if(this.isInPresentationMode){var c=document.createElement("div");c.className="dummyPage";u.append(c)}var d,h=_createForOfIteratorHelper(a);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=this._pages[p];if(v){u.append(v.div);r.pages.push(v)}}}catch(t){h.e(t)}finally{h.f()}i.append(u)}else{var y=this._pages[t-1];i.append(y.div);r.pages.push(y)}r.scrollDown=t>=r.previousPageNumber;r.previousPageNumber=t}function _scrollIntoView2(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t.div,a=t.id;if(this._scrollMode===l.ScrollMode.PAGE){this._setCurrentPageNumber(a);_classPrivateMethodGet(this,V,_ensurePageViewVisible2).call(this);this.update()}if(!r&&!this.isInPresentationMode){var o=i.offsetLeft+i.clientLeft,u=o+i.clientWidth,c=this.container,d=c.scrollLeft,h=c.clientWidth;(this._scrollMode===l.ScrollMode.HORIZONTAL||o<d||u>d+h)&&(r={left:0,top:0})}(0,l.scrollIntoView)(i,r)}function _isSameScale2(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}function _resetCurrentPageView2(){var t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);_classPrivateMethodGet(this,W,_scrollIntoView2).call(this,t)}function _ensurePdfPageLoaded2(t){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){return(_ensurePdfPageLoaded3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i,a;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(!t.pdfPage){o.next=2;break}return o.abrupt("return",t.pdfPage);case 2:o.prev=2;o.next=5;return this.pdfDocument.getPage(t.id);case 5:a=o.sent;t.pdfPage||t.setPdfPage(a);null!==(r=(i=this.linkService)._cachedPageNumber)&&void 0!==r&&r.call(i,a.ref)||this.linkService.cachePageRef(t.id,a.ref);return o.abrupt("return",a);case 11:o.prev=11;o.t0=o.catch(2);console.error("Unable to get page for page view",o.t0);return o.abrupt("return",null);case 15:case"end":return o.stop()}}),_callee2,this,[[2,11]])})))).apply(this,arguments)}function _getScrollAhead2(t){var r,i;if(1===(null===(r=t.first)||void 0===r?void 0:r.id))return!0;if((null===(i=t.last)||void 0===i?void 0:i.id)===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return _classPrivateFieldGet(this,B).scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _toggleLoadingIconSpinner2(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this._pages[a-1];null==o||o.toggleLoadingIconSpinner(!0)}}catch(t){i.e(t)}finally{i.f()}var u,l=_createForOfIteratorHelper(_classPrivateFieldGet(this,T));try{for(l.s();!(u=l.n()).done;){var c=u.value;t.has(c.id)||c.toggleLoadingIconSpinner(!1)}}catch(t){l.e(t)}finally{l.f()}}},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorLayerBuilder=void 0;var a=i(4),o=i(32);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var u=new WeakMap,l=function(){function AnnotationEditorLayerBuilder(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorLayerBuilder);_classPrivateFieldInitSpec(this,u,{writable:!0,value:void 0});this.pageDiv=t.pageDiv;this.pdfPage=t.pdfPage;this.annotationStorage=t.annotationStorage||null;this.l10n=t.l10n||o.NullL10n;this.annotationEditorLayer=null;this.div=null;this._cancelled=!1;_classPrivateFieldSet(this,u,t.uiManager)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditorLayerBuilder,[{key:"render",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o,l=arguments;return _regeneratorRuntime().wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if("display"===(r=l.length>1&&void 0!==l[1]?l[1]:"display")){c.next=3;break}return c.abrupt("return");case 3:if(!this._cancelled){c.next=5;break}return c.abrupt("return");case 5:i=t.clone({dontFlip:!0});if(!this.div){c.next=10;break}this.annotationEditorLayer.update({viewport:i});this.show();return c.abrupt("return");case 10:this.div=document.createElement("div");this.div.className="annotationEditorLayer";this.div.tabIndex=0;this.pageDiv.append(this.div);this.annotationEditorLayer=new a.AnnotationEditorLayer({uiManager:_classPrivateFieldGet(this,u),div:this.div,annotationStorage:this.annotationStorage,pageIndex:this.pdfPage._pageIndex,l10n:this.l10n,viewport:i});o={viewport:i,div:this.div,annotations:null,intent:r};this.annotationEditorLayer.render(o);case 17:case"end":return c.stop()}}),_callee,this)}))),function render(r){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(){this._cancelled=!0;this.destroy()}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function show(){this.div&&(this.div.hidden=!1)}},{key:"destroy",value:function destroy(){if(this.div){this.pageDiv=null;this.annotationEditorLayer.destroy();this.div.remove()}}}]);var t;return AnnotationEditorLayerBuilder}();r.AnnotationEditorLayerBuilder=l},(t,r)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.NullL10n=void 0;r.fixupLangCode=function fixupLangCode(t){return a[null==t?void 0:t.toLowerCase()]||t};r.getL10nFallback=getL10nFallback;function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}var i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text…",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function getL10nFallback(t,r){switch(t){case"find_match_count":t="find_match_count[".concat(1===r.total?"one":"other","]");break;case"find_match_count_limit":t="find_match_count_limit[".concat(1===r.limit?"one":"other","]")}return i[t]||""}var a={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function formatL10nValue(t,r){return r?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(t,i){return i in r?r[i]:"{{"+i+"}}"})):t}var o={getLanguage:function getLanguage(){return _asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","en-us");case 1:case"end":return t.stop()}}),_callee)})))()},getDirection:function getDirection(){return _asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","ltr");case 1:case"end":return t.stop()}}),_callee2)})))()},get:function get(t){var r=arguments;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var i,a;return _regeneratorRuntime().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:i=r.length>1&&void 0!==r[1]?r[1]:null;a=r.length>2&&void 0!==r[2]?r[2]:getL10nFallback(t,i);return o.abrupt("return",formatL10nValue(a,i));case 3:case"end":return o.stop()}}),_callee3)})))()},translate:function translate(t){return _asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){return _regeneratorRuntime().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee4)})))()}};r.NullL10n=o},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationLayerBuilder=void 0;var a=i(4),o=i(32);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var u=function(){function AnnotationLayerBuilder(t){var r=t.pageDiv,i=t.pdfPage,a=t.linkService,u=t.downloadManager,l=t.annotationStorage,c=void 0===l?null:l,d=t.imageResourcesPath,h=void 0===d?"":d,p=t.renderForms,v=void 0===p||p,y=t.l10n,g=void 0===y?o.NullL10n:y,m=t.enableScripting,b=void 0!==m&&m,w=t.hasJSActionsPromise,A=void 0===w?null:w,P=t.fieldObjectsPromise,D=void 0===P?null:P,E=t.mouseState,S=void 0===E?null:E,C=t.annotationCanvasMap,k=void 0===C?null:C;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationLayerBuilder);this.pageDiv=r;this.pdfPage=i;this.linkService=a;this.downloadManager=u;this.imageResourcesPath=h;this.renderForms=v;this.l10n=g;this.annotationStorage=c;this.enableScripting=b;this._hasJSActionsPromise=A;this._fieldObjectsPromise=D;this._mouseState=S;this._annotationCanvasMap=k;this.div=null;this._cancelled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationLayerBuilder,[{key:"render",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o,u,l,c,d,h,p,v=arguments;return _regeneratorRuntime().wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:r=v.length>1&&void 0!==v[1]?v[1]:"display";y.next=3;return Promise.all([this.pdfPage.getAnnotations({intent:r}),this._hasJSActionsPromise,this._fieldObjectsPromise]);case 3:i=y.sent;o=_slicedToArray(i,3);u=o[0];l=o[1];c=void 0!==l&&l;d=o[2];h=void 0===d?null:d;if(!this._cancelled&&0!==u.length){y.next=12;break}return y.abrupt("return");case 12:p={viewport:t.clone({dontFlip:!0}),div:this.div,annotations:u,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:c,fieldObjects:h,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap};if(this.div)a.AnnotationLayer.update(p);else{this.div=document.createElement("div");this.div.className="annotationLayer";this.pageDiv.append(this.div);p.div=this.div;a.AnnotationLayer.render(p);this.l10n.translate(this.div)}case 14:case"end":return y.stop()}}),_callee,this)}))),function render(r){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(){this._cancelled=!0}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}}]);var t;return AnnotationLayerBuilder}();r.AnnotationLayerBuilder=u},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFPageView=void 0;var a=i(4),o=i(3),u=i(1),l=i(32);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var c=u.compatibilityParams.maxCanvasPixels||16777216,d=new WeakMap,h=new WeakMap,p=function(){function PDFPageView(t){var r,i,u,p,v=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFPageView);_classPrivateFieldInitSpec(this,d,{writable:!0,value:a.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,h,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});var y=t.container,g=t.defaultViewport;this.id=t.id;this.renderingId="page"+this.id;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=t.scale||o.DEFAULT_SCALE;this.viewport=g;this.pdfPageRotate=g.rotation;this._optionalContentConfigPromise=t.optionalContentConfigPromise||null;this.hasRestrictedScaling=!1;this.textLayerMode=null!==(r=t.textLayerMode)&&void 0!==r?r:o.TextLayerMode.ENABLE;_classPrivateFieldSet(this,d,null!==(i=t.annotationMode)&&void 0!==i?i:a.AnnotationMode.ENABLE_FORMS);this.imageResourcesPath=t.imageResourcesPath||"";this.useOnlyCssZoom=t.useOnlyCssZoom||!1;this.maxCanvasPixels=t.maxCanvasPixels||c;this.pageColors=t.pageColors||null;this.eventBus=t.eventBus;this.renderingQueue=t.renderingQueue;this.textLayerFactory=t.textLayerFactory;this.annotationLayerFactory=t.annotationLayerFactory;this.annotationEditorLayerFactory=t.annotationEditorLayerFactory;this.xfaLayerFactory=t.xfaLayerFactory;this.textHighlighter=null===(u=t.textHighlighterFactory)||void 0===u?void 0:u.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus});this.structTreeLayerFactory=t.structTreeLayerFactory;this.renderer=t.renderer||o.RendererType.CANVAS;this.l10n=t.l10n||l.NullL10n;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.renderingState=o.RenderingStates.INITIAL;this.resume=null;this._renderError=null;this._isStandalone=!(null!==(p=this.renderingQueue)&&void 0!==p&&p.hasViewer());this._annotationCanvasMap=null;this.annotationLayer=null;this.annotationEditorLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;var m=document.createElement("div");m.className="page";m.style.width=Math.floor(this.viewport.width)+"px";m.style.height=Math.floor(this.viewport.height)+"px";m.setAttribute("data-page-number",this.id);m.setAttribute("role","region");this.l10n.get("page_landmark",{page:this.id}).then((function(t){m.setAttribute("aria-label",t)}));this.div=m;null==y||y.append(m);if(this._isStandalone){var b=t.optionalContentConfigPromise;b&&b.then((function(t){b===v._optionalContentConfigPromise&&(_classPrivateFieldGet(v,h).initialOptionalContent=t.hasInitialVisibility)}))}}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFPageView,[{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:r});this.reset()}},{key:"destroy",value:function destroy(){this.reset();this.pdfPage&&this.pdfPage.cleanup()}},{key:"_renderAnnotationLayer",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=null;r.prev=1;r.next=4;return this.annotationLayer.render(this.viewport,"display");case 4:r.next=9;break;case 6:r.prev=6;r.t0=r.catch(1);t=r.t0;case 9:r.prev=9;this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t});return r.finish(9);case 12:case"end":return r.stop()}}),_callee,this,[[1,6,9,12]])}))),function _renderAnnotationLayer(){return u.apply(this,arguments)})},{key:"_renderAnnotationEditorLayer",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t;return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:t=null;r.prev=1;r.next=4;return this.annotationEditorLayer.render(this.viewport,"display");case 4:r.next=9;break;case 6:r.prev=6;r.t0=r.catch(1);t=r.t0;case 9:r.prev=9;this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:t});return r.finish(9);case 12:case"end":return r.stop()}}),_callee2,this,[[1,6,9,12]])}))),function _renderAnnotationEditorLayer(){return i.apply(this,arguments)})},{key:"_renderXfaLayer",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t,r;return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:t=null;i.prev=1;i.next=4;return this.xfaLayer.render(this.viewport,"display");case 4:r=i.sent;this.textHighlighter&&this._buildXfaTextContentItems(r.textDivs);i.next=11;break;case 8:i.prev=8;i.t0=i.catch(1);t=i.t0;case 11:i.prev=11;this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:t});return i.finish(11);case 14:case"end":return i.stop()}}),_callee3,this,[[1,8,11,14]])}))),function _renderXfaLayer(){return r.apply(this,arguments)})},{key:"_buildXfaTextContentItems",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r,i,a,o,u;return _regeneratorRuntime().wrap((function _callee4$(l){for(;;)switch(l.prev=l.next){case 0:l.next=2;return this.pdfPage.getTextContent();case 2:r=l.sent;i=[];a=_createForOfIteratorHelper(r.items);try{for(a.s();!(o=a.n()).done;){u=o.value;i.push(u.str)}}catch(t){a.e(t)}finally{a.f()}this.textHighlighter.setTextMapping(t,i);this.textHighlighter.enable();case 8:case"end":return l.stop()}}),_callee4,this)}))),function _buildXfaTextContentItems(r){return t.apply(this,arguments)})},{key:"_resetZoomLayer",value:function _resetZoomLayer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var r=this.zoomLayer.firstChild;this.paintedViewportMap.delete(r);r.width=0;r.height=0;t&&this.zoomLayer.remove();this.zoomLayer=null}}},{key:"reset",value:function reset(){var t,r,i,a=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=u.keepZoomLayer,c=void 0!==l&&l,d=u.keepAnnotationLayer,h=void 0!==d&&d,p=u.keepAnnotationEditorLayer,v=void 0!==p&&p,y=u.keepXfaLayer,g=void 0!==y&&y;this.cancelRendering({keepAnnotationLayer:h,keepAnnotationEditorLayer:v,keepXfaLayer:g});this.renderingState=o.RenderingStates.INITIAL;var m=this.div;m.style.width=Math.floor(this.viewport.width)+"px";m.style.height=Math.floor(this.viewport.height)+"px";for(var b=m.childNodes,w=c&&this.zoomLayer||null,A=h&&(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||null,P=v&&(null===(r=this.annotationEditorLayer)||void 0===r?void 0:r.div)||null,D=g&&(null===(i=this.xfaLayer)||void 0===i?void 0:i.div)||null,E=b.length-1;E>=0;E--){var S=b[E];switch(S){case w:case A:case P:case D:continue}S.remove()}m.removeAttribute("data-loaded");A&&this.annotationLayer.hide();if(P)this.annotationEditorLayer.hide();else{var C;null===(C=this.annotationEditorLayer)||void 0===C||C.destroy()}D&&this.xfaLayer.hide();if(!w){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon notVisible";this._isStandalone&&this.toggleLoadingIconSpinner(!0);this.loadingIconDiv.setAttribute("role","img");this.l10n.get("loading").then((function(t){var r;null===(r=a.loadingIconDiv)||void 0===r||r.setAttribute("aria-label",t)}));m.append(this.loadingIconDiv)}},{key:"update",value:function update(t){var r=this,i=t.scale,u=void 0===i?0:i,l=t.rotation,c=void 0===l?null:l,d=t.optionalContentConfigPromise,p=void 0===d?null:d;this.scale=u||this.scale;"number"==typeof c&&(this.rotation=c);if(p instanceof Promise){this._optionalContentConfigPromise=p;p.then((function(t){p===r._optionalContentConfigPromise&&(_classPrivateFieldGet(r,h).initialOptionalContent=t.hasInitialVisibility)}))}var v=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:v});this._isStandalone&&o.docStyle.setProperty("--scale-factor",this.viewport.scale);if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError})}else{var y=!1;if(this.canvas&&this.maxCanvasPixels>0){var g=this.outputScale;(Math.floor(this.viewport.width)*g.sx|0)*(Math.floor(this.viewport.height)*g.sy|0)>this.maxCanvasPixels&&(y=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&y){this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild});this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}}},{key:"cancelRendering",value:function cancelRendering(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.keepAnnotationLayer,i=void 0!==r&&r,a=t.keepAnnotationEditorLayer,o=void 0!==a&&a,u=t.keepXfaLayer,l=void 0!==u&&u;if(this.paintTask){this.paintTask.cancel();this.paintTask=null}this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null}if(this.annotationLayer&&(!i||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.annotationEditorLayer&&(!o||!this.annotationEditorLayer.div)){this.annotationEditorLayer.cancel();this.annotationEditorLayer=null}if(this.xfaLayer&&(!l||!this.xfaLayer.div)){var c;this.xfaLayer.cancel();this.xfaLayer=null;null===(c=this.textHighlighter)||void 0===c||c.disable()}if(this._onTextLayerRendered){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null}}},{key:"cssTransform",value:function cssTransform(t){var r=t.target,i=t.redrawAnnotationLayer,a=void 0!==i&&i,o=t.redrawAnnotationEditorLayer,u=void 0!==o&&o,l=t.redrawXfaLayer,c=void 0!==l&&l,d=this.viewport.width,h=this.viewport.height,p=this.div;r.style.width=r.parentNode.style.width=p.style.width=Math.floor(d)+"px";r.style.height=r.parentNode.style.height=p.style.height=Math.floor(h)+"px";var v=this.viewport.rotation-this.paintedViewportMap.get(r).rotation,y=Math.abs(v),g=1,m=1;if(90===y||270===y){g=h/d;m=d/h}r.style.transform="rotate(".concat(v,"deg) scale(").concat(g,", ").concat(m,")");if(this.textLayer){var b=this.textLayer.viewport,w=this.viewport.rotation-b.rotation,A=Math.abs(w),P=d/b.width;90!==A&&270!==A||(P=d/b.height);var D,E,S=this.textLayer.textLayerDiv;switch(A){case 0:D=E=0;break;case 90:D=0;E="-"+S.style.height;break;case 180:D="-"+S.style.width;E="-"+S.style.height;break;case 270:D="-"+S.style.width;E=0;break;default:console.error("Bad rotation value.")}S.style.transform="rotate(".concat(A,"deg) ")+"scale(".concat(P,") ")+"translate(".concat(D,", ").concat(E,")");S.style.transformOrigin="0% 0%"}a&&this.annotationLayer&&this._renderAnnotationLayer();u&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer();c&&this.xfaLayer&&this._renderXfaLayer()}},{key:"width",get:function get(){return this.viewport.width}},{key:"height",get:function get(){return this.viewport.height}},{key:"getPagePoint",value:function getPagePoint(t,r){return this.viewport.convertToPdfPoint(t,r)}},{key:"toggleLoadingIconSpinner",value:function toggleLoadingIconSpinner(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=this.loadingIconDiv)||void 0===t||t.classList.toggle("notVisible",!r)}},{key:"draw",value:function draw(){var t,r,i,u=this;if(this.renderingState!==o.RenderingStates.INITIAL){console.error("Must be in new state before drawing");this.reset()}var l=this.div,c=this.pdfPage;if(!c){this.renderingState=o.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=o.RenderingStates.RUNNING;var p=document.createElement("div");p.style.width=l.style.width;p.style.height=l.style.height;p.classList.add("canvasWrapper");var v=(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||(null===(r=this.annotationEditorLayer)||void 0===r?void 0:r.div);v?v.before(p):l.append(p);var y=null;if(this.textLayerMode!==o.TextLayerMode.DISABLE&&this.textLayerFactory){var g=document.createElement("div");g.className="textLayer";g.style.width=p.style.width;g.style.height=p.style.height;v?v.before(g):l.append(g);y=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:g,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===o.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter})}this.textLayer=y;if(_classPrivateFieldGet(this,d)!==a.AnnotationMode.DISABLE&&this.annotationLayerFactory){this._annotationCanvasMap||(this._annotationCanvasMap=new Map);this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:l,pdfPage:c,imageResourcesPath:this.imageResourcesPath,renderForms:_classPrivateFieldGet(this,d)===a.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap}))}null!==(i=this.xfaLayer)&&void 0!==i&&i.div&&l.append(this.xfaLayer.div);var m=null;this.renderingQueue&&(m=function renderContinueCallback(t){if(u.renderingQueue.isHighestPriority(u))t();else{u.renderingState=o.RenderingStates.PAUSED;u.resume=function(){u.renderingState=o.RenderingStates.RUNNING;t()}}});var b=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var t,r=arguments;return _regeneratorRuntime().wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:null;w===u.paintTask&&(u.paintTask=null);if(!(t instanceof a.RenderingCancelledException)){i.next=5;break}u._renderError=null;return i.abrupt("return");case 5:u._renderError=t;u.renderingState=o.RenderingStates.FINISHED;if(u.loadingIconDiv){u.loadingIconDiv.remove();delete u.loadingIconDiv}u._resetZoomLayer(!0);_classPrivateFieldGet(u,h).regularAnnotations=!w.separateAnnots;u.eventBus.dispatch("pagerendered",{source:u,pageNumber:u.id,cssTransform:!1,timestamp:performance.now(),error:u._renderError});if(!t){i.next=13;break}throw t;case 13:case"end":return i.stop()}}),_callee5)})));return function finishPaintTask(){return t.apply(this,arguments)}}(),w=this.renderer===o.RendererType.SVG?this.paintOnSvg(p):this.paintOnCanvas(p);w.onRenderContinue=m;this.paintTask=w;var A=w.promise.then((function(){return b(null).then((function(){if(y){var t=c.streamTextContent({includeMarkedContent:!0});y.setTextContentStream(t);y.render()}u.annotationLayer&&u._renderAnnotationLayer().then((function(){if(u.annotationEditorLayerFactory){u.annotationEditorLayer||(u.annotationEditorLayer=u.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:l,pdfPage:c,l10n:u.l10n}));u._renderAnnotationEditorLayer()}}))}))}),(function(t){return b(t)}));if(this.xfaLayerFactory){this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:l,pdfPage:c}));this._renderXfaLayer()}if(this.structTreeLayerFactory&&this.textLayer&&this.canvas){this._onTextLayerRendered=function(t){if(t.pageNumber===u.id){u.eventBus._off("textlayerrendered",u._onTextLayerRendered);u._onTextLayerRendered=null;u.canvas&&u.pdfPage.getStructTree().then((function(t){if(t&&u.canvas){var r=u.structTreeLayer.render(t);r.classList.add("structTree");u.canvas.append(r)}}))}};this.eventBus._on("textlayerrendered",this._onTextLayerRendered);this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:c})}l.setAttribute("data-loaded",!0);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return A}},{key:"paintOnCanvas",value:function paintOnCanvas(t){var r=(0,a.createPromiseCapability)(),i={promise:r.promise,onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){P.cancel()},get separateAnnots(){return P.separateAnnots}},u=this.viewport,l=document.createElement("canvas");l.setAttribute("role","presentation");l.hidden=!0;var c=!0,h=function showCanvas(){if(c){l.hidden=!1;c=!1}};t.append(l);this.canvas=l;var p=l.getContext("2d",{alpha:!1}),v=this.outputScale=new o.OutputScale;if(this.useOnlyCssZoom){var y=u.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});v.sx*=y.width/u.width;v.sy*=y.height/u.height}if(this.maxCanvasPixels>0){var g=u.width*u.height,m=Math.sqrt(this.maxCanvasPixels/g);if(v.sx>m||v.sy>m){v.sx=m;v.sy=m;this.hasRestrictedScaling=!0}else this.hasRestrictedScaling=!1}var b=(0,o.approximateFraction)(v.sx),w=(0,o.approximateFraction)(v.sy);l.width=(0,o.roundToDivide)(u.width*v.sx,b[0]);l.height=(0,o.roundToDivide)(u.height*v.sy,w[0]);l.style.width=(0,o.roundToDivide)(u.width,b[1])+"px";l.style.height=(0,o.roundToDivide)(u.height,w[1])+"px";this.paintedViewportMap.set(l,u);var A={canvasContext:p,transform:v.scaled?[v.sx,0,0,v.sy,0,0]:null,viewport:this.viewport,annotationMode:_classPrivateFieldGet(this,d),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},P=this.pdfPage.render(A);P.onContinue=function(t){h();i.onRenderContinue?i.onRenderContinue(t):t()};P.promise.then((function(){h();r.resolve()}),(function(t){h();r.reject(t)}));return i}},{key:"paintOnSvg",value:function paintOnSvg(t){var r=this,i=!1,u=function ensureNotCancelled(){if(i)throw new a.RenderingCancelledException("Rendering cancelled, page ".concat(r.id),"svg")},l=this.pdfPage,c=this.viewport.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:l.getOperatorList({annotationMode:_classPrivateFieldGet(this,d)}).then((function(i){u();return new a.SVGGraphics(l.commonObjs,l.objs).getSVG(i,c).then((function(i){u();r.svg=i;r.paintedViewportMap.set(i,c);i.style.width=t.style.width;i.style.height=t.style.height;r.renderingState=o.RenderingStates.FINISHED;t.append(i)}))})),onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){i=!0},get separateAnnots(){return!1}}}},{key:"setPageLabel",value:function setPageLabel(t){this.pageLabel="string"==typeof t?t:null;null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"thumbnailCanvas",get:function get(){var t=_classPrivateFieldGet(this,h),r=t.initialOptionalContent,i=t.regularAnnotations;return r&&i?this.canvas:null}}]);var t,r,i,u;return PDFPageView}();r.PDFPageView=p},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.StructTreeLayerBuilder=void 0;function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var i={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},a=/^H(\d+)$/,o=function(){function StructTreeLayerBuilder(t){var r=t.pdfPage;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,StructTreeLayerBuilder);this.pdfPage=r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(StructTreeLayerBuilder,[{key:"render",value:function render(t){return this._walk(t)}},{key:"_setAttributes",value:function _setAttributes(t,r){void 0!==t.alt&&r.setAttribute("aria-label",t.alt);void 0!==t.id&&r.setAttribute("aria-owns",t.id);void 0!==t.lang&&r.setAttribute("lang",t.lang)}},{key:"_walk",value:function _walk(t){if(!t)return null;var r=document.createElement("span");if("role"in t){var o=t.role,u=o.match(a);if(u){r.setAttribute("role","heading");r.setAttribute("aria-level",u[1])}else i[o]&&r.setAttribute("role",i[o])}this._setAttributes(t,r);if(t.children)if(1===t.children.length&&"id"in t.children[0])this._setAttributes(t.children[0],r);else{var l,c=_createForOfIteratorHelper(t.children);try{for(c.s();!(l=c.n()).done;){var d=l.value;r.append(this._walk(d))}}catch(t){c.e(t)}finally{c.f()}}return r}}]);return StructTreeLayerBuilder}();r.StructTreeLayerBuilder=o},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.TextHighlighter=void 0;function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var i=function(){function TextHighlighter(t){var r=t.findController,i=t.eventBus,a=t.pageIndex;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextHighlighter);this.findController=r;this.matches=[];this.eventBus=i;this.pageIdx=a;this._onUpdateTextLayerMatches=null;this.textDivs=null;this.textContentItemsStr=null;this.enabled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextHighlighter,[{key:"setTextMapping",value:function setTextMapping(t,r){this.textDivs=t;this.textContentItemsStr=r}},{key:"enable",value:function enable(){var t=this;if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0;if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=function(r){r.pageIndex!==t.pageIdx&&-1!==r.pageIndex||t._updateMatches()};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}this._updateMatches()}},{key:"disable",value:function disable(){if(this.enabled){this.enabled=!1;if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}}}},{key:"_convertMatches",value:function _convertMatches(t,r){if(!t)return[];for(var i=this.textContentItemsStr,a=0,o=0,u=i.length-1,l=[],c=0,d=t.length;c<d;c++){for(var h=t[c];a!==u&&h>=o+i[a].length;){o+=i[a].length;a++}a===i.length&&console.error("Could not find a matching mapping");var p={begin:{divIdx:a,offset:h-o}};h+=r[c];for(;a!==u&&h>o+i[a].length;){o+=i[a].length;a++}p.end={divIdx:a,offset:h-o};l.push(p)}return l}},{key:"_renderMatches",value:function _renderMatches(t){if(0!==t.length){var r=this.findController,i=this.pageIdx,a=this.textContentItemsStr,o=this.textDivs,u=i===r.selected.pageIdx,l=r.selected.matchIdx,c=null,d={divIdx:-1,offset:void 0},h=l,p=h+1;if(r.state.highlightAll){h=0;p=t.length}else if(!u)return;for(var v=h;v<p;v++){var y=t[v],g=y.begin,m=y.end,b=u&&v===l,w=b?" selected":"",A=0;if(c&&g.divIdx===c.divIdx)appendTextToDiv(c.divIdx,c.offset,g.offset);else{null!==c&&appendTextToDiv(c.divIdx,c.offset,d.offset);beginText(g)}if(g.divIdx===m.divIdx)A=appendTextToDiv(g.divIdx,g.offset,m.offset,"highlight"+w);else{A=appendTextToDiv(g.divIdx,g.offset,d.offset,"highlight begin"+w);for(var P=g.divIdx+1,D=m.divIdx;P<D;P++)o[P].className="highlight middle"+w;beginText(m,"highlight end"+w)}c=m;b&&r.scrollMatchIntoView({element:o[g.divIdx],selectedLeft:A,pageIndex:i,matchIndex:l})}c&&appendTextToDiv(c.divIdx,c.offset,d.offset)}function beginText(t,r){var i=t.divIdx;o[i].textContent="";return appendTextToDiv(i,0,t.offset,r)}function appendTextToDiv(t,r,i,u){var l=o[t];if(l.nodeType===Node.TEXT_NODE){var c=document.createElement("span");l.before(c);c.append(l);o[t]=c;l=c}var d=a[t].substring(r,i),h=document.createTextNode(d);if(u){var p=document.createElement("span");p.className="".concat(u," appended");p.append(h);l.append(p);return u.includes("selected")?p.offsetLeft:0}l.append(h);return 0}}},{key:"_updateMatches",value:function _updateMatches(){if(this.enabled){for(var t=this.findController,r=this.matches,i=this.pageIdx,a=this.textContentItemsStr,o=this.textDivs,u=-1,l=0,c=r.length;l<c;l++){for(var d=r[l],h=Math.max(u,d.begin.divIdx),p=d.end.divIdx;h<=p;h++){var v=o[h];v.textContent=a[h];v.className=""}u=d.end.divIdx+1}if(null!=t&&t.highlightMatches){var y=t.pageMatches[i]||null,g=t.pageMatchesLength[i]||null;this.matches=this._convertMatches(y,g);this._renderMatches(this.matches)}}}}]);return TextHighlighter}();r.TextHighlighter=i},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.TextLayerBuilder=void 0;var a=i(4);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o=function(){function TextLayerBuilder(t){var r=t.textLayerDiv,i=t.eventBus,a=t.pageIndex,o=t.viewport,u=t.highlighter,l=void 0===u?null:u,c=t.enhanceTextSelection,d=void 0!==c&&c;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextLayerBuilder);this.textLayerDiv=r;this.eventBus=i;this.textContent=null;this.textContentItemsStr=[];this.textContentStream=null;this.renderingDone=!1;this.pageNumber=a+1;this.viewport=o;this.textDivs=[];this.textLayerRenderTask=null;this.highlighter=l;this.enhanceTextSelection=d;this._bindMouse()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextLayerBuilder,[{key:"_finishRendering",value:function _finishRendering(){this.renderingDone=!0;if(!this.enhanceTextSelection){var t=document.createElement("div");t.className="endOfContent";this.textLayerDiv.append(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function render(){var t,r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel();this.textDivs.length=0;null===(t=this.highlighter)||void 0===t||t.setTextMapping(this.textDivs,this.textContentItemsStr);var o=document.createDocumentFragment();this.textLayerRenderTask=(0,a.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:o,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:i,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then((function(){var t;r.textLayerDiv.append(o);r._finishRendering();null===(t=r.highlighter)||void 0===t||t.enable()}),(function(t){}))}}},{key:"cancel",value:function cancel(){var t;if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}null===(t=this.highlighter)||void 0===t||t.disable()}},{key:"setTextContentStream",value:function setTextContentStream(t){this.cancel();this.textContentStream=t}},{key:"setTextContent",value:function setTextContent(t){this.cancel();this.textContent=t}},{key:"_bindMouse",value:function _bindMouse(){var t=this,r=this.textLayerDiv,i=null;r.addEventListener("mousedown",(function(a){if(t.enhanceTextSelection&&t.textLayerRenderTask){t.textLayerRenderTask.expandTextDivs(!0);if(i){clearTimeout(i);i=null}}else{var o=r.querySelector(".endOfContent");if(o){var u=a.target!==r;if(u=u&&"none"!==window.getComputedStyle(o).getPropertyValue("-moz-user-select")){var l=r.getBoundingClientRect(),c=Math.max(0,(a.pageY-l.top)/l.height);o.style.top=(100*c).toFixed(2)+"%"}o.classList.add("active")}}}));r.addEventListener("mouseup",(function(){if(t.enhanceTextSelection&&t.textLayerRenderTask)i=setTimeout((function(){t.textLayerRenderTask&&t.textLayerRenderTask.expandTextDivs(!1);i=null}),300);else{var a=r.querySelector(".endOfContent");if(a){a.style.top="";a.classList.remove("active")}}}))}}]);return TextLayerBuilder}();r.TextLayerBuilder=o},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.XfaLayerBuilder=void 0;var a=i(4);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o=function(){function XfaLayerBuilder(t){var r=t.pageDiv,i=t.pdfPage,a=t.annotationStorage,o=void 0===a?null:a,u=t.linkService,l=t.xfaHtml,c=void 0===l?null:l;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaLayerBuilder);this.pageDiv=r;this.pdfPage=i;this.annotationStorage=o;this.linkService=u;this.xfaHtml=c;this.div=null;this._cancelled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaLayerBuilder,[{key:"render",value:function render(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("print"===i){var o={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:i},u=document.createElement("div");this.pageDiv.append(u);o.div=u;var l=a.XfaLayer.render(o);return Promise.resolve(l)}return this.pdfPage.getXfa().then((function(o){if(r._cancelled||!o)return{textDivs:[]};var u={viewport:t.clone({dontFlip:!0}),div:r.div,xfaHtml:o,annotationStorage:r.annotationStorage,linkService:r.linkService,intent:i};if(r.div)return a.XfaLayer.update(u);r.div=document.createElement("div");r.pageDiv.append(r.div);u.div=r.div;return a.XfaLayer.render(u)})).catch((function(t){console.error(t)}))}},{key:"cancel",value:function cancel(){this._cancelled=!0}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}}]);return XfaLayerBuilder}();r.XfaLayerBuilder=o},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.SecondaryToolbar=void 0;var a=i(3),o=i(6),u=i(30);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var l=new WeakSet,c=new WeakSet,d=new WeakSet,h=new WeakSet,p=new WeakSet,v=function(){function SecondaryToolbar(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SecondaryToolbar);_classPrivateMethodInitSpec(this,p);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);this.toolbar=t.toolbar;this.toggleButton=t.toggleButton;this.buttons=[{element:t.presentationModeButton,eventName:"presentationmode",close:!0},{element:t.printButton,eventName:"print",close:!0},{element:t.downloadButton,eventName:"download",close:!0},{element:t.viewBookmarkButton,eventName:null,close:!0},{element:t.firstPageButton,eventName:"firstpage",close:!0},{element:t.lastPageButton,eventName:"lastpage",close:!0},{element:t.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:t.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:t.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:o.CursorTool.SELECT},close:!0},{element:t.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:o.CursorTool.HAND},close:!0},{element:t.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.PAGE},close:!0},{element:t.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.VERTICAL},close:!0},{element:t.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.HORIZONTAL},close:!0},{element:t.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.WRAPPED},close:!0},{element:t.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.NONE},close:!0},{element:t.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.ODD},close:!0},{element:t.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.EVEN},close:!0},{element:t.documentPropertiesButton,eventName:"documentproperties",close:!0}];this.buttons.push({element:t.openFileButton,eventName:"openfile",close:!0});this.items={firstPage:t.firstPageButton,lastPage:t.lastPageButton,pageRotateCw:t.pageRotateCwButton,pageRotateCcw:t.pageRotateCcwButton};this.eventBus=r;this.opened=!1;this.reset();_classPrivateMethodGet(this,c,_bindClickListeners2).call(this);_classPrivateMethodGet(this,d,_bindCursorToolsListener2).call(this,t);_classPrivateMethodGet(this,h,_bindScrollModeListener2).call(this,t);_classPrivateMethodGet(this,p,_bindSpreadModeListener2).call(this,t)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(SecondaryToolbar,[{key:"isOpen",get:function get(){return this.opened}},{key:"setPageNumber",value:function setPageNumber(t){this.pageNumber=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this)}},{key:"setPagesCount",value:function setPagesCount(t){this.pagesCount=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this)}},{key:"reset",value:function reset(){this.pageNumber=0;this.pagesCount=0;_classPrivateMethodGet(this,l,_updateUIState2).call(this);this.eventBus.dispatch("secondarytoolbarreset",{source:this})}},{key:"open",value:function open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}}},{key:"close",value:function close(){if(this.opened){this.opened=!1;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}}},{key:"toggle",value:function toggle(){this.opened?this.close():this.open()}}]);return SecondaryToolbar}();r.SecondaryToolbar=v;function _updateUIState2(){this.items.firstPage.disabled=this.pageNumber<=1;this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;this.items.pageRotateCw.disabled=0===this.pagesCount;this.items.pageRotateCcw.disabled=0===this.pagesCount}function _bindClickListeners2(){var t=this;this.toggleButton.addEventListener("click",this.toggle.bind(this));var r,i=_createForOfIteratorHelper(this.buttons);try{var a=function _loop(){var i=r.value,a=i.element,o=i.eventName,u=i.close,l=i.eventDetails;a.addEventListener("click",(function(r){if(null!==o){var i={source:t};for(var a in l)i[a]=l[a];t.eventBus.dispatch(o,i)}u&&t.close()}))};for(i.s();!(r=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}function _bindCursorToolsListener2(t){var r=t.cursorSelectToolButton,i=t.cursorHandToolButton;this.eventBus._on("cursortoolchanged",(function(t){var a=t.tool,u=a===o.CursorTool.SELECT,l=a===o.CursorTool.HAND;r.classList.toggle("toggled",u);i.classList.toggle("toggled",l);r.setAttribute("aria-checked",u);i.setAttribute("aria-checked",l)}))}function _bindScrollModeListener2(t){var r=this,i=t.scrollPageButton,o=t.scrollVerticalButton,l=t.scrollHorizontalButton,c=t.scrollWrappedButton,d=t.spreadNoneButton,h=t.spreadOddButton,p=t.spreadEvenButton,v=function scrollModeChanged(t){var v=t.mode,y=v===a.ScrollMode.PAGE,g=v===a.ScrollMode.VERTICAL,m=v===a.ScrollMode.HORIZONTAL,b=v===a.ScrollMode.WRAPPED;i.classList.toggle("toggled",y);o.classList.toggle("toggled",g);l.classList.toggle("toggled",m);c.classList.toggle("toggled",b);i.setAttribute("aria-checked",y);o.setAttribute("aria-checked",g);l.setAttribute("aria-checked",m);c.setAttribute("aria-checked",b);var w=r.pagesCount>u.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;i.disabled=w;o.disabled=w;l.disabled=w;c.disabled=w;d.disabled=m;h.disabled=m;p.disabled=m};this.eventBus._on("scrollmodechanged",v);this.eventBus._on("secondarytoolbarreset",(function(t){t.source===r&&v({mode:a.ScrollMode.VERTICAL})}))}function _bindSpreadModeListener2(t){var r=this,i=t.spreadNoneButton,o=t.spreadOddButton,u=t.spreadEvenButton;function spreadModeChanged(t){var r=t.mode,l=r===a.SpreadMode.NONE,c=r===a.SpreadMode.ODD,d=r===a.SpreadMode.EVEN;i.classList.toggle("toggled",l);o.classList.toggle("toggled",c);u.classList.toggle("toggled",d);i.setAttribute("aria-checked",l);o.setAttribute("aria-checked",c);u.setAttribute("aria-checked",d)}this.eventBus._on("spreadmodechanged",spreadModeChanged);this.eventBus._on("secondarytoolbarreset",(function(t){t.source===r&&spreadModeChanged({mode:a.SpreadMode.NONE})}))}},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.Toolbar=void 0;var a=i(3),o=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var u="visiblePageIsLoading",l=new WeakSet,c=new WeakSet,d=function(){function Toolbar(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Toolbar);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);this.toolbar=t.container;this.eventBus=r;this.l10n=i;this.buttons=[{element:t.previous,eventName:"previouspage"},{element:t.next,eventName:"nextpage"},{element:t.zoomIn,eventName:"zoomin"},{element:t.zoomOut,eventName:"zoomout"},{element:t.print,eventName:"print"},{element:t.presentationModeButton,eventName:"presentationmode"},{element:t.download,eventName:"download"},{element:t.viewBookmark,eventName:null},{element:t.editorNoneButton,eventName:"switchannotationeditormode",eventDetails:{mode:o.AnnotationEditorType.NONE}},{element:t.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{mode:o.AnnotationEditorType.FREETEXT}},{element:t.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{mode:o.AnnotationEditorType.INK}}];this.buttons.push({element:t.openFile,eventName:"openfile"});this.items={numPages:t.numPages,pageNumber:t.pageNumber,scaleSelect:t.scaleSelect,customScaleOption:t.customScaleOption,previous:t.previous,next:t.next,zoomIn:t.zoomIn,zoomOut:t.zoomOut,editorNoneButton:t.editorNoneButton,editorFreeTextButton:t.editorFreeTextButton,editorFreeTextParamsToolbar:t.editorFreeTextParamsToolbar,editorInkButton:t.editorInkButton,editorInkParamsToolbar:t.editorInkParamsToolbar};this._wasLocalized=!1;this.reset();this._bindListeners(t)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(Toolbar,[{key:"setPageNumber",value:function setPageNumber(t,r){this.pageNumber=t;this.pageLabel=r;this._updateUIState(!1)}},{key:"setPagesCount",value:function setPagesCount(t,r){this.pagesCount=t;this.hasPageLabels=r;this._updateUIState(!0)}},{key:"setPageScale",value:function setPageScale(t,r){this.pageScaleValue=(t||r).toString();this.pageScale=r;this._updateUIState(!1)}},{key:"reset",value:function reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=!1;this.pagesCount=0;this.pageScaleValue=a.DEFAULT_SCALE_VALUE;this.pageScale=a.DEFAULT_SCALE;this._updateUIState(!0);this.updateLoadingIndicatorState();this.eventBus.dispatch("toolbarreset",{source:this})}},{key:"_bindListeners",value:function _bindListeners(t){var r,i=this,o=this.items,u=o.pageNumber,d=o.scaleSelect,h=this,p=_createForOfIteratorHelper(this.buttons);try{var v=function _loop(){var t=r.value,a=t.element,o=t.eventName,u=t.eventDetails;a.addEventListener("click",(function(t){if(null!==o){var r={source:i};if(u)for(var a in u)r[a]=u[a];i.eventBus.dispatch(o,r)}}))};for(p.s();!(r=p.n()).done;)v()}catch(t){p.e(t)}finally{p.f()}u.addEventListener("click",(function(){this.select()}));u.addEventListener("change",(function(){h.eventBus.dispatch("pagenumberchanged",{source:h,value:this.value})}));d.addEventListener("change",(function(){"custom"!==this.value&&h.eventBus.dispatch("scalechanged",{source:h,value:this.value})}));d.addEventListener("click",(function(t){var r=t.target;this.value===h.pageScaleValue&&"OPTION"===r.tagName.toUpperCase()&&this.blur()}));d.oncontextmenu=a.noContextMenuHandler;this.eventBus._on("localized",(function(){i._wasLocalized=!0;_classPrivateMethodGet(i,c,_adjustScaleWidth2).call(i);i._updateUIState(!0)}));_classPrivateMethodGet(this,l,_bindEditorToolsListener2).call(this,t)}},{key:"_updateUIState",value:function _updateUIState(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._wasLocalized){var r=this.pageNumber,i=this.pagesCount,o=this.pageScaleValue,u=this.pageScale,l=this.items;if(t){if(this.hasPageLabels)l.pageNumber.type="text";else{l.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:i}).then((function(t){l.numPages.textContent=t}))}l.pageNumber.max=i}if(this.hasPageLabels){l.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:r,pagesCount:i}).then((function(t){l.numPages.textContent=t}))}else l.pageNumber.value=r;l.previous.disabled=r<=1;l.next.disabled=r>=i;l.zoomOut.disabled=u<=a.MIN_SCALE;l.zoomIn.disabled=u>=a.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(1e4*u)/100}).then((function(t){var r,i=!1,a=_createForOfIteratorHelper(l.scaleSelect.options);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(u.value===o){u.selected=!0;i=!0}else u.selected=!1}}catch(t){a.e(t)}finally{a.f()}if(!i){l.customScaleOption.textContent=t;l.customScaleOption.selected=!0}}))}}},{key:"updateLoadingIndicatorState",value:function updateLoadingIndicatorState(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.items.pageNumber;r.classList.toggle(u,t)}}]);return Toolbar}();r.Toolbar=d;function _bindEditorToolsListener2(t){var r=this,i=t.editorNoneButton,a=t.editorFreeTextButton,u=t.editorFreeTextParamsToolbar,l=t.editorInkButton,c=t.editorInkParamsToolbar,d=function editorModeChanged(t){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=[{mode:o.AnnotationEditorType.NONE,button:i},{mode:o.AnnotationEditorType.FREETEXT,button:a,toolbar:u},{mode:o.AnnotationEditorType.INK,button:l,toolbar:c}],h=0,p=d;h<p.length;h++){var v=p[h],y=v.mode,g=v.button,m=v.toolbar,b=y===t.mode;g.classList.toggle("toggled",b);g.setAttribute("aria-checked",b);g.disabled=r;m&&m.classList.toggle("hidden",!b)}};this.eventBus._on("annotationeditormodechanged",d);this.eventBus._on("toolbarreset",(function(t){t.source===r&&d({mode:o.AnnotationEditorType.NONE},!0)}))}function _adjustScaleWidth2(){return _adjustScaleWidth3.apply(this,arguments)}function _adjustScaleWidth3(){return(_adjustScaleWidth3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,o,u,l,c,d,h,p,v,y,g,m;return _regeneratorRuntime().wrap((function _callee$(b){for(;;)switch(b.prev=b.next){case 0:t=this.items,r=this.l10n;i=Promise.all([r.get("page_scale_auto"),r.get("page_scale_actual"),r.get("page_scale_fit"),r.get("page_scale_width")]);b.next=4;return a.animationStarted;case 4:o=getComputedStyle(t.scaleSelect),u=parseInt(o.getPropertyValue("--scale-select-container-width"),10),l=parseInt(o.getPropertyValue("--scale-select-overflow"),10);c=document.createElement("canvas");(d=c.getContext("2d",{alpha:!1})).font="".concat(o.fontSize," ").concat(o.fontFamily);h=0;b.t0=_createForOfIteratorHelper;b.next=12;return i;case 12:b.t1=b.sent;p=(0,b.t0)(b.t1);try{for(p.s();!(v=p.n()).done;){y=v.value;g=d.measureText(y);(m=g.width)>h&&(h=m)}}catch(t){p.e(t)}finally{p.f()}(h+=2*l)>u&&a.docStyle.setProperty("--scale-select-container-width","".concat(h,"px"));c.width=0;c.height=0;case 19:case"end":return b.stop()}}),_callee,this)})))).apply(this,arguments)}},(t,r)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.ViewHistory=void 0;function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var i=function(){function ViewHistory(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;_classCallCheck(this,ViewHistory);this.fingerprint=t;this.cacheSize=i;this._initializedPromise=this._readFromStorage().then((function(t){var i=JSON.parse(t||"{}"),a=-1;if(Array.isArray(i.files)){for(;i.files.length>=r.cacheSize;)i.files.shift();for(var o=0,u=i.files.length;o<u;o++){if(i.files[o].fingerprint===r.fingerprint){a=o;break}}}else i.files=[];-1===a&&(a=i.files.push({fingerprint:r.fingerprint})-1);r.file=i.files[a];r.database=i}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(ViewHistory,[{key:"_writeToStorage",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",t);case 2:case"end":return r.stop()}}),_callee,this)}))),function _writeToStorage(){return u.apply(this,arguments)})},{key:"_readFromStorage",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem("pdfjs.history"));case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(){return o.apply(this,arguments)})},{key:"set",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t,r){return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:this.file[t]=r;return i.abrupt("return",this._writeToStorage());case 4:case"end":return i.stop()}}),_callee3,this)}))),function set(t,r){return a.apply(this,arguments)})},{key:"setMultiple",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:for(r in t)this.file[r]=t[r];return i.abrupt("return",this._writeToStorage());case 4:case"end":return i.stop()}}),_callee4,this)}))),function setMultiple(t){return i.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t,r){var i;return _regeneratorRuntime().wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._initializedPromise;case 2:i=this.file[t];return a.abrupt("return",void 0!==i?i:r);case 4:case"end":return a.stop()}}),_callee5,this)}))),function get(t,i){return r.apply(this,arguments)})},{key:"getMultiple",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t){var r,i,a;return _regeneratorRuntime().wrap((function _callee6$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._initializedPromise;case 2:r=Object.create(null);for(i in t){a=this.file[i];r[i]=void 0!==a?a:t[i]}return o.abrupt("return",r);case 5:case"end":return o.stop()}}),_callee6,this)}))),function getMultiple(r){return t.apply(this,arguments)})}]);var t,r,i,a,o,u;return ViewHistory}();r.ViewHistory=i},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GenericCom=void 0;var a=i(2),o=i(43),u=i(44),l=i(45),c=i(47);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}r.GenericCom={};var d=function(t){_inherits(GenericPreferences,t);var r,i,a=_createSuper(GenericPreferences);function GenericPreferences(){_classCallCheck(this,GenericPreferences);return a.apply(this,arguments)}_createClass(GenericPreferences,[{key:"_writeToStorage",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:localStorage.setItem("pdfjs.preferences",JSON.stringify(t));case 1:case"end":return r.stop()}}),_callee)}))),function _writeToStorage(t){return i.apply(this,arguments)})},{key:"_readFromStorage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",JSON.parse(localStorage.getItem("pdfjs.preferences")));case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(t){return r.apply(this,arguments)})}]);return GenericPreferences}(o.BasePreferences),h=function(t){_inherits(GenericExternalServices,t);var r=_createSuper(GenericExternalServices);function GenericExternalServices(){_classCallCheck(this,GenericExternalServices);return r.apply(this,arguments)}_createClass(GenericExternalServices,null,[{key:"createDownloadManager",value:function createDownloadManager(t){return new u.DownloadManager}},{key:"createPreferences",value:function createPreferences(){return new d}},{key:"createL10n",value:function createL10n(t){var r=t.locale,i=void 0===r?"en-US":r;return new l.GenericL10n(i)}},{key:"createScripting",value:function createScripting(t){var r=t.sandboxBundleSrc;return new c.GenericScripting(r)}}]);return GenericExternalServices}(a.DefaultExternalServices);a.PDFViewerApplication.externalServices=h},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.BasePreferences=void 0;i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var a=new WeakMap,o=new WeakMap,u=new WeakMap,l=function(){function BasePreferences(){var t=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BasePreferences);_classPrivateFieldInitSpec(this,a,{writable:!0,value:Object.freeze({annotationEditorMode:-1,annotationMode:2,cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0,renderer:"canvas"})});_classPrivateFieldInitSpec(this,o,{writable:!0,value:Object.create(null)});_classPrivateFieldInitSpec(this,u,{writable:!0,value:null});if(this.constructor===BasePreferences)throw new Error("Cannot initialize BasePreferences.");_classPrivateFieldSet(this,u,this._readFromStorage(_classPrivateFieldGet(this,a)).then((function(r){for(var i in _classPrivateFieldGet(t,a)){var u=null==r?void 0:r[i];_typeof(u)===_typeof(_classPrivateFieldGet(t,a)[i])&&(_classPrivateFieldGet(t,o)[i]=u)}})))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(BasePreferences,[{key:"_writeToStorage",value:(d=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented: _writeToStorage");case 1:case"end":return t.stop()}}),_callee)}))),function _writeToStorage(t){return d.apply(this,arguments)})},{key:"_readFromStorage",value:(c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented: _readFromStorage");case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(t){return c.apply(this,arguments)})},{key:"reset",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t,r=this;return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return _classPrivateFieldGet(this,u);case 2:t=_classPrivateFieldGet(this,o);_classPrivateFieldSet(this,o,Object.create(null));return i.abrupt("return",this._writeToStorage(_classPrivateFieldGet(this,a)).catch((function(i){_classPrivateFieldSet(r,o,t);throw i})));case 5:case"end":return i.stop()}}),_callee3,this)}))),function reset(){return l.apply(this,arguments)})},{key:"set",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t,r){var i,l,c,d,h=this;return _regeneratorRuntime().wrap((function _callee4$(p){for(;;)switch(p.prev=p.next){case 0:p.next=2;return _classPrivateFieldGet(this,u);case 2:i=_classPrivateFieldGet(this,a)[t],l=_classPrivateFieldGet(this,o);if(void 0!==i){p.next=7;break}throw new Error('Set preference: "'.concat(t,'" is undefined.'));case 7:if(void 0!==r){p.next=9;break}throw new Error("Set preference: no value is specified.");case 9:c=_typeof(r),d=_typeof(i);if(c===d){p.next=18;break}if("number"!==c||"string"!==d){p.next=15;break}r=r.toString();p.next=16;break;case 15:throw new Error('Set preference: "'.concat(r,'" is a ').concat(c,", expected a ").concat(d,"."));case 16:p.next=20;break;case 18:if("number"!==c||Number.isInteger(r)){p.next=20;break}throw new Error('Set preference: "'.concat(r,'" must be an integer.'));case 20:_classPrivateFieldGet(this,o)[t]=r;return p.abrupt("return",this._writeToStorage(_classPrivateFieldGet(this,o)).catch((function(t){_classPrivateFieldSet(h,o,l);throw t})));case 22:case"end":return p.stop()}}),_callee4,this)}))),function set(t,r){return i.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){var r,i;return _regeneratorRuntime().wrap((function _callee5$(l){for(;;)switch(l.prev=l.next){case 0:l.next=2;return _classPrivateFieldGet(this,u);case 2:if(void 0!==(i=_classPrivateFieldGet(this,a)[t])){l.next=5;break}throw new Error('Get preference: "'.concat(t,'" is undefined.'));case 5:return l.abrupt("return",null!==(r=_classPrivateFieldGet(this,o)[t])&&void 0!==r?r:i);case 6:case"end":return l.stop()}}),_callee5,this)}))),function get(t){return r.apply(this,arguments)})},{key:"getAll",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){var t,r,i;return _regeneratorRuntime().wrap((function _callee6$(l){for(;;)switch(l.prev=l.next){case 0:l.next=2;return _classPrivateFieldGet(this,u);case 2:t=Object.create(null);for(r in _classPrivateFieldGet(this,a))t[r]=null!==(i=_classPrivateFieldGet(this,o)[r])&&void 0!==i?i:_classPrivateFieldGet(this,a)[r];return l.abrupt("return",t);case 5:case"end":return l.stop()}}),_callee6,this)}))),function getAll(){return t.apply(this,arguments)})}]);var t,r,i,l,c,d;return BasePreferences}();r.BasePreferences=l},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.DownloadManager=void 0;var a=i(4);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function _download(t,r){var i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=t;i.target="_parent";"download"in i&&(i.download=r);(document.body||document.documentElement).append(i);i.click();i.remove()}var o=function(){function DownloadManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DownloadManager);this._openBlobUrls=new WeakMap}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(DownloadManager,[{key:"downloadUrl",value:function downloadUrl(t,r){(0,a.createValidAbsoluteUrl)(t,"http://example.com")?_download(t+"#pdfjs.action=download",r):console.error("downloadUrl - not a valid URL: ".concat(t))}},{key:"downloadData",value:function downloadData(t,r,i){_download(URL.createObjectURL(new Blob([t],{type:i})),r)}},{key:"openOrDownloadData",value:function openOrDownloadData(t,r,i){var o=(0,a.isPdfFile)(i),u=o?"application/pdf":"";if(o){var l,c=this._openBlobUrls.get(t);if(!c){c=URL.createObjectURL(new Blob([r],{type:u}));this._openBlobUrls.set(t,c)}l="?file="+encodeURIComponent(c+"#"+i);try{window.open(l);return!0}catch(r){console.error("openOrDownloadData: ".concat(r));URL.revokeObjectURL(c);this._openBlobUrls.delete(t)}}this.downloadData(r,i,u);return!1}},{key:"download",value:function download(t,r,i){_download(URL.createObjectURL(t),i)}}]);return DownloadManager}();r.DownloadManager=o},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GenericL10n=void 0;i(46);var a=i(32);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}var o=document.webL10n,u=function(){function GenericL10n(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GenericL10n);this._lang=t;this._ready=new Promise((function(r,i){o.setLanguage((0,a.fixupLangCode)(t),(function(){r(o)}))}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(GenericL10n,[{key:"getLanguage",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:t=r.sent;return r.abrupt("return",t.getLanguage());case 4:case"end":return r.stop()}}),_callee,this)}))),function getLanguage(){return u.apply(this,arguments)})},{key:"getDirection",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t;return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:t=r.sent;return r.abrupt("return",t.getDirection());case 4:case"end":return r.stop()}}),_callee2,this)}))),function getDirection(){return i.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){var r,i,o,u=arguments;return _regeneratorRuntime().wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:null;i=u.length>2&&void 0!==u[2]?u[2]:(0,a.getL10nFallback)(t,r);l.next=4;return this._ready;case 4:o=l.sent;return l.abrupt("return",o.get(t,r,i));case 6:case"end":return l.stop()}}),_callee3,this)}))),function get(t){return r.apply(this,arguments)})},{key:"translate",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._ready;case 2:r=i.sent;return i.abrupt("return",r.translate(t));case 4:case"end":return i.stop()}}),_callee4,this)}))),function translate(r){return t.apply(this,arguments)})}]);var t,r,i,u;return GenericL10n}();r.GenericL10n=u},()=>{document.webL10n=function(t,r,i){var a={},o="",u="textContent",l="",c={},d="loading";function xhrLoadText(t,r,i){r=r||function _onSuccess(t){};i=i||function _onFailure(){};var a=new XMLHttpRequest;a.open("GET",t,true);a.overrideMimeType&&a.overrideMimeType("text/plain; charset=utf-8");a.onreadystatechange=function(){4==a.readyState&&(200==a.status||0===a.status?r(a.responseText):i())};a.onerror=i;a.ontimeout=i;try{a.send(null)}catch(t){i()}}function parseResource(t,r,i,l){var c=t.replace(/[^\/]*$/,"")||"./";function evalString(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(t,(function(t){o+=t;!function parseProperties(t,i){var a={},o=/^\s*|\s*$/,u=/^\s*#|^\s*$/,l=/^\s*\[(.*)\]\s*$/,d=/^\s*@import\s+url\((.*)\)\s*$/i,h=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(t,i,p){var v=t.replace(o,"").split(/[\r\n]+/),y="*",g=r.split("-",1)[0],m=!1,b="";!function nextEntry(){for(;;){if(!v.length){p();return}var t=v.shift();if(!u.test(t)){if(i){if(b=l.exec(t)){y=b[1].toLowerCase();m="*"!==y&&y!==r&&y!==g;continue}if(m)continue;if(b=d.exec(t)){loadImport(c+b[1],nextEntry);return}}var o=t.match(h);o&&3==o.length&&(a[o[1]]=evalString(o[2]))}}}()}function loadImport(t,r){xhrLoadText(t,(function(t){parseRawLines(t,!1,r)}),(function(){console.warn(t+" not found.");r()}))}parseRawLines(t,!0,(function(){i(a)}))}(t,(function(t){for(var r in t){var o,l,c=r.lastIndexOf(".");if(c>0){o=r.substring(0,c);l=r.substring(c+1)}else{o=r;l=u}a[o]||(a[o]={});a[o][l]=t[r]}i&&i()}))}),l)}function loadLocale(t,i){t&&(t=t.toLowerCase());i=i||function _callback(){};!function clear(){a={};o="";l=""}();l=t;var u=function getL10nResourceLinks(){return r.querySelectorAll('link[type="application/l10n"]')}(),c=u.length;if(0!==c){var h,p=0;h=function onResourceLoaded(){if(++p>=c){i();d="complete"}};for(var v=0;v<c;v++){new L10nResourceLink(u[v]).load(t,h)}}else{var y=function getL10nDictionary(){var t=r.querySelector('script[type="application/l10n"]');return t?JSON.parse(t.innerHTML):null}();if(y&&y.locales&&y.default_locale){console.log("using the embedded JSON directory, early way out");if(!(a=y.locales[t])){var g=y.default_locale.toLowerCase();for(var m in y.locales){if((m=m.toLowerCase())===t){a=y.locales[t];break}m===g&&(a=y.locales[g])}}i()}else console.log("no resource to load, early way out");d="complete"}function L10nResourceLink(t){var r=t.href;this.load=function(t,i){parseResource(r,t,i,(function(){console.warn(r+" not found.");console.warn('"'+t+'" resource not found');l="";i()}))}}}c.plural=function(t,r,i,o){var d=parseFloat(r);if(isNaN(d))return t;if(o!=u)return t;c._pluralRules||(c._pluralRules=function getPluralRules(t){function isIn(t,r){return-1!==r.indexOf(t)}function isBetween(t,r,i){return r<=t&&t<=i}var r={0:function _(t){return"other"},1:function _(t){return isBetween(t%100,3,10)?"few":0===t?"zero":isBetween(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function _(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function _(t){return 1==t?"one":"other"},4:function _(t){return isBetween(t,0,1)?"one":"other"},5:function _(t){return isBetween(t,0,2)&&2!=t?"one":"other"},6:function _(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function _(t){return 2==t?"two":1==t?"one":"other"},8:function _(t){return isBetween(t,3,6)?"few":isBetween(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function _(t){return 0===t||1!=t&&isBetween(t%100,1,19)?"few":1==t?"one":"other"},10:function _(t){return isBetween(t%10,2,9)&&!isBetween(t%100,11,19)?"few":t%10!=1||isBetween(t%100,11,19)?"other":"one"},11:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":t%10==0||isBetween(t%10,5,9)||isBetween(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function _(t){return isBetween(t,2,4)?"few":1==t?"one":"other"},13:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":1!=t&&isBetween(t%10,0,1)||isBetween(t%10,5,9)||isBetween(t%100,12,14)?"many":1==t?"one":"other"},14:function _(t){return isBetween(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function _(t){return 0===t||isBetween(t%100,2,10)?"few":isBetween(t%100,11,19)?"many":1==t?"one":"other"},16:function _(t){return t%10==1&&11!=t?"one":"other"},17:function _(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function _(t){return 0===t?"zero":isBetween(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function _(t){return isBetween(t,2,10)?"few":isBetween(t,0,1)?"one":"other"},20:function _(t){return!isBetween(t%10,3,4)&&t%10!=9||isBetween(t%100,10,19)||isBetween(t%100,70,79)||isBetween(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||isIn(t%100,[12,72,92])?t%10!=1||isIn(t%100,[11,71,91])?"other":"one":"two":"few"},21:function _(t){return 0===t?"zero":1==t?"one":"other"},22:function _(t){return isBetween(t,0,1)||isBetween(t,11,99)?"one":"other"},23:function _(t){return isBetween(t%10,1,2)||t%20==0?"one":"other"},24:function _(t){return isBetween(t,3,10)||isBetween(t,13,19)?"few":isIn(t,[2,12])?"two":isIn(t,[1,11])?"one":"other"}},i={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];if(!(i in r)){console.warn("plural form unknown for ["+t+"]");return function(){return"other"}}return r[i]}(l));var h="["+c._pluralRules(d)+"]";0===d&&i+"[zero]"in a?t=a[i+"[zero]"][o]:1==d&&i+"[one]"in a?t=a[i+"[one]"][o]:2==d&&i+"[two]"in a?t=a[i+"[two]"][o]:i+h in a?t=a[i+h][o]:i+"[other]"in a&&(t=a[i+"[other]"][o]);return t};function getL10nData(t,r,i){var o=a[t];if(!o){console.warn("#"+t+" is undefined.");if(!i)return null;o=i}var u={};for(var l in o){var c=o[l];c=substArguments(c=substIndexes(c,r,t,l),r,t);u[l]=c}return u}function substIndexes(t,r,i,o){var u=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!u||!u.length)return t;var l,d=u[1],h=u[2];r&&h in r?l=r[h]:h in a&&(l=a[h]);if(d in c){t=(0,c[d])(t,l,i,o)}return t}function substArguments(t,r,i){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,o){if(r&&o in r)return r[o];if(o in a)return a[o];console.log("argument {{"+o+"}} for #"+i+" is undefined.");return t}))}function translateElement(t){var i=function getL10nAttributes(t){if(!t)return{};var r=t.getAttribute("data-l10n-id"),i=t.getAttribute("data-l10n-args"),a={};if(i)try{a=JSON.parse(i)}catch(t){console.warn("could not parse arguments for #"+r)}return{id:r,args:a}}(t);if(i.id){var a=getL10nData(i.id,i.args);if(a){if(a[u]){if(0===function getChildElementCount(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var r=0,i=0;i<t.childNodes.length;i++)r+=1===t.nodeType?1:0;return r}(t))t[u]=a[u];else{for(var o=t.childNodes,l=!1,c=0,d=o.length;c<d;c++)if(3===o[c].nodeType&&/\S/.test(o[c].nodeValue))if(l)o[c].nodeValue="";else{o[c].nodeValue=a[u];l=!0}if(!l){var h=r.createTextNode(a[u]);t.prepend(h)}}delete a[u]}for(var p in a)t[p]=a[p]}else console.warn("#"+i.id+" is undefined.")}}return{get:function get(t,r,i){var a,o=t.lastIndexOf("."),l=u;if(o>0){l=t.substring(o+1);t=t.substring(0,o)}i&&((a={})[l]=i);var c=getL10nData(t,r,a);return c&&l in c?c[l]:"{{"+t+"}}"},getData:function getData(){return a},getText:function getText(){return o},getLanguage:function getLanguage(){return l},setLanguage:function setLanguage(t,r){loadLocale(t,(function(){r&&r()}))},getDirection:function getDirection(){var t=l.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function translateFragment(t){for(var i=function getTranslatableChildren(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||r.documentElement),a=i.length,o=0;o<a;o++)translateElement(i[o]);translateElement(t)},getReadyState:function getReadyState(){return d},ready:function ready(i){i&&("complete"==d||"interactive"==d?t.setTimeout((function(){i()})):r.addEventListener&&r.addEventListener("localized",(function once(){r.removeEventListener("localized",once);i()})))}}}(window,document)},(t,r,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GenericScripting=void 0;r.docPropertiesLookup=function docPropertiesLookup(t){return _docPropertiesLookup.apply(this,arguments)};var a=i(4);function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,a){var o=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(o.prototype),l=new Context(a||[]);return u._invoke=function(t,r,i){var a="suspendedStart";return function(o,u){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw u;return doneResult()}for(i.method=o,i.arg=u;;){var l=i.delegate;if(l){var d=maybeInvokeDelegate(l,i);if(d){if(d===c)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}(t,i,l),u}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&i.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,u,l){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,l)}),(function(t){invoke("throw",t,u,l)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,l)}))}l(c.arg)}var a;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,c;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,u=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,i,a,o),u);return t.isGeneratorFunction(i)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return u.type="throw",u.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,a.key,a)}}function asyncGeneratorStep(t,r,i,a,o,u,l){try{var c=t[u](l),d=c.value}catch(t){i(t);return}c.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _docPropertiesLookup(){return(_docPropertiesLookup=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r,i,o,u,l,c,d,h,p;return _regeneratorRuntime().wrap((function _callee4$(v){for(;;)switch(v.prev=v.next){case 0:i=(r="").split("#")[0];v.next=3;return t.getMetadata();case 3:o=v.sent;u=o.info;l=o.metadata;c=o.contentDispositionFilename;if(d=o.contentLength){v.next=14;break}v.next=11;return t.getDownloadInfo();case 11:h=v.sent;p=h.length;d=p;case 14:return v.abrupt("return",_objectSpread(_objectSpread({},u),{},{baseURL:i,filesize:d,filename:c||(0,a.getPdfFilenameFromUrl)(r),metadata:null==l?void 0:l.getRaw(),authors:null==l?void 0:l.get("dc:creator"),numPages:t.numPages,URL:r}));case 15:case"end":return v.stop()}}),_callee4)})))).apply(this,arguments)}var o=function(){function GenericScripting(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GenericScripting);this._ready=(0,a.loadScript)(t,!0).then((function(){return window.pdfjsSandbox.QuickJSSandbox()}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(GenericScripting,[{key:"createSandbox",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:r.sent.create(t);case 4:case"end":return r.stop()}}),_callee,this)}))),function createSandbox(t){return i.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._ready;case 2:r=i.sent;setTimeout((function(){return r.dispatchEvent(t)}),0);case 4:case"end":return i.stop()}}),_callee2,this)}))),function dispatchEventInSandbox(t){return r.apply(this,arguments)})},{key:"destroySandbox",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){return _regeneratorRuntime().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return this._ready;case 2:t.sent.nukeSandbox();case 4:case"end":return t.stop()}}),_callee3,this)}))),function destroySandbox(){return t.apply(this,arguments)})}]);var t,r,i;return GenericScripting}();r.GenericScripting=o},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFPrintService=PDFPrintService;var a=i(4),o=i(2),u=i(49);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,o,u=[],l=!0,c=!1;try{for(i=i.call(t);!(l=(a=i.next()).done);l=!0){u.push(a.value);if(r&&u.length===r)break}}catch(t){c=!0;o=t}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}return u}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var l=null,c=null,d=null;function PDFPrintService(t,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6?arguments[6]:void 0;this.pdfDocument=t;this.pagesOverview=r;this.printContainer=i;this._printResolution=a||150;this._optionalContentConfigPromise=o||t.getOptionalContentConfig();this._printAnnotationStoragePromise=u||Promise.resolve();this.l10n=l;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas")}PDFPrintService.prototype={layout:function layout(){this.throwIfInactive();var t=document.querySelector("body");t.setAttribute("data-pdfjsprinting",!0);this.pagesOverview.every((function(t){return t.width===this.pagesOverview[0].width&&t.height===this.pagesOverview[0].height}),this)||console.warn("Not all pages have the same size. The printed result may be incorrect!");this.pageStyleSheet=document.createElement("style");var r=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+r.width+"pt "+r.height+"pt;}";t.append(this.pageStyleSheet)},destroy:function destroy(){if(l===this){this.printContainer.textContent="";document.querySelector("body").removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;l=null;ensureOverlay().then((function(){d.active===c&&d.close(c)}))}},renderPages:function renderPages(){var t=this;if(this.pdfDocument.isPureXfa){(0,u.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument);return Promise.resolve()}var r=this.pagesOverview.length;return new Promise((function renderNextPage(i,o){t.throwIfInactive();if(++t.currentPage>=r){renderProgress(r,r,t.l10n);i()}else{var u=t.currentPage;renderProgress(u,r,t.l10n);(function renderPage(t,r,i,o,u,c,d){var h=l.scratchCanvas,p=u/a.PixelsPerInch.PDF;h.width=Math.floor(o.width*p);h.height=Math.floor(o.height*p);var v=h.getContext("2d");v.save();v.fillStyle="rgb(255, 255, 255)";v.fillRect(0,0,h.width,h.height);v.restore();return Promise.all([r.getPage(i),d]).then((function(t){var r=_slicedToArray(t,2),i=r[0],u=r[1],l={canvasContext:v,transform:[p,0,0,p,0,0],viewport:i.getViewport({scale:1,rotation:o.rotation}),intent:"print",annotationMode:a.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:c,printAnnotationStorage:u};return i.render(l).promise}))})(0,t.pdfDocument,u+1,t.pagesOverview[u],t._printResolution,t._optionalContentConfigPromise,t._printAnnotationStoragePromise).then(t.useRenderedPage.bind(t)).then((function(){renderNextPage(i,o)}),o)}}))},useRenderedPage:function useRenderedPage(){this.throwIfInactive();var t=document.createElement("img"),r=this.scratchCanvas;"toBlob"in r?r.toBlob((function(r){t.src=URL.createObjectURL(r)})):t.src=r.toDataURL();var i=document.createElement("div");i.className="printedPage";i.append(t);this.printContainer.append(i);return new Promise((function(r,i){t.onload=r;t.onerror=i}))},performPrint:function performPrint(){var t=this;this.throwIfInactive();return new Promise((function(r){setTimeout((function(){if(t.active){p.call(window);setTimeout(r,20)}else r()}),0)}))},get active(){return this===l},throwIfInactive:function throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};var h,p=window.print;window.print=function(){if(l)console.warn("Ignored window.print() because of a pending print job.");else{ensureOverlay().then((function(){l&&d.open(c)}));try{dispatchEvent("beforeprint")}finally{if(!l){console.error("Expected print service to be initialized.");ensureOverlay().then((function(){d.active===c&&d.close(c)}));return}var t=l;l.renderPages().then((function(){return t.performPrint()})).catch((function(){})).then((function(){t.active&&abort()}))}}};function dispatchEvent(t){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!1,!1,"custom");window.dispatchEvent(r)}function abort(){if(l){l.destroy();dispatchEvent("afterprint")}}function renderProgress(t,r,i){c||(c=document.getElementById("printServiceDialog"));var a=Math.round(100*t/r),o=c.querySelector("progress"),u=c.querySelector(".relative-progress");o.value=a;i.get("print_progress_percent",{progress:a}).then((function(t){u.textContent=t}))}window.addEventListener("keydown",(function(t){if(80===t.keyCode&&(t.ctrlKey||t.metaKey)&&!t.altKey&&(!t.shiftKey||window.chrome||window.opera)){window.print();t.preventDefault();t.stopImmediatePropagation?t.stopImmediatePropagation():t.stopPropagation()}}),!0);if("onbeforeprint"in window){var v=function stopPropagationIfNeeded(t){"custom"!==t.detail&&t.stopImmediatePropagation&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",v);window.addEventListener("afterprint",v)}function ensureOverlay(){if(!h){if(!(d=o.PDFViewerApplication.overlayManager))throw new Error("The overlay manager has not yet been initialized.");c||(c=document.getElementById("printServiceDialog"));h=d.register(c,!0);document.getElementById("printCancel").onclick=abort;c.addEventListener("close",abort)}return h}o.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService:function createPrintService(t,r,i,a,o,u,c){if(l)throw new Error("The print service is created and active.");return l=new PDFPrintService(t,r,i,a,o,u,c)}}},(t,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0});r.getXfaHtmlForPrinting=function getXfaHtmlForPrinting(t,r){var i,l=r.allXfaHtml,c=new o.SimpleLinkService,d=Math.round(100*a.PixelsPerInch.PDF_TO_CSS_UNITS)/100,h=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();l=t.done;return t},e:function e(t){c=!0;u=t},f:function f(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}(l.children);try{for(h.s();!(i=h.n()).done;){var p=i.value,v=document.createElement("div");v.className="xfaPrintedPage";t.append(v);var y=new u.XfaLayerBuilder({pageDiv:v,pdfPage:null,annotationStorage:r.annotationStorage,linkService:c,xfaHtml:p}),g=(0,a.getXfaPageViewport)(p,{scale:d});y.render(g,"print")}}catch(t){h.e(t)}finally{h.f()}};var a=i(4),o=i(8),u=i(38);function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}}],r={};function __webpack_require__(i){var a=r[i];if(void 0!==a)return a.exports;var o=r[i]={exports:{}};t[i](o,o.exports,__webpack_require__);return o.exports}var i={};(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"PDFViewerApplication",{enumerable:!0,get:function get(){return u.PDFViewerApplication}});Object.defineProperty(t,"PDFViewerApplicationOptions",{enumerable:!0,get:function get(){return o.AppOptions}});var r,a,o=__webpack_require__(1),u=__webpack_require__(2);window.PDFViewerApplication=u.PDFViewerApplication;window.PDFViewerApplicationOptions=o.AppOptions;__webpack_require__(42);__webpack_require__(48);function webViewerLoad(){var t=function getViewerConfiguration(){var t;t={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")};return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),editorNoneButton:document.getElementById("editorNone"),editorFreeTextButton:document.getElementById("editorFreeText"),editorFreeTextParamsToolbar:document.getElementById("editorFreeTextParamsToolbar"),editorInkButton:document.getElementById("editorInk"),editorInkParamsToolbar:document.getElementById("editorInkParamsToolbar"),presentationModeButton:document.getElementById("fullscreenMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),sidebarContainer:document.getElementById("sidebarContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),matchDiacriticsCheckbox:document.getElementById("findMatchDiacritics"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{dialog:document.getElementById("documentPropertiesDialog"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},annotationEditorParams:{editorFreeTextFontSize:document.getElementById("editorFreeTextFontSize"),editorFreeTextColor:document.getElementById("editorFreeTextColor"),editorInkColor:document.getElementById("editorInkColor"),editorInkThickness:document.getElementById("editorInkThickness"),editorInkOpacity:document.getElementById("editorInkOpacity")},errorWrapper:t,printContainer:document.getElementById("printContainer"),openFileInput:document.getElementById("fileInput"),debuggerScriptPath:"./debugger.js"}}(),r=document.createEvent("CustomEvent");r.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(r)}catch(t){console.error("webviewerloaded: ".concat(t));document.dispatchEvent(r)}u.PDFViewerApplication.run(t)}null===(r=(a=document).blockUnblockOnload)||void 0===r||r.call(a,!0);"interactive"===document.readyState||"complete"===document.readyState?webViewerLoad():document.addEventListener("DOMContentLoaded",webViewerLoad,!0)})()})();